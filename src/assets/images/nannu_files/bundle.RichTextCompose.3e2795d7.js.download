(window.webpackJsonp=window.webpackJsonp||[]).push([[186,6,59,118,180],{"+/sI":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n=a("ERkP"),i=a.n(n),s=a("TGcR"),r=a("t62R"),o=a("a6qo"),l=a("rHpw");const c="animated_gif",d="video";class u extends i.a.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let a;if(t===c||"vine"===t)a=t===c?i.a.createElement(r.b,{weight:"bold"},"GIF"):i.a.createElement(s.a,{style:h.icon});else if(t===d&&e){const t=Math.trunc(e/6e4),n=`0${Math.trunc(e%6e4/1e3)}`.slice(-2);a=i.a.createElement(r.b,{color:"white"},`${t}:${n}`)}return a?i.a.createElement(o.a,{align:"left"},a):null}}const h=l.a.create((e=>({icon:{color:e.colors.white}})));t.c=u},"+7q0":function(e,t,a){var n=a("eN33"),i=a("Pz+s"),s=a("zWgn"),r=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;e.exports=r},"+fUG":function(e,t,a){var n=a("5pfJ"),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var a=t[e];return"__lodash_hash_undefined__"===a?void 0:a}return i.call(t,e)?t[e]:void 0}},"+ooz":function(e,t,a){var n=a("8Zrg"),i=a("kwr2"),s=a("5VYK"),r=a("Coc+"),o=a("LzM7");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=r,l.prototype.set=o,e.exports=l},"/Imo":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),r=a.n(s),o=a("/yvb"),l=a("k/Ka"),c=a("3XMw"),d=a.n(c),u=a("rHpw");const h=d.a.i5450bec,p=d.a.f7432494;class m extends r.a.Component{constructor(...e){super(...e),this._handlePress=e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()},this._handleChange=e=>{const{onChange:t}=this.props,a=e.target,n=a.files;n.length&&t&&t(n),a.value=""},this._handleFileInputButtonRef=e=>{this._fileInput=e}}render(){const{accept:e,disabled:t,multiple:a,onChange:n,testID:s,...c}=this.props,d=!(null!=e&&e.includes("video")||null!=e&&e.includes("gif"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,i()({hoverLabel:e?{label:d?p:h}:void 0},c,{disabled:t,onPress:this._handlePress})),Object(l.a)("input",{accept:e,disabled:t,multiple:a,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:g.input,tabIndex:-1,testID:s,type:"file"}))}}m.defaultProps={disabled:!1,multiple:!1};const g=u.a.create((e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}})));t.a=m},"/Rsk":function(e,t,a){"use strict";a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"h",(function(){return g})),a.d(t,"g",(function(){return b})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return C})),a.d(t,"i",(function(){return E}));var n=a("oEOe"),i=a("kGix");var s=a("M6MT"),r=a("Ssj5"),o=a("qlwE"),l=a("a/ea"),c=a("474o");const d="placePicker",u=Object.freeze({REQUEST:"rweb/placePicker/SEARCH_REQUEST",SUCCESS:"rweb/placePicker/SEARCH_SUCCESS",FAILURE:"rweb/placePicker/SEARCH_FAILURE"}),h=Object.freeze({initial:{fetchStatus:i.a.NONE},lastSearch:{fetchStatus:i.a.NONE},lastSelectedPlace:void 0});const p=e=>e.placePicker.initial.results,m=e=>e.placePicker.initial.fetchStatus,g=e=>e.placePicker.lastSearch.results,b=e=>e.placePicker.lastSearch.fetchStatus,f=e=>((e,t)=>null!=t?t:null==e?void 0:e.places.find((t=>(null==e?void 0:e.autotag_place_id)===t.place.id)))(p(e),(e=>e.placePicker.lastSelectedPlace)(e)),_=(e,t)=>(a,i,{api:s})=>Object(n.b)(a,{request:s.Places.search,params:e})({actionTypes:u,context:"SEARCH_PLACES_ACTION",meta:{resultSet:t}}),y=e=>(t,a,{api:n})=>{const i=Object(l.d)(a());return t(_({query_type:c.a.tweet_compose_location,lat:null==i?void 0:i.coords.latitude,long:null==i?void 0:i.coords.longitude,hacc:null==i?void 0:i.coords.accuracy,search_term:e},c.c.lastSearch))},v=()=>(e,t,{api:a})=>{const n=m(t()),s=p(t());if(n===i.a.LOADING||s)return Promise.resolve();const r=Object(l.d)(t());return r?e(_({lat:r.coords.latitude,long:r.coords.longitude,hacc:r.coords.accuracy,query_type:c.a.tweet_compose_location,count:50},c.c.initial)):Promise.resolve()},C=()=>(e,t,{api:a})=>Object(o.l)(t())&&Object(l.c)(t())===s.b.granted?e(Object(l.b)()).then((()=>e(v()))).then((()=>f(t()))):Promise.resolve(),w="rweb/placePicker/UPDATE_LAST_SELECTED_PLACE",E=e=>({type:w,payload:e});r.a.register({[d]:function(e=h,t){switch(t.type){case u.REQUEST:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:i.a.LOADING}}}case u.FAILURE:{const{resultSet:a}=t.meta;return{...e,[a]:{fetchStatus:i.a.FAILED}}}case u.SUCCESS:{const{meta:{resultSet:a},payload:n}=t;return{...e,[a]:{fetchStatus:i.a.LOADED,results:n}}}case w:{const{payload:a}=t;return{...e,lastSelectedPlace:null!=a?a:void 0}}default:return e}}})},"07FG":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("cnVF");const i=e=>e===n.B},"0uGn":function(e,t,a){"use strict";a.d(t,"a",(function(){return ye}));a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("xZGM"),r=a("3XMw"),o=a.n(r),l=a("pKoL"),c=a("Qwev"),d=a("rHpw"),u=a("U+bB"),h=a("MWbm");const p=o.a.gff1f69e;const m=d.a.create((e=>({activityIndicator:{height:"100%",width:"100%"},image:{width:"100%",flexGrow:1},mediaContainer:{overflow:"hidden",flexGrow:1,flexBasis:0,width:"100%"},mediaPreviewWrapper:{flexDirection:"column",flexGrow:1,alignItems:"center",width:"100%",paddingVertical:25,paddingHorizontal:25,backgroundColor:e.colors.gray0}})));var g=function({mediaItem:e,orientedImage:t}){return i.a.createElement(h.a,{style:m.mediaPreviewWrapper},void 0===t&&e?i.a.createElement(l.a,{imageResizeMode:"contain",mediaItem:e,style:m.mediaContainer,withCloseButton:!1}):t?i.a.createElement(u.a,{resizeMode:"contain",source:t.url,style:m.image}):i.a.createElement(c.a,{accessibilityLabel:p,style:m.activityIndicator}))};var b=d.a.create((e=>({formTextInput:{width:"100%",backgroundColor:e.colors.navigationBackground,paddingHorizontal:e.spaces.space12,paddingBottom:0,borderTopWidth:e.spaces.space1,borderTopStyle:"solid",borderTopColor:e.colors.borderColor},attachmentContainer:{width:"100%",height:"100%",flexGrow:1},root:{display:"flex",flexDirection:"column",flexWrap:"nowrap",height:"100%",flexGrow:1}}))),f="altTextInput",_="endEditingButton",y="altTextEducationSheetPrimaryAction",v=a("t62R"),C=a("p+r5");const w=o.a.feabf2a0,E=o.a.e36287c6,x=o.a.cf565d08;class T extends i.a.Component{constructor(...e){super(...e),this._renderInputHelperText=()=>{const{onShowEducation:e}=this.props;return e?i.a.createElement(v.b,{color:"link",onPress:e,withInteractiveStyling:!0},x):null},this._handleChange=e=>{const{currentMediaId:t,mediaItem:a,onChange:n}=this.props,{value:i}=e.target;a?n(i,a.id.toString()):t&&n(i,t)}}render(){const{autofocus:e,maxLength:t,mediaItem:a,orientedImage:n,value:s}=this.props;return i.a.createElement(h.a,{style:b.root},i.a.createElement(h.a,{style:b.attachmentContainer},i.a.createElement(g,{mediaItem:a,orientedImage:n}),i.a.createElement(C.a,{accessibilityLabel:w,autoFocus:e,helperText:this._renderInputHelperText(),label:E,maxLength:t,maxNumberOfLines:6,multiline:!0,name:"altTextInput",numberOfLines:2,onChange:this._handleChange,style:b.formTextInput,testID:f,value:s})))}}var S=a("rxPX");const I=(e,t)=>Object(s.E)(e,s.a);var R=Object(S.a)().propsFromState((()=>({showEducationOnMount:I}))).propsFromActions((()=>({addFlag:s.A}))).withAnalytics(),D=a("feu+");const M=o.a.ffe9ec3a,P=o.a.j063b262,k=o.a.e57144f0,A=o.a.f9f9210c;class O extends i.a.Component{constructor(...e){super(...e),this.state={showAltTextEducationSheet:!1},this._handleOpenEducationPrompt=()=>{const{analytics:e}=this.props;this.setState({showAltTextEducationSheet:!0}),e.scribe({component:"education",action:"click"})},this._handleCloseEducationPrompt=()=>{this.setState({showAltTextEducationSheet:!1})},this._handleEducationPromptPrimaryAction=()=>{const{analytics:e}=this.props;this._handleCloseEducationPrompt(),e.scribe({component:"education",element:"alt_text_button",action:"click"})},this._handleEducationPromptSecondaryAction=()=>{const{history:e}=this.props;e.goBack()}}componentDidMount(){const{addFlag:e,analytics:t,showEducationOnMount:a}=this.props;a&&(this.setState({showAltTextEducationSheet:!0}),t.scribe({component:"education",action:"open"}),e(s.a))}render(){const{mediaItem:e,onAltTextChange:t,orientedImage:a,value:n}=this.props,{showAltTextEducationSheet:s}=this.state,r=e&&e.id.toString();return i.a.createElement(h.a,{style:L.root},s?i.a.createElement(D.a,{actionLabel:k,headline:M,onAction:this._handleEducationPromptPrimaryAction,onClose:this._handleCloseEducationPrompt,onSecondaryAction:this._handleEducationPromptSecondaryAction,primaryButtonTestID:y,secondaryActionLabel:A,subtext:P}):null,i.a.createElement(T,{autofocus:!0,currentMediaId:r,maxLength:1e3,mediaItem:e,onChange:t,onShowEducation:this._handleOpenEducationPrompt,orientedImage:a,value:n}))}}const L=d.a.create((e=>({root:{flexGrow:1}})));var F=R(O),B=a("jHSc"),N=a("EeFI"),j=a("7JQg"),V=a("PbQQ"),z=a("6vad"),U=a("e0ey"),H=a("ZkMC");const W=o.a.j9cf5950,G=o.a.d69a782e,K=o.a.faf745fa,$=o.a.b96e6682,q=o.a.h2437f26;function X(e){const{currentWarnings:t,mediaItem:a,onWarningChange:n,orientedImage:s}=e,r=[{label:K,value:"adult_content"},{label:$,value:"graphic_violence"},{label:q,value:"other"}],o=V.b.useOpaqueIdentifier(),l=i.a.createElement(g,{mediaItem:a,orientedImage:s});return i.a.createElement(h.a,{style:Q.root},i.a.createElement(h.a,{style:Q.modalContainer},null!=t&&t.size?i.a.createElement(H.a,{revealableTombstoneConfig:H.c,sensitiveMediaWarnings:t,withRoundedCorners:!1},l):l,i.a.createElement(z.b,{nativeID:o,subtext:G,text:W}),i.a.createElement(h.a,{accessibilityLabelledBy:o,accessibilityRole:"group"},r.map((({label:e,value:a})=>i.a.createElement(U.a,{checked:t&&t.has(a),key:a,label:e,name:a,onChange:n}))))))}const Q=d.a.create((e=>({modalContainer:{width:"100%",height:"100%",flexGrow:1},root:{display:"flex",flexDirection:"column",flexWrap:"nowrap",height:"100%",flexGrow:1}})));var J=d.a.create((e=>({root:{flexGrow:1,flexShrink:1,paddingBottom:e.spaces.space12},rightControl:{display:"flex",flexDirection:"row"},prevButton:{marginEnd:e.spaces.space2},saveButton:{marginStart:e.spaces.space12},segmentedControlChildren:{flexGrow:1},leftRightButtons:{alignItems:"center"},videoTrimmerWrapper:{flexGrow:1,flexShrink:1,marginBottom:e.spaces.space20}}))),Y=a("k/OQ"),Z=a("/yvb"),ee=a("zTrU"),te=e=>{const t=new Map;return e.forEach((([e,a])=>{t.set(e,a)})),t},ae=a("mN6z"),ne=a("95Se"),ie=a("7Mjr"),se=a("Mbn/"),re=a("zIWA"),oe=a("1auM"),le=a("eYns");const ce={section:"alt_text"},de={section:"crop"},ue={section:"sensitive_media"},he=o.a.e070024a,pe=o.a.i2209530,me=o.a.i7d24b36,ge=o.a.f96a38a2,be=o.a.hac7c548,fe=o.a.e3dbfba4,_e=o.a.dd4a83a6,ye={crop:"crop",altText:"alt_text",sensitiveMedia:"sensitive_media"};class ve extends i.a.Component{constructor(e){super(e),this._cropper=i.a.createRef(),this._getMemoizedTabMetadata=Object(ee.a)(((e,t)=>t&&e===ye.sensitiveMedia?{namespace:ue,title:_e,renderer:this._renderSensitiveMediaTab}:e===ye.altText?{namespace:ce,title:fe,renderer:this._renderAltTextTab}:{namespace:de,title:be,renderer:this._renderCropTab})),this._renderTabContent=e=>{var t;const{location:a,sensitiveMediaTabEnabled:n}=this.props,s=this._getMemoizedTabMetadata(e,n),r=!(null!=(t=a.state)&&t.hideTabs),o=r?this._getTabLinks(e):[],l=s.renderer();return r&&o.length>1?i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a,{accessibilityLabel:he,links:o}),i.a.createElement(h.a,{style:J.segmentedControlChildren},l)):l},this._renderAltTextTab=()=>{const{history:e}=this.props,{currentMediaId:t,mediaMetadata:a,orientedImage:n}=this.state,s=this._getCurrentMediaItem(),r=a[t]&&a[t].altText;return i.a.createElement(F,{history:e,key:t,mediaItem:s,onAltTextChange:this._handleAltTextChange,orientedImage:n.get(t),value:r})},this._renderCropTab=()=>{const{cropData:e,currentMediaId:t}=this.state,a=this._getCurrentMediaItem();return i.a.createElement(N.a,{defaultCropData:e.get(t),key:t,media:a,ref:this._cropper,withAspectRatioOptions:!0})},this._renderSensitiveMediaTab=()=>{const{currentMediaId:e,mediaMetadata:t,orientedImage:a}=this.state,n=this._getCurrentMediaItem(),s=t[e]&&t[e].sensitiveMediaWarning;return i.a.createElement(X,{currentWarnings:s,key:e,mediaItem:n,onWarningChange:this._handleSensitiveWarningChange,orientedImage:a.get(e)})},this._renderAppBarRightControl=()=>{const{isProcessing:e}=this.state,t=this._getNextMediaIndex(1),a=this._getNextMediaIndex(-1);return i.a.createElement(h.a,{style:J.rightControl},this._hasMediaAtIndex(a)||this._hasMediaAtIndex(t)?i.a.createElement(h.a,{style:[J.rightControl,J.leftRightButtons]},i.a.createElement(Z.a,{accessibilityLabel:ge,disabled:!this._hasMediaAtIndex(a),icon:i.a.createElement(ne.a,null),onPress:this._handleClickToMediaAtIndex(a),size:"small",style:J.prevButton,type:"primaryOutlined"}),i.a.createElement(Z.a,{accessibilityLabel:me,disabled:!this._hasMediaAtIndex(t),icon:i.a.createElement(ie.a,null),onPress:this._handleClickToMediaAtIndex(t),size:"small",type:"primaryOutlined"})):null,i.a.createElement(Z.a,{disabled:e,onPress:this._handleEndEditingClick,size:"small",style:J.saveButton,testID:_,type:"primaryFilled"},pe))},this._handleCancelEditingClick=e=>{this._scribeWithNamespace({action:"cancel"}),e()},this._handleClickTab=e=>{const{analytics:t}=this.props;this._handleSaveCropData(),this._scribeWithNamespace({element:e,action:"click"}),t.scribePageImpression()},this._getCurrentMediaItem=()=>{const{media:e}=this.props,{currentMediaId:t}=this.state;return e.find((e=>e.id===t))},this._getNextMediaIndex=e=>{const{media:t}=this.props,a=this._getCurrentMediaItem();return t.indexOf(a)+e},this._hasMediaAtIndex=e=>{const{media:t}=this.props;return e>=0&&e<t.length},this._handleClickToMediaAtIndex=e=>()=>{const{media:t}=this.props;if(this._hasMediaAtIndex(e)){this._handleSaveCropData();const a=t[e].id;this.setState({currentMediaId:a})}},this._saveMediaMetadata=()=>{const{media:e,setMediaMetadata:t}=this.props,{mediaMetadata:a}=this.state;e.forEach((e=>{t(e.id,a[e.id])}))},this._handleEndEditingClick=()=>{const{history:e}=this.props,t=this._cropper&&this._cropper.current,{cropData:a}=this.state;if(t||a.size){const{media:e,processMedia:n,updateMediaUpload:i}=this.props,{currentMediaId:s}=this.state;this.setState({isProcessing:!0});const r=t?te([...a,[s,t.getCropData()]]):a,o=e.map((e=>r.get(e.id)?(i({id:e.id,cropData:r.get(e.id)}),n(e.id)):Promise.resolve()));Promise.all(o).then((()=>{this._scribeWithNamespace({action:"done"})}))}this._saveMediaMetadata(),e.goBack()},this._handleAltTextChange=e=>{this.setState((t=>({mediaMetadata:{...t.mediaMetadata,[t.currentMediaId]:{...t.mediaMetadata[t.currentMediaId],altText:e}}})))},this._handleSensitiveWarningChange=(e,t)=>{this.setState((a=>{const n=a.mediaMetadata[a.currentMediaId]&&a.mediaMetadata[a.currentMediaId].sensitiveMediaWarning||new Set;return t?n.add(e):n.delete(e),{mediaMetadata:{...a.mediaMetadata,[a.currentMediaId]:{...a.mediaMetadata[a.currentMediaId],sensitiveMediaWarning:n}}}}))},this._handleSaveCropData=()=>{const e=this._cropper&&this._cropper.current;if(e){const{currentMediaId:t}=this.state,a=e.getCropData(),n=this._getCurrentMediaItem();if(n&&!Object(ae.a)(a,this.state.cropData.get(t))&&(this.setState((e=>({orientedImage:te([...e.orientedImage,[t,null]])}))),n.originalMediaFile&&n.originalMediaFile instanceof oe.a)){const{cropData:e}=n;Object(le.b)(n.originalMediaFile,{cropData:a||e}).then((e=>new oe.a(e).withDimensionsAndOrientation().then((e=>{this.setState((n=>({orientedImage:te([...n.orientedImage,[t,e]]),cropData:te([...n.cropData,[t,a]])})))})))).catch((()=>{this.setState((e=>({orientedImage:te([...e.orientedImage,[t,void 0]])})))}))}this.setState((e=>({cropData:te([...e.cropData,[t,a]])})))}},this._scribeWithNamespace=e=>{const{analytics:t,sensitiveMediaTabEnabled:a}=this.props,n=this._getCurrentTab(),i=this._getMemoizedTabMetadata(n,a);t.scribe({...i.namespace,...e})},this._getMediaMetadata=e=>{const t={};return e.forEach((e=>t[e.id]=e.mediaMetadata)),t};const{initialMediaId:t,media:a}=e,n=this._getMediaMetadata(a);this.state={cropData:new Map,isProcessing:!1,mediaMetadata:n,currentMediaId:t||-1,orientedImage:new Map}}render(){const{history:e,sensitiveMediaTabEnabled:t}=this.props,a=this._getCurrentTab(),n=this._getMemoizedTabMetadata(a,t);return i.a.createElement(j.c,{namespace:n.namespace},i.a.createElement(B.b,{backButtonType:"back",containerStyle:J.root,documentTitle:n.title,history:e,onBackClick:this._handleCancelEditingClick,rightControl:this._renderAppBarRightControl(),title:n.title},this._renderTabContent(a)))}_getCurrentTab(){var e;const{location:t,sensitiveMediaTabEnabled:a}=this.props,n=null==(e=t.state)?void 0:e.tab;return a&&n===ye.sensitiveMedia?ye.sensitiveMedia:n===ye.altText?ye.altText:ye.crop}_getTabLinks(e){var t;const{analytics:a,location:n,sensitiveMediaTabEnabled:s}=this.props,r=this._getCurrentMediaItem(),o=[];return null!=r&&null!=(t=r.originalMediaFile)&&t.isImage&&o.push({to:{...n,state:{...n.state,tab:ye.crop}},label:i.a.createElement(se.a,null),key:ye.crop,accessibilityLabel:be,isActive:()=>e===ye.crop,onClick:()=>a.scribePageImpression()}),o.push({to:{...n,state:{...n.state,tab:ye.altText}},label:i.a.createElement(v.b,{weight:"bold"},"ALT"),key:ye.altText,accessibilityLabel:fe,isActive:()=>e===ye.altText,onClick:()=>this._handleClickTab("alt_text_button")}),s&&o.push({to:{...n,state:{...n.state,tab:ye.sensitiveMedia}},label:i.a.createElement(re.a,null),key:ye.sensitiveMedia,accessibilityLabel:_e,isActive:()=>e===ye.sensitiveMedia,onClick:()=>this._handleClickTab("sensitive_media_tab")}),o}}t.b=ve},"1sLo":function(e,t,a){var n=a("JBn+"),i=a("OfKG"),s=a("sCL+"),r=a("H87J"),o=a("SU8Q"),l=a("S0iI"),c=Math.min;e.exports=function(e,t,a){for(var d=a?s:i,u=e[0].length,h=e.length,p=h,m=Array(h),g=1/0,b=[];p--;){var f=e[p];p&&t&&(f=r(f,o(t))),g=c(f.length,g),m[p]=!a&&(t||u>=120&&f.length>=120)?new n(p&&f):void 0}f=e[0];var _=-1,y=m[0];e:for(;++_<u&&b.length<g;){var v=f[_],C=t?t(v):v;if(v=a||0!==v?v:0,!(y?l(y,C):d(b,C,a))){for(p=h;--p;){var w=m[p];if(!(w?l(w,C):d(e[p],C,a)))continue e}y&&y.push(C),b.push(v)}}return b}},"21U8":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("/yvb"),r=a("3XMw"),o=a.n(r),l=a("3rX5"),c=a("rHpw"),d=a("MWbm");const u=c.a.create((e=>({mask:{backgroundColor:"transparent",borderWidth:e.spaces.space4,borderColor:e.colors.primary,boxShadow:`0 0 0 9999px ${e.colors.activeFaintGray}`},circle:{borderRadius:e.borderRadii.infinite}})));var h=({circle:e,height:t,width:a})=>i.a.createElement(d.a,{pointerEvents:"none",style:[u.mask,{width:a,height:t},e&&u.circle]}),p=a("ZvMt"),m=a("97Jx"),g=a.n(m),b=a("CHgo"),f=a("7ep7");class _ extends i.a.Component{constructor(e){super(e),this._previousTouchDistance=0,this._previousPositionX=0,this._previousPositionY=0,this._centerPosition={x:0,y:0},this._panResponder={},this._setRef=e=>{const{onPanEnd:t,onPanMove:a,onPinchMove:n,onWheel:i}=this.props;if(e){(a||t||n)&&(this._removeTouchMoveToScrollListener=Object(b.a)(e,this._preventDefaultEvent,!1)),i&&(this._removeScrollToScaleListener=Object(b.b)(e,this._preventDefaultEvent,!1));const s=e.getBoundingClientRect();this._centerPosition={x:s.width/2+s.left,y:s.height/2+s.top}}},this._preventDefaultEvent=e=>{e.preventDefault()},this._handlePanResponderMove=(e,t)=>{const{onPanMove:a,onPinchMove:n}=this.props,i=e.nativeEvent.touches;if(2===t.numberActiveTouches){if(n){const e=(s=i[0],r=i[1],Math.sqrt(Math.pow(s.pageY-r.pageY,2)+Math.pow(s.pageX-r.pageX,2))),{pageX:t,pageY:a}=((e,t)=>({pageX:Math.min(t.pageX,e.pageX)+Math.abs(t.pageX-e.pageX)/2,pageY:Math.min(t.pageY,e.pageY)+Math.abs(t.pageY-e.pageY)/2}))(i[0],i[1]),o=this._previousPositionX?t-this._previousPositionX:0,l=this._previousPositionY?a-this._previousPositionY:0,c=this._previousTouchDistance?e-this._previousTouchDistance:0;this._previousPositionX=t,this._previousPositionY=a,this._previousTouchDistance=e;const{x:d,y:u}=this._centerPosition;n(c,d-t,u-a,o,l)}}else a&&a(t.dx,t.dy);var s,r;document.addEventListener("selectstart",this._preventDefaultEvent,!1)},this._handlePanResponderEnd=(e,t)=>{this.props.onPanEnd&&this.props.onPanEnd(t.dx,t.dy),this.props.onPinchMove&&(this._previousTouchDistance=0),this._previousPositionX=0,this._previousPositionY=0,this._removeSelectStartListener()},this._handleWheel=e=>{const{clientX:t,clientY:a,deltaX:n,deltaY:i}=e,{x:s,y:r}=this._centerPosition,o=s-t,l=r-a;this.props.onWheel&&this.props.onWheel(n,i,o,l)},this._panResponder=f.a.create({onStartShouldSetPanResponder:()=>!0,onMoveShouldSetPanResponder:()=>!0,onPanResponderMove:this._handlePanResponderMove,onPanResponderRelease:this._handlePanResponderEnd,onPanResponderTerminate:this._handlePanResponderEnd}),this._removeSelectStartListener=()=>document.removeEventListener("selectstart",this._preventDefaultEvent,!1)}render(){const{children:e,onPanEnd:t,onPanMove:a,onPinchMove:n,onWheel:s,...r}=this.props;return i.a.createElement(d.a,g()({},r,{onWheel:this._handleWheel,ref:this._setRef},this._panResponder.panHandlers),this.props.children)}componentWillUnmount(){this._removeTouchMoveToScrollListener&&this._removeTouchMoveToScrollListener(),this._removeScrollToScaleListener&&this._removeScrollToScaleListener(),this._removeSelectStartListener()}}var y=_,v=a("9RkS"),C=a("rOXj"),w=a("aITJ"),E=a("Lsrn"),x=a("k/Ka");const T=(e={})=>Object(x.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 19.944H4.25c-1.24 0-2.25-1.01-2.25-2.25V6.306c0-1.24 1.01-2.25 2.25-2.25h15.5c1.24 0 2.25 1.01 2.25 2.25v11.39c0 1.24-1.01 2.248-2.25 2.248zM4.25 5.556c-.413 0-.75.337-.75.75v11.39c0 .412.337.75.75.75h15.5c.413 0 .75-.338.75-.75V6.305c0-.413-.337-.75-.75-.75H4.25z"})));T.metadata={width:24,height:24};var S=T;const I=(e={})=>Object(x.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 19.89H4.25C3.01 19.89 2 18.88 2 17.64v-7.28c0-1.24 1.01-2.25 2.25-2.25h15.5c1.24 0 2.25 1.01 2.25 2.25v7.277c0 1.24-1.01 2.25-2.25 2.25zM4.25 9.61c-.413 0-.75.338-.75.75v7.278c0 .413.337.75.75.75h15.5c.413 0 .75-.337.75-.75V10.36c0-.412-.337-.75-.75-.75H4.25z"})));I.metadata={width:24,height:24};var R=I;const D=(e={})=>Object(x.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19.75 22H4.25C3.01 22 2 20.99 2 19.75V4.25C2 3.01 3.01 2 4.25 2h15.5C20.99 2 22 3.01 22 4.25v15.5c0 1.24-1.01 2.25-2.25 2.25zM4.25 3.5c-.413 0-.75.337-.75.75v15.5c0 .413.337.75.75.75h15.5c.413 0 .75-.337.75-.75V4.25c0-.413-.337-.75-.75-.75H4.25z"})));D.metadata={width:24,height:24};var M=D;const P=(e={})=>Object(x.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"}),i.a.createElement("path",{d:"M15.21 11c0 .41-.34.75-.75.75h-2.71v2.71c0 .41-.34.75-.75.75s-.75-.34-.75-.75v-2.71H7.54c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h2.71V7.54c0-.41.34-.75.75-.75s.75.34.75.75v2.71h2.71c.41 0 .75.34.75.75z"})));P.metadata={width:24,height:24};var k=P;const A=(e={})=>Object(x.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[E.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"}),i.a.createElement("path",{d:"M14.46 11.75H7.54c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h6.92c.415 0 .75.336.75.75s-.335.75-.75.75z"})));A.metadata={width:24,height:24};var O=A;const L=o.a.d85bc1b8,F=o.a.f596ace8,B=o.a.df031fca,N=o.a.b40332c6,j=o.a.e547b368,V=o.a.f7571204,z=o.a.e6e16812,U=Math.log2||function(e){return Math.log(e)*Math.LOG2E};class H extends i.a.Component{constructor(e){var t;super(e),this._previousLeft=0,this._previousTop=0,this._panStyles={top:0,left:0},this._shouldShowZoomControl=()=>(!w.b.isMobileOS()||!C.a.isTouchSupported())&&this.props.withZoomControl,this._renderControls=()=>{const{image:e,withAspectRatioOptions:t}=this.props,{aspectRatio:a}=this.state,n=e.width/e.height,r=this._shouldShowZoomControl();return t||r?i.a.createElement(d.a,{style:W.controlsContainer},t?i.a.createElement(d.a,{style:W.ratioContainer},i.a.createElement(s.a,{accessibilityLabel:F,borderColor:"transparent",color:a===n?"primary":"gray700",hoverLabel:{label:j},icon:i.a.createElement(S,null),onPress:this._setAspectRatio(n),size:"medium"}),i.a.createElement(s.a,{accessibilityLabel:B,borderColor:"transparent",color:a===16/9?"primary":"gray700",hoverLabel:{label:V},icon:i.a.createElement(R,null),onPress:this._setAspectRatio(16/9),size:"medium"}),i.a.createElement(s.a,{accessibilityLabel:N,borderColor:"transparent",color:1===a?"primary":"gray700",hoverLabel:{label:z},icon:i.a.createElement(M,null),onPress:this._setAspectRatio(1),size:"medium"})):null,r?i.a.createElement(d.a,{style:W.zoomContainer},i.a.createElement(v.a,{accessibilityLabel:L,max:this._maxScale,maxIcon:i.a.createElement(k,{style:W.icon}),min:0,minIcon:i.a.createElement(O,{style:W.icon}),onChange:this._handleScaleChange,step:"any",value:this.state.imageScale})):null):null},this._setImageRef=e=>{this._imageRef=e},this._handleScaleChange=e=>{this.setState({imageScale:e})},this._getImageDimensions=()=>{const{imageScale:e}=this.state,t=this.props.image.width/this.props.image.height,{height:a,width:n}=this._getMaskDimensions(),{height:i,width:s}=p.a.getCoverDimensions({width:n,height:a},t);return{width:s*Math.pow(2,e),height:i*Math.pow(2,e)}},this._getMaskDimensions=()=>{const{aspectRatio:e,containerHeight:t,containerWidth:a}=this.state,{height:n,width:i}=p.a.getContainDimensions({width:a-50,height:t-50},e);return{width:i,height:n}},this._handleLayout=e=>{const{height:t,width:a}=e.nativeEvent.layout;this.state.containerHeight||this.state.containerWidth?this.setState({containerHeight:t,containerWidth:a}):(this.setState({containerHeight:t,containerWidth:a}),this._setDefaultCropData())},this._setDefaultCropData=()=>{const{defaultCropData:e,image:t}=this.props;if(!e)return;const{width:a}=this._getImageDimensions(),{width:n}=this._getMaskDimensions(),i=a/t.width,s=U(n/(e.width*i));this.setState({imageScale:s});const{left:r,top:o}=this._getUnscaledCropData();this._panStyles.top=o-e.top*i*Math.pow(2,s),this._previousTop=this._panStyles.top,this._panStyles.left=r-e.left*i*Math.pow(2,s),this._previousLeft=this._panStyles.left,this._updateNativeStyles()},this._handleWheel=(e,t,a,n)=>{const i=-1*t/500;this.setState((({imageScale:e})=>{const t=Math.min(this._maxScale,Math.max(e+i,0));return this._panStyles.left+=a*(t-e),this._panStyles.top+=n*(t-e),this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top,{imageScale:t}}))},this._handlePanMove=(e,t)=>{this._panStyles.left=this._previousLeft+e,this._panStyles.top=this._previousTop+t,this._updateNativeStyles(),this._adjustToInBounds()},this._handlePanEnd=(e,t)=>{this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top},this._handlePinchMove=(e,t,a,n,i)=>{const s=e/200;this.setState((({imageScale:e})=>{const r=Math.min(this._maxScale,Math.max(e+s,0));return this._panStyles.left+=t*(r-e)+n,this._panStyles.top+=a*(r-e)+i,this._previousLeft=this._panStyles.left,this._previousTop=this._panStyles.top,{imageScale:r}}))},this._adjustToInBounds=()=>{const e=this._getUnscaledCropData(),t=this._getImageDimensions(),a=e.left,n=e.top,i=e.left+e.width-t.width,s=e.top+e.height-t.height;let r=!1;a<0&&(r=!0,this._panStyles.left+=a,this._previousLeft+=a),n<0&&(r=!0,this._panStyles.top+=n,this._previousTop+=n),i>0&&(r=!0,this._panStyles.left+=i,this._previousLeft+=i),s>0&&(r=!0,this._panStyles.top+=s,this._previousTop+=s),r&&this._updateNativeStyles()},this._updateNativeStyles=()=>{const{left:e,top:t}=this._panStyles;this._imageRef&&this._imageRef.setNativeProps({style:{transform:[{translate3d:`${e}px, ${t}px, 0`}]}})},this._getUnscaledCropData=()=>{const{height:e,width:t}=this._getImageDimensions(),{height:a,width:n}=this._getMaskDimensions(),{left:i,top:s}=this._panStyles;return{top:(e-a)/2-s,left:(t-n)/2-i,width:n,height:a}},this._setAspectRatio=e=>()=>{this.setState({aspectRatio:e})},this.state={aspectRatio:e.defaultAspectRatio||e.image.width/e.image.height,imageScale:0,containerHeight:0,containerWidth:0},this._maxScale=(t=e.image,Math.max(Math.min(U(t.width/150),U(t.height/150),3),.5))}render(){const{circle:e,image:t,withZoomControl:a}=this.props,{height:n,width:s}=this._getImageDimensions(),{height:r,width:o}=this._getMaskDimensions(),c=this.state.containerWidth&&this.state.containerHeight;return i.a.createElement(d.a,{style:W.container},i.a.createElement(y,{onLayout:this._handleLayout,onPanEnd:this._handlePanEnd,onPanMove:this._handlePanMove,onPinchMove:a?this._handlePinchMove:void 0,onWheel:a?this._handleWheel:void 0,style:W.root},c?i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{ref:this._setImageRef,source:{uri:t.src,width:s,height:n},style:W.image}),i.a.createElement(h,{circle:e,height:r,width:o})):null),c?this._renderControls():null)}componentDidUpdate(e,t){this._updateNativeStyles(),this._adjustToInBounds()}getCropData(){const{width:e}=this._getImageDimensions(),t=this.props.image.width/e,a=this._getUnscaledCropData();return{aspectRatio:this.state.aspectRatio,top:Math.round(t*a.top),left:Math.round(t*a.left),width:Math.round(t*a.width),height:Math.round(t*a.height)}}}H.defaultProps={circle:!1,withZoomControl:!0};const W=c.a.create((e=>({container:{flexGrow:1,flexShrink:1},controlsContainer:{backgroundColor:e.colors.navigationBackground,minHeight:e.spaces.space20,flexDirection:"row",paddingVertical:e.spaces.space4,alignSelf:"stretch",justifyContent:"center",alignItems:"center"},ratioContainer:{flexBasis:0,flexGrow:1,flexShrink:0,flexDirection:"row",justifyContent:"space-around"},zoomContainer:{flexBasis:0,flexGrow:1,flexShrink:1,justifyContent:"center",height:e.spaces.space40,paddingHorizontal:e.spaces.space20,maxWidth:400},root:{flexGrow:1,flexShrink:1,overflow:"hidden",justifyContent:"center",alignItems:"center",cursor:"move"},image:{position:"absolute"},icon:{color:e.colors.gray700}})));t.a=H},"2Fbm":function(e,t,a){var n=a("5pfJ");e.exports=function(){this.__data__=n?n(null):{},this.size=0}},"2WeA":function(e,t,a){"use strict";a.r(t);a("ERkP");var n=a("pcjM"),i=a("ORQL");t.default=Object(i.a)(n.default)},"2q8g":function(e,t,a){var n=a("Dhk8"),i=a("tQYX");e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"3KBa":function(e,t,a){var n=a("IBsm")["__core-js_shared__"];e.exports=n},"45mF":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("1YZw"),i=a("pXBW"),s=a("3XMw"),r=a.n(s),o=a("SrIh");const l=r.a.a5d4fda0,c=(e=l,t=!0)=>({customErrorHandler:a=>{const{context:s}=a;return!a instanceof i.a&&(a.message=`Strato error occurred in ${s.id}: ${s.action}`),Object(o.a)(a,{extra:{context:s,isStrato:!0}}),t?Object(n.b)({text:e}):[]}})},"474o":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));const n=Object.freeze({profile_location:"profile_location",tweet_compose_location:"tweet_compose_location"}),i=Object.freeze({foursquare:"foursquare",yelp:"yelp"}),s=Object.freeze({initial:"initial",lastSearch:"lastSearch"})},"4bHO":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>{switch(e.type){case"user":return"users"===t?`@${e.data.screen_name} `:`@${e.data.name} `;case"hashtag":case"topic":case"event":return`${e.data.topic} `;case"dm_conversation":return`${e.data.name} `;case"no_result":return`${e.data.text} `;default:return""}}},"4p/L":function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},"5VYK":function(e,t,a){var n=a("6QIk");e.exports=function(e){var t=this.__data__,a=n(t,e);return a<0?void 0:t[a][1]}},"5emT":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("Lsrn"),r=a("k/Ka");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M14.548 11.634c-1.207 0-2.188-.98-2.188-2.188 0-.664.302-1.25.77-1.653-.363-.097-.736-.165-1.13-.165-2.416 0-4.375 1.96-4.375 4.376S9.585 16.38 12 16.38c2.418 0 4.377-1.96 4.377-4.376 0-.4-.07-.78-.17-1.146-.402.47-.992.776-1.66.776z"}),i.a.createElement("path",{d:"M12 19.79c-7.228 0-10.12-6.724-10.24-7.01-.254-.466-.254-1.105.035-1.642C1.88 10.923 4.772 4.2 12 4.2s10.12 6.723 10.24 7.01c.254.465.254 1.104-.035 1.64-.085.216-2.977 6.94-10.205 6.94zm0-14c-6.154 0-8.668 5.787-8.772 6.033-.068.135-.068.208-.033.273.137.316 2.65 6.104 8.805 6.104 6.18 0 8.747-5.973 8.772-6.033.07-.136.07-.21.034-.274-.138-.316-2.652-6.103-8.806-6.103z"})));o.metadata={width:24,height:24},t.a=o},"5nKN":function(e,t,a){var n=a("2q8g"),i=a("9vbJ"),s=a("tQYX"),r=a("c18h"),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(n(e)?h:o).test(r(e))}},"5pfJ":function(e,t,a){var n=a("vxC8")(Object,"create");e.exports=n},"6QIk":function(e,t,a){var n=a("pPzx");e.exports=function(e,t){for(var a=e.length;a--;)if(n(e[a][0],t))return a;return-1}},"6UKJ":function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"6XNv":function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("t62R"),r=a("piX5"),o=a("4r2z"),l=a("FG+G"),c=a("rHpw"),d=a("k/Ka"),u=a("shC7"),h=a("MWbm");const p=i.a.forwardRef(((e,t)=>Object(d.a)("select",{...e,ref:t}))),m=e=>Object(d.a)("option",e);let g=1;class b extends i.a.PureComponent{constructor(e){super(e),this._selectRef=i.a.createRef(),this.state={isFocused:!1},this._handleChange=e=>{const{onChange:t,withEmptyOption:a}=this.props,{selectedIndex:n,value:i}=e.target;t&&t(i,n-(a?1:0))},this._handleBlur=e=>{const{onBlur:t}=this.props;this.setState({isFocused:!1}),t&&t()},this._handleFocus=e=>{const{onFocus:t}=this.props;this.setState({isFocused:!0}),t&&t()},this._id=`SELECTOR_${g}`,this._errorID=`${this._id}_ERROR`,this._helperID=`${this._id}_HELP`,this._labelID=`${this._id}_LABEL`,g+=1}componentDidMount(){this.props.autofocus&&this._selectRef&&this._selectRef.current&&this._selectRef.current.focus()}render(){const{accessibilityDescribedBy:e,disabled:t,errorText:a,hasError:n,helperText:d,options:g,style:b,testID:_,value:y,withEmptyOption:v}=this.props,{isFocused:C}=this.state,w=s.b.getLanguage(),E="ja"===w?c.a.theme.fontFamilies.japan:u.a.getConstants().isRTL||o.a.isLocaleRTL(w)?c.a.theme.fontFamilies.rtl:c.a.theme.fontFamilies.normal,x=void 0===n?!!a:n,T=new Set;a&&T.add(this._errorID),e&&T.add(e),d&&T.add(this._helperID);const S=T.size?[...T].join(" "):void 0;return i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{style:[r.a.border,f.container,t&&r.a.disabled,C&&r.a.focusedBorderValid,x&&r.a.invalidBorderColor,C&&x&&r.a.focusedBorderInvalid,b]},this._renderLabel(),i.a.createElement(p,{accessibilityDescribedBy:S,accessibilityInvalid:x,accessibilityLabelledBy:this._labelID,disabled:t,nativeID:this._id,onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,ref:this._selectRef,style:[f.select,{fontFamily:E},t&&r.a.disabled],testID:_||"",value:y},v?i.a.createElement(m,{disabled:!0,style:f.option,value:""}):null,g.map((e=>{const{disabled:t,label:a,value:n}=e;return i.a.createElement(m,{disabled:t,key:`${a}-${n}`,style:f.option,value:n},a)}))),i.a.createElement(l.a,{style:[f.dropdownCaret,C&&r.a.validColor,(n||a)&&r.a.invalidColor]})),d?this._renderHelperText():null,x&&a?this._renderErrorText():null)}_renderLabel(){const{errorText:e,hasError:t,label:a}=this.props,{isFocused:n}=this.state;return i.a.createElement(s.b,{accessibilityRole:"label",color:t||e?"red500":n?"primary":"gray700",nativeID:this._labelID,style:f.label},a)}_renderHelperText(){return i.a.createElement(h.a,{accessibilityLiveRegion:"polite"},i.a.createElement(s.b,{color:"gray700",nativeID:this._helperID,style:f.helperText},this.props.helperText))}_renderErrorText(){return i.a.createElement(h.a,{accessibilityLiveRegion:"polite"},i.a.createElement(s.b,{color:"red500",nativeID:this._errorID,style:f.helperText},this.props.errorText))}}b.defaultProps={disabled:!1,autofocus:!1,withEmptyOption:!1},b.propTypes={};const f=c.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},dropdownCaret:{color:e.colors.gray700,height:"1.5em",pointerEvents:"none",position:"absolute",marginTop:"-0.75em",top:"50%",right:e.spaces.space12},label:{position:"absolute",fontSize:e.fontSizes.subtext2,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space8,pointerEvents:"none",lineHeight:e.lineHeights.subtext2},option:{backgroundColor:e.colors.navigationBackground},select:{appearance:"none",backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,color:e.colors.text,cursor:"pointer",fontSize:e.fontSizes.headline2,lineHeight:e.lineHeights.headline2,margin:0,marginTop:e.spaces.space16,outlineStyle:"none",padding:0,paddingTop:e.spaces.space12,paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8},helperText:{fontSize:e.fontSizes.subtext2,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space2}})));t.a=b},"6vad":function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("ERkP"),i=a.n(n),s=a("t62R"),r=a("EHV7"),o=a("rHpw");const l=o.a.create((e=>({icon:{color:e.colors.primary,height:e.fontSizes.title4,paddingRight:e.spaces.space12,width:e.fontSizes.title4}})));var c=a("7Mjr"),d=a("I4+6"),u=a("cm6r"),h=a("MWbm");const p=Object.freeze({TopicFilled:"TOPIC_FILLED"});const m=o.a.create((e=>({root:{justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},mainContent:{flexDirection:"row"},subtext:{alignSelf:"flex-start"},withSubtext:{alignSelf:"center"},icon:{alignSelf:"flex-start",height:e.spaces.space20,justifyContent:"center"},iconArrow:{color:e.colors.text},rightControlGroup:{flexDirection:"row",justifyContent:"flex-end",flexGrow:1,alignSelf:"center"}})));t.b=function({icon:e,landingUrl:t,nativeID:a,rightControl:n,style:g,subtext:b,testID:f,text:_}){const y=(e=>{switch(e){case p.TopicFilled:return i.a.createElement(r.a,{style:l.icon});default:return null}})(e),v=b?null:m.withSubtext,C=d.a.generate({backgroundColor:o.a.theme.colors.gray0,color:o.a.theme.colors.cellBackground,customFocusBackgroundColor:o.a.theme.colors.gray0,customHoverBackgroundColor:o.a.theme.colors.gray0,customPressedBackgroundColor:o.a.theme.colors.gray0});return i.a.createElement(u.a,{interactiveStyles:t?C:null,link:null==t?void 0:t.url,nativeID:a,style:[m.root,g],testID:f},i.a.createElement(h.a,{accessibilityLevel:2,accessibilityRole:"heading",style:m.mainContent},i.a.createElement(h.a,{style:m.icon},y),i.a.createElement(s.b,{numberOfLines:3,size:"headline1",style:v,weight:"heavy",withHashflags:!0},_),i.a.createElement(h.a,{style:m.rightControlGroup},t?i.a.createElement(h.a,{style:v},i.a.createElement(c.a,{style:m.iconArrow})):null,n?i.a.createElement(h.a,null,n):null)),b?i.a.createElement(s.b,{color:"gray700",numberOfLines:2,size:"subtext2",style:m.subtext,withHashflags:!0},b):null)}},"7Pat":function(e,t,a){var n=a("+7q0"),i=a("kG2z")(n);e.exports=i},"7myi":function(e,t,a){"use strict";a("kYxP"),a("849X");var n=a("ERkP"),i=a.n(n),s=a("oEoC"),r=a("2dXj"),o=a("4bHO"),l=a("dzqK"),c=a("GZwR");class d extends i.a.Component{constructor(...e){super(...e),this._genericWrapperRef=i.a.createRef(),this.state={queryContext:void 0,canShowTypeahead:!1},this.render=()=>{const{children:e,contextText:t,isInline:a,isInlineReply:n,onTypeaheadStateChange:s,source:o}=this.props,{canShowTypeahead:l,queryContext:d}=this.state,u=l&&d?{word:d.word,resultType:d.resultType}:void 0;return i.a.createElement(r.a,{contextText:t,isInline:a,isInlineReply:n,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:s,query:u,ref:this._genericWrapperRef,source:o||c.d.Compose},e(this._handleInputChange))},this._handleSelectItem=e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const n=Object(o.a)(e,a.resultType),{newCursor:i,newTweetText:s}=this._replaceToken(n,a);t({target:{value:s}}),this._updateDOMTextArea(i,s)}this._setQueryContext(void 0)},this._updateDOMTextArea=(e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())},this._handleInputChange=e=>{if(Object(l.a)(e))throw new Error("PlainTextTypeaheadComposeWrapper cannot handle rich text input changes");const t=e&&(e.currentTarget||e.target),{queryContext:a}=this.state;this._textAreaRef=t;const n=a&&a.word,i=t.value,{end:r,start:o,word:c}=s.c(t.selectionStart,i),d=s.e(c||"","compose");if((null==d?void 0:d.q)!==n)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===o)this._setQueryContext(void 0);else if(d){const{q:e,result_type:a}=d;this._setQueryContext({word:e,resultType:a,fullText:t.value,startIndex:o,endIndex:r})}else this._setQueryContext(void 0)},this._setQueryContext=e=>this.setState({queryContext:e,canShowTypeahead:!!e}),this._handleDismiss=()=>this.setState({canShowTypeahead:!1})}_replaceToken(e,t){const{endIndex:a,fullText:n,startIndex:i}=t,s=n.slice(0,i);return{newTweetText:s+e+n.slice(a),newCursor:s.length+e.length}}}t.a=d},"8Zrg":function(e,t){e.exports=function(){this.__data__=[],this.size=0}},"9Jxp":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),r=a.n(s),o=a("CXUS"),l=a("rHpw"),c=a("MWbm");const d=l.a.create((()=>({hidden:{opacity:0}})));t.a=e=>{const{children:t,disableInteractiveElementBlocking:a,draggableId:n,fromVirtualList:s,index:l,isBeingDragged:u,isDragDisabled:h,lockYAxis:p}=e;return s&&u?r.a.createElement(c.a,{style:d.hidden},t):r.a.createElement(o.b,{disableInteractiveElementBlocking:a,draggableId:n,index:l,isDragDisabled:h},(e=>{const a=e.draggableProps.style,n=p?(e=>{if(e.transform){const t=`translate(0px${e.transform.slice(e.transform.indexOf(","),e.transform.length)}`;return{...e,transform:t}}return e})(a):a;return r.a.createElement("div",i()({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:n}),t)}))}},"9SKQ":function(e,t,a){var n=a("JNqh");e.exports=function(e){return n(this,e).has(e)}},"9gvj":function(e,t,a){"use strict";a("kYxP");var n=a("SV7d"),i=a("ERkP"),s=a.n(i),r=a("TIdA"),o=a("t62R"),l=a("A91F"),c=a("/yvb"),d=a("3XMw"),u=a.n(d),h=a("zTrU"),p=a("rHpw"),m=a("XurV"),g=a("shC7"),b=a("MWbm"),f=a("nb/L"),_=a("hOZg");const y=p.a.create((e=>({root:{borderRadius:e.borderRadii.medium,display:"flex",flexDirection:"row",alignItems:"center",width:"100%",paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},contentContainer:{display:"flex",flexDirection:"row",flex:1},contentTextContainer:{flex:1,alignItems:"flex-start",justifyContent:"center"},dismissButton:{paddingLeft:e.spaces.space12},icon:{color:e.colors.text,marginRight:e.spaces.space8},illustration:{marginRight:e.spaces.space8,height:e.spaces.space28,width:e.spaces.space28},arrow:{borderStyle:"none"},arrowContainer:{position:"absolute",display:"flex",width:"100%",alignItems:"center"},arrowDirectionUp:{top:`calc(-${e.spaces.space12})`},arrowDirectionDown:{bottom:`calc(${e.spaces.space8} - ${e.spaces.space2} )`},arrowDown:{transform:"rotate(180deg)",position:"absolute"},containerDown:{marginBottom:e.spaces.space16},containerUp:{marginTop:e.spaces.space16}}))),v=p.a.create((e=>({primary:{backgroundColor:e.colors.primary0},purple:{backgroundColor:e.colors.purple0},plum:{backgroundColor:e.colors.plum0}}))),C=p.a.create((e=>({primary:{color:e.colors.primary0},purple:{color:e.colors.purple0},plum:{color:e.colors.plum0}})));t.a=({backgroundColor:e="primary",behavioralEventContext:t,containerRef:a,icon:i,illustration:d,onClose:p,text:w})=>{var E;const x=u.a.af8fa2ae,T=Object(m.useOpaqueIdentifier)(),[S,I]=s.a.useState(void 0),R=g.a.getConstants().isRTL,D=s.a.useRef(0),M=s.a.useRef(0),P=null!=(E=null==t?void 0:t.viewType)?E:"inline_tooltip",k=Object(h.a)((e=>({viewType:e})))(P),A=(()=>{if(null!=a&&a.current&&S){const{left:e,top:t,width:n}=a.current.getBoundingClientRect();D.current=t;const i=e+n/2-S;return{left:R?void 0:i,right:R?i:void 0}}})(),O=M.current<D.current,L=O?[y.arrowDirectionDown]:[y.arrowDirectionUp],F=O?[y.containerDown]:[y.containerUp];return s.a.createElement(s.a.Fragment,null,s.a.createElement(n.a,{behavioralEventContext:k},s.a.createElement(b.a,{onLayout:e=>{const{nativeEvent:{layout:{left:t,top:a,width:n}}}=e;M.current=a;I(t+n/2)},style:[y.root,v[e],(null==a?void 0:a.current)&&F]},null!=a&&a.current?s.a.createElement(b.a,{style:[L,y.arrowContainer,A]},s.a.createElement(f.a,{style:[y.arrow,C[e],O&&y.arrowDown]})):null,s.a.createElement(b.a,{style:y.contentContainer},i&&!d?(N=i,s.a.createElement(N,{style:[y.icon,{alignItem:"flex-start"}]})):null,d&&!i?(B=d,s.a.createElement(b.a,{style:y.illustration},s.a.createElement(r.a,{accessibilityLabel:"",aspectMode:l.a.SQUARE,image:B}))):null,s.a.createElement(b.a,{style:y.contentTextContainer},s.a.createElement(o.b,{nativeID:T},w))),s.a.createElement(b.a,{style:y.dismissButton},s.a.createElement(c.a,{accessibilityDescribedBy:T,accessibilityLabel:x,icon:s.a.createElement(_.a,null),onPress:p,size:"xSmall",type:"primaryText"})))));var B,N}},"9vbJ":function(e,t,a){var n,i=a("3KBa"),s=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!s&&s in e}},"9y2L":function(e,t,a){var n=a("2q8g"),i=a("t0L4");e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},CDB5:function(e,t,a){"use strict";a.d(t,"m",(function(){return _})),a.d(t,"l",(function(){return v})),a.d(t,"f",(function(){return w})),a.d(t,"d",(function(){return x})),a.d(t,"g",(function(){return T})),a.d(t,"e",(function(){return I})),a.d(t,"i",(function(){return D})),a.d(t,"j",(function(){return M})),a.d(t,"k",(function(){return P})),a.d(t,"h",(function(){return k})),a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return F})),a.d(t,"c",(function(){return j}));a("kYxP");var n=a("AspN"),i=a("xPna"),s=a("oEOe"),r=a("xCUF"),o=a("ude7"),l=a("07FG"),c=a("Ssj5"),d=a("fEA7"),u=a.n(d),h=a("uKEd"),p=a("lnti"),m=a("/NU0");const g="dmComposer",b={};const f=e=>{const{conversation_id:t,id:a,localMediaId:n,recipient_ids:i,sender_id:s,text:r,attachment:o={},error:l}=e,c=Date.now().toString();return{conversation_id:t,recipient_ids:i,error:l,id:a,is_draft:!0,message_data:{attachment:o,localMediaId:n,sender_id:s,text:r,time:c},type:"message",time:c}},_=e=>(t,a,{api:c})=>{const{senderId:d,cardUrl:g,conversationId:b,localMediaId:_,recipients:y=[],requestId:v=u.a.v1(),tweetAttachment:C,quickReply:w,text:E}=e||{};t(z(b));const T=a();let S=_||R(a(),b);null===S&&(S=[]);const[I]=n.k(T,S),{mediaFile:D,mediaMetadata:M}=I||{},P=y.length>0&&y.join(","),A={};D&&D.isGif?A.extraInitParams="&media_category=dm_gif":D&&D.isVideo&&(A.extraInitParams="&media_category=dm_video");const O=n.p(S,A),L=[t(O)],F=k(T,b),{found_media_origin:B}=F||{};return D&&D.isGif&&L.push(Object(o.a)(D)),Promise.all(L).then((([[a],o])=>{const u=(null==M?void 0:M.altText)||(null==M?void 0:M.defaultAltText)||"",_=!!u;return(a&&(B||_)?t(n.m({media_id:a.uploadId,found_media_origin:B,...!!_&&{alt_text:{text:u||""}}})):Promise.resolve()).then((()=>{const{id_str:n}=C||{},u={};if(a){const{mediaFile:e={}}=a,t={original_info:{width:e.width,height:e.height},sizes:[{h:e.height,w:e.width,resize:"fit"}]};e.isImage?u.photo={...t,media_url_https:e.url}:e.isGif?u.animated_gif={...t,media_url_https:o,type:"animated_gif"}:e.isVideo&&(u.video={...t,media_url_https:e.url,type:"video"})}else C&&(u.tweet={status:n});const{uploadId:_}=a||{},y=f({attachment:u,conversation_id:b,error:!1,id:v,localMediaId:null,recipient_ids:P,sender_id:d,text:E}),T={...Object(l.a)(g)&&{card_uri:g},conversation_id:b,...!n&&{media_id:_},recipient_ids:P,request_id:v,text:e.text,tweet_id:n};w&&(T["quick_reply_response[options][id]"]=w.id,T["quick_reply_response[options][selected_id]"]=w.selected_id);const I=Object(p.a)([H(b),{type:r.c.REQUEST},{type:"rweb/dmComposer/SEND_MESSAGE_REQUEST"},b&&Object(h.b)(b,v,y)]);return t(I),c.DirectMessages.sendMessage(T).then((a=>{const{cards:n,entries:s,tweets:o,users:l}=a.entities,{conversations:c}=a.result;Object(m.a)(S)&&t(j(b,S));const d=Object(p.a)([{type:r.c.SUCCESS},...Object(i.a)({conversations:c,entries:s,users:l,tweets:o,cards:n}),{type:"rweb/dmComposer/SEND_MESSAGE_SUCCESS"},b&&Object(h.j)(b,v,e),x(b)]);return t(d),Promise.resolve(Object.values(a.entities.entries)[0].conversation_id)}),(e=>{const a=f({attachment:u,conversation_id:b,error:!0,id:v,localMediaId:S,recipient_ids:P,sender_id:d,text:E}),n=Object(p.a)([{type:r.c.SUCCESS},{type:"rweb/dmComposer/SEND_MESSAGE_FAILURE"},b&&Object(h.b)(b,v,a)]);return t(n),Object(s.e)(t,e,"ACTION_SEND_DM")}))}),(e=>(t(G(b)),e.type="metadata",Promise.reject(e))))}),(e=>(t(Object(p.a)([Object(m.a)(S)&&j(b,S),G(b)])),Promise.reject(e))))},y=(e,t)=>e.dmComposer[t],v=(e,t)=>{const a=y(e,t);return a?a.text:null},C="rweb/dmComposer/SAVE_TEXT",w=(e,t)=>({type:C,conversationId:e,text:t}),E="rweb/dmComposer/REMOVE_TEXT",x=e=>({type:E,conversationId:e}),T=(e,t)=>{const a=y(e,t);return a?a.cardUrl:null},S="rweb/dmComposer/SAVE_CARD_URL",I=(e,t)=>({type:S,conversationId:e,cardUrl:t}),R=(e,t)=>{const a=y(e,t);return a&&void 0!==a.mediaId?a.mediaId:null},D=(e,t)=>{const a=n.k(e,R(e,t)||[]);return a.length>0?a[0]:null},M=(e,t)=>{const a=y(e,t);return!!a&&a.isUploading},P=(e,t)=>n.l(e,R(e,t)||0),k=(e,t)=>{const a=y(e,t);return a&&a.gifMetadata?a.gifMetadata:null},A="rweb/dmComposer/ADD_MEDIA",O=(e,[t],a)=>({payload:{isUploading:!1,mediaId:t,gifMetadata:a},type:A,conversationId:e}),L="rweb/dmComposer/CANCEL_UPLOAD",F=e=>({type:L,conversationId:e}),B="rweb/dmComposer/REMOVE_MEDIA",N=e=>({type:B,conversationId:e}),j=(e,t)=>a=>{a(n.i(t)),a([F(e),N(e)])},V="rweb/dmComposer/UPLOAD_REQUEST",z=e=>({type:V,conversationId:e}),U="rweb/dmComposer/UPLOAD_SUCCESS",H=e=>({type:U,conversationId:e}),W="rweb/dmComposer/UPLOAD_FAILURE",G=e=>({type:W,conversationId:e});c.a.register({[g]:function(e=b,t){const a=t.conversationId||"new_group",n=e[a]||{cardUrl:null,gifMetadata:null,isUploading:!1,mediaId:null,text:null};switch(t.type){case A:return{...e,[a]:{...n,...t.payload}};case V:return{...e,[a]:{...n,isUploading:!0}};case L:return{...e,[a]:{...n,isUploading:!1}};case W:case U:case B:return{...e,[a]:{...n,isUploading:!1,mediaId:null,gifMetadata:void 0}};case C:return{...e,[a]:{...n,text:t.text}};case S:return{...e,[a]:{...n,cardUrl:t.cardUrl}};case E:return{...e,[a]:{...n,text:null}};default:return e}}})},"Coc+":function(e,t,a){var n=a("6QIk");e.exports=function(e){return n(this.__data__,e)>-1}},DVtB:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return p}));a("kYxP");var n=a("oEOe"),i=a("kGix"),s=a("Ssj5");const r="trustedFriends",o=Object.freeze({REQUEST:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_REQUEST",SUCCESS:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_SUCCESS",FAILURE:"rweb/trustedFriendsLists/FETCH_TRUSTED_FRIENDS_LISTS_FAILURE"}),l=Object.freeze({REQUEST:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_REQUEST",SUCCESS:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_SUCCESS",FAILURE:"rweb/trustedFriendsLists/CREATE_TRUSTED_FRIENDS_LIST_FAILURE"}),c="rweb/trustedFriendsLists/SET_TRUSTED_FRIENDS_LIST",d=e=>e.trustedFriends.lists,u=()=>(e,t,{api:a})=>n.b(e,{request:a.TrustedFriends.createTrustedFriendsList})({actionTypes:l,context:"CREATE_TRUSTED_FRIENDS_LIST"}),h=()=>(e,t)=>{const a=t(),i=d(a);(i.length?i[0]:void 0)||e(((e,t,{api:a})=>n.b(e,{request:a.TrustedFriends.fetchAuthenticatedUserTFLists})({actionTypes:o,context:"FETCH_TRUSTED_FRIENDS_LISTS"}))).then((t=>{!t.authenticated_user_trusted_friends_lists.length&&u&&e(u())}))},p=e=>(t,a)=>{const n=a(),[i]=d(n);if(i){const a={...i,member_count:e};t({payload:a,type:c})}},m=Object.freeze({lists:[],fetchStatus:i.a.NONE});s.a.register({[r]:function(e=m,t){switch(t.type){case o.REQUEST:return{...e,fetchStatus:i.a.LOADING};case o.FAILURE:return{...e,error:t.payload,fetchStatus:i.a.FAILED};case o.SUCCESS:if(t.payload)return{...e,lists:t.payload.authenticated_user_trusted_friends_lists,error:null,fetchStatus:i.a.LOADED};break;case l.REQUEST:return{...e,fetchStatus:i.a.LOADING};case l.FAILURE:return{...e,error:t.payload,fetchStatus:i.a.FAILED};case l.SUCCESS:if(t.payload)return{...e,lists:[t.payload.trusted_friends_list_create],error:null,fetchStatus:i.a.LOADED};break;case c:if(t.payload)return{...e,lists:[t.payload]};break;default:return e}return e}})},Dhk8:function(e,t,a){var n=a("Syyo"),i=a("KCLV"),s=a("kHoZ"),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?i(e):s(e)}},Drq4:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("Lsrn"),r=a("k/Ka");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("circle",{cx:"12",cy:"6.674",r:"1.889"}),i.a.createElement("path",{d:"M9.828 14.817l-1.62 3.342c-.138.41.083.857.495.995s.858-.083.996-.495l1.602-3.176c.28-.557 1.076-.556 1.356 0l1.608 3.195c.138.41.584.632.996.494.412-.138.633-.584.495-.996l-1.62-3.342.032.07-.123-.262c-.483-1.027-.535-2.19-.16-3.24.106-.302.392-.505.712-.505h2.032c.434 0 .786-.353.786-.787 0-.434-.352-.786-.786-.786H7.37c-.435 0-.787.352-.787.786 0 .434.352.786.786.786h1.985c.32 0 .606.2.713.503.374 1.05.323 2.214-.158 3.24l-.125.263"}),i.a.createElement("path",{d:"M12 22.75C6.072 22.75 1.25 17.928 1.25 12S6.072 1.25 12 1.25 22.75 6.072 22.75 12 17.928 22.75 12 22.75zm0-20C6.9 2.75 2.75 6.9 2.75 12S6.9 21.25 12 21.25s9.25-4.15 9.25-9.25S17.1 2.75 12 2.75z"})));o.metadata={width:24,height:24},t.a=o},DuXo:function(e,t){e.exports=function(e,t,a,n){for(var i=e.length,s=a+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},EeFI:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),r=a.n(s),o=a("3XMw"),l=a.n(o),c=a("MWbm"),d=a("Qwev"),u=a("21U8"),h=a("rHpw"),p=a("1auM"),m=a("eYns");const g=l.a.gff1f69e;class b extends r.a.Component{constructor(e){super(e),this.state={orientedImage:null}}componentDidMount(){const{media:e}=this.props,{originalMediaFile:t={}}=e||{};t&&t instanceof p.a&&Object(m.b)(t).then((e=>new p.a(e).withDimensionsAndOrientation().then((e=>{this.setState({orientedImage:e})}))))}render(){return this.state.orientedImage?this._renderCropper():r.a.createElement(d.a,{accessibilityLabel:g,style:f.activityIndicator})}_renderCropper(){const{cropperRef:e,defaultAspectRatio:t,defaultCropData:a,media:n,withAspectRatioOptions:i,withZoomControl:s}=this.props,{orientedImage:o}=this.state,{cropData:l,originalMediaFile:d={}}=n||{};return o?r.a.createElement(c.a,{style:f.cropper},r.a.createElement(u.a,{circle:this.props.circle,defaultAspectRatio:a&&a.aspectRatio||l&&l.aspectRatio||t,defaultCropData:a||l,image:{src:o.url,width:d.width,height:d.height},ref:e,withAspectRatioOptions:i,withZoomControl:s})):null}}const f=h.a.create((e=>({cropper:{backgroundColor:e.colors.navigationBackground,flexGrow:1},activityIndicator:{flexGrow:1}})));t.a=r.a.forwardRef(((e,t)=>r.a.createElement(b,i()({},e,{cropperRef:t}))))},G31s:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("ERkP"),i=a.n(n),s=a("pKoL"),r=a("MWbm"),o=a("rHpw"),l=a("ZvMt"),c=a("9Xij"),d=a("v6aA");class u extends i.a.Component{render(){const{media:e,style:t}=this.props;return i.a.createElement(r.a,{style:t},this._renderImageGroup(e.length))}_renderImageGroup(e){switch(e){case 1:return this._renderGroupOf1();case 2:return this._renderGroupOf2();case 3:return this._renderGroupOf3();case 4:return this._renderGroupOf4();default:return null}}_renderGroupOf1(){const{media:e}=this.props,t=e&&!!e[0].mediaFile,{height:a,width:n}=e&&!t&&e[0].externalMediaDetails||{};let s=o.a.theme.aspectRatios.landscape;if(t){var d,u;const t=o.a.theme.aspectRatios.minTimelineImage,a=o.a.theme.aspectRatios.maxTimelineImage;s=l.a.getImageAspectRatio(t,a,{width:null==(d=e[0].mediaFile)?void 0:d.width,height:null==(u=e[0].mediaFile)?void 0:u.height})}return i.a.createElement(c.a,{ratio:t?s:n/a},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0)))}_renderGroupOf2(){return i.a.createElement(c.a,{ratio:o.a.theme.aspectRatios.landscape},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0,h.gutterRight),this._renderMediaAtIndex(1)))}_renderGroupOf3(){return i.a.createElement(c.a,{ratio:o.a.theme.aspectRatios.landscape},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderMediaAtIndex(0,h.gutterRight),this._renderColumnWithIndices([1,2])))}_renderGroupOf4(){return i.a.createElement(c.a,{ratio:o.a.theme.aspectRatios.landscape},i.a.createElement(r.a,{style:h.mediaPreviewWrapper},this._renderColumnWithIndices([0,2],h.gutterRight),this._renderColumnWithIndices([1,3])))}_renderColumnWithIndices(e,t){return i.a.createElement(r.a,{style:[h.column,t]},this._renderMediaAtIndex(e[0],h.gutterBottom),this._renderMediaAtIndex(e[1]))}_renderMediaAtIndex(e,t){var a,n,r,o;const{editable:l,isActive:c,media:d,onClickMedia:u,onEditMedia:p,onEditSensitiveWarning:m,onRemoveMedia:g,onSetMediaPreviewRef:b}=this.props,f=d[e],_=null==(a=f.mediaMetadata)?void 0:a.altText,y=null==(n=f.mediaMetadata)?void 0:n.defaultAltText,v=!(null==(r=f.mediaMetadata)||null==(o=r.sensitiveMediaWarning)||!o.size),C=p&&l&&c,w=C&&v&&!!m;return i.a.createElement(s.a,{accessibilityLabel:_||y,accessibilityRole:"group",enableGif:c,key:f.id,mediaItem:f,onClick:u?u(f.id):void 0,onEdit:p?p(f.id):void 0,onEditSensitiveWarning:m&&w?m(f.id):void 0,onRemove:g(f.id),ref:b,style:[h.mediaContainer,t],withAltTextLabel:!!_,withCloseButton:l&&c,withEditButton:C,withEditSensitiveWarningButton:w})}}u.contextType=d.a;const h=o.a.create((e=>({column:{flexDirection:"column",flexGrow:1,flexBasis:0},gutterRight:{marginRight:e.spaces.space12},gutterBottom:{marginBottom:e.spaces.space12},mediaContainer:{borderRadius:e.borderRadii.xLarge,transitionProperty:"width",transitionDuration:"0.1s",transitionTimingFunction:"ease-out",overflow:"hidden",flexGrow:1,flexBasis:0},mediaPreviewWrapper:{flexDirection:"row",height:"100%",width:"100%"}})))},H87J:function(e,t){e.exports=function(e,t){for(var a=-1,n=null==e?0:e.length,i=Array(n);++a<n;)i[a]=t(e[a],a,e);return i}},IBsm:function(e,t,a){var n=a("e93E"),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();e.exports=s},"JBn+":function(e,t,a){var n=a("hyzI"),i=a("qjF7"),s=a("cEmw");function r(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new n;++t<a;)this.add(e[t])}r.prototype.add=r.prototype.push=i,r.prototype.has=s,e.exports=r},JNqh:function(e,t,a){var n=a("6UKJ");e.exports=function(e,t){var a=e.__data__;return n(t)?a["string"==typeof t?"string":"hash"]:a.map}},KCLV:function(e,t,a){var n=a("Syyo"),i=Object.prototype,s=i.hasOwnProperty,r=i.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),a=e[o];try{e[o]=void 0;var n=!0}catch(e){}var i=r.call(e);return n&&(t?e[o]=a:delete e[o]),i}},KqB4:function(e,t,a){"use strict";var n=a("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var a=[],n=(0,i.default)(e,t),s=0;s<n.length;s++)a.push(n[s].url);return a};var i=n(a("vwfs"));e.exports=t.default},LCtV:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("3XMw"),r=a.n(s),o=a("mN6z"),l=a("Qwev"),c=a("rHpw"),d=a("1auM"),u=a("ude7"),h=a("U+bB"),p=a("MWbm");const m=r.a.gff1f69e,g=Object.freeze({INFINITE:"infinite",MEDIUM:"medium",NONE:"none"});class b extends i.a.Component{constructor(...e){super(...e),this.state={imagePreviewUrl:null},this._getImageSrc=()=>{const{enableGif:e,mediaItem:t}=this.props,{imagePreviewUrl:a}=this.state;if(t&&t.mediaFile)return t.mediaFile.isGif&&!e?a:t.mediaFile.url}}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:a}=this.state;e||a||t instanceof d.a&&t.isGif&&Object(u.a)(t).then((e=>{this.setState({imagePreviewUrl:e})}))}shouldComponentUpdate(e,t){return!Object(o.a)(e,this.props)||!Object(o.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:a,onClick:n,resizeMode:s}=this.props,{imagePreviewUrl:r}=this.state||{},o=a.mediaFile&&a.mediaFile.isGif&&!t&&!r,c=a.needsProcessing||o,d=[_.root,f[e],c&&_.loadingBorder],u=this._getImageSrc();return i.a.createElement(p.a,{onClick:n,style:d},c||!u?i.a.createElement(l.a,{accessibilityLabel:m,style:_.activityIndicator}):i.a.createElement(h.a,{resizeMode:s,source:u,style:_.image}))}}b.defaultProps={borderRadius:g.NONE,enableGif:!0,resizeMode:"cover"};const f=c.a.create((e=>({[g.INFINITE]:{borderRadius:e.borderRadii.infinite},[g.MEDIUM]:{borderRadius:e.borderRadii.small},[g.NONE]:{borderRadius:e.borderRadii.none}}))),_=c.a.create((e=>({root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.gray300},activityIndicator:{height:"100%"}})));t.b=b},LtQU:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("Lsrn"),r=a("k/Ka");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19 10H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1zm0 6H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1z"})));o.metadata={width:24,height:24},t.a=o},LzM7:function(e,t,a){var n=a("6QIk");e.exports=function(e,t){var a=this.__data__,i=n(a,e);return i<0?(++this.size,a.push([e,t])):a[i][1]=t,this}},M6MT:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n=Object.freeze({granted:"granted",denied:"denied",prompt:"prompt"}),i=Object.freeze({PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3})},MLl7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s}));const n=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),i=e=>Object.values(n).indexOf(e)>=0,s=(e,t)=>"boolean"==typeof e?e:t},"Mbn/":function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("Lsrn"),r=a("k/Ka");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M3.5 5.25H2c-.414 0-.75.336-.75.75s.336.75.75.75h1.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm18.5 12H7.5c-.414 0-.75-.337-.75-.75V2c0-.414-.336-.75-.75-.75s-.75.336-.75.75v14.5c0 1.24 1.01 2.25 2.25 2.25H22c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4 2.5c-.414 0-.75.336-.75.75V22c0 .414.336.75.75.75s.75-.336.75-.75v-1.5c0-.414-.336-.75-.75-.75z"}),i.a.createElement("path",{d:"M8.5 6.75h8c.414 0 .75.337.75.75v8c0 .414.336.75.75.75s.75-.336.75-.75v-8c0-1.24-1.01-2.25-2.25-2.25h-8c-.414 0-.75.336-.75.75s.336.75.75.75z"})));o.metadata={width:24,height:24},t.a=o},Ndl3:function(e,t,a){var n=a("9y2L"),i=a("tLQN");e.exports=function(e){return i(e)&&n(e)}},Nsha:function(e,t,a){var n=a("H87J"),i=a("1sLo"),s=a("R3TX"),r=a("VZDm"),o=s((function(e){var t=n(e,r);return t.length&&t[0]===e[0]?i(t):[]}));e.exports=o},ORQL:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),r=a.n(s),o=a("RH6X"),l=a("rziq"),c=a("hHEM"),d=a("keCP");const u={convertEmojiToEntities:c.a.convertEmojiToEntities,element:d.a,initEditorState:c.a.initEditorState,insertTextAtCursor:c.a.insertTextAtCursor,updateOverflowStyle:c.a.updateOverflowStyle,dismissComposerCommandName:l.a,sendTweetCommandName:l.b};t.a=e=>t=>r.a.createElement(e,i()({},t,{richTextInputContext:u,typeaheadWrapper:o.a}))},OfKG:function(e,t,a){var n=a("c7Qd");e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},PKbs:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var n=a("ERkP"),i=a.n(n),s=a("t62R"),r=a("3XMw"),o=a.n(r),l=a("MWbm");const c=i.a.createElement(o.a.I18NFormatMessage,{$i18n:"i5ba24f5"},i.a.createElement(s.b,{link:"https://help.twitter.com/en/rules-and-policies/twitter-rules",withInteractiveStyling:!1},o.a.g3631342));var d=({containerStyle:e,explanation:t,explanationStyle:a,heading:n})=>i.a.createElement(l.a,{style:e},n,i.a.createElement(s.b,{color:"gray700",style:a},t||c)),u=a("csss");var h=({getPivotLink:e,renderBadge:t,rules:a})=>i.a.createElement(i.a.Fragment,null,a.map(((a,n)=>{const{description:r,name:o,rest_id:l}=a,c=e(a),d=t(n+1),h=i.a.createElement(s.b,{weight:"bold"},o);return i.a.createElement(u.a,{description:r,key:l,label:h,link:c,thumbnail:d})}))),p=a("97Jx"),m=a.n(p),g=(a("kYxP"),a("9Jxp")),b=a("LtQU"),f=a("rHpw");const _=f.a.create((e=>({icon:{color:e.colors.gray300,flexShrink:0,paddingLeft:e.spaces.space12}})));var y=e=>{const{badge:t,rule:a}=e,{description:n,name:r}=a,o=i.a.createElement(s.b,{weight:"bold"},r);return i.a.createElement(u.a,{description:n,label:o,renderRightContent:()=>i.a.createElement(b.a,{style:_.icon}),thumbnail:t})},v=a("CXUS");var C=e=>{const{onReorder:t,renderBadge:a,rules:n}=e;return i.a.createElement(v.a,{onDragEnd:e=>{if(!e.destination)return;const a=((e,t,a)=>{const n=Array.from(e),[i]=n.splice(t,1);return n.splice(a,0,i),n})(n,e.source.index,e.destination.index);t(a)}},i.a.createElement(v.c,{droppableId:"droppable"},((e,t)=>i.a.createElement("div",m()({},e.droppableProps,{ref:e.innerRef}),n.map(((e,n)=>{const{rest_id:s}=e;return i.a.createElement(g.a,{draggableId:s,index:n,isBeingDragged:t.draggingFromThisWith===s,key:s},i.a.createElement(y,{badge:a(n+1),rule:e}))})),e.placeholder))))},w=a("C6f5"),E=a("X00g"),x=a("h0NW");const T=Object.freeze({Default:"Default",Pivot:"Pivot",Reorder:"Reorder"}),S=(e,t)=>{const{badgeStyle:a,theme:n}=t,r=E.a.getCommunityBackgroundColor(n);return i.a.createElement(l.a,{style:[I.badge,{backgroundColor:r},a]},i.a.createElement(s.b,{align:"center",color:"white",weight:"bold"},e))},I=f.a.create((e=>({badge:{backgroundColor:e.colors.primary,borderRadius:e.borderRadii.infinite,justifyContent:"center",overflow:"hidden",height:e.spaces.space32,width:e.spaces.space32},bottomMargin:{marginBottom:w.a}})));t.b=({badgeStyle:e,displayType:t=T.Default,explanation:a,getPivotLink:n,headerContainerStyle:s,headerExplanationStyle:r,heading:o,limit:c,onReorder:u,ruleContainerStyle:p,rules:m,theme:g,withBottomMargin:b=!1,withHeader:f=!0})=>{const _={theme:g,badgeStyle:e},y=((e,t,a)=>(t?e.slice(0,t):e).map(((e,t)=>({label:e.name,description:e.description,decoration:S(t+1,a)}))))(m,c,_),v=e=>S(e,_);return y.length>0?i.a.createElement(l.a,{style:b?I.bottomMargin:null},f?i.a.createElement(d,{containerStyle:s,explanation:a,explanationStyle:r,heading:o}):null,t===T.Pivot&&n?i.a.createElement(h,{getPivotLink:n,renderBadge:v,rules:m}):t===T.Reorder&&u?i.a.createElement(C,{onReorder:u,renderBadge:v,rules:m}):i.a.createElement(x.a,{containerStyle:p,items:y})):null}},"Pz+s":function(e,t,a){var n=a("vxC8"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},QMz8:function(e,t,a){var n=a("5pfJ"),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},R3TX:function(e,t,a){var n=a("zWgn"),i=a("UAs9"),s=a("7Pat");e.exports=function(e,t){return s(i(e,t,n),e+"")}},RH6X:function(e,t,a){"use strict";a("kYxP"),a("849X");var n=a("ERkP"),i=a.n(n),s=a("oEoC"),r=a("2dXj"),o=a("4bHO"),l=a("dzqK"),c=a("GZwR"),d=a("zpdM");class u extends i.a.Component{constructor(...e){super(...e),this.state={queryContext:void 0,canShowTypeahead:!1},this._genericWrapperRef=i.a.createRef(),this.render=()=>{const{children:e,contextText:t,isInline:a,isInlineReply:n,onTypeaheadStateChange:s,source:o}=this.props,{canShowTypeahead:l,queryContext:d}=this.state,u=l&&d?{word:d.word,resultType:d.resultType}:void 0;return i.a.createElement(r.a,{contextText:t,isInline:a,isInlineReply:n,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:s,query:u,ref:this._genericWrapperRef,source:o||c.d.Compose},e(this._handleInputChange))},this._getCaret=e=>e.getSelection().getStartOffset(),this._getPlaintextFromCurrentBlock=e=>{const t=e.getSelection().anchorKey;return e.getCurrentContent().getBlockForKey(t).getText()},this._handleSelectItem=e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const n=Object(o.a)(e,a.resultType);t(this._replaceToken(n,a))}this._setQueryContext(void 0)},this._handleInputChange=e=>{if(!Object(l.a)(e))throw new Error("RichTextTypeaheadComposeWrapper cannot handle plain text input changes");{const{queryContext:t}=this.state,a=t&&t.word,n=this._getPlaintextFromCurrentBlock(e),{end:i,start:r,word:o}=s.c(this._getCaret(e),n),l=s.e(o||"","compose");if((null==l?void 0:l.q)===a)return;if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===r)this._setQueryContext(void 0);else if(l){const{q:t,result_type:a}=l;this._setQueryContext({word:t,resultType:a,editorState:e,startIndex:r,endIndex:i})}else this._setQueryContext(void 0)}},this._setQueryContext=e=>this.setState({queryContext:e,canShowTypeahead:!!e}),this._handleDismiss=()=>this.setState({canShowTypeahead:!1})}_replaceToken(e,t){const{editorState:a,endIndex:n,startIndex:i}=t,s=a.getSelection().merge({anchorKey:a.getSelection().getFocusKey(),anchorOffset:i,focusOffset:n}),r=d.Modifier.replaceText(a.getCurrentContent(),s,e),o=d.EditorState.push(a,r,"insert-characters"),l=i+e.length,c=o.getSelection().merge({anchorOffset:l,focusOffset:l});return d.EditorState.forceSelection(o,c)}}t.a=u},RrO2:function(e,t,a){"use strict";a.r(t);a("ERkP");var n=a("ORQL"),i=a("x8Sc");t.default=Object(n.a)(i.default)},S0iI:function(e,t){e.exports=function(e,t){return e.has(t)}},SU8Q:function(e,t){e.exports=function(e){return function(t){return e(t)}}},Syyo:function(e,t,a){var n=a("IBsm").Symbol;e.exports=n},Tv3l:function(e,t,a){var n=a("2Fbm"),i=a("VPai"),s=a("+fUG"),r=a("QMz8"),o=a("mUsV");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=r,l.prototype.set=o,e.exports=l},UAs9:function(e,t,a){var n=a("zaNA"),i=Math.max;e.exports=function(e,t,a){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,r=-1,o=i(s.length-t,0),l=Array(o);++r<o;)l[r]=s[t+r];r=-1;for(var c=Array(t+1);++r<t;)c[r]=s[r];return c[t]=a(l),n(e,this,c)}}},UgB4:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("Lsrn"),r=a("k/Ka");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.13 11.358L3.614 2.108c-.29-.152-.64-.102-.873.126-.23.226-.293.577-.15.868l4.362 8.92-4.362 8.92c-.143.292-.08.643.15.868.145.14.333.212.523.212.12 0 .24-.028.35-.087l17.517-9.25c.245-.13.4-.386.4-.664s-.155-.532-.4-.662zM4.948 4.51l12.804 6.762H8.255l-3.307-6.76zm3.307 8.26h9.498L4.948 19.535l3.307-6.763z"})));o.metadata={width:24,height:24},t.a=o},VPai:function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},VPdC:function(e,t,a){"use strict";a.d(t,"b",(function(){return _}));var n=a("97Jx"),i=a.n(n),s=a("ERkP"),r=a.n(s),o=a("3XMw"),l=a.n(o),c=a("cjZk"),d="fileInput",u=a("sjK1"),h=a("/Imo"),p=a("rHpw"),m=a("9HgX");const g=l.a.b9960f32,b={viewType:"media_picker"},f=r.a.createElement(c.a,null),_=({acceptGifs:e,acceptImages:t=!0,acceptVideo:a})=>(t?m.b:[]).concat(e?[m.a]:[]).concat(a?u.a:[]);class y extends r.a.PureComponent{render(){const{acceptGifs:e,acceptImages:t,acceptVideo:a,customMimeTypes:n,icon:s,style:o,withIcon:l,...c}=this.props,u=_({acceptGifs:e,acceptImages:t,acceptVideo:a}).concat(n).join(",");return r.a.createElement(h.a,i()({},c,{accept:u,behavioralEventContext:b,icon:l?s:void 0,style:[v.root,o],testID:d}))}}y.defaultProps={acceptGifs:!0,acceptImages:!0,acceptVideo:!0,customMimeTypes:[],accessibilityLabel:g,icon:f,size:"medium",withIcon:!0};const v=p.a.create((e=>({root:{margin:`-${e.spaces.space12}`}})));t.a=y},VZDm:function(e,t,a){var n=a("Ndl3");e.exports=function(e){return n(e)?e:[]}},WOwf:function(e,t,a){"use strict";function n(e,t){return Math.min(1,1-e/t)}a.d(t,"a",(function(){return n}))},XpKj:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return p})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return b}));var n=a("oEOe"),i=a("kGix"),s=a("Ssj5");const r="scheduledTweets",o={fetchStatus:i.a.NONE,scheduledTweets:[]},l="FETCH_SCHEDULED_TWEETS",c=Object.freeze({REQUEST:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_REQUEST",SUCCESS:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_SUCCESS",FAILURE:"rweb/scheduledTweets/FETCH_SCHEDULED_TWEETS_FAILURE"}),d="DELETE_SCHEDULED_TWEET",u=Object.freeze({REQUEST:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_REQUEST",SUCCESS:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_SUCCESS",FAILURE:"rweb/scheduledTweets/DELETE_SCHEDULED_TWEET_FAILURE"});function h(e=o,t){switch(t.type){case c.SUCCESS:if(t.payload)return{...e,fetchStatus:i.a.LOADED,scheduledTweets:t.payload};break;case c.FAILURE:return{...e,fetchStatus:i.a.FAILED};case c.REQUEST:return{...e,fetchStatus:i.a.LOADING};case u.SUCCESS:{const{meta:i}=t;return i&&i.deleteScheduledTweetId?{...e,scheduledTweets:(a=i.deleteScheduledTweetId,n=e.scheduledTweets,n.filter((e=>e.rest_id!==a)))}:e}default:return e}var a,n;return e}s.a.register({[r]:h});const p=e=>e.scheduledTweets.scheduledTweets,m=e=>e.scheduledTweets.fetchStatus,g=()=>(e,t,{api:a})=>Object(n.b)(e,{request:a.Scheduling.fetchScheduledTweets,params:{}})({actionTypes:c,context:l}).then((()=>{})),b=e=>(t,a,{api:i})=>Object(n.b)(t,{request:i.Scheduling.deleteScheduledTweet,params:{scheduled_tweet_id:e}})({actionTypes:u,context:d,meta:{deleteScheduledTweetId:e}})},"a/ea":function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return p}));var n=a("M6MT"),i=a("Ssj5");const s="geoLocation",r=Object.freeze({permissionStatus:void 0,position:void 0});const o=e=>e.geoLocation.permissionStatus,l=e=>e.geoLocation.position,c="rweb/geoLocation/SET_PERMISSION_STATUS",d=e=>({payload:e,type:c}),u="rweb/geoLocation/SET_POSITION",h=()=>(e,t)=>m().then((t=>e({payload:t,type:u}))).catch((t=>(e(d(n.b.denied)),Promise.reject(t)))),p=()=>(e,t)=>l(t())?Promise.resolve():e(h()),m=()=>new Promise(((e,t)=>navigator.geolocation.getCurrentPosition((t=>{const a={timestamp:t.timestamp,coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,altitude:t.coords.altitude,accuracy:t.coords.accuracy,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed}};return e(a)}),t)));i.a.register({[s]:function(e=r,t){switch(t.type){case c:return{...e,permissionStatus:t.payload};case u:return{...e,position:t.payload};default:return e}}})},b5s6:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),r=a.n(s),o=a("v6aA"),l=a("XOJV"),c=a("eSoz"),d=a("rxPX"),u=a("0KEI");const h=(e,t)=>t.tweetId,p=(e,t)=>{const a=t.tweetId,n=a&&l.a.select(e,a);return n?Object(c.g)(e,n):void 0};var m=Object(d.a)().propsFromState((()=>({community:p,hydratedTweet:l.a.createHydratedTweetSelector(h)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:c.c.fetchOneIfNeeded}))),g=a("YeIG"),b=a("uCxL"),f=a("Irs7"),_=a("x5Pi");const y=m((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,hydratedTweet:n,onPress:s,tweetId:l,...c})=>{const{featureSwitches:d,loggedInUserId:u}=r.a.useContext(o.a),h=Object(f.b)(),p=null==n?void 0:n.community_id_str;r.a.useEffect((()=>{p&&Object(g.a)(e)&&a(p).catch(t())}),[e,p,t,a]);const m=r.a.useCallback((e=>{h.scribeAction("click"),s&&s(e)}),[s,h]),y=n&&Object(_.f)(n,u,e),v=y&&Object(_.e)(y),C=d.isTrue("responsive_web_reactions_enabled");return r.a.createElement(b.a,i()({},c,{loggedInUserId:u,onPress:m,shouldShowAltLabelAlways:!0,socialContextProps:v,tweet:n,withReactions:C}))}));t.a=y},c0ZR:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("849X");const n=e=>new Promise(((t,a)=>{const n=new window.XMLHttpRequest;n.responseType="blob",n.onreadystatechange=()=>{n.readyState===window.XMLHttpRequest.DONE&&(200===n.status?t(n.response):a(new Error("Unexpected status code")))},n.onerror=e=>a(e),n.ontimeout=e=>a(e),n.open("GET",e,!0),n.send()}))},c18h:function(e,t){var a=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},c7Qd:function(e,t,a){var n=a("DuXo"),i=a("z9Jh"),s=a("n1QJ");e.exports=function(e,t,a){return t==t?s(e,t,a):n(e,i,a)}},cEmw:function(e,t){e.exports=function(e){return this.__data__.has(e)}},cIoY:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("1YZw"),r=a("rxPX"),o=Object(r.a)().propsFromActions((()=>({addToast:s.b}))),l=(a("kYxP"),a("k/Ka")),c=a("3XMw"),d=a.n(c),u=a("sgih"),h=a("t62R"),p=a("/yvb"),m=a("rHpw");const g=d.a.cfd2f35e;class b extends i.a.Component{constructor(...e){super(...e),this._handleOnFocus=e=>{e.currentTarget.select()}}render(){const{cancelButtonLabel:e,description:t,headerText:a,link:n,onCancel:s}=this.props,r=Object(l.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:f.linkInput,value:n});return i.a.createElement(u.a,{onMaskClick:s,style:f.container,type:"center",withMask:!0},a&&i.a.createElement(h.b,{align:"center",style:f.headerText,weight:"bold"},a),t&&i.a.createElement(h.b,{align:"center",color:"gray700",style:f.labelText},t),r,i.a.createElement(p.a,{onPress:s,size:"xLarge",style:f.cancelButton,type:"brandText"},e))}}b.defaultProps={cancelButtonLabel:g};const f=m.a.create((e=>({container:{alignItems:"center",paddingVertical:e.spaces.space32,paddingHorizontal:e.spaces.space12,position:"relative"},headerText:{marginBottom:e.spaces.space16},labelText:{marginBottom:e.spaces.space16,width:"100%"},linkInput:{backgroundColor:e.colors.gray0,borderColor:"transparent",color:e.colors.gray700,fontSize:e.fontSizes.body,marginBottom:e.spaces.space12,paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space20},cancelButton:{width:"100%"}})));var _=b,y=a("I/9y"),v=a("mjJ+"),C=a("cm6r"),w=a("CaKu"),E=a("U+bB");const x=d.a.e05c00b4,T=d.a.eabf2209,S=d.a.a613e720,I=d.a.f88553c8,R={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class D extends i.a.PureComponent{constructor(e){super(e),this._renderMenu=e=>i.a.createElement(v.a,{items:[{text:S,Icon:y.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e}),this._handleCopyGifLinkButtonClick=e=>{const{addToast:t,gifUrl:a}=this.props;w.a.isAvailable()?(w.a.setString(a),t({text:I})):this.setState({showCopyLinkSheet:!0}),e&&e()},this._handleCopyLinkSheetCancel=()=>{this.setState({showCopyLinkSheet:!1})},this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{gifUrl:t,provider:a}=this.props,{display_name:n,name:s}=a,r=R[s];return r?i.a.createElement(i.a.Fragment,null,e?i.a.createElement(_,{description:T({providerName:n}),headerText:x,link:t,onCancel:this._handleCopyLinkSheetCancel}):null,i.a.createElement(h.b,{align:"center",color:"gray700",style:M.root},i.a.createElement(d.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(n,r)))):null}_renderAttribution(e,t){return i.a.createElement(C.a,{interactiveStyles:null,renderMenu:this._renderMenu},i.a.createElement(h.b,{weight:"bold",withInteractiveStyling:!0},i.a.createElement(E.a,{source:{uri:t},style:M.image}),i.a.createElement(h.b,null,e.toUpperCase())))}}const M=m.a.create((e=>({button:{marginLeft:e.spaces.space12},image:{display:"inline-block",height:e.spaces.space16,marginHorizontal:e.spaces.space4,width:e.spaces.space16},root:{marginHorizontal:e.spaces.space12}})));var P=D;const k=o((({addToast:e,gifUrl:t,provider:a})=>i.a.createElement(P,{addToast:e,gifUrl:t,provider:a})));t.a=k},d0UJ:function(e,t,a){var n=a("JNqh");e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},dzqK:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("ERkP");var n=a("zpdM");function i(e){return e instanceof n.EditorState}},e63W:function(e,t,a){var n=a("JNqh");e.exports=function(e,t){var a=n(this,e),i=a.size;return a.set(e,t),this.size+=a.size==i?0:1,this}},e93E:function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(this,a("fRV1"))},eN33:function(e,t){e.exports=function(e){return function(){return e}}},eask:function(e,t,a){var n=a("JNqh");e.exports=function(e){return n(this,e).get(e)}},gk9V:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return r}));var n=a("rHpw");const i="singleline",s=`\n    .longform-header-one {\n        font-family: ${n.a.theme.fontFamilies.chirpExtended};\n        font-size: ${n.a.theme.fontSizes.title2};\n        line-height: ${n.a.theme.lineHeights.title1};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-header-two {\n        font-size: ${n.a.theme.fontSizes.title3};\n        font-weight: ${n.a.theme.fontWeights.heavy};\n        line-height: ${n.a.theme.lineHeights.title2};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-unstyled {\n        font-size: ${n.a.theme.fontSizes.headline2};\n        line-height: ${n.a.theme.lineHeights.title4};\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n    }\n\n    .longform-unordered-list-item, .longform-ordered-list-item {\n        font-size: ${n.a.theme.fontSizes.headline2};\n        line-height: ${n.a.theme.lineHeights.title4};   \n        margin-bottom: ${n.a.theme.spaces.space12};\n        margin-top: 0;\n        padding-left: ${n.a.theme.spaces.space8};\n    }\n\n    .longform-header-one .public-DraftStyleDefault-block,\n    .longform-header-two .public-DraftStyleDefault-block,\n    .longform-unstyled .public-DraftStyleDefault-block,\n    .longform-unordered-list-item .public-DraftStyleDefault-block,\n    .longform-ordered-list-item .public-DraftStyleDefault-block {\n        padding-bottom: 0;\n        padding-top: 0;\n    }\n\n    ul, ol {\n        margin-bottom: ${n.a.theme.spaces.space28};\n        margin-top: 0;\n        padding-left: ${n.a.theme.spaces.space20};\n    }\n`,r=({placeholderTextColor:e=n.a.theme.colors.gray700})=>{const t=n.a.theme.spaces.space2;return`\n         .DraftEditor-editorContainer, .DraftEditor-root, .public-DraftEditor-content {\n            height: inherit;\n            max-height: inherit;\n            min-height: inherit;\n            overflow: auto;\n            text-align: initial;\n        }\n\n        .public-DraftEditor-content[contenteditable=true] {\n            -webkit-user-modify: read-write-plaintext-only\n        }\n\n        .DraftEditor-root {\n            width: 100%;\n            position: relative;\n            -webkit-user-select: none;\n        }\n\n        .DraftEditor-editorContainer {\n            background-color: rgba(255, 255, 255, 0);\n            border-left: .1px solid transparent;\n            position: relative;\n            z-index: 1;\n        }\n\n        .public-DraftEditor-block {\n            position: relative;\n        }\n\n        .DraftEditor-alignLeft .public-DraftStyleDefault-block {\n            text-align: left;\n        }\n\n        .DraftEditor-alignLeft .public-DraftEditorPlaceholder-root {\n            left: 0;\n            text-align: left;\n        }\n\n        .DraftEditor-alignCenter .public-DraftStyleDefault-block {\n            text-align: center\n        }\n\n        .DraftEditor-alignCenter .public-DraftEditorPlaceholder-root {\n            margin: 0 auto;\n            text-align: center;\n            width: 100%\n        }\n\n        .DraftEditor-alignRight .public-DraftStyleDefault-block {\n            text-align: right;\n        }\n\n        .DraftEditor-alignRight .public-DraftEditorPlaceholder-root {\n            right: 0;\n            text-align: right;\n        }\n\n        .public-DraftEditorPlaceholder-root {\n            color: ${e};\n            padding-bottom: ${t};\n            padding-top: ${t};\n            position: absolute;\n            z-index: 1;\n        }\n\n        .public-DraftEditorPlaceholder-inner {\n            user-select: none;\n            -webkit-user-select: none;\n        }\n\n        .public-DraftEditorPlaceholder-hasFocus {\n            color: ${e};\n        }\n\n        .DraftEditorPlaceholder-hidden {\n            display: none;\n        }\n\n        .public-DraftStyleDefault-block {\n            overflow:hidden;\n            padding-bottom: ${t};\n            padding-top: ${t};\n            position: relative;\n            white-space: pre-wrap;\n        }\n\n        /* Only a handful of CSS rules work on br tags and user-select isn't one */\n        div:only-child > .public-DraftStyleDefault-block br::selection {\n            background: transparent;\n        }\n\n        /*\n           Safari doesn't let you change ::selection on br elements,\n           but Chrome needs it here\n        */\n        div:only-child > .public-DraftStyleDefault-block::selection {\n            background: transparent;\n        }\n\n        .public-DraftStyleDefault-ltr {\n            direction: ltr;\n            text-align: left;\n        }\n\n        .public-DraftStyleDefault-rtl {\n            direction: rtl;\n            text-align: right;\n        }\n\n        .${i} .public-DraftStyleDefault-block {\n            overflow-x: auto;\n            scrollbar-width: none;\n            white-space: nowrap;\n            -ms-overflow-style: none;\n        }\n\n        .${i} .public-DraftStyleDefault-block::-webkit-scrollbar {\n            display: none;\n        }\n\n        ${s}\n    `}},gpVt:function(e,t,a){"use strict";a.d(t,"b",(function(){return I}));var n=a("ERkP"),i=a.n(n),s=(a("kYxP"),a("CDB5")),r=a("xVN5"),o=a("vjRr"),l=a("rxPX"),c=a("0KEI");const d=(e,t)=>{const{urls:a}=t,n=[...a];let i;for(const t of n.reverse())if(i=o.a.select(e,t),i)break;return i};var u=Object(l.a)().propsFromState((()=>({card:d}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(c.createLocalApiErrorHandlerWithContextFactory)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:o.a.fetchCardPreviewIfNeeded,updateDMComposer:s.e,updateTweetComposer:r.w}))),h=a("KqB4"),p=a.n(h),m=a("aX4+"),g=a("3XMw"),b=a.n(g),f=a("hOZg"),_=a("cnVF"),y=a("MWbm"),v=a("v6aA"),C=a("/yvb"),w=a("rHpw"),E=a("VY6S"),x=a("mN6z");const T=b.a.f6fec9f6,S=/^https?:\/\//i,I=e=>{const t=p()(e);if(t.length)return t.map((e=>!S.test(e)&&`http://${e}`||e))};class R extends i.a.Component{constructor(e,t){super(e,t),this._fetchCardPreviewIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchCardPreviewIfNeeded:t,urls:a}=this.props;a.forEach((a=>{t(a).catch(e())}))},this._handleCardPreviewDismissal=e=>this._updateSingleComposer({cardUrl:_.B}),this._updateSingleComposer=e=>{const{conversationId:t,index:a,updateDMComposer:n,updateTweetComposer:i}=this.props,{cardUrl:s}=e||{};this._isDMComposer?t&&n(t,s):i({updates:{cardUrl:s},index:a})},this._debouncedFetchCardPreview=Object(E.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){const{urls:t}=this.props;Object(x.a)(e.urls,t)||this._debouncedFetchCardPreview()}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:a}=this.props,{loggedInUserId:n}=this.context;return e&&!t&&n?i.a.createElement(y.a,{style:a},i.a.createElement(m.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values},cardContext:{tweetUserId:n},isInteractive:!1,preventVideoPlayback:!0}),i.a.createElement(C.a,{accessibilityLabel:T,icon:i.a.createElement(f.a,null),onPress:this._handleCardPreviewDismissal,size:"xSmall",style:D.closeButton,type:"onMediaDominantColorFilled"})):null}}R.contextType=v.a;const D=w.a.create((e=>({closeButton:{position:"absolute",top:e.spaces.space4,left:e.spaces.space4}}))),M=u(R);t.a=M},h5NW:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("MvUL"),a("urw/"),a("ERkP")),r=a.n(s),o=a("dDSG"),l=a("pXBW"),c=a("6/RC"),d=a("wpu3"),u=a("+Kfv"),h=a("eSoz"),p=a("rxPX");const m=(e,{communityId:t})=>t?h.c.select(e,t):void 0;var g=Object(p.a)().propsFromState((()=>({community:m}))),b=a("MtXG"),f=a("t62R"),_=a("CKsB"),y=a("rHpw"),v=a("3XMw"),C=a.n(v);const w=C.a.d58baa7f;var E=g(r.a.memo((e=>{const{clickHandler:t,community:a,communityId:n,selectedCommunityId:i}=e;if(!a)return null;const{member_count:s}=a;return r.a.createElement(_.a,{actionSubText:(()=>{const e=w(s);return r.a.createElement(b.a.Group,null,r.a.createElement(b.a,null,r.a.createElement(f.b,{color:"white"},r.a.createElement(C.a.I18NFormatMessage,{$i18n:"b38e130b"},r.a.createElement(b.a.Value,null,C.a.ibd0106e({formattedCount:e})),r.a.createElement(b.a.Label,null,C.a.cface2d1({count:s}))))))})(),actionText:a.name,isSelected:i===n,key:n,media:a.media,onClick:t({_type:"community_members",communityIdValue:n,conversationControlsValue:"community_members"}),selectable:!0,style:x.menuItem})})));const x=y.a.create((e=>({menuItem:{alignItems:"center"}})));var T=a("0zXz"),S=a("FS1z"),I=a("Irs7"),R=a("MWbm"),D=a("yw4N"),M=a("/yvb"),P=a("+Eiw"),k=a("Zg3A"),A=a("EyD/"),O=a("5wO0");const L=C.a.e815fc34,F=C.a.c63602d4,B=C.a.aa4209e8,N=C.a.d0748dae,j=C.a.abd845fe,V={viewType:"everyone"},z={viewType:"community"},U=C.a.d58baa7f,H=y.a.create((e=>({hidden:{visibility:"hidden"},title:{flexDirection:"column",paddingVertical:e.spaces.space4,paddingHorizontal:e.spaces.space12},root:{flex:1,flexDirection:"column",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12},menuItem:{alignItems:"center"},superFollowsIcon:{backgroundImage:P.a.getBackgroundImage()},viewport:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge,flexGrow:1,flexShrink:1,overflow:"auto",zIndex:void 0}})));var W=e=>{var t,a,n;const{audienceControlsValue:i,dismiss:s,everyoneLabel:o,hasMemberships:l,history:c,isC9sParticipationEnabled:d,isSuperFollowsCreator:h,isTrustedFriendsEnabled:p,onAudienceControlsValueChange:m,sliceModule:g,updateSingleComposer:y}=e,v=i.communityIdValue||void 0,w=i.exclusivityControlValue||void 0,x=i.trustedFriendsValue||void 0,P=null==(t=e.trustedFriendsList)?void 0:t.rest_id,W=null!=(a=null==(n=e.trustedFriendsList)?void 0:n.member_count)?a:0,G=Object(I.b)(),K=r.a.useCallback((e=>()=>{m(e),["super_followers_exclusive","community_members","trusted_friends_tweet"].indexOf(e._type)>-1&&y({updates:{scheduledFor:void 0,scheduledTweetId:void 0}}),s()}),[m,y,s]),$=r.a.useCallback((()=>{if(P)return G.scribe({section:"audience_selector",component:"trusted_friends",element:"edit_list_button",action:"click"}),c.push(`/i/circles/${P}/members`)}),[G,c,P]);return r.a.createElement(R.a,{style:H.root},r.a.createElement(D.a,{style:H.viewport},r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{size:"headline1",style:H.title,weight:"bold"},L),r.a.createElement(u.a,{behavioralEventContext:V},r.a.createElement(_.a,{Icon:k.a,actionText:o,isSelected:!w&&!v&&!x,onClick:K({_type:"conversation_controls",conversationControlsValue:"all"}),selectable:!0,style:H.menuItem,withIconAsThumbnail:!0})),h?r.a.createElement(_.a,{Icon:A.a,actionText:B,iconThumbnailColor:"exclusive",isSelected:!!w,onClick:K({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}),selectable:!0,style:H.menuItem,withIconAsThumbnail:!0}):null,p&&e.trustedFriendsList&&P?r.a.createElement(_.a,{Icon:O.a,actionSubText:(e=>{const t=U(e);return r.a.createElement(b.a.Group,null,r.a.createElement(b.a,null,r.a.createElement(f.b,{color:"white"},r.a.createElement(C.a.I18NFormatMessage,{$i18n:"g8ffaf17"},r.a.createElement(b.a.Value,null,C.a.a5f7b700({formattedCount:t})),r.a.createElement(b.a.Label,null,C.a.a7daec1e({count:e})))),r.a.createElement(M.a,{onPress:$,size:"xSmall",type:"primaryText"},j)))})(W),actionText:N,iconThumbnailColor:"success",isSelected:!!x,onClick:K({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:W,trustedFriendsValue:{trusted_friends_list_id:P}}),selectable:!0,style:H.menuItem,withIconAsThumbnail:!0}):null),l&&g&&d?r.a.createElement(R.a,null,r.a.createElement(u.a,{behavioralEventContext:z},r.a.createElement(f.b,{style:H.title,weight:"bold"},F),r.a.createElement(S.a,{module:g,noItemsRenderer:T.a,renderer:e=>r.a.createElement(E,{clickHandler:K,communityId:e,dismiss:s,key:e,selectedCommunityId:v}),withoutHeadroom:!0}))):null))},G=a("xVN5"),K=a("wa7Z"),$=a("hqKg"),q=a("li/m"),X=a("RqPI"),Q=a("xZGM"),J=a("0KEI"),Y=a("DVtB");const Z=(e,t)=>{const a=t.audienceControlsValue.communityIdValue||void 0;return a?h.c.select(e,a):void 0},ee=(e,t)=>Object(Q.E)(e,Q.f),te=(e,t)=>Object(Q.E)(e,Q.x),ae=e=>{const t=Object(Y.b)(e);return t.length?t[0]:void 0};var ne=Object(p.a)().propsFromState((()=>({communities:h.f,educationalVisibilityFlag:ee,trustedFriendsEducationVisibilityFlag:te,hasMemberships:q.d,selectedCommunity:Z,sliceModule:Object($.createSelector)(X.s,(e=>e?Object(K.b)(e):void 0)),selectTrustedFriendsList:ae}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(J.createLocalApiErrorHandlerWithContextFactory)("COMMUNITIES_CONTROLS"),addEducationFlag:()=>Object(Q.A)(Q.f),addTrustedFriendsEducationFlag:()=>Object(Q.A)(Q.x),updateSingleComposer:G.w,fetchOrCreateTrustedFriendsList:Y.a}))),ie=a("FG+G"),se=a.p+"twitter-circle.b1a74a97.svg",re=a("TIdA"),oe=a("A91F");const le=C.a.f0598964,ce=C.a.ceec051c,de=C.a.fc5bfd96,ue=C.a.f5b3dc1e,he=y.a.create((e=>({root:{flexDirection:"column",paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,paddingTop:e.spaces.space12},createButton:{marginTop:e.spaces.space16,marginHorizontal:e.spaces.space16},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16},coverContainer:{height:"170px",width:"100%"}})));var pe=e=>{const{onAction:t,setShowTrustedFriendsModal:a}=e;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{accessibilityDescribedBy:"trusted-friends-education-popover",accessibilityLabelledBy:"trustd-friends-education-title",accessibilityRole:"dialog",style:he.root},r.a.createElement(R.a,{style:he.coverContainer},r.a.createElement(re.a,{accessibilityLabel:"",aspectMode:oe.a.COVER,image:se})),r.a.createElement(R.a,{style:he.title},r.a.createElement(f.b,{nativeID:"conversation-controls-title",size:"title3",style:he.title,weight:"bold"},le),r.a.createElement(f.b,{color:"gray700",nativeID:"conversation-controls-details",size:"body",style:he.createButton},ce),r.a.createElement(M.a,{onPress:()=>{t(),a(!0)},size:"xLarge",style:he.createButton,type:"primaryFilled"},de),r.a.createElement(M.a,{key:"button_cancel",onPress:()=>{t()},size:"xLarge",style:he.cancelButton,type:"primaryOutlined"},ue))))},me=a("7JQg"),ge=a("feu+"),be=a("cOhU"),fe=a("a5gf"),_e=a("Lsrn"),ye=a("k/Ka");const ve=(e={})=>Object(ye.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_e.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M1 7c0-.552.448-1 1-1h9.38c.545-2.275 2.83-3.678 5.104-3.135 1.552.37 2.764 1.583 3.135 3.135H22c.552 0 1 .448 1 1s-.448 1-1 1h-2.38c-.545 2.275-2.83 3.678-5.104 3.135-1.552-.37-2.764-1.583-3.135-3.135H2c-.552 0-1-.448-1-1zm21 9h-9.38c-.545-2.275-2.83-3.678-5.104-3.135-1.552.37-2.764 1.583-3.135 3.135H2c-.552 0-1 .448-1 1s.448 1 1 1h2.38c.545 2.275 2.83 3.678 5.104 3.135 1.552-.37 2.764-1.583 3.135-3.135H22c.552 0 1-.448 1-1s-.448-1-1-1z"})));ve.metadata={width:24,height:24};var Ce=ve;const we=C.a.e76b4486,Ee=C.a.j24c37b2,xe=C.a.bb55e8ee,Te=C.a.h3fad86e,Se=C.a.g31872be,Ie=C.a.b28ec850,Re=C.a.h031847a;function De(e){const{changeAudienceToTrustedFriends:t,history:a,setShowModal:n,trustedFriendsListId:i}=e,s=r.a.useCallback((()=>{t(),i&&(n(!1),a.push(`/i/circles/${i}/members/suggested`))}),[a,n,i,t]),o=r.a.useCallback((()=>{n(!1),t()}),[n,t]),l=r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{style:Me.contentWrapper},r.a.createElement(R.a,null,r.a.createElement(be.a,{style:Me.icon})),r.a.createElement(R.a,{style:Me.subtextContainer},r.a.createElement(f.b,{align:"left",color:"text",style:Me.subtextContainer,weight:"bold"},xe),r.a.createElement(f.b,{align:"left",color:"gray700"},Te))),r.a.createElement(R.a,{style:Me.contentWrapper},r.a.createElement(R.a,null,r.a.createElement(fe.a,{style:Me.icon})),r.a.createElement(R.a,{style:Me.subtextContainer},r.a.createElement(f.b,{color:"text",weight:"bold"},Se),r.a.createElement(f.b,{color:"gray700"},Ie))),r.a.createElement(R.a,{style:Me.contentWrapper},r.a.createElement(R.a,null,r.a.createElement(Ce,{style:Me.icon})),r.a.createElement(R.a,{style:Me.subtextContainer},r.a.createElement(f.b,{color:"text",weight:"bold"},Re),r.a.createElement(f.b,{color:"gray700"},r.a.createElement(C.a.I18NFormatMessage,{$i18n:"c97dfde5"},r.a.createElement(f.b,{color:"text",link:"https://help.twitter.com/using-twitter/twitter-circle",style:Me.learnMore,weight:"bold",withUnderline:!0},C.a.i08a2509))))));return r.a.createElement(me.c,null,r.a.createElement(ge.a,{actionLabel:Ee,headline:we,onAction:s,onClose:o,subtext:l,withCloseButton:!0}))}const Me=y.a.create((e=>({subtextContainer:{display:"flex",flexDirection:"column",width:"100%"},icon:{color:e.colors.green500,paddingTop:e.spaces.space4,paddingRight:e.spaces.space24},learnMore:{whiteSpace:"nowrap"},contentWrapper:{display:"flex",flexDirection:"row",paddingTop:e.spaces.space32}})));var Pe=a("FGLp"),ke=a("X00g"),Ae=a("Sp5X"),Oe=a("efqG");let Le=C.a.baffe39a;const Fe=C.a.e815fc34,Be=C.a.aa4209e8,Ne=C.a.d0748dae,je=C.a.c33a97d6,Ve=C.a.a68885de,ze=C.a.c64974fc,Ue={viewType:"communities_controls"};const He=y.a.create((e=>({button:{paddingHorizontal:e.spaces.space4},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12},hidden:{visibility:"hidden"},icon:{marginLeft:e.spaces.space4,width:e.spaces.space16,height:e.spaces.space16},root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16}})));var We=ne((function(e){const[t,a]=r.a.useState(!1),[n,s]=r.a.useState(!1),{addEducationFlag:o,addTrustedFriendsEducationFlag:l,audienceControlsValue:c,disabled:d,educationalVisibilityFlag:h,hasMemberships:p,isAccountProtected:m,isC9sParticipationEnabled:g,isSuperFollowsCreator:b,isTrustedFriendsEnabled:f,onAudienceControlsValueChange:_,selectTrustedFriendsList:y,selectedCommunity:v,sliceModule:C,trustedFriendsCopyVariantValue:w,trustedFriendsEducationVisibilityFlag:E,updateSingleComposer:x}=e,T=c.communityIdValue||!1,S=c.exclusivityControlValue||!1,I=c.trustedFriendsValue||!1,D=null==y?void 0:y.rest_id,P=f&&E,k=h&&!v||P;f&&("followers"!==w&&"all_followers"!==w||m?"followers"===w&&m?Le=ze:"all_followers"===w&&m&&(Le=Ve):Le=je);let A,O=Le;if(T&&null!=v&&v.name?O=v.name:S?O=Be:I&&(O=Ne),S)A={color:"plum500",borderColor:"plum500",backgroundColor:"transparent"};else if(I)A={color:"green500",borderColor:"green500",backgroundColor:"transparent"};else if(T&&null!=v&&v.theme){const e=ke.a.getCommunityUIColorName(v.theme);A={color:e,borderColor:e,backgroundColor:"transparent"}}else A={type:"brandOutlined"};Object(Pe.a)((()=>{const{fetchOrCreateTrustedFriendsList:t}=e;f&&(null==t||t())}));const L=r.a.useCallback((()=>{s(!1),o(),l()}),[o,l]),F=r.a.useCallback((e=>P&&!T?r.a.createElement(pe,{history:Ae.a,onAction:e,setShowTrustedFriendsModal:a}):r.a.createElement(W,{audienceControlsValue:c,dismiss:e,everyoneLabel:Le,hasMemberships:p,history:Ae.a,isC9sParticipationEnabled:g,isSuperFollowsCreator:b,isTrustedFriendsEnabled:f,onAudienceControlsValueChange:e=>{L(),_(e)},sliceModule:C,trustedFriendsList:y,updateSingleComposer:x})),[L,C,x,c,p,g,b,y,_,T,P,f]),B=r.a.useCallback((()=>{D&&_({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsMemberCount:null==y?void 0:y.member_count,trustedFriendsValue:{trusted_friends_list_id:D}})}),[_,D,y]);return b||p||f&&e.selectTrustedFriendsList?r.a.createElement(u.a,{behavioralEventContext:Ue},r.a.createElement(R.a,{style:He.container},t?r.a.createElement(De,{changeAudienceToTrustedFriends:B,history:Ae.a,setShowModal:a,trustedFriendsListId:D}):null,r.a.createElement(Oe.a,{onDismiss:L,onOpen:()=>{s(!0)},renderContent:F,visibilityBehavior:k&&!t?"forceVisible":"interactive"},r.a.createElement(M.a,i()({accessibilityExpanded:n,accessibilityHasPopup:"menu",accessibilityLabel:Fe,accessibilityRole:"button",disabled:d,size:"xSmall"},A),O,r.a.createElement(ie.a,{style:He.icon}))))):null})),Ge=a("PKbs");const Ke=(e,t)=>{const a=t.selectedCommunityId;return a?h.c.select(e,a):void 0};var $e=Object(p.a)().propsFromState((()=>({community:Ke}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(J.createLocalApiErrorHandlerWithContextFactory)("COMMUNITY_RULES"),fetchCommunityIfNeeded:h.c.fetchOneIfNeeded}))),qe=a("YeIG"),Xe=a("21zW");const Qe=C.a.gfca5254,Je=C.a.f510c8b2,Ye=r.a.createElement(f.b,{weight:"bold"},Je),Ze=y.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},badgeStyle:{marginRight:e.spaces.space12},container:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12,alignItems:"baseline"},rulesHeader:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space12},ruleContainerStyle:{paddingHorizontal:e.spaces.space16,fontWeight:"normal"}})));var et=$e((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,selectedCommunityId:n,showMiddot:s})=>{r.a.useEffect((()=>{n&&Object(qe.a)(e)&&a(n).catch(t())}),[e,n,t,a]);const[o,l]=r.a.useState(!1),c=r.a.useCallback((t=>{if(null!=e&&e.rules){const{rules:t,theme:a}=e;return r.a.createElement(Ge.b,{badgeStyle:Ze.badgeStyle,headerContainerStyle:Ze.rulesHeader,heading:Ye,ruleContainerStyle:Ze.ruleContainerStyle,rules:t,theme:a})}return null}),[e]);if(null!=e&&e.rules&&e.rules.length>0){const{theme:t}=e,a={color:ke.a.getCommunityUIColorName(t),borderColor:"transparent",backgroundColor:"transparent"};return r.a.createElement(R.a,{style:Ze.container},s?r.a.createElement(Xe.a,null):null,r.a.createElement(Oe.a,{onDismiss:()=>l(!1),onOpen:()=>l(!0),renderContent:c},r.a.createElement(M.a,i()({accessibilityExpanded:o,accessibilityHasPopup:"dialog",accessibilityRole:"button",size:"xSmall",style:Ze.button},a),Qe)))}return null})),tt=a("ii+P"),at=a("4zmP");const nt=C.a.g46f363e,it={viewType:"rule_education"},st=()=>{const[e,t]=Object(tt.b)(Q.g);return r.a.useEffect((()=>t),[t]),e?r.a.createElement(R.a,{style:rt.container},r.a.createElement(at.a,{behavioralEventContext:it,onClose:t,text:nt,withCloseButton:!0})):null},rt=y.a.create((e=>({container:{marginBottom:e.spaces.space8}})));var ot=r.a.memo(st),lt=a("H7Rt"),ct=a("yZqq"),dt=a("v6aA");const ut=(e,t)=>Object(Q.E)(e,Q.s);var ht=Object(p.a)().propsFromState((()=>({shouldShowEducation:ut}))).propsFromActions((()=>({addEducationFlag:()=>Object(Q.A)(Q.s)}))),pt=a("9gvj");const mt=C.a.aa65a44a,gt={viewType:"persistent_conversation_controls_education"};const bt=y.a.create((e=>({container:{width:"100%"}})));var ft=ht((function({addEducationFlag:e,buttonRef:t,shouldShowEducation:a}){const{featureSwitches:n}=r.a.useContext(dt.a),i=()=>{e()};return r.a.useEffect((()=>i),[]),!0===n.getValueWithoutScribeImpression("conversation_controls_persistence_enabled")&&a?r.a.createElement(R.a,{style:bt.container},r.a.createElement(pt.a,{behavioralEventContext:gt,containerRef:t,onClose:i,text:mt})):null})),_t=a("DlMI"),yt=a("gBde"),vt=a("gUPl");const Ct=r.a.createElement(_t.a,null),wt=r.a.createElement(yt.a,null),Et=r.a.createElement(vt.a,null),xt=r.a.createElement(be.a,null),Tt=r.a.createElement(fe.a,null),St="conversation_control",It={viewType:St};Object.freeze(["community","by_invitation"]);var Rt=Object(I.a)((e=>{const{analytics:t,...a}=e,{disabled:n,isReply:i,trustedFriendsTweetAuthorScreenName:s,value:o}=e,l=C.a.bea21405;let c=C.a.c0857cce;i&&o===lt.a.trusted_friends_tweet&&(c=s?l({screenName:s}):C.a.d3922d78);const d=Object.freeze({all:{icon:Ct,label:C.a.i8ea6d4e},community:{icon:Et,label:C.a.ec5a4a26},by_invitation:{icon:wt,label:C.a.b454300a},community_members:{icon:xt,label:C.a.i13be5a0},super_followers_exclusive:{icon:Ct,label:C.a.f8393bda},trusted_friends_tweet:{icon:Tt,label:c}}),{icon:h,label:p}=d[o],[m,g]=r.a.useState(!1),b=r.a.useRef(null);Object(Pe.a)((()=>{o!==lt.a.all&&o!==lt.a.community_members&&g(!0)}));const f=r.a.useCallback((e=>{t.scribe({element:St,action:"click"})}),[t]);return r.a.createElement(u.a,{behavioralEventContext:It},r.a.createElement(R.a,{style:Dt.educationContainer},m?r.a.createElement(ft,{buttonRef:b}):null,r.a.createElement(R.a,{style:Dt.controlsContainer},r.a.createElement(ct.a,a,r.a.createElement(M.a,{disabled:n,icon:h,onPress:f,ref:b,size:"xSmall",style:Dt.button,type:"brandText"},p)))))}));const Dt=y.a.create((e=>({button:{paddingHorizontal:e.spacesPx.space8+e.spacesPx.space2},educationContainer:{display:"inline-flex",flexDirection:"column"},controlsContainer:{display:"inline-flex",flexDirection:"row",paddingBottom:e.spaces.space12}})));var Mt=a("krmn"),Pt=a("cIoY"),kt=a("w3n3"),At=a("MLl7"),Ot=a("1auM"),Lt=a("Nsha"),Ft=a.n(Lt),Bt=a("07FG"),Nt=a("Q8CU"),jt=a("QbaN"),Vt=a("VPdC"),zt=a("WPfJ");var Ut=y.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal},avatarContainerExpanded:{paddingTop:e.spaces.space4},avatarContainer:{justifyContent:"center"},avatar:{width:"100%"},controlsContainer:{marginLeft:-e.spacesPx.space8,borderBottomColor:e.colors.borderColor,borderBottomWidth:e.spaces.space1,flexWrap:"wrap",width:"100%"},mobileControlsLayout:{flexDirection:"column"},controlsLayout:{flexDirection:"row",alignItems:"center"},rightColumn:{paddingTop:e.spaces.space4,justifyContent:"center",position:"static",transitionProperty:"opacity, color",transitionDuration:"0.1s",transitionTimingFunction:"ease-out"},composeBoxContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"static",zIndex:1},inputArea:{zIndex:1},dragDrop:{borderColor:e.colors.transparent,borderRadius:e.borderRadii.small,borderStyle:"solid",borderWidth:e.borderWidths.medium},textInputArea:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",zIndex:zt.f},textInputStyle:{paddingHorizontal:0},textInputMobileCollapsed:{maxHeight:e.fontSizes.title4,padding:0,overflow:"hidden"},tweetAttachmentArea:{zIndex:zt.e},iconEmojiPicker:{zIndex:zt.c},toolBar:{alignItems:"center",backgroundColor:e.colors.cellBackground,flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",marginHorizontal:e.spaces.space2,zIndex:zt.a},firstToolBarButton:{marginLeft:`-${e.spaces.space8}`},toolBarButton:{marginHorizontal:0},toolBarIconsContainer:{alignItems:"center",flexDirection:"row",marginTop:e.spaces.space12},separator:{width:"1px",backgroundColor:e.colors.gray300,height:e.fontSizes.title2,marginRight:e.spaces.space12,marginLeft:`calc(${e.spaces.space12} - 2px)`},conversationLine:{alignSelf:"center",backgroundColor:e.colors.gray200,flexGrow:1,flexShrink:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginTop:e.spaces.space4,marginBottom:e.spaces.space4},conversationLineWithOverflow:{marginTop:`-${e.spaces.space4}`},attachmentContainer:{marginTop:e.spaces.space4,marginBottom:e.spaces.space4},mediaPreview:{marginTop:e.spaces.space4},quoteTweet:{backgroundColor:e.colors.transparent,marginTop:e.spaces.space4,marginBottom:0},addImageTextContainer:{alignSelf:"flex-start",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},addImageActionIcon:{marginHorizontal:e.spaces.space4},addImageTextPadding:{marginEnd:e.spaces.space48},imageActions:{alignItems:"center",flexDirection:"row",flexWrap:"wrap",marginTop:e.spaces.space4},blurStyle:{opacity:.5},inputStyle:{width:"100%"},collapsedInputStyle:{flexGrow:1,flexShrink:1},highlightedText:{borderRadius:e.borderRadii.large,paddingVertical:e.spaces.space12,paddingLeft:e.spaces.space12,marginTop:0,marginBottom:0},highlightedTextInner:{marginHorizontal:e.spaces.space4},taggedLocationButton:{paddingLeft:e.spacesPx.space8+e.spacesPx.space2,paddingRight:e.spacesPx.space8+e.spacesPx.space2,maxWidth:"100%"},taggedLocationContainer:{display:"inline-flex",flexDirection:"row",minWidth:0,flexShrink:1,paddingBottom:e.spaces.space12}})));const Ht=C.a.bdbcdd94;var Wt=({media:e,mediaAttachDisabled:t,onFilesAdded:a,setActiveParentKey:n})=>{const i=t||e.length>=4,s=e.length<3;return r.a.createElement(Vt.a,{acceptGifs:0===e.length,acceptVideo:0===e.length,accessibilityLabel:e.length>0?Ht:void 0,disabled:i,multiple:s,onChange:a,onPress:n,style:[Ut.toolBarButton,Ut.firstToolBarButton],type:"brandText"})},Gt=a("zTrU"),Kt=a("p+r5"),$t=a("GWvE");class qt extends r.a.Component{constructor(...e){super(...e),this._setInputRef=e=>{this._inputRef=e}}render(){const{autoFocus:e,defaultValue:t,editable:a,label:n,name:i,onBlur:s,onChange:o}=this.props;return r.a.createElement(R.a,{style:Xt.root},r.a.createElement(Kt.a,{autoCapitalize:"none",autoCorrect:!1,autoFocus:e,defaultValue:t,editable:a,label:n,maxLength:25,name:i,onBlur:s,onChange:o,ref:this._setInputRef,spellCheck:"false",style:Xt.formTextInput}))}get value(){return this._inputRef&&this._inputRef.getValue()}get isValid(){const{optional:e}=this.props;return!this.value&&e||this.value&&!Object($t.a)(this.value)&&this._inputRef&&this._inputRef.isValidLength()}}qt.defaultProps={autoFocus:!1,editable:!0,optional:!1};const Xt=y.a.create((e=>({root:{flexDirection:"row",flexShrink:1},action:{width:e.spaces.space40},addButton:{flexGrow:1,minHeight:"100%",padding:0},formTextInput:{flexGrow:1,flexShrink:1,marginVertical:0,paddingTop:0,paddingHorizontal:0,paddingBottom:e.spaces.space12}})));var Qt=qt,Jt=a("mtvn"),Yt=a("6XNv");class Zt extends r.a.PureComponent{render(){const{editable:e,label:t,last:a,max:n,min:i,onChange:s,testID:o,value:l}=this.props,c=!e||i===n,d=l.toString(),u=Object(Jt.a)(i,n+1).map((e=>({label:`${C.a.ia24dc8d(e)}`,value:`${e}`})));return r.a.createElement(Yt.a,{disabled:c,label:t,onChange:s,options:u,style:[ea.selector,!a&&ea.rightMargin],testID:o,value:d})}}Zt.defaultProps={last:!1};const ea=y.a.create((e=>({rightMargin:{marginRight:e.spaces.space20},selector:{flexGrow:1}})));var ta=Zt,aa="addPollChoice",na="selectPollDays",ia="selectPollHours",sa="selectPollMinutes",ra="removePollButton";const oa=C.a.caf8edc4,la=C.a.g93586be,ca=C.a.d073b644,da=C.a.a2f0728e;class ua extends r.a.Component{constructor(e,t){super(e,t),this._handleDaysChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{hours:n,minutes:i}=e.duration,s=0===a&&0===n&&0===i?1:7===a?0:n,r={days:a,hours:s,minutes:7===a?0:0===a&&0===s&&i<5?5:i};return t&&t(r),{duration:r}}))},this._handleHoursChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:n,minutes:i}=e.duration,s={days:n,hours:a,minutes:0===n&&0===a&&i<5?5:i};return t&&t(s),{duration:s}}))},this._handleMinutesChange=e=>{const{onChange:t}=this.props,a=parseInt(e,10);this.setState((e=>{const{days:n,hours:i}=e.duration,s={days:n,hours:i,minutes:a};return t&&t(s),{duration:s}}))},this.state={duration:e.initialDuration}}render(){const{isActive:e,style:t}=this.props;return r.a.createElement(R.a,{style:t},r.a.createElement(f.b,{style:ha.durationLabel},e?oa:""),this._renderPicker())}_renderPicker(){const{editable:e,isActive:t}=this.props,{duration:{days:a,hours:n,minutes:i}}=this.state;return r.a.createElement(R.a,{style:ha.durationControls},r.a.createElement(ta,{editable:e&&t,label:la,max:7,min:0,onChange:this._handleDaysChange,testID:na,value:a}),r.a.createElement(ta,{editable:e&&t,label:ca,max:7===a?0:23,min:0,onChange:this._handleHoursChange,testID:ia,value:n}),r.a.createElement(ta,{editable:e&&t,label:da,last:!0,max:7===a?0:59,min:0===a&&0===n?5:0,onChange:this._handleMinutesChange,testID:sa,value:i}))}get duration(){return this.state.duration}}ua.defaultProps={editable:!0,initialDuration:{days:1,hours:0,minutes:0}};const ha=y.a.create((e=>({durationControls:{flexDirection:"row",justifyContent:"space-between"},durationLabel:{marginBottom:e.spaces.space4}})));var pa=ua,ma=a("iY63"),ga=a("jtO7");const ba=C.a.g589c2e2,fa=C.a.a1e6c3a2,_a=C.a.a739e006,ya=C.a.d89a5b92,va=C.a.c2a8118e,Ca=C.a.a8ede1de,wa=C.a.af40a8e0;class Ea extends r.a.Component{constructor(e,t){super(e,t),this._setChoice1Ref=e=>{this._choice1=e},this._setChoice2Ref=e=>{this._choice2=e},this._setChoice3Ref=e=>{this._choice3=e},this._setChoice4Ref=e=>{this._choice4=e},this._setDurationPickerRef=e=>{this._durationPicker=e},this._handleValidation=()=>{const{onChange:e,onInvalid:t,onValid:a}=this.props,n=this.choices,{_choice1:i,_choice2:s,_choice3:r,_choice4:o}=this,l=[i,s,r,o].filter(Boolean).every((e=>e.isValid));n&&n.length>=2&&l?a():t(),e&&e({choices:n,duration:this.duration})},this._handleAdd=()=>{const{analytics:e}=this.props;e.scribe({element:"add_poll_option",action:"click"}),this.setState((({choiceCount:e})=>({autoFocus:!0,choiceCount:e+1})))},this._handleDurationChange=e=>{const{onChange:t}=this.props;t&&t({choices:this.choices,duration:e})},this._handleBlur=()=>{const{onBlur:e}=this.props;null==e||e()};const{initialChoices:a}=e,n=void 0===a,i=(a||[]).length,s=i>2?i:2;this.state={autoFocus:n,choiceCount:s}}_renderChoices(){const{editable:e,initialChoices:t=[],isActive:a}=this.props,{autoFocus:n,choiceCount:i}=this.state,s=r.a.createElement(R.a,{style:xa.rightColumn},i<4?r.a.createElement(M.a,{accessibilityLabel:Ca,disabled:!(e&&a),hoverLabel:{label:wa},icon:r.a.createElement(ma.a,null),onPress:this._handleAdd,size:"medium",style:xa.addButton,testID:aa,type:"brandText"}):null);return r.a.createElement(R.a,{style:xa.choicesAndAddButton},r.a.createElement(R.a,{style:xa.choices},r.a.createElement(Qt,{autoFocus:n,defaultValue:t[0],editable:e&&a,label:ba,name:"Choice1",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice1Ref}),r.a.createElement(Qt,{defaultValue:t[1],editable:e&&a,label:fa,name:"Choice2",onBlur:this._handleBlur,onChange:this._handleValidation,ref:this._setChoice2Ref}),i>=3?r.a.createElement(Qt,{autoFocus:n,defaultValue:t[2],editable:e&&a,label:_a,name:"Choice3",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice3Ref}):null,4===i?r.a.createElement(Qt,{autoFocus:n,defaultValue:t[3],editable:e&&a,label:ya,name:"Choice4",onBlur:this._handleBlur,onChange:this._handleValidation,optional:!0,ref:this._setChoice4Ref}):null),s)}render(){const{editable:e,initialDuration:t,isActive:a,onRemove:n}=this.props;return r.a.createElement(R.a,{style:xa.root},this._renderChoices(),r.a.createElement(pa,{editable:e,initialDuration:t,isActive:a,onChange:this._handleDurationChange,ref:this._setDurationPickerRef,style:xa.durationPicker}),r.a.createElement(R.a,{style:xa.removePollButton},r.a.createElement(ga.a,{color:"red500",label:va,onPress:n,testID:ra})))}get choices(){const{_choice1:e,_choice2:t,_choice3:a,_choice4:n}=this;return[e&&e.value,t&&t.value,a&&a.value,n&&n.value].filter(Boolean)}get duration(){return this._durationPicker?this._durationPicker.duration:void 0}}const xa=y.a.create((e=>({root:{backgroundColor:e.colors.transparent,borderColor:e.colors.nestedBorderColor,borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.small,flexDirection:"column",overflow:"hidden",paddingTop:e.spaces.space12},choicesAndAddButton:{paddingHorizontal:e.spaces.space12,flexDirection:"row"},choices:{flexGrow:1,flexShrink:1},removePollButton:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},rightColumn:{flexDirection:"column-reverse"},addButton:{marginBottom:e.spaces.space24,marginLeft:e.spaces.space4},durationPicker:{borderTopColor:e.colors.nestedBorderColor,borderTopWidth:e.borderWidths.small,borderBottomColor:e.colors.nestedBorderColor,borderBottomWidth:e.borderWidths.small,padding:e.spaces.space12}})));var Ta=Object(I.a)(Ea),Sa=a("+d3d");var Ia=({composerIndex:e,editable:t,initialChoices:a,initialDuration:n,isActive:s,isPollValid:o,updateComposer:l})=>{const c=Object(I.b)(),{onChange:d,...u}=r.a.useMemo((()=>({onChange(t){l({pollChoices:null==t?void 0:t.choices,pollDuration:null==t?void 0:t.duration},e)},onValid(){!o&&l({pollValid:!0},e)},onInvalid(){o&&l({pollValid:!1},e)},onRemove(){c.scribe({element:"remove_poll",action:"click"}),l({pollActive:!1},e)}})),[c,o,l,e]),h=r.a.useMemo((()=>Object(Sa.a)((({choices:e,duration:t})=>{d({choices:e,duration:t})}),200,{leading:!0,trailing:!0})),[d]),p=r.a.useCallback((()=>{h.flush()}),[h]);return r.a.createElement(Ta,i()({editable:t,initialChoices:a,initialDuration:n,isActive:s,onBlur:p,onChange:h},u))};const Ra=y.a.create((e=>({container:{marginBottom:e.spaces.space4},link:{color:"black"}}))),Da=C.a.i859676c,Ma=r.a.createElement(C.a.I18NFormatMessage,{$i18n:"a02c8d75"},r.a.createElement(f.b,{link:"/settings/audience_and_tagging",style:Ra.link,withInteractiveStyling:!0,withUnderline:!0},C.a.i3a8d60a));function Pa(){return r.a.createElement(R.a,{style:Ra.container},r.a.createElement(at.a,{headline:Da,text:Ma}))}var ka=a("b5s6"),Aa=a("rcen"),Oa=a("zmS9"),La="addButton",Fa="addSubtitlesLabel",Ba="altTextLabel",Na="altTextWrapper",ja="tagPeopleLabel",Va="attachments",za="createPollButton",Ua="geoButton",Ha="gifSearchButton",Wa="scheduleOption",Ga="taggedUsersLabel",Ka="tweetTextarea_",$a="toolBar",qa="scheduledTweetIndicator",Xa=a("xM7j"),Qa=a("6OUF"),Ja=a("tZIO"),Ya=a("5mJL"),Za=a("DNho"),en=a("oSwX"),tn=a("rFBM"),an=a("zfvc"),nn=a("Ujvi"),sn=a("yTN1"),rn=a("gpVt"),on=a("hOZg"),ln=a("ll3R"),cn=a("J0mu"),dn=a("EfHu"),un=a("KrGU"),hn=a("boUI"),pn=a("6ZHn"),mn=a("/WPq"),gn=a("wpLu"),bn=a("pHub"),fn=a("8A5z"),_n=a("G31s"),yn=a("S1qy"),vn=a.n(yn),Cn=a("cjAp"),wn=a.n(Cn);const En=C.a.f0afcc0e,xn=C.a.ha5e2e7a,Tn=C.a.a3de3b68,Sn=C.a.cc2b28fc,In=C.a.g45af04e,Rn=C.a.j1d5791c,Dn=C.a.ee9c4014,Mn=C.a.af40a8e0,Pn=C.a.e68b09b4,kn=C.a.ec10ee02,An=C.a.h735a98e,On=C.a.c4ccfbe2,Ln=C.a.j499fbcb,Fn=C.a.b7d8e3f1,Bn=C.a.d1175c78,Nn=C.a.bf4e9d7a,jn=C.a.e0342f98,Vn=C.a.e349147c,zn=C.a.e3a24e4c,Un=C.a.fbd24526,Hn=C.a.de4669e2,Wn=C.a.d2c7a41c,Gn=C.a.f7364fa2,Kn=["ja","zh-cn","zh-tw","ko"],$n=C.a.ia24dc8d,qn=r.a.createElement(on.a,null),Xn=r.a.createElement(ma.a,null),Qn=r.a.createElement(ln.a,null),Jn=r.a.createElement(cn.a,null),Yn={viewType:"schedule_tweet"},Zn={viewType:"add_poll"},ei={viewType:"add_composer"},ti={viewType:"tag_location"};class ai extends r.a.Component{constructor(e,t){super(e,t),this._handleConversationControlsValueChange=e=>{this._handleAudienceControlsValueChange({_type:"conversation_controls",conversationControlsValue:e})},this._handleAudienceControlsValueChange=e=>{this.props.updateAudienceControlsValue(e)},this._triggerConversationControlsImpression=Object(Gt.a)((()=>this.context.featureSwitches.isTrue("conversation_controls_limited_replies_creation_enabled"))),this._shouldRenderControls=(e,t)=>{const{isFocused:a}=this.state,{audienceControlsValue:n,isActive:i,isInline:s,isReply:r}=this.props;if("conversation"===t&&(n.conversationControlsValue===lt.a.community_members||n.conversationControlsValue===lt.a.super_followers_exclusive||n.conversationControlsValue===lt.a.trusted_friends_tweet)&&r)return!0;return i&&!r&&(!s||(a||e))},this._renderConversationControls=e=>{const{isFocused:t}=this.state,{audienceControlsValue:a,isEdit:n,isInline:i,isReply:s,trustedFriendsTweetAuthorScreenName:o}=this.props;if(s||!t&&i||this._triggerConversationControlsImpression(),!this._conversationControlsCreationEnabled)return null;const l=a.conversationControlsValue,c=this._shouldRenderControls(e,"conversation"),d=!(l!==lt.a.community_members&&l!==lt.a.super_followers_exclusive&&l!==lt.a.trusted_friends_tweet&&!n)||this._isScheduled();return c?r.a.createElement(Rt,{disabled:d,isReply:s,onChange:this._handleConversationControlsValueChange,trustedFriendsTweetAuthorScreenName:o,value:l}):null},this._renderTaggedLocation=e=>r.a.createElement(R.a,{style:Ut.taggedLocationContainer},r.a.createElement(M.a,{icon:r.a.createElement(dn.a,null),onPress:this._handleGeoButtonClick,size:"xSmall",style:Ut.taggedLocationButton,type:"brandText"},e.place.full_name)),this._renderMainContent=()=>{const{additionalToolbarContent:e,data:t,index:a,isExpanded:n,isInline:i,isInlineReply:s,onTypeaheadStateChange:o,richTextInputContext:l}=this.props,{cardUrl:c,media:d,pollActive:u,quotedStatus:h,text:p}=t,m=Object(rn.b)(p)||c&&!Object(Bt.a)(c)&&[c],g=!!d.length||u||!!h,b=this.props.typeaheadWrapper,f=!this._isEmpty();return r.a.createElement(R.a,{style:Ut.textInputArea},r.a.createElement(R.a,{style:n?Ut.inputStyle:Ut.collapsedInputStyle},this._renderAudienceControls(f),r.a.createElement(b,{contextText:p,isInline:i,isInlineReply:s,onTextUpdated:l?this._handleRichTextChange:this._handlePlainTextChange,onTypeaheadStateChange:o},this._renderFieldTextInput),m&&!g?r.a.createElement(rn.a,{index:a,isCardPreviewTombstoned:Object(Bt.a)(c),urls:m}):null),n?null:e)},this._renderFieldTextInput=e=>{const{autoFocus:t,data:a,editable:n,index:s,isActive:o,isExpanded:l,isInline:c,isInlineReply:d,isLast:u,keyCommandHandlers:h,onTextInputBlur:p,positionCursorAtBeginning:m,richTextInputContext:g}=this.props,{isFocused:b}=this.state,{text:f}=a,_=0===s&&u,y=!!g,{dismissComposerCommandName:v,element:C,sendTweetCommandName:w}=g||{},E=d&&!g&&!l,x=g?{onChange:this._getHandleRichTextChange(e),richTextInputContext:{dismissComposerCommandName:v,editorState:this.state.editorState,element:C,sendTweetCommandName:w}}:{onChange:this._getHandlePlainTextChange(e)};return r.a.createElement(Qa.a,i()({appTextSize:"headline1",ariaLabel:Tn,autoFocus:t||o&&!c,closeButton:o&&(this._deleteNonemptyTweetstormComposerEnabled||this._isEmpty())&&!_?this._renderCloseButton():void 0,contentBelow:this._renderTweetAttachment(),editable:n,inputStyle:[Ut.textInputStyle,E&&Ut.textInputMobileCollapsed],keyCommandHandlers:h,maxNumberOfLines:y?30:10,multiline:!0,numberOfLines:this._calcNumberOfLines(),onBlur:p,onFilesAdded:this._handleFilesAdded,placeholder:this._getPlaceHolderText(),positionCursorAtBeginning:m,positionCursorAtEnd:!m,ref:this._setTextInputRef,styleType:"selection",testID:`${Ka}${s}`,useCacheForDOMMeasurements:b,value:f},x))},this._getHandleRichTextChange=Object(Gt.a)((e=>t=>{e(t),this._handleRichTextChange(t)})),this._getHandlePlainTextChange=Object(Gt.a)((e=>t=>{e(t),this._handlePlainTextChange(t)})),this._renderCommunityTweetFromProtectedUserCallout=()=>{const{index:e,isCommunityTweetFromProtectedUser:t}=this.props;return 0===e&&t?r.a.createElement(Pa,null):null},this._renderAudienceControls=e=>{const{audienceControlsValue:t,index:a,isAccountProtected:n,isEdit:i,isSuperFollowsCreator:s}=this.props,o=this.context.featureSwitches.isTrue("c9s_participation_enabled"),l=this.context.featureSwitches.isTrue("super_follow_exclusive_tweet_creation_api_enabled"),c=this.context.featureSwitches.isTrue("trusted_friends_tweet_creation_enabled"),d=this.context.featureSwitches.getStringValue("trusted_friends_copy_variant");return this._shouldRenderControls(e,"audience")&&0===a&&(o||l||c)?r.a.createElement(We,{audienceControlsValue:t,disabled:i,isAccountProtected:n,isC9sParticipationEnabled:o,isSuperFollowsCreator:s&&l,isTrustedFriendsEnabled:c,onAudienceControlsValueChange:this._handleAudienceControlsValueChange,trustedFriendsCopyVariantValue:d}):null},this._renderCommunitiesRulesEducation=()=>this.shouldRenderCommunitiesRules?r.a.createElement(ot,null):null,this._renderCommunitiesRules=e=>{const{audienceControlsValue:t}=this.props,a=t.communityIdValue||void 0;return this.shouldRenderCommunitiesRules&&a?r.a.createElement(et,{selectedCommunityId:a,showMiddot:!e}):null},this._calcNumberOfLines=()=>{const{data:e,isActive:t,isInline:a,richTextInputContext:n}=this.props,i=!!n,{media:s,pollActive:r,quotedStatus:o}=e,l=!!s.length||!!r||!!o;return i&&(a||l)||!t?1:4},this._renderScheduledTweetLegend=()=>{const{scheduledFor:e}=this.props;return r.a.createElement(Oa.a,{onPress:this._handlePressScheduledTweetLegend,scheduledFor:e,testID:qa})},this._handlePressScheduledTweetLegend=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"tweet_legend",action:"click"}),a()},this._renderEmojiPicker=()=>r.a.createElement(Mt.a,{onEmojiSelect:this._handleInsertEmoji,size:"medium",style:this._getEmojiPickerButtonStyles(),textInputRef:this._textInputRef||void 0}),this._getEmojiPickerButtonStyles=Object(Gt.a)((()=>[Ut.iconEmojiPicker,Ut.toolBarButton])),this._isSchedulingDisabled=()=>{const{audienceControlsValue:e,data:{media:t,mediaTags:a,pollActive:n,quotedStatus:i,text:s},index:r,isEdit:o,isLast:l}=this.props,c=0===r&&l,d=e.conversationControlsValue!==lt.a.all;return Boolean(n||o||!c||i&&""===s&&!t.length||d||a.length>0)},this._renderSchedulingButton=()=>r.a.createElement(M.a,{accessibilityLabel:xn,behavioralEventContext:Yn,disabled:this._isSchedulingDisabled(),hoverLabel:{label:An},icon:Jn,onClick:this._handleClickScheduler,size:"medium",style:Ut.toolBarButton,testID:Wa,type:"brandText"}),this._handleClickScheduler=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/schedule"),e.scribe({element:"schedule_tweet",action:"click"}),a()},this._renderCloseButton=()=>{const{onRemoveComposer:e}=this.props;return r.a.createElement(M.a,{accessibilityLabel:Dn,hoverLabel:{label:Pn},icon:qn,onPress:e,size:"xSmall",type:"brandText"})},this._renderTweetAttachment=()=>{const{data:e,editable:t,index:a,isActive:n,updateSingleComposer:i}=this.props,{media:s,pollActive:o,pollChoices:l,pollDuration:c,quotedStatus:d}=e;if(0===s.length&&!o&&!d)return null;const u=this.hasAttachedVideo&&"subtitles",h=this.hasAttachedImage?this._handleClickMediaDetail("crop"):void 0,p=this.hasAttachedImage||this.hasAttachedVideo?this._handleClickMediaDetail("sensitive_media"):void 0,m=this.hasAttachedImage?this._handleClickMediaDetail("crop"):u?this._handleClickMediaDetail(u):void 0;return r.a.createElement(R.a,{onClick:this._handleFocus,style:[Ut.attachmentContainer,Ut.tweetAttachmentArea],testID:Va},s.length>0?r.a.createElement(_n.a,{editable:t,isActive:n,media:s,onClickMedia:this.isEditMediaEnabled?h:void 0,onEditMedia:this.isEditMediaEnabled?m:void 0,onEditSensitiveWarning:this.isEditMediaEnabled?p:void 0,onRemoveMedia:this._handleMediaRemoveFactory,onSetMediaPreviewRef:this._handleSetMediaPreviewRef,style:Ut.mediaPreview}):null,n?this._renderMediaActions():null,o?r.a.createElement(Ia,{composerIndex:a,editable:t,initialChoices:l,initialDuration:c,isActive:n,isPollValid:e.pollValid,updateComposer:i}):null,d?this._renderQuoteTweet(d):null)},this._renderQuoteTweet=e=>{const{data:{media:t}}=this.props,a=e.tombstoneInfo;return a&&a.richText?r.a.createElement(Xa.a,null,r.a.createElement(Aa.a,{entities:a.richText.entities,rtl:a.richText.rtl,text:a.richText.text})):r.a.createElement(ka.a,{isCondensed:t.length>0,style:Ut.quoteTweet,tweetId:e.id_str,withLink:!1,withUserHoverCard:!1})},this._renderToolbar=e=>{const{additionalToolbarContent:t,data:{media:a},hidePoll:n,hideScheduling:i,isInlineReply:s,isReply:o,isSelfThreadReply:l,richTextInputContext:c,setActiveParentKey:d}=this.props,u=!!c,h=!s&&!n,p=!s&&!i,m=this.context.featureSwitches.isTrue("responsive_web_reply_storm_enabled"),g=e&&(!o||l||m);return r.a.createElement(R.a,{style:Ut.toolBar,testID:$a},r.a.createElement(R.a,{style:Ut.toolBarIconsContainer},r.a.createElement(Wt,{media:a,mediaAttachDisabled:this.mediaAttachDisabled,onFilesAdded:this._handleFilesAdded,setActiveParentKey:d}),this._renderGifButton(),h?this._renderPollButton():null,u?this._renderEmojiPicker():null,p?this._renderSchedulingButton():null,this._renderGeoButton()),r.a.createElement(R.a,{style:Ut.toolBarIconsContainer},e?this._renderCountdownCircle():null,g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{style:Ut.separator}),this._renderAddComposerButton()),t))},this._addOverflowStyle=e=>{const{richTextInputContext:t}=this.props;if(!t)return;const a=e.getCurrentContent().getPlainText(),n=a.length,i=this._getParsedTweet(a).validRangeEnd,s=i+1<n;if(this.state.hasOverflowStyle||s){const a=s?i+1:-1;return{editorState:t.updateOverflowStyle&&t.updateOverflowStyle(e,a,this.state.hasOverflowStyle),hasOverflowStyle:s}}return{editorState:e,hasOverflowStyle:s}},this._handleRichTextChange=e=>{const{richTextInputContext:t}=this.props,a=e.getCurrentContent().getPlainText();if(t){const a=t.convertEmojiToEntities(e);this.setState(this._addOverflowStyle(a))}this._handleTextValueChange(a)},this._handlePlainTextChange=e=>{const t=Ja.a.replaceCarriageReturns(e.target.value);this._handleTextValueChange(t)},this._handleTextValueChange=e=>{const{data:{key:t,text:a},onTextChange:n}=this.props;a!==e&&n(e,t)},this._handleClickAltTextShortcut=()=>{const{analytics:e}=this.props;e.scribe({element:"alt_text_button",action:"click"})},this._handleClickSubtitlesShortcut=()=>{const{analytics:e}=this.props;e.scribe({element:"subtitles_button",action:"click"})},this._handleClickMediaDetail=e=>t=>()=>{const{analytics:a,history:n}=this.props;a.scribe({element:"media_detail_button",action:"click"}),(this.hasAttachedImage||this.hasAttachedVideo)&&n.push("/compose/tweet/media",{mediaId:t,tab:e})},this._handleFilesAdded=e=>{const{addToast:t,data:{pollActive:a},onFilesAdded:n}=this.props;a?t({text:Sn}):this.isEditMediaEnabled&&n(e)},this._handleMediaRemoveFactory=e=>()=>{this.props.onRemoveMedia(this.props.index,e)},this._handleInsertEmoji=e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a||!t)return;const n=a.insertTextAtCursor(t,e.text);this._handleRichTextChange(n)},this._validateMedia=e=>{const{data:{media:t}}=this.props;return d.c(t.concat(e))},this._handlePollAdd=()=>{const{analytics:e,index:t,updateSingleComposer:a}=this.props;e.scribe({element:"add_poll",action:"click"}),a({pollActive:!0},t)},this._handleGeoButtonClick=()=>{const{analytics:e,history:t,setActiveParentKey:a}=this.props;t.push("/compose/tweet/place_picker"),e.scribe({element:"tag_location",action:"click"}),a()},this._handleWrapperClick=e=>{e.target instanceof Element&&e.target.closest('[role="button"],a,input,textarea,select')||this.focus()},this._handleFocus=()=>{const{index:e,isActive:t,onFocus:a,setActiveParentKey:n}=this.props;n(),t||(window.requestAnimationFrame((()=>{this._mediaPreviewRef&&this._mediaPreviewRef.playVideo()})),a(e))},this._handleEditorFocus=()=>this.setState({isFocused:!0}),this._formatCountdownNumber=e=>$n(Math.ceil(e/this._userLanguageWeight)),this._getPlaceHolderText=()=>{const{data:{pollActive:e,quotedStatus:t},index:a,isReply:n,isSelfThreadReply:i}=this.props;return t?Hn:e?Gn:this.isReplyOrReplyThread&&0===a?Wn:n&&!i&&a>0?Un:i||a>0?zn:Vn},this._getNumberOfAltTextEntries=()=>{const{data:{media:e}}=this.props;return e.reduce(((e,t)=>{var a;return null!=(a=t.mediaMetadata)&&a.altText?e+1:e}),0)},this._getParsedTweet=Object(Gt.a)((e=>{const t=wn.a[this.props.twitterTextConfigurationVersion];return vn()(e,t)})),this._isEmpty=()=>{const{data:e}=this.props;return Object(Nt.c)(e)},this._isScheduled=()=>{const{data:{scheduledFor:e}}=this.props;return Object(jt.h)(e)},this._autotagLocationIfNeeded=()=>{const{data:{taggedLocation:e},fetchAutotaggedLocationIfNeeded:t,index:a,updateSingleComposer:n}=this.props;t().then((t=>{void 0===e&&n({taggedLocation:null!=t?t:null},a)}))},this._handleSetMediaPreviewRef=e=>{this._mediaPreviewRef=e},this._setTextInputRef=e=>{this._textInputRef=e};const{data:{text:a},richTextInputContext:n,userLanguage:s}=e,{initEditorState:o}=n||{};this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._deleteNonemptyTweetstormComposerEnabled=this.context.featureSwitches.isTrue("responsive_web_delete_nonempty_tweetstorm_composer_enabled"),this._userLanguageWeight=s&&Kn.indexOf(s)>-1?2:1,this._autotagLocationIfNeeded(),this.state={editorState:o?o(a):null,hasOverflowStyle:!1,isFocused:!1}}componentDidUpdate(e){(this.hasExternalMedia||this.props.data.media.some((e=>e.mediaFile&&!(e.mediaFile instanceof Ot.a)&&e.mediaFile.isVideo)))&&e.isActive&&!this.props.isActive&&this._mediaPreviewRef&&this._mediaPreviewRef.pauseVideo()}focus(){this._textInputRef&&this._textInputRef.focus()}render(){const{data:{taggedLocation:e},isActive:t,isExpanded:a,isInline:n,isLast:i,loggedInUser:s,windowWidth:o,withAvatar:l}=this.props,c=!this._isEmpty(),d=this._shouldRenderControls(c),u=o<y.a.theme.breakpoints.small;return r.a.createElement(R.a,{onClick:this._handleWrapperClick,onFocus:this._handleFocus,style:[Ut.root,!t&&Ut.blurStyle]},this._renderCommunityTweetFromProtectedUserCallout(),r.a.createElement(Ya.a,{avatarCell:r.a.createElement(r.a.Fragment,null,l?r.a.createElement(Za.a.Consumer,null,(({avatarSize:e})=>r.a.createElement(en.default,{accessibilityLabel:s?s.name:void 0,screenName:s?s.screen_name:void 0,size:e,style:Ut.avatar,uri:s?s.profile_image_url_https:void 0,withLink:n}))):null,i?null:r.a.createElement(R.a,{style:[Ut.conversationLine,!l&&Ut.conversationLineWithOverflow]})),avatarCellStyle:a?Ut.avatarContainerExpanded:Ut.avatarContainer,cellStyle:Ut.rightColumn},this._renderScheduledTweetLegend(),r.a.createElement(R.a,{onFocus:this._handleEditorFocus,style:Ut.inputArea},r.a.createElement(tn.a,{allowDragDrop:!this.mediaAttachDisabled,onDragEnter:this._handleFocus,onFilesAdded:this._handleFilesAdded,style:Ut.dragDrop},(e=>r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{style:Ut.composeBoxContainer},this._renderMainContent()))))),this._renderCommunitiesRulesEducation(),r.a.createElement(R.a,{style:[(d||e)&&Ut.controlsContainer,u?Ut.mobileControlsLayout:Ut.controlsLayout]},this._renderConversationControls(c),this._renderCommunitiesRules(u),e?this._renderTaggedLocation(e):null),r.a.createElement(an.a,{show:t&&a},this._renderToolbar(c))))}_renderGifButton(){const{data:{media:e,pollActive:t},history:a,loggedInUser:n,setActiveParentKey:i}=this.props,s=t||e.length||!n||!this.isEditMediaEnabled;return r.a.createElement(kt.a,{enabled:!s,gifSearchKeySource:At.a.Composition,history:a,onPress:i,testID:Ha})}_renderPollButton(){const{data:{media:e,pollActive:t,quotedStatus:a},isEdit:n,loggedInUser:i}=this.props,s=this._isScheduled(),o=!!(t||e.length||a||s||!i||n);return r.a.createElement(M.a,{accessibilityLabel:En,behavioralEventContext:Zn,disabled:o,hoverLabel:{label:kn},icon:Qn,onPress:this._handlePollAdd,size:"medium",style:Ut.toolBarButton,testID:za,type:"brandText"})}_renderGeoButton(){const{data:{taggedLocation:e},geoEnabled:t,loggedInUser:a}=this.props,n=!(t&&a),i=e?r.a.createElement(dn.a,null):r.a.createElement(un.a,null);return r.a.createElement(M.a,{accessibilityLabel:On,behavioralEventContext:ti,disabled:n,hoverLabel:{label:On},icon:i,onPress:this._handleGeoButtonClick,size:"medium",style:Ut.toolBarButton,testID:Ua,type:"brandText"})}_renderMediaActions(){const{data:{gifMetadata:e,media:t,mediaTags:a}}=this.props,n=0!==a.length,i=t.some((e=>e.mediaFile&&e.mediaFile.isGif))||this.hasExternalMedia;if(!(this.hasAttachedImage||this.hasAttachedVideo||e||i))return null;const s=this.context.featureSwitches.isTrue("rweb_video_tagging_enabled");return r.a.createElement(R.a,{style:Ut.imageActions},e&&e.url&&e.provider?r.a.createElement(R.a,{style:Ut.addImageTextPadding},r.a.createElement(Pt.a,{gifUrl:e.url,provider:e.provider})):null,!this.hasAttachedImage&&!s||this._isScheduled()?null:r.a.createElement(f.b,{accessibilityLabel:Bn,color:"gray700",link:"/compose/tweet/tags",style:[Ut.addImageTextContainer,Ut.addImageTextPadding]},n?this._renderTaggedUsers():this._renderTagPeopleLabel()),this.hasAttachedImage||i?r.a.createElement(f.b,{accessibilityLabel:Ln({numberOfImages:t.length}),color:"gray700",link:this.isEditMediaEnabled?{pathname:"/compose/tweet/media",state:{mediaId:t[0].id,tab:"alt_text"}}:void 0,onPress:this.isEditMediaEnabled?this._handleClickAltTextShortcut:void 0,style:Ut.addImageTextContainer,testID:Na},this._renderAltTextLabel()):null,this.hasAttachedVideo?this._renderSubtitlesLabel():null)}_renderTagPeopleLabel(){return r.a.createElement(f.b,{color:"gray700",size:"subtext2",testID:ja},r.a.createElement(hn.a,{style:Ut.addImageActionIcon}),Bn)}_renderTaggedUsers(){const{data:{mediaTags:e},loggedInUser:t}=this.props,a=e.map((e=>({name:e.data.name,screen_name:e.data.screen_name,type:e.type,user_id:e.data.id_str})));return r.a.createElement(f.b,{color:"gray700",size:"subtext2",testID:Ga},r.a.createElement(pn.a,{style:Ut.addImageActionIcon}),r.a.createElement(nn.a,{loggedInUserId:null==t?void 0:t.id_str,users:a}))}_renderAltTextLabel(){const{data:{media:e}}=this.props,t=e[0].mediaMetadata;return this.hasAttachedAltText?e.length>1?r.a.createElement(f.b,{size:"subtext2",testID:Ba},r.a.createElement(gn.a,{style:Ut.addImageActionIcon}),Fn({numberOfAltTextEntries:this._getNumberOfAltTextEntries()})):r.a.createElement(f.b,{numberOfLines:1,size:"subtext2",testID:Ba},r.a.createElement(gn.a,{style:Ut.addImageActionIcon}),null==t?void 0:t.altText):r.a.createElement(f.b,{size:"subtext2",testID:Ba},r.a.createElement(mn.a,{style:Ut.addImageActionIcon}),Ln({numberOfImages:e.length}))}_renderSubtitlesLabel(){const{data:{media:e}}=this.props,t=this.attachedSubtitles?bn.a:fn.a;return r.a.createElement(f.b,{accessibilityRole:"button",color:"gray700",link:{pathname:"/compose/tweet/media",state:{mediaId:e[0].id,tab:"subtitles"}},onPress:this._handleClickSubtitlesShortcut,size:"subtext2",style:Ut.addImageTextContainer,testID:Fa},r.a.createElement(t,{accessibilityLabel:this.attachedSubtitles?jn:void 0,style:Ut.addImageActionIcon}),this.attachedSubtitles?this.attachedSubtitles.displayName:Nn)}_renderCountdownCircle(){const{data:{text:e},twitterTextConfigurationVersion:t}=this.props,a=wn.a[t],n=this._getParsedTweet(e).weightedLength;return r.a.createElement(sn.a,{count:n,formatNumber:this._formatCountdownNumber,maxCount:a.maxWeightedTweetLength,warningCount:260})}_renderAddComposerButton(){const{addComposerLink:e,disableAddTweet:t,isCommunityTweetFromProtectedUser:a,isEdit:n,loggedInUser:i,onAddComposer:s}=this.props,o=this._isEmpty(),l=this._isScheduled(),c=n||t||o||l||!i||a;return r.a.createElement(M.a,{accessibilityLabel:this.isReplyOrReplyThread?Rn:In,behavioralEventContext:ei,disabled:c,hoverLabel:{label:Mn},icon:Xn,link:c?void 0:e,onPress:s,size:"xSmall",testID:La,type:"brandOutlined"})}get isEditMediaEnabled(){const{data:{media:e},isEdit:t,previousMedia:a}=this.props;if(t){const t=null==a?void 0:a.map((e=>e.uploadId)),n=e.map((e=>e.uploadId));return!(Ft()(t,n).length>0)}return!0}get mediaAttachDisabled(){const{data:{media:e,pollActive:t},loggedInUser:a}=this.props,n=e.length,i=e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isGif})),s=e.some((e=>e.mediaFile&&!(e.mediaFile instanceof Ot.a)&&e.mediaFile.isVideo)),r=4===n,o=i||s||this.hasExternalMedia;return r||o||t||!a||!this.isEditMediaEnabled}get hasAttachedImage(){const{data:{media:e}}=this.props;return e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isImage}))}get hasAttachedVideo(){const{data:{media:e}}=this.props;return e.some((e=>{var t;return null==(t=e.mediaFile)?void 0:t.isVideo}))}get attachedSubtitles(){var e;const{data:{media:t}}=this.props;if(!this.hasAttachedVideo)return;const a=t.find((e=>e.mediaFile&&!(e.mediaFile instanceof Ot.a)&&e.mediaFile.isVideo));return null==a||null==(e=a.mediaMetadata)?void 0:e.subtitles}get hasAttachedAltText(){return this._getNumberOfAltTextEntries()>0}get hasExternalMedia(){const{data:{media:e}}=this.props;return e.some((e=>!!e.externalMediaDetails))}get shouldRenderCommunitiesRules(){const{audienceControlsValue:e}=this.props,t=this.context.featureSwitches.isTrue("c9s_enabled"),a=e.communityIdValue||void 0,n=t&&a,i=this._shouldRenderControls(!1,"conversation");return Boolean(i&&n)}get isReplyOrReplyThread(){const{isReply:e,isSelfThreadReply:t}=this.props;return e&&!t}}ai.contextType=dt.a,ai.defaultProps={twitterTextConfigurationVersion:"defaults",withAvatar:!0};var ni=Object(I.a)(ai);const ii=r.a.createElement(f.b,{weight:"bold"}),si=r.a.createElement(f.b,{color:"link",dir:"ltr"}),ri=e=>`@${e}`;var oi=a("SrIh");const li=e=>(null==e?void 0:e.screen_name)||"",ci=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n})=>{var i;const s={replyToOne:({userName:e})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"e34022a7"},r.a.cloneElement(si,null,C.a.b50e199a({userName:ri(e)}))),replyToTwo:({userOneName:e,userTwoName:t})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"bfd9c99b"},r.a.cloneElement(si,null,C.a.c3033e8a({replyUserName:ri(e),otherUserName:ri(t)}))),replyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"g7a1000f"},r.a.cloneElement(si,null,C.a.e50dae2a({userOneName:ri(e),userTwoName:ri(a),userThreeName:ri(t)}))),replyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"i558c201"},r.a.cloneElement(si,null,C.a.h758cd23({userOneName:ri(t),userTwoName:ri(a),othersCount:e}))),communityReplyToOne:({communityName:e,userName:t})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"j935bcdf",communityName:e},r.a.cloneElement(si,null,C.a.fba61ad6({userName:ri(t)}))),communityReplyToTwo:({communityName:e,userOneName:t,userTwoName:a})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"i7bd9c8f",communityName:e},r.a.cloneElement(si,null,C.a.ce87c872({replyUserName:ri(t),otherUserName:ri(a)}))),communityReplyToThree:({communityName:e,userOneName:t,userThreeName:a,userTwoName:n})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"cfa0049d",communityName:e},r.a.cloneElement(si,null,C.a.b45fa506({userOneName:ri(t),userTwoName:ri(n),userThreeName:ri(a)}))),communityReplyToMany:({communityName:e,othersCount:t,userOneName:a,userTwoName:n})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"jfc8e4b5",communityName:e},r.a.cloneElement(si,null,C.a.b8168f25({userOneName:ri(a),userTwoName:ri(n),othersCount:t}))),exclusiveReplyToOne:({userName:e})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"a4e11011"},r.a.cloneElement(si,null,C.a.c7f99090({userName:ri(e)})),r.a.cloneElement(ii,null,C.a.b977ae10)),exclusiveReplyToTwo:({userOneName:e,userTwoName:t})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"cf1b3321"},r.a.cloneElement(si,null,C.a.g7d5e986({replyUserName:ri(e),otherUserName:ri(t)})),r.a.cloneElement(ii,null,C.a.af82725c)),exclusiveReplyToThree:({userOneName:e,userThreeName:t,userTwoName:a})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"c83d647f"},r.a.cloneElement(si,null,C.a.af4c2858({userOneName:ri(e),userTwoName:ri(a),userThreeName:ri(t)})),r.a.cloneElement(ii,null,C.a.h2949686)),exclusiveReplyToMany:({othersCount:e,userOneName:t,userTwoName:a})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"fec57cab"},r.a.cloneElement(si,null,C.a.bc9dd515({userOneName:ri(t),userTwoName:ri(a),othersCount:e})),r.a.cloneElement(ii,null,C.a.de5071ba)),trustedFriendsReplyToOne:({trustedFriendsTweetOwner:e,userName:t})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"b392dda9",trustedFriendsTweetOwner:ri(e)},r.a.cloneElement(si,null,C.a.e39e1360({userName:ri(t)}))),trustedFriendsReplyToTwo:({trustedFriendsTweetOwner:e,userOneName:t,userTwoName:a})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"c1378cbb"},r.a.cloneElement(si,null,C.a.b1bf4831({userOneName:ri(t),userTwoName:ri(a)})),r.a.cloneElement(si,null,C.a.ba60bdab({trustedFriendsTweetOwner:ri(e)}))),trustedFriendsReplyToThree:({trustedFriendsTweetOwner:e,userOneName:t,userThreeName:a,userTwoName:n})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"g390bde1"},r.a.cloneElement(si,null,C.a.i17c4d36({userOneName:ri(t),userTwoName:ri(n),userThreeName:ri(a)})),r.a.cloneElement(si,null,C.a.bfa3b3d3({trustedFriendsTweetOwner:ri(e)}))),trustedFriendsReplyToMany:({othersCount:e,trustedFriendsTweetOwner:t,userOneName:a,userTwoName:n})=>r.a.createElement(C.a.I18NFormatMessage,{$i18n:"d1b80c9d"},r.a.cloneElement(si,null,C.a.e4625c2b({userOneName:ri(a),userTwoName:ri(n),othersCount:e})),r.a.cloneElement(si,null,C.a.b6c63977({trustedFriendsTweetOwner:ri(t)})))},o=d.a({inReplyToStatus:a,loggedInUserId:n}).filter((({id_str:e})=>t.indexOf(e)<0)),{exclusivity_info:l,trusted_friends_info:c,user:u}=a.retweeted_status||a,[h,p]=o.filter((({id_str:e})=>e!==u.id_str)),[m,g,b]=[u,h,p].map(li),f=o.length-2,_=null==a||null==(i=a.trusted_friends_info)?void 0:i.screen_name;switch(o.length){case 0:return Object(oi.a)("Compose reply context should not have 0 recipients"),null;case 1:return e?s.communityReplyToOne({communityName:e,userName:m}):l?s.exclusiveReplyToOne({userName:m}):c&&_?s.trustedFriendsReplyToOne({userName:m,trustedFriendsTweetOwner:_}):s.replyToOne({userName:m});case 2:return e?s.communityReplyToTwo({communityName:e,userOneName:m,userTwoName:g}):l?s.exclusiveReplyToTwo({userOneName:m,userTwoName:g}):c&&_?s.trustedFriendsReplyToTwo({userOneName:m,userTwoName:g,trustedFriendsTweetOwner:_}):s.replyToTwo({userOneName:m,userTwoName:g});case 3:return e?s.communityReplyToThree({communityName:e,userOneName:m,userTwoName:g,userThreeName:b}):l?s.exclusiveReplyToThree({userOneName:m,userTwoName:g,userThreeName:b}):c&&_?s.trustedFriendsReplyToThree({userOneName:m,userTwoName:g,userThreeName:b,trustedFriendsTweetOwner:_}):s.replyToThree({userOneName:m,userTwoName:g,userThreeName:b});default:return e?s.communityReplyToMany({communityName:e,userOneName:m,userTwoName:g,othersCount:f}):l?s.exclusiveReplyToMany({userOneName:m,userTwoName:g,othersCount:f}):c&&_?s.trustedFriendsReplyToMany({userOneName:m,userTwoName:g,othersCount:f,trustedFriendsTweetOwner:_}):s.replyToMany({userOneName:m,userTwoName:g,othersCount:f})}};var di=r.a.memo(ci),ui=a("fs1G"),hi=a("BLtI"),pi=a("kY28");function mi(e){null==e||e.preventDefault()}const gi=y.a.create((e=>({replyUsersContainer:{flexDirection:"row",minHeight:e.spaces.space12,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:0},grid:{flexGrow:1,flexShrink:1},repliesTextContainer:{flexGrow:1},repliesMessage:{flexGrow:1,paddingBottom:e.spaces.space16,paddingTop:e.spaces.space4},conversationLineContainer:{alignItems:"center"},conversationLine:{backgroundColor:e.colors.gray200,flexGrow:1,minHeight:0,width:e.componentDimensions.conversationLineWidth,marginBottom:e.spaces.space4}})));var bi=({communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n,onPress:i,shouldDisplayRepliesText:s,showParentTweet:o=!0})=>r.a.createElement(R.a,null,o?r.a.createElement(hi.b,{conversationPosition:{isStart:!0},linkableQuotedTweet:!1,linkify:!1,onAnalyticsClick:ui.a,onAvatarClick:mi,onEntityClick:mi,onMediaClick:mi,onReplyContextClick:mi,replyContext:pi.a.ReplyContextTypes.None,tweet:a,withAvatarLink:!1,withCardLinks:!0,withInlineMedia:!1,withQuotedTweetLinks:!0,withSocialContext:!1,withTimestampLink:!1,withUserHoverCard:!1}):null,r.a.createElement(R.a,{style:gi.replyUsersContainer},r.a.createElement(Ya.a,{avatarCell:o?r.a.createElement(R.a,{style:gi.conversationLine}):null,avatarCellStyle:gi.conversationLineContainer,cellStyle:gi.repliesTextContainer,style:gi.grid},s?r.a.createElement(f.b,{accessibilityRole:"button",color:"gray700",onPress:i,style:o&&gi.repliesMessage},r.a.createElement(di,{communityName:e,excludedRecipients:t,inReplyToStatus:a,loggedInUserId:n})):null))),fi=a("Tb0w"),_i=a("1YZw"),yi=a("pidX"),vi=a("5oBF"),Ci=a("JYYi"),wi=a("/Rsk"),Ei=a("lsKC"),xi=a("u7LJ"),Ti=a("XOJV"),Si=a("G6rE"),Ii=a("AspN"),Ri=a("oEGd"),Di=a("2iUg"),Mi=a("P1r1");const Pi=e=>e.parentTweetId||(e.isInline?Ci.a.homeTimeline:Ci.a.modal),ki=(e,t)=>{const a=Pi(t);return G.k(e,a)},Ai=(e,t)=>{const a=Pi(t);return G.l(e,a)},Oi=(e,t)=>{const a=Ui(e,t),n=ss(e,t).communityIdValue||void 0,i=(null==a?void 0:a.community_id_str)||n,s=i?h.c.select(e,i):void 0;return s?s.name:void 0},Li=(e,t)=>{const a=Pi(t);return G.m(e,a)},Fi=(e,t)=>{const a=Pi(t);return G.i(e,a)},Bi=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},Ni=Object($.createSelector)(((e,t)=>t.activeUser),Si.e.selectLoggedInUser,((e,t)=>e||t)),ji=(e,t)=>t.parentTweetId||Vi(e,t)||zi(e,t),Vi=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},zi=Bi((e=>e.inReplyToStatusId)),Ui=(e,t)=>{const a=ji(e,t);return a?Ti.a.selectHydrated(e,a):void 0},Hi=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,Wi=Bi((e=>e.hasArticleNudge)),Gi=Bi((e=>e.convoCardData)),Ki=Bi((e=>e.externalMedia)),$i=Bi((e=>e.externalMediaFiles)),qi=Bi((e=>e.previewTweetId)),Xi=Bi((e=>e.defaultText)),Qi=(e,t)=>{const a=Xi(e,t),n=Object(yi.a)(t.location);return(Hi(0,t)||((e,t)=>t.location.pathname.indexOf("/compose/tweet")>-1)(0,t))&&n?n:a},Ji=Bi((e=>e.quotedStatusId)),Yi=Bi((e=>e.quotedStatus)),Zi=(e,t)=>((e,t)=>t.quotedStatus?t.quotedStatus:Yi(e,t))(e,t)||((e,t)=>{const a=Ji(e,t);return a?Ti.a.selectHydratedMemoized(e,a):void 0})(e,t),es=Bi((e=>e.isSelfThreadReply)),ts=Bi((e=>e.positionCursorAtBeginning)),as=Bi((e=>e.previousTweetId)),ns=(e,t)=>{const a=as(e,t);return a?Ti.a.selectHydratedMemoized(e,a):null},is=Object($.createSelector)(ns,(e=>{var t;const a=null==e||null==(t=e.extended_entities)?void 0:t.media;return a?a.map((({ext_alt_text:e,id_str:t,media_url_https:a})=>({url:a,uploadId:t,altText:null!=e?e:""}))):[]})),ss=Object($.createSelector)(ns,((e,t)=>G.j(e,Pi(t))),Y.b,((e,t,a)=>e?Object(Ei.a)(e,a):t)),rs=Bi((e=>e.promotedContent)),os=({mediaIds:e,...t})=>t,ls={addComposer:G.a,addToast:_i.b,createLocalApiErrorHandler:Object(J.createLocalApiErrorHandlerWithContextFactory)("SCREEN_COMPOSE_V2"),checkTweetForNudge:G.b,deletePreviewTweet:vi.c,fetchAltTextPromptPreferenceIfNeeded:Di.a,fetchAutotaggedLocationIfNeeded:wi.a,fetchTweetIfNeeded:Ti.a.fetchOneIfNeeded,removeComposer:G.e,resetDraft:G.f,retweet:Ti.a.retweet,schedule:G.h,draftTweet:G.d,send:G.q,updateActiveComposerIndex:G.s,updateAudienceControlsValue:G.t,updateConvoCardState:fi.b,preUploadMedia:Ii.e,addMedia:Ii.b,processMultipleMedia:Ii.g,removeMediaUpload:Ii.i,removeToast:_i.c,updateSingleComposer:G.w,setActiveParentKey:G.r,copyDataFromInlineComposerToModalComposer:G.c};var cs=Object(Ri.e)((()=>Object($.createStructuredSelector)({activeComposerIndex:Fi,activeUser:Ni,altTextNudgeType:Di.b,audienceControlsValue:ss,composerData:Object($.createSelector)(ki,Qi,Zi,Ii.j,((e,t,a,n)=>e.map(((e,i)=>({...os(e),media:n.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===i?a:void 0,text:0===i&&t?t:e.text}))))),dataSaverMode:Mi.j,excludedRecipients:Ai,externalMedia:Ki,externalMediaFiles:$i,geoEnabled:Mi.o,hasArticleNudge:Wi,inReplyToStatus:Ui,inReplyToStatusId:ji,isIntentRoute:Hi,isSelfThreadReply:es,isSending:Li,isSuperFollowsCreator:X.m,positionCursorAtBeginning:ts,loggedInUser:Si.e.selectLoggedInUser,prepopulatedText:Qi,previewTweetId:qi,previousTweetId:as,previousTweetMedia:is,promotedContent:rs,scheduledFor:G.n,selectedCommunityName:Oi,sendingProgress:G.o,convoCardData:Gi,undoTweetSettings:xi.d,userLanguage:X.q,quotedStatusId:Ji})),ls),ds=a("45mF"),us=a("c0ZR"),hs=a("W5XZ"),ps=a("9HgX"),ms=a("Drq4"),gs=a("0uGn"),bs=a("I8M8"),fs=a("7myi"),_s=a("7nmT"),ys=a.n(_s),vs=a("vbWy"),Cs=a("Rp9C"),ws=a("Q5Mu"),Es=a("N5qz"),xs="tweetButton",Ts="tweetButtonInline",Ss=Object(p.a)().propsFromState((()=>({loggedInUser:Si.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({userName:e&&e.name,userProfileImageUrl:e&&e.profile_image_url_https,userScreenName:e&&e.screen_name}))).withAnalytics(),Is=a("cHvH"),Rs=a("sgih"),Ds=a("xKuM"),Ms=a("5Vk4");const Ps=y.a.create((e=>({mainCard:{marginHorizontal:"auto",paddingVertical:e.spaces.space16,textAlign:"center",alignItems:"center"},largeScreenCard:{width:"70%"},smallScreenCard:{width:"85%"},sheetStyle:{justifyContent:"center"}})));var ks=({actionButtonType:e,children:t,onActionButtonClick:a,onMaskClick:n,sheetType:i,showActionButton:s})=>r.a.createElement(Is.a,null,(({windowWidth:o})=>{const l=o>y.a.theme.breakpoints.small;return r.a.createElement(Rs.a,{onMaskClick:n,style:Ps.sheetStyle,type:i,withMask:!0},s&&r.a.createElement(Ds.a,{leftControl:r.a.createElement(Ms.a,{backButtonType:e,onClick:a}),position:"absolute"}),r.a.createElement(R.a,{style:[Ps.mainCard,l?Ps.largeScreenCard:Ps.smallScreenCard]},t))}));const As=C.a.cb7c0988,Os=C.a.de3bcf28,Ls=C.a.e710ce76,Fs=C.a.h11e5910,Bs=C.a.b7ec04f4,Ns=C.a.i62a03aa,js=y.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"}})));var Vs=({onBack:e,onNo:t,onYes:a})=>r.a.createElement(ks,{actionButtonType:"back",onActionButtonClick:e,onMaskClick:e,sheetType:"full",showActionButton:!0},r.a.createElement(f.b,{size:"title4",style:js.itemPadding,weight:"heavy"},As),r.a.createElement(f.b,{color:"gray700",style:js.itemPadding},Os),r.a.createElement(f.b,{color:"gray700",style:js.itemPadding},Ls),r.a.createElement(R.a,{style:js.buttonContainer},r.a.createElement(f.b,{size:"title4",style:js.itemPadding,weight:"heavy"},Fs),r.a.createElement(M.a,{onPress:a,style:js.itemPadding,type:"brandOutlined"},Bs),r.a.createElement(M.a,{onPress:t,style:js.itemPadding,type:"brandOutlined"},Ns))),zs=a("cm6r");const Us=y.a.create((e=>({button:{width:e.spaces.space72,height:e.spaces.space72,marginBottom:e.spaces.space12}})));var Hs=({icon:e,label:t,onPress:a})=>r.a.createElement(zs.a,{interactiveStyles:null,onPress:a},(a=>r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{icon:e,interactivityState:a,size:"xLarge",style:Us.button,type:"primaryOutlined"}),r.a.createElement(f.b,{color:"gray700"},t)))),Ws=a("sjK1"),Gs=a("FDY4"),Ks=a("tevE"),$s=a("jV+4"),qs=a("UgB4"),Xs=a("TW8A"),Qs=a("hiGS"),Js=a("WtWS");const Ys=(e={})=>Object(ye.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[_e.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M17.928 9.026l.095 3.545H19l.1-3.544h-1.172zm.586 5.394c.414 0 .667-.238.667-.623 0-.388-.252-.626-.666-.626-.41 0-.667.24-.667.627 0 .385.257.623.667.623zm-4.57-.11h.813l.278-1.384h.89l.15-.813h-.883l.198-.96h.875l.15-.805h-.864l.268-1.326h-.813l-.27 1.326h-.946l.263-1.326h-.81l-.27 1.326h-.846l-.154.806h.846l-.2.96h-.83l-.15.812h.824l-.278 1.384h.81l.277-1.384h.952l-.28 1.384zm-.578-2.124l.227-1.102h1.055l-.23 1.102h-1.052zm-5.889-.941c.388 0 .634.32.634.835s-.244.835-.636.835c-.385 0-.615-.315-.615-.835-.002-.524.23-.835.617-.835zM7.595 9C5.763 9 4.5 10.245 4.5 12.054c0 1.838 1.25 3.05 3.157 3.05.388 0 .765-.047 1.05-.13v-.598c-.204.073-.603.12-.995.12-1.556 0-2.542-.937-2.542-2.423 0-1.46.985-2.48 2.402-2.48 1.392 0 2.307.865 2.307 2.19 0 .744-.24 1.213-.61 1.213-.222 0-.35-.15-.35-.41v-1.94h-.74v.435h-.065c-.147-.325-.465-.515-.857-.515-.732 0-1.23.604-1.23 1.494 0 .93.505 1.544 1.267 1.544.425 0 .725-.19.88-.56h.065c.08.352.414.57.872.57.886 0 1.44-.728 1.44-1.892C10.55 10.106 9.348 9 7.594 9z"})));Ys.metadata={width:24,height:24};var Zs=Ys;const er=[{headlineText:C.a.f3a7a80c,subTextLine1:C.a.ge52d1de,subTextLine2:null},{headlineText:C.a.d1a92642,subTextLine1:C.a.ae42ebf0,subTextLine2:C.a.aa350ab2},{headlineText:C.a.j18b2956,subTextLine1:C.a.f6bee896,subTextLine2:C.a.dddd0996},{headlineText:C.a.d02a94fa,subTextLine1:C.a.dddd0996,subTextLine2:null},{headlineText:C.a.i018b746,subTextLine1:C.a.b8d85dfa,subTextLine2:C.a.d5ca11f0}],tr=C.a.h11e5910,ar=C.a.abd845fe,nr=C.a.bea869b4,ir=C.a.d96cf7ce,sr=C.a.d3145da8,rr=y.a.create((e=>({itemPadding:{marginVertical:e.spaces.space8},buttonContainer:{paddingHorizontal:e.spaces.space20,width:"100%"},profanityIcon:{backgroundColor:e.colors.primary,color:e.colors.whiteOnColor,width:e.spaces.space48,height:e.spaces.space48,borderRadius:e.borderRadii.infinite},tweetContainer:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.large,width:"100%",textAlign:"left"},tweetContent:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12},tweetBody:{flexDirection:"row"},userName:{paddingBottom:e.spaces.space4},mobileButtonContainer:{justifyContent:"space-around",flexDirection:"row",width:"100%",marginTop:e.spaces.space72},thanksContainer:{flexDirection:"row",alignItems:"center"},thanksCheckMark:{color:y.a.theme.colors.primary,marginRight:e.spaces.space8},photos:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",marginRight:e.spaces.space12,flex:"3 1 0%"},textStyle:{flex:"8 1 0%"}})));var or=({hasSentFeedback:e,media:t,onDeleteTweet:a,onDismiss:n,onEditTweet:i,onSendTweet:s,onWeGotItWrong:o,tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})=>{const{featureSwitches:h}=r.a.useContext(dt.a);let p=h.getNumberValue("responsive_web_reply_nudge_copy_version");p=p>=0&&p<=4?p:0;const m=er[p];return r.a.createElement(Is.a,null,(({windowWidth:h})=>r.a.createElement(ks,{actionButtonType:"close",onActionButtonClick:n,onMaskClick:n,sheetType:"full",showActionButton:h>y.a.theme.breakpoints.medium},r.a.createElement(Zs,{style:[rr.profanityIcon,rr.itemPadding]}),r.a.createElement(Ks.a,{size:"title4",style:rr.itemPadding,weight:"heavy"},m.headlineText),r.a.createElement(f.b,{color:"gray700",style:rr.itemPadding},m.subTextLine1),r.a.createElement(f.b,{color:"gray700",style:rr.itemPadding},m.subTextLine2),r.a.createElement(R.a,{style:[rr.tweetContainer,rr.itemPadding]},r.a.createElement(R.a,{style:rr.tweetContent},r.a.createElement($s.a,{name:c,profileImageUrl:d,screenName:u,style:rr.userName}),r.a.createElement(R.a,{style:rr.tweetBody},(()=>{if(0===t.length)return null;const e=t.map((e=>{var t,a,n;let i="";if(e.externalMediaDetails)i=e.externalMediaDetails.stillMediaUrl;else if(e.mediaFile instanceof Ws.c)i=e.mediaFile.thumbnail;else if(null!=(t=e.mediaFile)&&t.url){var s;i=null==(s=e.mediaFile)?void 0:s.url}return{accessibilityLabel:"",url:i,width:(null==(a=e.mediaFile)?void 0:a.width)||100,height:(null==(n=e.mediaFile)?void 0:n.height)||100,expandedUrl:"",shouldShowAltLabel:!1}}));return r.a.createElement(R.a,{style:rr.photos},r.a.createElement(Gs.a,{containerAspectRatio:1,images:e,previewMode:!1,singleImageMaxAspectRatio:1,singleImageMinAspectRatio:1,withCenterCrop:!0,withLink:!1}))})(),r.a.createElement(f.b,{style:rr.textStyle},l)))),e?r.a.createElement(R.a,{style:rr.thanksContainer},r.a.createElement(Js.a,{style:rr.thanksCheckMark}),r.a.createElement(f.b,{align:"center",style:rr.itemPadding},sr)):r.a.createElement(f.b,{align:"center",onPress:o,style:rr.itemPadding,withUnderline:!0},tr),h>y.a.theme.breakpoints.small?r.a.createElement(R.a,{style:rr.buttonContainer},r.a.createElement(M.a,{onPress:i,style:rr.itemPadding,type:"brandFilled"},ar),r.a.createElement(M.a,{onPress:s,style:rr.itemPadding,type:"brandOutlined"},nr),r.a.createElement(M.a,{onPress:a,style:rr.itemPadding,type:"destructiveText"},ir)):(()=>{const e=r.a.createElement(qs.a,{style:{color:y.a.theme.colors.text}}),t=r.a.createElement(Xs.a,{style:{color:y.a.theme.colors.primary}}),n=r.a.createElement(Qs.a,{style:{color:y.a.theme.colors.red500}});return r.a.createElement(R.a,{style:rr.mobileButtonContainer},r.a.createElement(Hs,{icon:e,label:nr,onPress:s}),r.a.createElement(Hs,{icon:t,label:ar,onPress:i}),r.a.createElement(Hs,{icon:n,label:ir,onPress:a}))})())))};var lr=Ss((({analytics:e,media:t,nudgeId:a,onDeleteTweet:n,onDismiss:i,onEditTweet:s,onSendTweet:o,tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})=>{const[h,p]=r.a.useState(!1),[m,g]=r.a.useState(!1),b=({action:t,element:n,page:i})=>{const s=[{nudge_id:a}];e.scribe({action:t,data:{items:s},element:n,page:i,section:"dialog"})};return h?r.a.createElement(Vs,{onBack:()=>{b({action:"back",element:"action",page:"nudge_more_info"}),p(!1)},onNo:()=>{b({action:"got_it_wrong_no",element:"action",page:"nudge_more_info"}),g(!0),p(!1)},onYes:()=>{b({action:"got_it_wrong_yes",element:"action",page:"nudge_more_info"}),g(!0),p(!1)}}):r.a.createElement(or,{hasSentFeedback:m,media:t,onDeleteTweet:()=>{b({action:"cancel",element:"action",page:"nudge"}),n()},onDismiss:()=>{b({action:"dismiss",element:"action",page:"nudge"}),i()},onEditTweet:()=>{b({action:"revise",element:"action",page:"nudge"}),s()},onSendTweet:()=>{b({action:"send",element:"action",page:"nudge"}),o()},onWeGotItWrong:()=>{b({action:"more_info",element:"action",page:"nudge"}),b({action:"impression",page:"nudge_more_info"}),p(!0)},tweetText:l,userName:c,userProfileImageUrl:d,userScreenName:u})})),cr=a("aITJ"),dr=a("eb3s"),ur=a("JYMr"),hr=a("sCk0"),pr=a("3A2y"),mr=a("zrOZ"),gr=a("s1N3"),br=a("4FGy"),fr=a("mN6z"),_r=a("eyty"),yr=a("rziq"),vr=a("jTgF");const Cr=C.a.d28215f0,wr=C.a.ec909a55,Er=C.a.jd53409e,xr={singular:C.a.edae65de,plural:C.a.a859846a,oneOfMultiple:C.a.e90118f6,someOfMultiple:C.a.c211dcb2},Tr={singular:C.a.d7c26bfc,plural:C.a.a75e3ccc},Sr=C.a.dcb7e3a0,Ir=({numberOfDescriptionsMissing:e,numberOfImages:t})=>{let a,n;const i=e===t;return 1===e?(n=Tr.singular,a=i?xr.singular:xr.oneOfMultiple):(n=Tr.plural,a=i?xr.plural:xr.someOfMultiple),`${a} ${n} ${Sr}`},Rr=C.a.c1bf53b1,Dr=C.a.bb8170da,Mr=C.a.dad5a4b8,Pr=C.a.e65aed64,kr=C.a.bc2ceaf2,Ar=C.a.d8222374,Or=C.a.j890123a,Lr=C.a.bb01231c,Fr=C.a.d4ab68e2,Br=C.a.d8af8a4c,Nr=C.a.d09d4c06,jr=C.a.i2209530,Vr=C.a.bf9b89e4,zr=C.a.gb1ac3be,Ur=C.a.e5ace470,Hr=C.a.e839db3a,Wr=C.a.f277e94a,Gr=C.a.b551cd23,Kr=C.a.f026a7fa,$r=C.a.a5d4fda0,qr=C.a.ib067d6a,Xr=c.canUseDOM&&document.documentElement&&"scrollBehavior"in document.documentElement.style,Qr={element:"alt_text_prompt"},Jr={component:"article_nudge"},Yr={viewType:"send_tweet"},Zr=Object.freeze({Original:"original",Reply:"reply",Quote:"quote",Thread:"thread"});class eo extends r.a.Component{constructor(e,t){var a;super(e,t),this._getParentKey=()=>{const{isInline:e,parentTweetId:t}=this.props;return t||(e?Ci.a.homeTimeline:Ci.a.modal)},this._updateSingleComposer=(e,t)=>{const{updateSingleComposer:a}=this.props;return a({updates:e,index:t,parentKey:this._getParentKey()})},this._resetDraft=()=>{const{resetDraft:e}=this.props;e({parentKey:this._getParentKey(),isPreview:this.isPreview})},this._fetchAutotaggedLocationIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchAutotaggedLocationIfNeeded:t}=this.props;return t().catch(e())},this._syncTexts=()=>{const{composerData:e}=this.props,{textMap:t}=this.state;e.forEach(((e,a)=>{const n=t[e.key];"string"==typeof n&&n!==e.text&&this._updateSingleComposer({text:n},a)}))},this._hasGif=e=>e.gifMetadata||e.media.some((e=>e.mediaFile&&e.mediaFile.isGif)),this._hasPhoto=e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isImage)),this._hasVideo=e=>e.media&&e.media.some((e=>e.mediaFile&&e.mediaFile.isVideo&&!e.mediaFile.isGif)),this._handleDeletePreviewTweet=()=>{const{deletePreviewTweet:e,previewTweetId:t,removeToast:a}=this.props;t&&(a(),e(t))},this._handleAnimateComplete=()=>{const{activeComposerIndex:e,onHandleAppBarHeight:t}=this.props,a=ys.a.findDOMNode(this._composerRefs[e]);if(a instanceof window.Element){const{bottom:e,top:n}=a.getBoundingClientRect(),i=Math.max(n,window.scrollY);if(i<window.pageYOffset||e>window.innerHeight){const e=t?i-t()-14:i-14,a=Math.max(e,0);window.requestAnimationFrame((()=>{Xr?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,a)}))}}},this._handleFetchTweetIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchTweetIfNeeded:t,inReplyToStatus:a,inReplyToStatusId:n,quotedStatus:i,quotedStatusId:s}=this.props;!a&&n&&t(n).catch(e(hs.a)),!i&&s&&t(s).catch(e(hs.a))},this._blockHistory=(e,t)=>{const{audienceControlsValue:a,isInline:n}=this.props,i=!n&&/unsent/.test(e.pathname),s=!n&&!/\/compose\/tweet\/?$/.test(e.pathname);return this.shouldShowDiscardConfirmation&&"POP"===t&&s?(this.setState({showDiscardTweetConfirmation:!0}),!1):this._canSaveDraft&&i&&"PUSH"===t?this.shouldShowDiscardConfirmation?(this.setState({showDiscardTweetConfirmation:!0,navigatingToOutbox:i}),!1):(this._resetDraft(),!0):this.shouldShowBackgroundSendConfirmation&&"POP"===t&&s?(this._cancelAllMediaUploads(),!1):!("POP"===t&&s&&this._areComposersEmptyOrUnchanged&&!Object(Nt.a)(a))||(this._resetDraft(),!0)},this._getKeyCommandHandlers=()=>{const{typeaheadActive:e}=this.state;return e?this._keyCommandHandlersForActiveTypeahead:this._keyCommandHandlers},this.handleTweetOrRetweet=()=>{this._scribe({section:"composition",element:"send_tweet",action:"click"});if(this._areComposersValid())return this.shouldShowAltTextPrompt?(this.setState({showAltTextPrompt:!0}),void this._scribe({...Qr,action:"show"})):this._handleTweetOrRetweet()},this._handleTweetOrRetweet=()=>this.isRetweet?this._handleRetweet():this._handleTweet(),this._renderReplyContext=()=>{const{activeUser:e,excludedRecipients:t,inReplyToStatus:a,isInline:n,isSelfThreadReply:i,selectedCommunityName:s}=this.props;if(a&&this._shouldBeExpanded())return r.a.createElement(bi,{communityName:s,excludedRecipients:t,inReplyToStatus:a,key:t.join(),loggedInUserId:e?e.id_str:void 0,onPress:this._handleViewRecipients,shouldDisplayRepliesText:!i,showParentTweet:!n})},this._renderAltTextPrompt=()=>{const{numberOfDescriptionsMissing:e,numberOfImages:t}=this._getAltTextMetadata();return r.a.createElement(dr.a,{Icon:ms.a,cancelButtonLabel:Dr,confirmButtonLabel:Rr({numOfDescriptions:e}),headline:Er,onCancel:this._handleIgnoreAltTextPrompt,onConfirm:this._handleAcceptAltTextPrompt,onMaskClick:this._handleCancelAltTextPrompt,text:Ir({numberOfDescriptionsMissing:e,numberOfImages:t})})},this._renderToxicReplyNudge=()=>{const e=this._getSingleComposerDataWithLatestText(this.props.composerData[0]),t=e.text,a=e.media;return r.a.createElement(lr,{media:a,nudgeId:this.state.nudgeId,onDeleteTweet:this._handleReplyNudgeDeleteTweet,onDismiss:this._handleReplyNudgeDismiss,onEditTweet:this._handleReplyNudgeEditTweet,onSendTweet:this._handleReplyNudgeSendTweet,tweetText:t})},this._handleAddComposer=()=>{const{addComposer:e,copyDataFromInlineComposerToModalComposer:t,isInline:a,parentTweetId:n}=this.props;this.isInlineReply?t(n):a&&t(Ci.a.homeTimeline),e()},this._makeAddComposerLink=Object(Gt.a)(((e,t,a)=>Object(Ei.d)({isInline:e,isSelfThreadReply:t,parentTweetId:a}))),this._handleReplyNudgeDeleteTweet=()=>{this._hideToxicReplyNudge(),this._handleConfirmDiscardTweet()},this._handleReplyNudgeDismiss=()=>{this._hideToxicReplyNudge()},this._handleReplyNudgeEditTweet=()=>{this._hideToxicReplyNudge()},this._handleReplyNudgeSendTweet=()=>{this._hideToxicReplyNudge(),this._handleSendTweet()},this._setRootRef=e=>{e&&(this._root=e)},this._handleTweet=()=>{const{composerData:e}=this.props,{scheduledFor:t}=e[0];this.setState({errorMessage:void 0}),t?Object(jt.h)(t)&&this._handleScheduleTweet():this._checkToxicReplyAndSendTweet()},this._handleTweetError=(e,t)=>a=>{const{analytics:n,createLocalApiErrorHandler:i}=this.props;if(Object(vr.d)(a)&&a.code===bs.b.CANCELED)return n.scribeAction(e),Promise.resolve();const s=Object(vr.b)(a);if(s)return this.setState({errorMessage:s}),Promise.resolve();i({...t||Object(ds.a)(void 0,!1)})(a);const r=a instanceof l.a&&(null==t?void 0:t[a.errors[0].code]);this.setState({errorMessage:{text:r?r.toast.text:$r}})},this._handleScheduleTweet=()=>{const{addToast:e,composerData:t,excludedRecipients:a,inReplyToStatus:n,schedule:i}=this.props,s=this._getSingleComposerDataWithLatestText(t[0]);i({excludedRecipients:a,inReplyToStatus:n,scheduleData:s}).then((a=>{this.setState({tweetsSentOrScheduled:!0});const n=Object(jt.c)(s.scheduledFor);if(n){const i=Object(jt.b)(n),s=Object(jt.i)(n),r=Gr({scheduleDate:i,scheduleTime:s});e({text:r,action:{label:Wr,link:{pathname:"/compose/tweet/unsent/scheduled"}}}),this._scribeTweetSent(t[0],{...a,id_str:a.scheduled_id_str},{isScheduled:!0})}this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("schedule_tweet_cancel"))},this._handleDraftTweet=()=>{const{addToast:e,composerData:t,draftTweet:a,excludedRecipients:n,inReplyToStatus:i}=this.props;a({excludedRecipients:n,inReplyToStatus:i,draftData:this._getSingleComposerDataWithLatestText(t[0])}).then((a=>{this.setState({showDiscardTweetConfirmation:!1}),e({text:Vr,action:{label:Wr,link:{pathname:"/compose/tweet/unsent/drafts"}}}),this._scribeTweetSent(t[0],{...a,id_str:a.draft_id_str},{isDraftTweet:!0}),this._updateConvoCardState(),this._close()})).catch(this._handleTweetError("draft_tweet_cancel",ws.a))},this._checkToxicReply=()=>{const{checkTweetForNudge:e,composerData:t,inReplyToStatus:a,inReplyToStatusId:n,parentTweetId:i}=this.props,s=e(this._getSingleComposerDataWithLatestText(t[0]).text,i||n,null==a?void 0:a.conversation_id_str).then((e=>{var t,a,n,i,s,r,o;if(!this.context.featureSwitches.getArrayValue("responsive_web_reply_nudge_supported_languages").includes(null==(t=e.create_nudge)||null==(a=t.nudge)?void 0:a.proposed_tweet_language))return!1;const l=null==e||null==(n=e.create_nudge)||null==(i=n.nudge)||null==(s=i.nudge_type)?void 0:s.__typename,c=null==e||null==(r=e.create_nudge)||null==(o=r.nudge)?void 0:o.id;return c&&this.setState({nudgeId:c}),!!l})),r=new Promise(((e,t)=>setTimeout(e,1e3,!1)));return Promise.race([s,r])},this._showToxicReplyNudge=()=>{this._scribe({page:"nudge",section:"dialog",action:"impression"},{items:[{nudge_id:this.state.nudgeId}]}),this.setState({showToxicReplyNudge:!0})},this._hideToxicReplyNudge=()=>this.setState({showToxicReplyNudge:!1}),this._checkToxicReplyAndSendTweet=()=>{const{composerData:e,isSelfThreadReply:t}=this.props,{nudgeId:a}=this.state;if(!(!this._getSingleComposerDataWithLatestText(e[0]).scheduledFor&&this.isReply&&!t&&this.context.featureSwitches.isTrue("responsive_web_reply_nudge_enabled")&&!a))return this._handleSendTweet();this._checkToxicReply().then((e=>{if(!e)return this._handleSendTweet();this.context.featureSwitches.isTrue("responsive_web_reply_nudge_show_nudge")&&this._showToxicReplyNudge()}))},this._handleSendTweet=()=>{const{activeUser:e,addToast:t,analytics:a,audienceControlsValue:n,composeSemanticCoreId:i,excludedRecipients:s,hasArticleNudge:r,history:o,inReplyToStatus:l,isSelfThreadReply:c,location:u,previousTweetId:h,promotedContent:p,selectedCommunityName:m,send:g}=this.props,{conversationControlsValue:b,exclusivityControlValue:f,trustedFriendsValue:_,trustedFriendsMemberCount:y}=n,v=this.isPreview,C=this.props.composerData.map((e=>this._getSingleComposerDataWithLatestText(e))),w=Object(jt.c)(C[0].scheduledFor);if(w){const e=Object(jt.b)(w),a=Object(jt.i)(w),n=Gr({scheduleDate:e,scheduleTime:a});return t({text:n,action:{label:Wr,link:""}}),void this._close()}if(s.length>0&&a.scribe({element:"mentions",action:"edited"}),_&&a.scribe({action:"send_trusted_friends_tweet",data:{trusted_friends_control_details:{list_member_count:y}}}),this._conversationControlsCreationEnabled)if("community"===b)a.scribe({action:"send_community_tweet"});else if("by_invitation"===b){const e=this._getSingleComposerDataWithLatestText(C[0]).text,t=Object(d.d)(e);a.scribe({action:t?"send_mentioned_tweet_with_mentions":"send_mentioned_tweet_without_mentions"})}else"followers"===b&&a.scribe({action:"send_my_followers_tweet"});const E=(null==l?void 0:l.community_id_str)||n.communityIdValue||void 0,x=E?`8.31.${E}`:"",T=i?E?[i,x].join(","):i:x;g({sendData:C,communityIdValue:E,conversationControlsValue:b,excludedRecipients:s,exclusivityControlValue:f,inReplyToStatus:l,isSelfThreadReply:c,previousTweetId:h,promotedContent:p,composeSemanticCoreId:T,isPreview:v,trustedFriendsValue:_,tweetType:this.tweetType}).then((a=>{v||this.setState({tweetsSentOrScheduled:!0}),a.map(((e,t)=>this._scribeTweetSent(C[t],e,{hasArticleNudge:r}))),a.length>1&&this._scribeThreadSent(C,a,"thread_send_success");let n=a.length>1?Pr:Mr;if(E&&m){const e=m,t=a.length;n=wr({numOfTweets:t,communityName:e})}const i=v&&this.isReply,s={label:Wr,link:void 0,onAction:void 0};if(i||!v){const t=i?a[0].in_reply_to_status_id_str:a[0].id_str;s.link={pathname:`/${e?e.screen_name:"i"}/status/${t||""}`}}else s.onAction=Object(Ei.b)(o,u,E);t({text:v?kr:n,action:s}),this.isInlineReply&&this.setState({focused:!1}),this._updateConvoCardState(),this._close()})).catch((e=>{var t;const{sentTweets:n=[]}=e,i=Array.isArray(e.errors)&&(null==(t=e.errors[0])?void 0:t.code),s=null==e?void 0:e.url,l=null==e?void 0:e.status,c={message:e.type,event_info:i?`${i}`:void 0,status_code:l,url:s};throw n.map(((e,t)=>this._scribeTweetSent(C[t],e)),{hasArticleNudge:r}),Object(vr.d)(e)&&e.code===bs.b.CANCELED||a.scribe({action:"send_tweet_failure",data:c}),C.length>1&&this._scribeThreadSent(C,n,"thread_send_failure"),n.length&&o.replace({pathname:u.pathname,state:{...Object(pr.a)(u.state||{},"quotedStatus"),inReplyToStatusId:n[n.length-1].id_str,isSelfThreadReply:!0}}),e})).catch(this._handleTweetError("send_tweet_cancel",ws.a))},this._setActiveParentKey=()=>{const{setActiveParentKey:e}=this.props;e(this._getParentKey())},this._scribeSoftNudgeWithQuoteTweet=(e,t,a)=>{"soft_nudge_with_quote_tweet"===(null==e?void 0:e.limited_actions)&&this._scribe({action:t},a)},this._scribeTweetSent=(e,t,{hasArticleNudge:a=!1,isDraftTweet:n=!1,isScheduled:i=!1}={})=>{var s,r;const{nudgeId:o}=this.state,l=e.scheduledTweetId?"schedule_edit_":"schedule_",c=e.draftTweetId?"draft_edit_":"draft_",d=n?c:i?l:"send_",u={items:[Cs.a.getTweetItem(t)]},h=e.pollActive&&e.pollValid,p=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.altText)})),m=e.mediaTags.length,g=Object(mr.a)(e.media.map((e=>{var t;const a=null==(t=e.mediaMetadata)?void 0:t.sensitiveMediaWarning;return a?Array.from(a):void 0})).filter(Boolean).flat()),b=this.props.isInline?"inline_reply":"tweet_box_dialog";if(this._scribe({action:`${d}tweet`},u),n||!e.draftTweetId||e.scheduledTweetId||this._scribe({action:`${d}draft_tweet`},u),e&&(null==(s=this._getSingleComposerDataWithLatestText(e))||null==(r=s.text)?void 0:r.length)>0&&this._scribeSoftNudgeWithQuoteTweet(e.quotedStatus,"soft_nudge_with_qt_retweet_with_comment",u),this.isQuoteTweet&&(this._scribe({action:"retweet_with_comment"},u),a&&this._scribe({...Jr,element:"result",action:"retweet_with_comment"},u)),this.isReply&&this._scribe({component:b,action:`${d}reply`},u),h&&this._scribe({action:`${d}poll_tweet`},u),this._hasPhoto(e)&&(this._scribe({action:`${d}photo_tweet`},u),p&&this._scribe({action:`${d}photo_tweet_with_alt_text`},u),m&&this._scribe({action:`${d}photo_tweet_with_tags`},u)),this._hasVideo(e)&&(this._scribe({action:`${d}video_tweet`},u),m&&this._scribe({action:`${d}video_tweet_with_tags`},u)),g.size){const t=this._hasPhoto(e)?"photo":"video";g.forEach((e=>{this._scribe({action:`${d}${t}_tweet_with_${e}_warning`},u)}))}const f={page:"nudge",section:"dialog",element:"result"};if(o&&this.isReply&&!i&&(n?this._scribe({...f,action:"save"},{items:[{nudge_id:o}]}):this._scribe({...f,action:"sent"},{items:[{nudge_id:o}]})),o||n||!this.isReply||i||this._scribe({...f,action:"sent_no_nudge"}),e.gifMetadata){const a=t.id_str&&Cs.a.getGifSearchItemForTweet(t.id_str,e.gifMetadata);this._scribe({element:"remote",action:`${d}gif_tweet`},{items:a?[a]:[]});const n=e.media.some((e=>{var t;return!(null==(t=e.mediaMetadata)||!t.defaultAltText)}));(p||n)&&this._scribe({element:"remote",action:`${d}gif_tweet_with_alt_text`},{event_info:p?"user_entered":"from_provider",items:a?[a]:[]}),m&&this._scribe({action:`${d}gif_tweet_with_tags`},u)}else this._hasGif(e)&&(this._scribe({element:"local",action:`${d}gif_tweet`},u),p&&this._scribe({element:"local",action:`${d}gif_tweet_with_alt_text`},u))},this._scribeThreadSent=(e,t,a)=>{const{inReplyToStatus:n}=this.props,i={items:[Cs.a.getSendThreadItem(e,t.length,!!n)]};this._scribe({action:a},i)},this._scribeRetweet=e=>{const{hasArticleNudge:t}=this.props,a={items:[Cs.a.getTweetItem(e)]};this._scribeSoftNudgeWithQuoteTweet(e,"soft_nudge_with_qt_retweet",a),this._scribe({action:"retweet"},a),t&&this._scribe({...Jr,element:"result",action:"retweet"},a)},this._handleRetweet=()=>{const{composerData:e,createLocalApiErrorHandler:t,retweet:a}=this.props,n=e[0].quotedStatus;n&&(this._scribeRetweet(n),a(n.id_str,{}).then((e=>{this.setState({tweetsSentOrScheduled:!0}),this._close()}),t(vs.a)))},this.handleDismissComposer=()=>{this.shouldShowDiscardConfirmation?this.setState({showDiscardTweetConfirmation:!0}):this.shouldShowBackgroundSendConfirmation?this._cancelAllMediaUploads():this._close()},this.handleEditTimeLimitExceeded=()=>{this.setState({showEditTimeLimitExceededConfirmation:!0})},this._cancelAllMediaUploads=()=>{this.props.composerData.forEach((e=>e.media.forEach((e=>e.uploading&&e.uploader&&e.uploader.cancel()))))},this._handleConfirmDiscardTweet=()=>{const{analytics:e,hasArticleNudge:t}=this.props,a=this._canSaveDraft?"draft":"send";this.setState({showDiscardTweetConfirmation:!1}),this._close(),e.scribeAction(`${a}_tweet_discard`),t&&this._scribe({...Jr,element:"result",action:"cancel"}),this.state.nudgeId&&this._scribe({page:"nudge",section:"dialog",element:"result",action:"cancel"},{items:[{nudge_id:this.state.nudgeId}]})},this._handleCancelDiscardTweet=()=>{this.setState({showDiscardTweetConfirmation:!1},(()=>{this._restoreFocusToActiveComposer()}))},this._handleAcceptAltTextPrompt=()=>{this.setState({showAltTextPrompt:!1});const{history:e}=this.props,{noDescriptionImageIDs:t}=this._getAltTextMetadata();t[0]&&(this._scribe({...Qr,action:"accepted"}),e.push("/compose/tweet/media",{mediaId:t[0],tab:gs.a.altText,hideTabs:!0,showAllMedia:!0}))},this._handleIgnoreAltTextPrompt=()=>{this._scribe({...Qr,action:"declined"}),this.setState({showAltTextPrompt:!1}),this._handleTweetOrRetweet()},this._handleCancelAltTextPrompt=()=>{this._scribe({...Qr,action:"cancel"}),this.setState({showAltTextPrompt:!1},(()=>{this._restoreFocusToActiveComposer()}))},this._restoreFocusToActiveComposer=()=>{const{activeComposerIndex:e}=this.props;void 0!==e&&this._composerRefs[e]&&this._composerRefs[e].focus()},this._close=()=>{const{history:e,isSending:t,onCloseComposer:a}=this.props;t||this._resetDraft(),this.state.navigatingToOutbox?this._canSaveDraft?e.push("/compose/tweet/unsent/drafts"):e.push("/compose/tweet/unsent/scheduled"):a&&a()},this._handleComposerFocus=e=>{this._composerRefs[e]?this.props.updateActiveComposerIndex(e):setTimeout((()=>{this._restoreFocusToActiveComposer()}),0)},this._handleFocus=()=>{const{focused:e}=this.state;e||(this.isInlineReply&&this._scribe({element:"inline_reply",action:"reply"}),this.setState({focused:!0}))},this._handleTypeaheadStateChange=e=>{this.setState({typeaheadActive:e})},this._handleRemoveComposer=()=>{const{activeComposerIndex:e,composerData:t,history:a,location:n,removeComposer:i}=this.props;0===e&&t[0].quotedStatus&&a.replace({pathname:n.pathname,state:Object(pr.a)(n.state||{},"quotedStatus")}),i(),setTimeout(this._restoreFocusToActiveComposer)},this._handleViewRecipients=()=>{const{excludedRecipients:e,history:t,inReplyToStatus:a}=this.props;this._setActiveParentKey(),t.push({pathname:"/compose/tweet/recipients",state:{excludedRecipients:e,inReplyToStatus:a}})},this._handleTextChange=(e,t)=>{const{textMap:a}=this.state,{activeComposerIndex:n,isInline:i,setValidity:s}=this.props;if(this.setState({textMap:{...a,[t]:e}},(()=>{s&&s(this._areComposersValid())})),this.setState({errorMessage:void 0}),cr.b.isIOS()){const t=i?0:n;this._updateSingleComposer({text:e},t)}},this._handleTextOnBlur=Object(Gt.a)(((e,t)=>()=>{const{textMap:a,tweetsSentOrScheduled:n}=this.state,{composerData:i}=this.props,s=a[e],r=i.some((t=>t.key===e));"string"==typeof s&&!n&&r&&this._updateSingleComposer({text:s},t)})),this._updateAudienceControlsValue=e=>{const{composerData:t,updateAudienceControlsValue:a}=this.props,{errorMessage:n}=this.state;switch(e._type){case"conversation_controls":if(!this._conversationControlsCreationEnabled)return;break;case"community_members":if(!this._isCommunitiesEnabled)return;t[0].pollActive&&!this.context.featureSwitches.isTrue("c9s_poll_creation_enabled")&&(this._updateSingleComposer({pollActive:!1},0),this.setState({errorMessage:{text:Cr}})),(null==n?void 0:n.text)===Cr&&this.setState({errorMessage:void 0})}a(e,this._getParentKey())},this._renderProgressBar=()=>{const{isSending:e,sendingProgress:t}=this.props,a=e?Math.max(t,.02):0;return r.a.createElement(ur.a,{progress:a,style:[to.progressBar,{visibility:a?"visible":"hidden"}]})},this._updateConvoCardState=()=>{const{convoCardData:e,updateConvoCardState:t}=this.props;if(e){const{cardId:a,nextState:n}=e;n&&a&&t(a,{cardState:n})}},this._attachExternalMedia=e=>(t,a=[],n)=>Promise.all(t.map((e=>Object(us.a)(e)))).then((t=>this._handleAddMediaFiles(e)(t,a,n))),this._handleAddMediaFiles=e=>(t,a=[],n=[])=>{var i,s;const{addMedia:r,addToast:o,composerData:l,dataSaverMode:c,preUploadMedia:d,processMultipleMedia:u,removeMediaUpload:h}=this.props,p=l[e],m=p.pollActive,g=Object(_r.e)(null==this||null==(i=this.context)?void 0:i.userClaims,null==this||null==(s=this.context)?void 0:s.featureSwitches);m||r(t,{location:_r.d.Tweet,canUploadLongVideo:g,uploadIds:a,altTexts:n}).then((t=>{const a=t.map((e=>e.id));if(eo._validateMedia(p,t)){const n=p.media.map((e=>e.id));this._updateSingleComposer({mediaIds:Object(gr.a)(n.concat(a))},e),u(t,{onFailure:this._handleMediaRemoveFactory(e)}).then((e=>{c||d(e.map((e=>e.id)))}))}else o({text:qr}),h(a)}))},this._handleMediaRemoveFactory=e=>t=>this._handleMediaRemove(e,t),this._handleMediaRemove=(e,t)=>{const{composerData:a,removeMediaUpload:n}=this.props,{media:i,mediaTags:s}=a[e],r=((e,...t)=>Object(br.a)(e,t))(i.map((e=>e.id)),t),o=r.length>0?s:[];this._updateSingleComposer({mediaIds:r,gifMetadata:void 0,mediaTags:o},e),n(t),this.setState({errorMessage:void 0})},this._setComposerRef=e=>t=>{this._composerRefs[e]=t},this._shouldBeExpanded=()=>{const{composerData:e,parentTweetId:t}=this.props,{focused:a}=this.state;if(a)return!0;const n=!Object(Nt.c)(this._getSingleComposerDataWithLatestText(e[0]));return!t||n},this._areComposersValid=()=>{const{audienceControlsValue:{_type:e},composerData:t}=this.props,a=t[0].quotedStatus,n=null==a?void 0:a.community_id_str,i="community_members"===e,s="trusted_friends_tweet"===e;return this.isRetweet&&!n&&!i&&!s||t.every((e=>Object(Nt.e)(this._getSingleComposerDataWithLatestText(e))))},this._areComposersEmptyOrUnchanged=()=>{const{composerData:e,prepopulatedText:t}=this.props;return e.every((e=>Object(Nt.d)(this._getSingleComposerDataWithLatestText(e),t)))},this._getAltTextMetadata=()=>{const{composerData:e}=this.props,t={numberOfDescriptionsMissing:0,numberOfImages:0,noDescriptionImageIDs:[]};return e.forEach((e=>{const a=(e.media||[]).filter((({externalMediaDetails:e,mediaFile:t})=>(null==t?void 0:t.isImage)||(null==t?void 0:t.isGif)||(null==e?void 0:e.mediaType)===ps.a)),n=a.filter((({mediaMetadata:e})=>!(null!=e&&e.altText))).map((e=>e.id));t.numberOfImages+=a.length,t.noDescriptionImageIDs.push(...n)})),t.numberOfDescriptionsMissing=t.noDescriptionImageIDs.length,t},this._getSingleComposerDataWithLatestText=e=>{const{textMap:t}=this.state;return"string"==typeof t[e.key]?{...e,text:t[e.key]}:e};const n=!(null==(a=e.location.state)||!a.focusComposer);this.state={focused:n,showAltTextPrompt:!1,showDiscardTweetConfirmation:!1,showEditTimeLimitExceededConfirmation:!1,showToxicReplyNudge:!1,textMap:{},tweetsSentOrScheduled:!1,typeaheadActive:!1,shouldDisableButton:!1},this._composerRefs={},this._conversationControlsCreationEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("conversation_controls_limited_replies_creation_enabled"),this._throttledSyncTexts=Object(Sa.a)(this._syncTexts,1e3,{leading:!0,trailing:!1}),this._keyCommandHandlers={[yr.b]:this.handleTweetOrRetweet,[yr.a]:this.handleDismissComposer},this._keyCommandHandlersForActiveTypeahead={[yr.b]:this.handleTweetOrRetweet},this._isAltTextNudgeEnabled=!0===this.context.featureSwitches.getValueWithoutScribeImpression("responsive_web_alt_text_nudges_enabled"),this._isCommunitiesEnabled=this.context.featureSwitches.isTrue("c9s_enabled")}UNSAFE_componentWillMount(){const{onRef:e}=this.props;e&&e(this)}componentDidMount(){var e;const{composerData:t,convoCardData:a,externalMedia:n,externalMediaFiles:i,fetchAltTextPromptPreferenceIfNeeded:s,history:r,isInline:o,isIntentRoute:l,location:c,prepopulatedText:d,previousTweetMedia:u,setValidity:h}=this.props,p=(null==(e=t[0].media)?void 0:e.length)>0;if(this._unblockHistory=this.props.history.block(this._blockHistory),n.length>0&&this._attachExternalMedia(0)(n),i.length>0&&this._handleAddMediaFiles(0)(i),!p&&null!=u&&u.length&&this._attachExternalMedia(0)(u.map((({url:e})=>e)),u.map((({uploadId:e})=>e)),u.map((({altText:e})=>e))),this._handleFetchTweetIfNeeded(),this._handleDeletePreviewTweet(),s(),d||a&&a.cardUrl){const e={};d&&(e.text=d),a&&a.cardUrl&&(e.cardUrl=a.cardUrl),this._updateSingleComposer(e)}(d||a&&a.cardUrl||n.length>0||i.length>0)&&!l&&r.replace({query:Object(yi.b)(c.query),search:"",pathname:c.pathname,state:Object(pr.a)(Object(yi.b)(c.state||{}),["defaultText","externalMedia","externalMediaFiles"])}),h&&h(this._areComposersValid()),o||this._setActiveParentKey(),this.isInlineReply&&this.state.focused&&this._scribe({element:"inline_reply",action:"reply"})}componentDidUpdate(e,t){const{addToast:a,composerData:n,copyDataFromInlineComposerToModalComposer:i,externalMedia:s,externalMediaFiles:r,onRef:o,parentTweetId:l,replyPressToggle:c,setValidity:d,windowWidth:u}=this.props;u!==e.windowWidth&&this._throttledSyncTexts(),e.onRef&&e.onRef!==o&&e.onRef(void 0),o&&o!==e.onRef&&o(this),n.length>=25&&e.composerData.length<25&&a({text:Kr}),s.length>0&&s!==e.externalMedia?this._attachExternalMedia(0)(s):r.length>0&&r!==e.externalMediaFiles&&this._handleAddMediaFiles(0)(r),d&&!Object(fr.a)(n,e.composerData)&&d&&d(this._areComposersValid()),c!==e.replyPressToggle&&i(l)}componentWillUnmount(){const{onRef:e}=this.props;this._unblockHistory&&this._unblockHistory(),e&&e(void 0),this._syncTexts()}render(){var e,t,a;const{activeUser:n,addToast:s,audienceControlsValue:o,composeHeader:l,composerData:c,customizePropsForSingleComposerItem:d,geoEnabled:u,history:h,inReplyToStatus:p,isInline:m,isModal:g,isSelfThreadReply:b,isSending:f,isSuperFollowsCreator:_,parentTweetId:y,positionCursorAtBeginning:v,previousTweetMedia:C,richTextInputContext:w,scheduledFor:E,typeaheadWrapper:x,userLanguage:T,windowWidth:S}=this.props,{errorMessage:I,focused:D,shouldDisableButton:P,showAltTextPrompt:k,showDiscardTweetConfirmation:A,showEditTimeLimitExceededConfirmation:O,showToxicReplyNudge:L,typeaheadActive:F}=this.state,B=!g&&F,N=m?0:this.props.activeComposerIndex,j=B||m?[c[N]]:c,V=this._areComposersValid(),z=this.hasNonCompliantQuote&&this.isRetweet,U=m?R.a:hr.a,H=m?{}:{onAnimateComplete:g?void 0:this._handleAnimateComplete},W=P||!V||z||this.isCommunityTweetFromProtectedUser,G=m&&Es.a.isOneColumnSquishedLayout(S),K=this.isCommunityTweet&&!this.context.featureSwitches.isTrue("c9s_poll_creation_enabled"),$=G||K,q=G||this.isCommunityTweet||this.isExclusiveTweet,X=null==p||null==(e=p.trusted_friends_info)?void 0:e.screen_name;return r.a.createElement(R.a,{ref:this._setRootRef,style:!y&&to.root},m?this._renderProgressBar():null,I&&r.a.createElement(R.a,{style:to.inlineCallout},r.a.createElement(at.a,{action:null!=(t=I.action)&&t.label&&null!=(a=I.action)&&a.link?{label:I.action.label,link:I.action.link}:void 0,text:I.text,type:"danger"})),r.a.createElement(R.a,{onFocus:this._handleFocus,style:[to.content,y&&to.contentInlineReply,g&&to.contentModal]},p?this._renderReplyContext():null,l,r.a.createElement(U,H,j.map(((e,t)=>{var a;const l=Object(jt.h)(e.scheduledFor),I=c.indexOf(e),P=d(e,t,j),k=g||m?r.a.createElement(M.a,{behavioralEventContext:Yr,disabled:W,onPress:this.handleTweetOrRetweet,size:"medium",style:to.inlineSendButton,testID:g?xs:Ts,type:"brandFilled"},Object(Ei.c)({inReplyToStatus:!!p,isSelfThreadReply:!!b,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!l,isThread:this.isThread,isEdit:!!this.isEdit})):null,A=this._getSingleComposerDataWithLatestText(e);return r.a.createElement(R.a,{key:e.key},r.a.createElement(ni,i()({addComposerLink:this._makeAddComposerLink(m,b,y),addToast:s,additionalToolbarContent:k,audienceControlsValue:o,autoFocus:this.isInlineReply&&D,data:A,disableAddTweet:c.length>=25,editable:!f&&!!n,fetchAutotaggedLocationIfNeeded:this._fetchAutotaggedLocationIfNeeded,geoEnabled:u,hidePoll:$,hideScheduling:q,history:h,index:I,isAccountProtected:null==(a=this.props.activeUser)?void 0:a.protected,isActive:I===N&&!f,isCommunityTweetFromProtectedUser:this.isCommunityTweetFromProtectedUser,isEdit:!!this.isEdit,isExpanded:0!==t||this._shouldBeExpanded(),isInline:m,isInlineReply:this.isInlineReply,isLast:m||I===c.length-1,isReply:!!p||this.isInlineReply,isSelfThreadReply:!!b,isSuperFollowsCreator:_,keyCommandHandlers:this._getKeyCommandHandlers(),loggedInUser:n,onAddComposer:this._handleAddComposer,onFilesAdded:this._handleAddMediaFiles(I),onFocus:this._handleComposerFocus,onRemoveComposer:this._handleRemoveComposer,onRemoveMedia:this._handleMediaRemove,onTextChange:this._handleTextChange,onTextInputBlur:this._handleTextOnBlur(A.key,t),onTypeaheadStateChange:this._handleTypeaheadStateChange,positionCursorAtBeginning:!!v,previousMedia:C,ref:this._setComposerRef(I),richTextInputContext:w,scheduledFor:E,setActiveParentKey:this._setActiveParentKey,trustedFriendsTweetAuthorScreenName:X,twitterTextConfigurationVersion:"version3",typeaheadActive:F,typeaheadWrapper:x,updateAudienceControlsValue:this._updateAudienceControlsValue,updateSingleComposer:this._updateSingleComposer,userLanguage:T,windowWidth:S},P)))}))),A?this._canSaveDraft?r.a.createElement(dr.a,{cancelButtonLabel:Fr,confirmButtonLabel:jr,headline:Br,onCancel:this._handleConfirmDiscardTweet,onConfirm:this._handleDraftTweet,onMaskClick:this._handleCancelDiscardTweet,text:Nr}):r.a.createElement(dr.a,{confirmButtonLabel:Fr,confirmButtonType:"destructiveFilled",headline:this.isThread?Or:Ar,onCancel:this._handleCancelDiscardTweet,onConfirm:this._handleConfirmDiscardTweet,text:Lr}):null,O?r.a.createElement(dr.a,{confirmButtonLabel:Hr,headline:zr,onConfirm:this._handleConfirmDiscardTweet,text:Ur,withCancelButton:!1}):null,k?this._renderAltTextPrompt():null,L?this._renderToxicReplyNudge():null,r.a.createElement(R.a,{style:f&&to.mask})))}_scribe(e,t){const{analytics:a}=this.props;a.scribe({...e,data:t})}get isEdit(){const{previousTweetId:e}=this.props;return!!e}get isInlineReply(){const{parentTweetId:e}=this.props;return!!e}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length,a=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&""===a&&t}get isQuoteTweet(){const{composerData:e}=this.props,t=this._getSingleComposerDataWithLatestText(e[0]).text;return!this.isThread&&e[0].quotedStatus&&t.length>0}get hasNonCompliantQuote(){var e;const{composerData:t}=this.props;return"non_compliant"===(null==(e=t[0].quotedStatus)?void 0:e.limited_actions)}get shouldShowDiscardConfirmation(){const{composerData:e,isSending:t}=this.props,{scheduledTweetId:a}=e[0],{showDiscardTweetConfirmation:n}=this.state,i=this._areComposersEmptyOrUnchanged();return!(t||i||n||a)}get shouldShowBackgroundSendConfirmation(){const{composerData:e,isSending:t}=this.props,a=e.some((e=>e.media.some((e=>e.uploading))));return t&&a}get shouldShowAltTextPrompt(){const{altTextNudgeType:e}=this.props;if(!this.context.featureSwitches.isTrue("responsive_web_alt_text_nudges_enabled")||e!==o.a.prompt)return!1;const{numberOfDescriptionsMissing:t}=this._getAltTextMetadata();return t>0}get _canSaveDraft(){const{composerData:e,isInline:t}=this.props;return!(this.isCommunityTweet||this.isExclusiveTweet||this.isThread||e[0].pollActive||0!==e[0].mediaTags.length||t)}get isCommunityTweet(){const{audienceControlsValue:e,inReplyToStatus:t}=this.props;return!!(null!=t&&t.community_id_str||"community_members"===e._type)}get isCommunityTweetFromProtectedUser(){var e;return!(!this.isCommunityTweet||null==(e=this.props.activeUser)||!e.protected)}get isReply(){return!(!this.props.inReplyToStatus&&!this.props.inReplyToStatusId)}get isExclusiveTweet(){const{audienceControlsValue:e}=this.props;return!!e.exclusivityControlValue}get isTrustedFriendsTweet(){const{audienceControlsValue:e}=this.props;return!!e.trustedFriendsValue}get tweetType(){return this.isQuoteTweet?Zr.Quote:this.isThread?Zr.Thread:this.isReply?Zr.Reply:Zr.Original}_undoEnabledForTweetType(e){const{undoTweetSettings:t}=this.props;return!t||void 0===t[this.tweetType]||t[e]}get isPreview(){var e,t;const{composerData:a}=this.props,n=null==this||null==(e=this.context)||null==(t=e.userClaims)?void 0:t.isTrueAndEnabled("subscriptions_feature_1003"),i=a[0].pollActive&&a[0].pollValid;return!(!n||this.isEdit)&&(i?this._undoEnabledForTweetType("poll"):this._undoEnabledForTweetType(this.tweetType))}}eo.defaultProps={customizePropsForSingleComposerItem:(e,t,a)=>({}),externalMedia:[],externalMediaFiles:[],isSelfThreadReply:!1,isModal:!1,positionCursorAtBeginning:!1,prepopulatedText:"",setValidity:()=>{},typeaheadWrapper:fs.a},eo.contextType=dt.a,eo._validateMedia=(e,t)=>{const{media:a}=e;return Object(d.c)(a.concat(t))};const to=y.a.create((e=>({root:{paddingBottom:e.spaces.space4},content:{paddingVertical:e.spaces.space4,backgroundColor:e.colors.cellBackground},contentModal:{borderBottomLeftRadius:e.borderRadii.xLarge,borderBottomRightRadius:e.borderRadii.xLarge},contentInlineReply:{paddingVertical:e.componentDimensions.gutterVertical},mask:{...y.a.absoluteFillObject},inlineSendButton:{marginLeft:e.spaces.space12},progressBar:{position:"absolute",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small},inlineCallout:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},hidden:{position:"absolute",visibility:"hidden",width:"100%"}})));t.a=Object(I.a)(cs(eo))},hyzI:function(e,t,a){var n=a("m5o6"),i=a("d0UJ"),s=a("eask"),r=a("9SKQ"),o=a("e63W");function l(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=r,l.prototype.set=o,e.exports=l},"ii+P":function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));var n=a("ERkP"),i=a.n(n),s=a("wtru");function r(e){const t=Object(s.b)();return[!!t&&!t.flags[e],i.a.useCallback((()=>{null==t||t.addFlag(e)}),[t,e])]}t.a=r},jtO7:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=a("ERkP"),r=a.n(s),o=a("t62R"),l=a("I4+6"),c=a("cm6r"),d=a("rHpw"),u=a("MWbm");const h=d.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.space48,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16}})));t.a=({align:e="center",color:t,label:a,...n})=>{const s=l.a.generate({backgroundColor:d.a.theme.colors.transparent,color:d.a.theme.colors[t],insetFocusRing:!0});return r.a.createElement(u.a,{style:h.container},r.a.createElement(c.a,i()({},n,{interactiveStyles:s,style:h.root}),r.a.createElement(o.b,{align:e,color:t},a)))}},kG2z:function(e,t){var a=Date.now;e.exports=function(e){var t=0,n=0;return function(){var i=a(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},kHoZ:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},kIAd:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a("0vv5");const i=500,s={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:a.n(n).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},keCP:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("MvUL"),a("SV7d")),r=a("gk9V"),o=a("ERkP"),l=a.n(o),c=a("k/Ka"),d=a("PxJJ"),u=a("w9LO"),h=a("fs1G"),p=a("rHpw"),m=a("zpdM");const g=e=>Object(c.a)("div",e);let b=!1;t.a=l.a.forwardRef(((e,t)=>{const a=s.d();return l.a.createElement(f,i()({},e,{onFocus:t=>{e.onFocus&&e.onFocus(t),a("focus")},ref:t}))}));class f extends l.a.Component{constructor(...e){super(...e),this._setSelectionToStart=()=>{const{editorState:e}=this.props,t=e.getCurrentContent().getFirstBlock().getKey();return m.EditorState.acceptSelection(e,new m.SelectionState({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:!1}))},this._setFocusToStart=()=>{const e=this._setSelectionToStart();return m.EditorState.forceSelection(e,e.getSelection())},this._setFocusToEnd=()=>{const{autoFocus:e,editorState:t,onChange:a}=this.props;e?null==a||a(m.EditorState.moveFocusToEnd(t)):null==a||a(m.EditorState.moveSelectionToEnd(t))},this._setDraftJsStyle=()=>{const{placeholderTextColor:e}=this.props,t=document.createElement("style");t.innerHTML=r.b({placeholderTextColor:e});const a=document.head;a&&a.insertBefore(t,a.firstChild)},this.focus=()=>{this._editor&&this._editor.focus()},this.blur=()=>{this._editor&&this._editor.blur()},this.getValue=()=>this.props.editorState.getCurrentContent().getPlainText(),this.getOffsetHeight=()=>{const{editor:e}=this._editor||{};return e&&e.offsetHeight||0},this.clear=()=>{},this._setEditorRef=e=>{this._editor=e},this._handleViewClick=()=>this.focus(),this._onPastedFiles=e=>{const{onFilesAdded:t}=this.props,a=[];if(e.forEach((e=>{e instanceof File&&a.push(e)})),a.length){return(null==t?void 0:t(a))?"handled":"not-handled"}return"not-handled"},this._removeNewLines=(e,t)=>m.EditorState.push(t,m.Modifier.replaceText(t.getCurrentContent(),t.getSelection(),e.replace(/[\r\n]+/g," ")),"insert-characters"),this._removeInvalidStylesFromContentBlock=e=>{const{pastedStylesAllowlist:t}=this.props,a=e.getCharacterList().map((e=>e.getStyle().filter((e=>!(null!=t&&t.includes(e)))).reduce(((e,t)=>m.CharacterMetadata.removeStyle(e,t)),e)));return(null!=t&&t.includes(e.getType())?e:e.set("type","unstyled")).set("characterList",a)},this._removeInvalidStyles=(e,t)=>{const{blockRenderMap:a}=this.props,n=e?Object(m.convertFromHTML)(e,void 0,a):void 0;if(n){var i;const e=null==n||null==(i=n.contentBlocks)?void 0:i.map(this._removeInvalidStylesFromContentBlock);if(e){const a=m.ContentState.createFromBlockArray(e,null==n?void 0:n.entityMap);return m.EditorState.push(t,m.Modifier.replaceWithFragment(t.getCurrentContent(),t.getSelection(),a.getBlockMap()),"insert-fragment")}}return null},this._onPastedText=(e,t,a)=>{const{multiline:n,onChange:i,pastedStylesAllowlist:s}=this.props;if(i){if(!n)return i(this._removeNewLines(e,a)),"handled";if(null!=s&&s.length){const e=this._removeInvalidStyles(t,a);if(e)return i(e),"handled"}}return"not-handled"},this._myKeyBindingFn=e=>{const{dismissComposerCommandName:t,keyBindingFn:a,sendTweetCommandName:n}=this.props,{hasCommandModifier:i}=m.KeyBindingUtil;return 13===e.keyCode&&i(e)?n:27===e.keyCode?t:(null==a?void 0:a(e))||Object(m.getDefaultKeyBinding)(e)},this._onKeyCommand=e=>{const{keyCommandHandlers:t}=this.props,a=t&&t[e];return a?(a(),"handled"):"not-handled"},this._onSingleLineReturn=(e,t)=>{const{handleReturn:a}=this.props;return null==a||a(e,t),"handled"},this._getContainerStyle=()=>{const{appTextSize:e,maxNumberOfLines:t,multiline:a,numberOfLines:n,withMaxHeight:i}=this.props,s=p.a.theme.lineHeightsPx[{small:"subtext2",normal:"body",large:"headline1",subtext2:"subtext2",body:"body",headline1:"headline1"}[e]],r=(a&&n?n:1)*s;return i?{minHeight:r,maxHeight:(a&&t?t:1)*s}:{minHeight:r,height:"100%"}}}componentDidMount(){const{onChange:e,positionCursorAtBeginning:t,positionCursorAtEnd:a}=this.props;a?this._setFocusToEnd():t?null==e||e(this._setFocusToStart()):this.props.autoFocus&&this.focus(),b||(this._setDraftJsStyle(),b=!0)}static getDerivedStateFromError(){return{}}componentDidCatch(e){d.a.report(e,{tags:{userVisible:!0,draftJs:!0}})}render(){const{ariaActiveDescendant:e,ariaAutocomplete:t,ariaControls:a,ariaLabel:n,blockRenderMap:i,blockRendererFn:s,blockStyleFn:o,dragPlaceholder:c,editorState:d,handleReturn:h,multiline:b,onChange:f,onFocus:y,onKeyDown:v,onKeyPress:C,onKeyUp:w,pastedStylesAllowlist:E,placeholder:x,spellCheck:T,style:S,testID:I}=this.props;return l.a.createElement(g,{className:b?void 0:r.a,onClick:this._handleViewClick,style:[this._getContainerStyle(),S]},l.a.createElement(m.Editor,{ariaActiveDescendantID:e,ariaAutoComplete:t,ariaControls:a,ariaLabel:n,ariaMultiline:b,blockRenderMap:i,blockRendererFn:s,blockStyleFn:o,customAttrs:{[u.a.NO_REFOCUS_ATTRIBUTE]:"true",onKeyPress:C,onKeyUp:w},customStyleMap:_(p.a.theme),editorState:d,handleKeyCommand:this._onKeyCommand,handlePastedFiles:this._onPastedFiles,handlePastedText:this._onPastedText,handleReturn:b?h:this._onSingleLineReturn,keyBindingFn:this._myKeyBindingFn,onChange:f,onFocus:y,onKeyDown:v,placeholder:x,ref:this._setEditorRef,spellCheck:"false"!==T,stripPastedStyles:!(b&&null!=E&&E.length),tabIndex:0,webDriverTestID:I}),c)}}f.defaultProps={appTextSize:"body",autoFocus:!1,keyCommandHandlers:{},maxNumberOfLines:30,multiline:!0,numberOfLines:6,onFocus:h.a,positionCursorAtEnd:!1,spellCheck:"true",withMaxHeight:!0},f.propTypes={};const _=({colors:e})=>({overflow:{backgroundColor:e.red200}})},krmn:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("zb92"),r=a("RuTB"),o=a("3XMw"),l=a.n(o);var c=Object(s.a)({loader:()=>l.a.emoji.then((()=>Promise.all([a.e(65),a.e(263)]).then(a.bind(null,"5RdJ")))),renderPlaceholder:(e,t)=>i.a.createElement(r.a,{hasError:e,onRetry:t})}),d=a.p+"twemoji_sprite.6d90d9d7.png",u=a.p+"twemoji_sprite_high_res.0b0faef7.png",h=a("rHpw"),p=a("U+bB"),m=a("kLqS"),g=a("MWbm");const b=h.a.create((e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.xLarge,width:10*e.spacesPx.space32,overflow:"hidden"},hidden:{display:"none"}})));var f=e=>{const{onSelect:t,partialRender:a}=e,n=m.a.get()>1?u:d;return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{style:[b.content,b.dimensions]},i.a.createElement(c,{onSelect:t,partialRender:a,rowSize:9,spriteUrl:n})),i.a.createElement(p.a,{source:n,style:b.hidden}))},_=a("pNJr"),y=a("2ZFc"),v=a("OiMc"),C=a("/yvb");const w=l.a.d4a4842e,E=i.a.createElement(_.a,null),x=l.a.fec16c1c,T={viewType:"emoji_picker"},S=e=>{const{disabled:t,onEmojiSelect:a,onPress:n,size:s,style:r,textInputRef:o}=e,[l,d]=i.a.useState(!0);i.a.useEffect((()=>{const e=setTimeout((()=>{c.preload(),y.a.get("emojiPicker2")}),5e3);return()=>{clearTimeout(e)}}),[]);return i.a.createElement(v.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>d(!1),onDismiss:()=>d(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame((()=>o&&o.focus()))},renderContent:()=>i.a.createElement(f,{onSelect:a,partialRender:l}),withArrow:!0},i.a.createElement(C.a,{accessibilityHasPopup:"menu",accessibilityLabel:w,behavioralEventContext:T,disabled:t,hoverLabel:{label:x},icon:E,onPress:e=>n&&n(e),size:s,style:r,type:"brandText"}))};S.defaultProps={disabled:!1,size:"xSmall"};t.a=S},kwr2:function(e,t,a){var n=a("6QIk"),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,a=n(t,e);return!(a<0)&&(a==t.length-1?t.pop():i.call(t,a,1),--this.size,!0)}},lsKC:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return h})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a("H7Rt"),i=a("3XMw"),s=a.n(i);const r=s.a.g34f2c63,o=s.a.f70a36d0,l=s.a.d17df548,c=s.a.h735a98e,d=s.a.h3701ffe,u=e=>{const t=e.inReplyToStatus&&!e.isSelfThreadReply;return e.isScheduled?c:e.isEdit?d:t?l:e.isThread?o:r({verb:""})},h=(e,t,a)=>()=>{if(a){var n,i;(null==(n=t.state)||null==(i=n.previousPath)?void 0:i.includes(a))&&"/compose/tweet"===t.pathname?window.scrollTo(0,0):e.push(`/i/communities/${a}`,{lockScroll:!0})}else{var s,r;const a=(null==(s=t.state)||null==(r=s.previousPath)?void 0:r.includes("/home"))&&"/compose/tweet"===t.pathname;t.pathname.includes("/home")||a?window.scrollTo(0,0):e.push("/home",{lockScroll:!0})}},p=({isInline:e,isSelfThreadReply:t,parentTweetId:a})=>e?{pathname:"/compose/tweet",state:{inReplyToStatusId:a,isSelfThreadReply:t}}:void 0,m=(e,t)=>{var a;return null!=e&&e.exclusivity_info?{_type:"super_followers_exclusive",conversationControlsValue:n.a.super_followers_exclusive,exclusivityControlValue:{}}:null!=e&&e.community_id_str?{_type:"community_members",communityIdValue:e.community_id_str,conversationControlsValue:n.a.community_members}:null!=e&&e.trusted_friends_info&&null!=t&&t.length?{_type:"trusted_friends_tweet",conversationControlsValue:n.a.trusted_friends_tweet,trustedFriendsValue:{trusted_friends_list_id:t[0].rest_id}}:{_type:"conversation_controls",conversationControlsValue:(null==(a=e.conversation_control)?void 0:a.policy)||n.a.all}}},m5o6:function(e,t,a){var n=a("Tv3l"),i=a("+ooz"),s=a("qeCs");e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},mUsV:function(e,t,a){var n=a("5pfJ");e.exports=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},n1QJ:function(e,t){e.exports=function(e,t,a){for(var n=a-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},oEoC:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return p}));a("kYxP");var n=a("zTrU"),i=a("kIAd"),s=a("rHpw");function r(e,t){let a;const n=i.b.scoper.find((n=>{if(-1!==n.srcInputs.indexOf(t))return a=e.match(n.regexp),a}));let s="";return a&&(s=a&&(1===a.length?a[0]:a[1])),n?{...n.scope,src:t,q:s}:null}function o(e,t){const a=t.slice(0,e),n=t.slice(e,t.length),s=a.search(i.b.WordEnd),r=s>=0?a.slice(s):"",o=n.search(i.b.WordBoundary),l=r+n.slice(0,o);return l.trim()?{start:s,end:e+o,word:l}:{start:-1,end:-1,word:""}}function l(){return`typeaheadFocus-${Math.random()}`}function c(e){const{altKey:t,ctrlKey:a,metaKey:n}=e;return!(t||a||n)}function d(e,t){const a=[];e.forEach((e=>{const n=t.find((t=>t.id===e.id));n&&n.data&&n.data.result_context?a.push(n):a.push(e)}));const n=a.map((e=>e.id)),i=t.filter((e=>n.indexOf(e.id)<0));return[...a,...i]}const u=Object(n.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${s.a.theme.spaces.space64})`,position:"fixed",top:`calc(${e}px + ${s.a.theme.spaces.space1})`,transform:[{translate3d:"0,0,0"}]})));let h=0;const p=()=>(h+=1,`typeaheadDropdown-${h}`)},"p+r5":function(e,t,a){"use strict";a.d(t,"a",(function(){return R}));var n=a("97Jx"),i=a.n(n),s=a("ERkP"),r=a.n(s),o=a("38/B"),l=a("t62R"),c=a("/yvb"),d=a("piX5"),u=a("3XMw"),h=a.n(u),p=a("tI3i"),m=a.n(p),g=a("zTrU"),b=a("rHpw"),f=a("aITJ"),_=a("MWbm"),y=a("n5fo"),v=a("5emT"),C=a("Oib4"),w=a("WtWS"),E=a("ioan");const x=e=>e.length,T=(e,t=x)=>t(e),S=h.a.de540c32,I=h.a.b4abfdb4;class R extends r.a.Component{constructor(e){super(e),this._blurOnBackspaceKeyUpForKaiOS=!1,this._isLabelLarge=()=>{const{actualCount:e,isFocused:t}=this.state;return!e&&!t},this._getTextInputStyle=Object(g.a)((e=>[D.root,!e&&D.disabled])),this._getTextInputType=()=>{const{showPasswordVisibilityIcon:e,type:t}=this.props,{isPasswordRevealed:a}=this.state;return"password"===t&&e?a?"text":"password":t},this._calculateLength=e=>T(e,this.props.calculateLength),this._shouldRenderDisplayCount=()=>{const{isFocused:e}=this.state,t=this._isFormInvalid();return Boolean((e||t)&&this._getMaxDisplayCount())},this._isInvalidNumber=()=>{var e,t,a,n,i;const{type:s}=this.props,r=null==(e=this._textInput)||null==(t=e.textInputNode)?void 0:t.value,o=null==(a=this._textInput)||null==(n=a.textInputNode)||null==(i=n.validity)?void 0:i.badInput;return"number"===s&&""===r&&!0===o},this._getActualCount=e=>{let t=e.length;return this._isInvalidNumber()&&(t=1),t},this._handleBlur=()=>{var e;const{onBlur:t}=this.props,a=(null==(e=this._textInput)?void 0:e.getValue())||"",n=this._calculateLength(a),i=this._getActualCount(a);this.setState({isFocused:!1,displayCount:n,actualCount:i}),t&&t()},this._handleChange=e=>{const{onChange:t}=this.props,{previousValue:a}=this.state,{value:n}=e.currentTarget,i=this._calculateLength(n),s=this._getActualCount(n),r=this._getAdjustedMaxLength();void 0!==r&&n.length>r&&a.length<n.length?e.currentTarget.value=a:(this.setState({isFocused:!0,displayCount:i,actualCount:s,previousValue:e.currentTarget.value}),t&&t(e))},this._handleFocus=()=>{const{onFocus:e}=this.props;this.setState({isFocused:!0}),e&&e()},this._handleKeyPress=e=>{const{multiline:t,onKeyPress:a,onSubmitEditing:n}=this.props;a&&a(e),e.isDefaultPrevented()||"Enter"!==e.key||e.shiftKey||t||!n||(e.preventDefault(),n(e))},this._handleKeyDown=e=>{const{onKeyDown:t}=this.props,{displayCount:a}=this.state,n=0===a;f.b.isKaiOS()&&"Backspace"===e.key&&n?this._blurOnBackspaceKeyUpForKaiOS=n:t&&t(e)},this._handleKeyUp=e=>{const{onKeyUp:t}=this.props;f.b.isKaiOS()&&"Backspace"===e.key&&this._blurOnBackspaceKeyUpForKaiOS&&(e.preventDefault(),this.blur()),t&&t(e)},this._handlePasswordVisibilityClick=e=>{this.setState((e=>({isPasswordRevealed:!e.isPasswordRevealed})))},this._setTextInputRef=e=>{this._textInput=e},this._checkComponentPropsUsageCorrectness=e=>{const{defaultValue:t,maxLength:a,onChange:n,validLength:i,value:s}=e,r=!!n,o="string"==typeof s,l="string"==typeof t;m()(!(!l&&o&&!r),"A controlled component, a component with a value prop, must have an onChange handler. The value prop cannot be undefined."),m()(!(a&&i&&i>a),"Max length should be equal or greater than valid length."),m()(!(void 0!==a&&a<=0||void 0!==i&&i<=0),"Set editable to false instead of limiting the valid character count to 0.")},this._exceedsValidLength=e=>{const t=this._getMaxDisplayCount();return!!t&&e>t},this._getMaxDisplayCount=()=>this.props.validLength||this.props.maxLength,this._getAdjustedMaxLength=()=>{const{maxLength:e}=this.props,t=this.getValue(),a=this._calculateLength(t);return e?e+t.length-a:void 0},this._checkComponentPropsUsageCorrectness(e);const{defaultValue:t,value:a}=e,n=a||t||"";this.state={displayCount:this._calculateLength(n),actualCount:x(n),isFocused:!1,isPasswordRevealed:!1,previousValue:n}}componentDidUpdate(e){const{maxLength:t,onChange:a,validLength:n,value:i}=this.props,{maxLength:s,onChange:r,validLength:o,value:l}=e;o===n&&t===s&&!!a===!!r&&"string"==typeof i===("string"==typeof l)||this._checkComponentPropsUsageCorrectness(this.props)}static getDerivedStateFromProps(e,t){const{calculateLength:a,value:n}=e,i="string"==typeof n?T(n,a):0;return"string"==typeof n&&i!==t.displayCount?{displayCount:i,actualCount:n.length}:null}render(){const{accessibilityLabel:e,editable:t,errorText:a,helperText:n,style:i}=this.props,{isFocused:s}=this.state,o=this._isFormInvalid();return r.a.createElement(_.a,{style:[M.root,i]},r.a.createElement(_.a,{accessibilityLabel:e,accessibilityRole:"label",style:[d.a.border,M.textInputFormStyle,o&&d.a.invalidBorderColor,s&&o&&d.a.focusedBorderInvalid,s&&!o&&d.a.focusedBorderValid,!t&&d.a.disabled]},r.a.createElement(_.a,{style:M.textInputFormWrapper},r.a.createElement(_.a,{style:M.textInputHeader},this._renderLabel(),this._shouldRenderDisplayCount()?this._renderDisplayCount():null),this._renderTextInput())),r.a.createElement(_.a,{style:[M.sidePadding,M.underTextInputForm]},r.a.createElement(_.a,{style:M.subtextWrapper},n?this._renderHelperText():null,o&&a?this._renderErrorText():null)))}_renderLabel(){const{label:e}=this.props,{isFocused:t}=this.state,a=t?"primary":"gray700",n=this._isFormInvalid()?"red500":a,i=this._isLabelLarge();return r.a.createElement(l.b,{color:i?"gray700":n,numberOfLines:1,size:i?"headline1":"subtext2",style:[M.textInputHeaderItem,i&&M.placeholderText,!o.a.reducedMotionEnabled&&M.transition]},e)}_renderTextInput(){const{Icon:e,accessibilityLabel:t,calculateLength:a,editable:n,errorText:s,helperText:o,invalid:c,label:d,maxLength:u,onBlur:h,onChange:p,onFocus:m,onKeyDown:g,onKeyPress:b,onKeyUp:f,onSubmitEditing:y,showPasswordVisibilityIcon:v,showValidationIcon:C,style:w,type:x,validLength:T,...S}=this.props;return r.a.createElement(_.a,{style:D.container},e&&!this._isLabelLarge()?this._renderIcon():null,r.a.createElement(l.b,{size:"headline1",style:D.wrapper},r.a.createElement(E.a,i()({},S,{editable:n,maxLength:this._getAdjustedMaxLength(),onBlur:this._handleBlur,onChange:this._handleChange,onFocus:this._handleFocus,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onKeyUp:this._handleKeyUp,ref:this._setTextInputRef,style:this._getTextInputStyle(n),type:this._getTextInputType()}))),C&&!this._isLabelLarge()?this._renderValidationIcon():null,this._renderPasswordVisibilityIcon())}_renderPasswordVisibilityIcon(){const{showPasswordVisibilityIcon:e,type:t}=this.props,{isPasswordRevealed:a}=this.state;return"password"===t&&e?r.a.createElement(_.a,{style:M.passwordVisibilityIconContainer},r.a.createElement(c.a,{accessibilityLabel:a?I:S,focusable:!0,hoverLabel:{label:a?I:S},icon:a?r.a.createElement(y.a,null):r.a.createElement(v.a,null),onPress:this._handlePasswordVisibilityClick,size:"smallCompact",type:"primaryText"})):null}_renderHelperText(){return r.a.createElement(_.a,{accessibilityLiveRegion:"polite"},r.a.createElement(l.b,{color:"gray700",size:"subtext2",style:M.subtext},this.props.helperText))}_renderErrorText(){return r.a.createElement(_.a,{accessibilityLiveRegion:"assertive"},r.a.createElement(l.b,{color:"red500",size:"subtext2",style:M.subtext},this.props.errorText))}_renderDisplayCount(){const{displayCount:e}=this.state,t=this._getMaxDisplayCount(),a=this._exceedsValidLength(e),n=t&&h.a.ia24dc8d(t),i=h.a.ia24dc8d(e);return r.a.createElement(_.a,{accessibilityLiveRegion:"polite",style:[M.textInputHeaderItem,M.displayCount]},r.a.createElement(l.b,{color:a?"red500":"gray700",size:"subtext2"},n?`${i} / ${n}`:""))}_renderIcon(){const{Icon:e}=this.props,{isFocused:t}=this.state,a=[M.icon,t&&M.focusedIcon];return e&&r.a.createElement(e,{style:a})}_renderValidationIcon(){return this._isFormInvalid()?r.a.createElement(C.a,{style:[M.validationIcon,d.a.invalidColor]}):r.a.createElement(w.a,{style:[M.validationIcon,d.a.validColor]})}_isFormInvalid(){const{displayCount:e}=this.state;return!!this.props.invalid||this._exceedsValidLength(e)||this._isInvalidNumber()}blur(){this._textInput&&this._textInput.blur()}getValue(){return this._textInput&&this._textInput.getValue()||""}focus(){this._textInput&&this._textInput.focus()}isValidLength(){const e=this.getValue(),t=this._calculateLength(e);return!this._exceedsValidLength(t)}}R.defaultProps={autoComplete:"on",autoCorrect:!0,autoFocus:!1,editable:!0,invalid:!1},R.propTypes={};const D=b.a.create((e=>({container:{flexDirection:"row",flexGrow:1,flexShrink:1,overflow:"hidden",paddingBottom:e.spaces.space8,paddingHorizontal:e.spaces.space8,paddingTop:e.spaces.space12,marginTop:e.spaces.space16},root:{backgroundColor:"transparent",borderRadius:e.borderRadii.none,borderWidth:e.borderWidths.none,boxSizing:"border-box",color:"inherit",fontFamily:"inherit",fontSize:"inherit",textAlign:"inherit",outlineStyle:"none",padding:0},wrapper:{alignItems:"center",display:"flex",fontSize:e.fontSizes.headline2,width:"100%"},disabled:{color:e.colors.gray700}}))),M=b.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},textInputFormStyle:{flexDirection:"row"},textInputFormWrapper:{flexGrow:1,flexShrink:1},textInputHeader:{flexDirection:"row",justifyContent:"space-between",position:"absolute",height:"100%",width:"100%"},textInputHeaderItem:{paddingTop:e.spaces.space8,paddingHorizontal:e.spaces.space8,fontSize:"small"},placeholderText:{paddingTop:e.spaces.space16,fontSize:e.fontSizes.headline2,userSelect:"none"},displayCount:{flexGrow:1,alignItems:"flex-end"},sidePadding:{paddingHorizontal:e.spaces.space8},underTextInputForm:{flexDirection:"row"},subtextWrapper:{flexDirection:"column",flex:1,paddingRight:e.spaces.space20,paddingTop:e.spaces.space2},subtext:{alignSelf:"flex-start"},focusedIcon:{color:e.colors.primary},icon:{alignSelf:"center",color:e.colors.gray700,paddingRight:e.spaces.space4},validationIcon:{alignSelf:"center",paddingLeft:e.spaces.space4},transition:{transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1), color 150ms cubic-bezier(0.4, 0, 0.2, 1), font-size 150ms cubic-bezier(0.4, 0, 0.2, 1), padding-top 150ms cubic-bezier(0.4, 0, 0.2, 1)"},passwordVisibilityIconContainer:{alignSelf:"center",paddingLeft:e.spaces.space4},passwordVisibilityIcon:{color:e.colors.gray700}})))},pKoL:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("HPNB"),r=a("9HgX"),o=a("3XMw"),l=a.n(o),c=a("LCtV"),d=a("eyty"),u=a("zb92"),h=a("RuTB"),p=Object(u.a)({loader:()=>Promise.all([a.e(0),a.e(3),a.e(232)]).then(a.bind(null,"EOJ2")).then((e=>({default:e.__DANGEROUS_IMPORT_VIDEOPLAYER__}))),renderPlaceholder:(e,t)=>i.a.createElement(h.a,{hasError:e,onRetry:t})}),m=a("k/Ka"),g=a("eXeu"),b=a("iOGT");class f extends i.a.Component{constructor(...e){super(...e),this._setVideoRef=e=>{const{getVideoRef:t}=this.props;t&&t(e)}}render(){const{children:e,dataSaverMode:t,getVideoRef:a,style:n,variants:s,...r}=this.props,o=Object(b.b)(s,t?b.a.MEDIUM:void 0)||[],l=Object(g.f)(o.map((e=>({src:e.url,type:e.content_type}))));return Object(m.a)("video",{...r,children:[l.map((e=>i.a.createElement("source",{key:e.src,src:e.src,type:e.type}))),e],ref:this._setVideoRef,style:n})}}f.defaultProps={dataSaverMode:!1,variants:[]};var _=a("62wY"),y=a("sjK1"),v=a("v6aA"),C=a("cHvH"),w=a("mXq/"),E=a("/yvb"),x=a("a6qo"),T=a("rHpw"),S=a("hOZg"),I=a("GCOQ"),R=a("tuke"),D=a("U+bB"),M=a("MWbm"),P=a("+/sI");const k=l.a.gd80afba,A=l.a.j322caee,O=l.a.abd845fe,L=l.a.df1b0708,F=l.a.cd959e5c,B=l.a.e68b09b4,N=l.a.add55c98;class j extends i.a.Component{constructor(...e){super(...e),this.state={isVideoPaused:!0,playGif:!1},this._handleGifClick=()=>{this.setState({playGif:!this.state.playGif})},this._handleMediaPreviewLayout=e=>{const{mediaItem:t,resizeIfNeeded:a}=this.props,n=t.mediaFile||t.externalMediaDetails;if(!n)return;const{nativeEvent:{layout:{height:i,width:s}}}=e,{height:r,width:o}=n,l=o/r;Math.abs(l-s/i)>.05&&this._mediaContainer&&("width"===a?this._mediaContainer.setNativeProps({style:{width:i*l}}):"height"===a&&this._mediaContainer.setNativeProps({style:{height:s/l}}))},this._handleVideoOnPlay=e=>{this.setState({isVideoPaused:!1})},this._handleVideoOnPause=e=>{this.setState({isVideoPaused:!0})},this._setMediaContainerRef=e=>{this._mediaContainer=e},this._setVideoRef=e=>{this._video=e},this.playVideo=()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then((e=>{this._handleVideoOnPlay()})).catch()}},this.pauseVideo=()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())}}render(){var e;const{accessibilityLabel:t,accessibilityRole:a,enableGif:n,mediaItem:o,onEdit:l,onEditSensitiveWarning:c,onRemove:d,style:u,withAltTextLabel:h,withCloseButton:p,withEditButton:m,withEditIcon:g,withEditSensitiveWarningButton:b}=this.props,{playGif:f}=this.state,_=o.externalMediaDetails&&o.externalMediaDetails.mediaType===r.a,y=_||n&&o.mediaFile&&o.mediaFile.isGif,v=!(null==(e=o.mediaFile)||!e.isVideo);return i.a.createElement(C.a,null,(({windowWidth:e})=>{const n=void 0!==g?g:!s.a.isTwoColumnLayout(e);return i.a.createElement(M.a,{accessibilityLabel:t||N,accessibilityRole:a,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[u,V.cursor,_&&V.gifPlayButton]},this._renderPreview(),_&&!f&&i.a.createElement(w.a,{accessibilityLabel:L,onPress:this._handleGifClick,size:"small"}),p?i.a.createElement(E.a,{accessibilityLabel:F,hoverLabel:{label:B},icon:i.a.createElement(S.a,null),onPress:d,size:"small",style:V.close,type:"onMediaDominantColorFilled"}):null,y?i.a.createElement(P.c,{type:P.a}):null,h&&!v?i.a.createElement(x.a,{align:"left",altLabel:t}):null,m?i.a.createElement(M.a,{style:[V.editMedia,v?V.editVideo:V.editImage]},b?i.a.createElement(E.a,{accessibilityLabel:A,icon:i.a.createElement(I.a,{style:V.editSensitiveWarningIcon}),onPress:c,size:"small",style:V.editSensitiveWarningButton,type:"onMediaDominantColorFilled"}):null,i.a.createElement(E.a,{accessibilityLabel:k,icon:n?i.a.createElement(R.a,null):void 0,onPress:l,size:n?"xSmall":"small",type:"onMediaDominantColorFilled"},n?void 0:O)):null)}))}_renderPreview(){var e;const{mediaItem:t}=this.props;if(t.externalMediaDetails){const e=t.externalMediaDetails.previewUrl,a=t.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(e,a)}return null!=(e=t.mediaFile)&&e.isVideo?this._renderVideoPreview(t.mediaFile.type,t.mediaFile.url,t.id,t.mediaFile):i.a.createElement(M.a,{style:T.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:a}=this.state,n={uri:a?e:t};return i.a.createElement(M.a,{onClick:this._handleGifClick,style:T.a.absoluteFill},i.a.createElement(D.a,{resizeMode:"cover",source:n,style:V.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,imageResizeMode:a,mediaItem:n,onClick:s}=this.props;return i.a.createElement(c.b,{borderRadius:e,enableGif:t,mediaItem:n,onClick:s,resizeMode:a})}_renderVideoPreview(e,t,a,n){var s;this._configurableVideoPlayerEnabled=this.context.featureSwitches.isTrue("responsive_web_composer_configurable_video_player_enabled");const{mediaItem:r}=this.props,o=null==(s=r.mediaMetadata)?void 0:s.subtitles;if(this._configurableVideoPlayerEnabled&&n instanceof y.c){const s=Object(d.h)(n.fileHandle)?[{src:t,type:e}]:[],l=`${a}`;return i.a.createElement(p,{mediaFile:n,mediaId:l,subtitles:o,trimData:null==r?void 0:r.trimData,variants:s})}{var l;const a=Object(d.h)(n.fileHandle)?[{content_type:e,url:t}]:[],s=(null==o||null==(l=o.upload)?void 0:l.mediaFile)instanceof _.a?o.upload.mediaFile.vtt:void 0;return i.a.createElement(f,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:n instanceof y.c?n.thumbnail:"",style:V.video,variants:a},o&&s?i.a.createElement("track",{default:!0,kind:"subtitles",label:o.displayName,src:s,srcLang:o.lang}):null)}}}j.contextType=v.a,j.defaultProps={enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1,withEditSensitiveWarningButton:!1};const V=T.a.create((e=>({close:{position:"absolute",left:e.spaces.space4,top:e.spaces.space4},cursor:{cursor:"pointer"},editSensitiveWarningIcon:{color:e.colors.primary},editMedia:{display:"flex",flexDirection:"row",position:"absolute",right:e.spaces.space4},editImage:{bottom:e.spaces.space4},editVideo:{top:e.spaces.space4},editSensitiveWarningButton:{marginRight:e.spaces.space8},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}})));t.a=j},pPzx:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},pcjM:function(e,t,a){"use strict";a.r(t),a.d(t,"Compose",(function(){return Ae}));a("kYxP"),a("MvUL");var n=a("ERkP"),i=a.n(n),s=a("HPNB"),r=a("h5NW"),o=a("xVN5"),l=a("pidX"),c=a("AspN"),d=a("XOJV"),u=a("G6rE"),h=a("xZGM"),p=a("0KEI"),m=a("hqKg"),g=a("oEGd"),b=a("rU/Q"),f=a("XpKj");const _=e=>(t,a)=>{const n=((e,t)=>t.location.state)(0,a);return n?e(n):void 0},y=Object(m.createSelector)(((e,t)=>t.activeUser),u.e.selectLoggedInUser,((e,t)=>e||t)),v=(e,t)=>{const{location:{query:a}}=t;return a&&"string"==typeof a.in_reply_to?a.in_reply_to:void 0},C=_((e=>e.inReplyToStatusId)),w=(e,t)=>t.location.pathname.indexOf("/intent/")>-1,E=_((e=>e.defaultText)),x=_((e=>e.quotedStatus)),T=({cardUrl:e,mediaIds:t,...a})=>a,S=_((e=>e.isSelfThreadReply)),I=_((e=>e.hideUnsentTweetsButton)),R=_((e=>e.headingSubtitle)),D=_((e=>e.headingTitle)),M=_((e=>!!e.previousTweetId)),P=_((e=>e.editableUntil)),k=_((e=>e.selectedCommunityId)),A=Object(m.createSelector)((e=>o.k(e,"")),((e,t)=>{const a=E(e,t);return Object(l.a)(t.location)||a}),((e,t)=>t.quotedStatus?t.quotedStatus:x(e,t)),c.j,w,((e,t,a,n,i)=>e.map(((e,s)=>({...T(e),media:n.filter((t=>e.mediaIds.some((e=>e===t.id)))),quotedStatus:0===s?a:void 0,text:0===s&&t&&!i?t:e.text}))))),O=Object(m.createStructuredSelector)({activeUser:y,composerData:A,draftTweets:b.e,inReplyToStatus:(e,t)=>{const a=v(0,t)||C(e,t);return a?d.a.selectHydrated(e,a):void 0},inReplyToStatusId:v,isEdit:M,editableUntil:P,isIntentRoute:w,isSelfThreadReply:S,isSending:e=>o.m(e,""),scheduledTweets:f.f,sendingProgress:o.o,composeSemanticCoreId:_((e=>e.composeSemanticCoreId)),hideUnsentTweetsButton:I,subtitle:R,title:D,selectedCommunityIdFromLocationState:k,shouldShowCommunityAudienceEducation:(e,t)=>Object(h.E)(e,h.e)}),L={createDraftTweetApiErrorHandler:Object(p.createLocalApiErrorHandlerWithContextFactory)(b.d),createScheduledTweetApiErrorHandler:Object(p.createLocalApiErrorHandlerWithContextFactory)(f.d),fetchScheduledTweets:f.c,fetchDraftTweets:b.c,addCommunityAudienceEducationFlag:()=>Object(h.A)(h.e),updateAudienceControlsValue:o.t};var F=Object(g.f)(O,L),B=a("MWbm"),N=a("t62R"),j=a("rHpw");const V=e=>{const{editableUntil:t,timeElapsedCallback:a}=e,n=i.a.useRef(t.getTime()),s=i.a.useRef(null);null==s.current&&(s.current=()=>{const e=n.current-(new Date).getTime();return new Date(e<0?0:e).toLocaleString("default",{minute:"numeric",second:"numeric"})});const[r,o]=i.a.useState(s.current);return i.a.useEffect((()=>{const e=setInterval((()=>{if(!s.current)return null;const t=s.current();"00:00"===t&&(clearInterval(e),a()),o(t)}),1e3);return()=>clearInterval(e)}),[a]),i.a.createElement(B.a,{style:z.root},i.a.createElement(N.b,{color:"red500",testID:"displayedCountdown",weight:"medium"},r))},z=j.a.create((e=>({root:{paddingLeft:4,paddingRight:4,paddingTop:6,paddingBottom:6,backgroundColor:e.colors.red0,borderRadius:6}})));var U=a("RgK2"),H=a.n(U),W=a("jHSc"),G=a("lsKC"),K=a("3XMw"),$=a.n(K),q=a("iFPY"),X=a("QbaN"),Q=a("v6aA"),J=a("rxPX");const Y=e=>Object(h.E)(e,h.r);var Z=Object(J.a)().propsFromState((()=>({shouldShowNewsletterCallout:Y}))).propsFromActions((()=>({addFlag:h.A}))),ee=a("Lsrn"),te=a("k/Ka");const ae=(e={})=>Object(te.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[ee.a.root,e.style],viewBox:"0 0 32 32"},i.a.createElement("g",null,i.a.createElement("path",{d:"M18.672 15.25H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm0-5.297H8.078c-.414 0-.75.336-.75.75s.336.75.75.75h10.594c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-4.304 10.594h-6.29c-.414 0-.75.336-.75.75s.336.75.75.75h6.29c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),i.a.createElement("path",{d:"M29.284 15.25h-4.548V5.736C24.736 4.228 23.51 3 22 3H4.75C3.24 3 2.014 4.228 2.014 5.736v20.527C2.014 27.773 3.24 29 4.75 29h21.885c1.874 0 3.4-1.524 3.4-3.398V16c0-.414-.337-.75-.75-.75zM3.514 26.264V5.736c0-.68.554-1.236 1.236-1.236H22c.682 0 1.236.555 1.236 1.236V25.6c0 .704.214 1.357.58 1.9H4.75c-.682 0-1.236-.555-1.236-1.236zm23.12 1.236c-1.046 0-1.897-.852-1.897-1.898V16.75h3.798v8.852c0 1.046-.853 1.898-1.9 1.898z"})));ae.metadata={width:32,height:32};var ne=ae,ie=a("4zmP");const se=$.a.ed33a3b6,re=$.a.d5bda8b4,oe=$.a.i859a9d4,le=j.a.create((e=>({revueCallout:{marginBottom:e.spaces.space4,marginTop:e.spaces.space20}})));var ce=Z((({addFlag:e,shouldShowNewsletterCallout:t})=>{const{featureSwitches:a}=i.a.useContext(Q.a),n=a.isTrue("responsive_web_newsletters_callout_enabled");return t&&n?i.a.createElement(B.a,{style:le.revueCallout},i.a.createElement(ie.a,{Icon:ne,action:{label:oe,link:"https://www.getrevue.co?utm_source=twitter-threads&utm_campaign=announcement-callout&utm_content=learn-more"},headline:se,onClose:()=>{e(h.r)},text:re,withCloseButton:!0})):null})),de=a("7nmT"),ue=a.n(de),he=a("Dtul"),pe=a("zh9S"),me=a("7JQg"),ge="tweetButton",be=a("/yvb"),fe=a("JYMr"),_e=a("cHvH"),ye=a("feu+"),ve=a("7N4s"),Ce=a("zTrU"),we=a("3A2y");const Ee=$.a.b8f0483e,xe=$.a.a133d13e,Te=$.a.a1183238,Se=$.a.da2663f6,Ie=$.a.j24c37b2,Re="compose",De={page:Re},Me={page:Re,section:"reply"},Pe={context:"compose_intent_logged_in"},ke={viewType:"send_tweet"};class Ae extends i.a.Component{constructor(...e){super(...e),this.state={isValid:!1,showEditTimer:!1},this._handleDismissCommunityAudienceEducation=()=>{this.props.addCommunityAudienceEducationFlag()},this._handleAppBarHeight=Object(Ce.a)((()=>{const e=ue.a.findDOMNode(this._appBarRef);return e&&e instanceof window.Element&&e.getBoundingClientRect().height||50})),this._handleBackClick=()=>{this._composeContainerRef&&this._composeContainerRef.handleDismissComposer()},this._handleCloseComposer=()=>{this._appBarRef&&this._appBarRef.goBack()},this._handleSendTweet=()=>{this._composeContainerRef&&this._composeContainerRef.handleTweetOrRetweet()},this._setValidity=e=>{e!==this.state.isValid&&this.setState({isValid:e})},this._getScribeNamespace=()=>this.props.inReplyToStatus||this.props.inReplyToStatusId?Me:De,this._getScribeData=()=>{const{activeUser:e,isIntentRoute:t}=this.props;return t&&e?Pe:H.a},this._renderAppBarRightControl=()=>{const{isValid:e}=this.state,{isModal:t}=this.context,{activeUser:a,inReplyToStatus:n,isEdit:s,isSelfThreadReply:r,isSending:o}=this.props,l=!e||o||!a;return i.a.createElement(B.a,{style:Oe.rightControlContainer},s?this._renderCountdownTimer():this._renderUnsentHeading(),t?null:i.a.createElement(be.a,{behavioralEventContext:ke,disabled:l,onPress:this._handleSendTweet,size:"small",testID:ge,type:"brandFilled"},Object(G.c)({inReplyToStatus:!!n,isSelfThreadReply:!!r,isQuoteTweet:!!this.isQuoteTweet,isRetweet:!!this.isRetweet,isScheduled:!!this.isScheduled,isThread:this.isThread,isEdit:!!s})))},this._renderHeaderWithProgressBar=e=>{const{isModal:t}=this.context,{isSending:a,sendingProgress:n}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe.a,{progress:a?Math.max(n,.02):0,style:[Oe.progressBar,t&&Oe.progressBarModal]}),e)},this._renderUnsentHeading=()=>{const{draftTweets:e,hideUnsentTweetsButton:t,scheduledTweets:a}=this.props;if(!t&&(a.length>0||e.length>0))return i.a.createElement(B.a,null,i.a.createElement(be.a,{onPress:this._handleOpenUnsent,size:"small",testID:"unsentButton",type:"brandText"},xe))},this._renderCountdownTimer=()=>{const{editableUntil:e}=this.props,t=new Date(parseInt(e,10));return this.state.showEditTimer?i.a.createElement(B.a,null,i.a.createElement(V,{editableUntil:t,timeElapsedCallback:()=>{this._composeContainerRef&&this._composeContainerRef.handleEditTimeLimitExceeded()}})):null},this._handleOpenUnsent=()=>{const{history:e}=this.props;Object(pe.c)({...this._getScribeNamespace(),element:"unsent_tweets",action:"click"}),e.push("/compose/tweet/unsent/drafts")},this._setAppBarRef=e=>{this._appBarRef=e},this._handleComposeContainerRef=e=>{this._composeContainerRef=e}}componentDidMount(){const{activeUser:e,createDraftTweetApiErrorHandler:t,createScheduledTweetApiErrorHandler:a,editableUntil:n,fetchDraftTweets:i,fetchScheduledTweets:s,history:r,inReplyToStatus:o,isEdit:l,location:c,selectedCommunityIdFromLocationState:d,updateAudienceControlsValue:u}=this.props;if(this._unlockReload=he.a.acquire(),r.setModalRouteBreakpoint(r.location),e&&(s().catch(a()),i().catch(t())),d&&(u({_type:"community_members",communityIdValue:d,conversationControlsValue:"community_members"}),r.replace({pathname:c.pathname,state:Object(we.a)(c.state||{},"selectedCommunityId")})),null!=o&&o.exclusivity_info?u({_type:"super_followers_exclusive",conversationControlsValue:"super_followers_exclusive",exclusivityControlValue:{}}):null!=o&&o.community_id_str?u({_type:"community_members",communityIdValue:o.community_id_str,conversationControlsValue:"community_members"}):null!=o&&o.trusted_friends_info&&u({_type:"trusted_friends_tweet",conversationControlsValue:"trusted_friends_tweet",trustedFriendsValue:{trusted_friends_list_id:"1482057446797373440"}}),!this._countdownRef&&l&&n&&!this.state.showEditTimer){const e=new Date(parseInt(n,10)),t=()=>e-new Date<=3e5&&(this.setState({showEditTimer:!0}),this._countdownRef&&clearInterval(this._countdownRef),!0);t()||(this._countdownRef=setInterval((()=>t()),1e3))}}componentWillUnmount(){this._unlockReload(),this._countdownRef&&clearInterval(this._countdownRef)}render(){const{activeUser:e,composeHeader:t,composeSemanticCoreId:a,composerData:n,customizePropsForSingleComposerItem:o,history:l,isIntentRoute:c,location:d,quotedStatus:u,richTextInputContext:h,subtitle:p,title:m,typeaheadWrapper:g}=this.props,b=c&&!e,{isModal:f}=this.context;return i.a.createElement(me.c,{data:this._getScribeData(),namespace:this._getScribeNamespace()},i.a.createElement(_e.a,null,(({windowWidth:c})=>{const _=s.a.shouldRenderAsModal(c),y=(b||this.showCommunityAudienceEducation)&&_,v=(null==n?void 0:n.length)>1;return i.a.createElement(i.a.Fragment,null,this.showCommunityAudienceEducation?i.a.createElement(ye.a,{actionLabel:Ie,graphicDisplayMode:"none",headline:Te,onAction:this._handleDismissCommunityAudienceEducation,onClose:this._handleDismissCommunityAudienceEducation,subtext:Se,withCloseButton:!1}):null,b&&i.a.createElement(q.a,{history:l,location:d}),!y&&i.a.createElement(i.a.Fragment,null,i.a.createElement(W.b,{appBarRef:this._setAppBarRef,behavioralEventViewType:Re,documentTitle:Ee,hideBackButton:!1,history:l,onBackClick:this._handleBackClick,renderHeader:this._renderHeaderWithProgressBar,rightControl:this._renderAppBarRightControl(),subtitle:p,title:m},i.a.createElement(r.a,{activeUser:e,composeHeader:t,composeSemanticCoreId:a,customizePropsForSingleComposerItem:o,history:l,isModal:f,location:d,onCloseComposer:this._handleCloseComposer,onHandleAppBarHeight:this._handleAppBarHeight,onRef:this._handleComposeContainerRef,quotedStatus:u,richTextInputContext:h,setValidity:this._setValidity,typeaheadWrapper:g,windowWidth:c})),v?i.a.createElement(ce,null):null))})))}get showCommunityAudienceEducation(){const{inReplyToStatus:e,selectedCommunityIdFromLocationState:t,shouldShowCommunityAudienceEducation:a}=this.props,n=!!(null!=e&&e.community_id_str||t);return a&&n}get isThread(){return this.props.composerData.length>1}get isRetweet(){const{composerData:e}=this.props,t=0===e[0].media.length;return!this.isThread&&e[0].quotedStatus&&""===e[0].text&&t}get isQuoteTweet(){const{composerData:e}=this.props;return!this.isThread&&!!e[0].quotedStatus}get isScheduled(){const{composerData:e}=this.props;return Object(X.h)(e[0].scheduledFor)}}Ae.contextType=ve.b;const Oe=j.a.create((e=>({progressBar:{position:"fixed",borderTopLeftRadius:e.borderRadii.small,borderTopRightRadius:e.borderRadii.small,zIndex:e.componentZIndices.appBarZIndex+1},progressBarModal:{position:"absolute"},rightControlContainer:{"flex-direction":"row"}})));t.default=F(Ae)},piX5:function(e,t,a){"use strict";const n=a("rHpw").a.create((e=>({border:{borderRadius:e.borderRadii.small,borderWidth:e.borderWidths.small,borderColor:e.colors.gray200},focusedBorderValid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.primary}`,borderColor:e.colors.primary},focusedBorderInvalid:{boxShadow:`0 0 0 ${e.borderWidths.small} ${e.colors.red500}`},invalidBorderColor:{borderColor:e.colors.red500},invalidColor:{color:e.colors.red500},validColor:{color:e.colors.primary},disabled:{cursor:"default",opacity:.5,backgroundColor:e.colors.gray50,borderColor:e.colors.gray50}})));t.a=n},pidX:function(e,t,a){"use strict";a.d(t,"b",(function(){return l}));a("kYxP");var n=a("3XMw"),i=a.n(n),s=a("3A2y");const r=i.a.b2e94283,o=["title","screen_name","text","url","hashtags","via"];t.a=e=>{const t=e.state||{},a=e.query||{},[n,i,s,l,c,d]=o.map((e=>t[e]||a[e])),u=[n,i&&`@${i.toString()}`,s,l,c&&c.toString().split(",").map((e=>`#${e}`)).join(" "),d&&r({viaScreenName:d})].filter(Boolean).join(" ");return u?`${u} `:void 0};const l=e=>Object(s.a)(e,o)},qeCs:function(e,t,a){var n=a("vxC8")(a("IBsm"),"Map");e.exports=n},qjF7:function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},rFBM:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("rHpw"),r=a("k/Ka"),o=a("MWbm");const l=e=>Object(r.a)("div",e);class c extends i.a.Component{constructor(...e){super(...e),this._dragEnterCount=0,this.state={active:!1},this._handleDragDrop=e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)},this._handleDragEnter=e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)},this._handleDragLeave=e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)},this._handleDragOver=e=>{e.preventDefault()}}render(){const{allowDragDrop:e,children:t,style:a}=this.props,{active:n}=this.state,s=e?d.dragBorderValid:d.dragBorderInvalid;return i.a.createElement(l,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[d.root,a,n&&s]},i.a.createElement(o.a,{style:d.inner},"function"==typeof t?t(n):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}c.defaultProps={allowDragDrop:!0};const d=s.a.create((e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.magenta500},inner:{flexGrow:1}})));t.a=c},rziq:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));const n="send-tweet",i="dismiss-composer"},"sCL+":function(e,t){e.exports=function(e,t,a){for(var n=-1,i=null==e?0:e.length;++n<i;)if(a(t,e[n]))return!0;return!1}},sCk0:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),s=a("zfvc"),r=a("zrc3");const o=Object.freeze({in:"in",out:"out",static:"static"});class l extends i.a.Component{constructor(...e){super(...e),this.state={isAnimating:!1,renderChildren:i.a.Children.toArray(this.props.children).map((e=>({status:o.static,child:e})))},this._handleEachAnimateComplete=()=>{const{isAnimating:e}=this.state,{children:t,onAnimateComplete:a}=this.props;e&&(a&&a(),this.setState({renderChildren:i.a.Children.toArray(t).map((e=>({status:o.static,child:e}))),isAnimating:!1}))}}static getDerivedStateFromProps(e,t){const a=((e,t)=>{let a=0,n=0;const i=[];for(;n<e.length;){if(a>=t.length){i.push(...e.slice(n).map((e=>({child:e,status:o.out}))));break}const s=t[a],l=e[n];if(s.key===l.key)i.push({child:s,status:o.static}),a+=1;else{const e=Object(r.a)(t,(e=>e.key===l.key));e>=0?(i.push(...t.slice(a,e).map((e=>({child:e,status:o.in}))),{child:t[e],status:o.static}),a=e+1):i.push({child:l,status:o.out})}n+=1}return a<t.length&&i.push(...t.slice(a).map((e=>({child:e,status:o.in})))),i})(t.renderChildren.map((e=>e.child)),i.a.Children.toArray(e.children));return{renderChildren:a,isAnimating:!a.every((e=>e.status===o.static))}}render(){const{renderChildren:e}=this.state;return e.map((({child:e,status:t})=>i.a.createElement(s.a,{animateMount:t!==o.static,key:e.key,onAnimateComplete:this._handleEachAnimateComplete,show:t!==o.out},e)))}}t.a=l},t0L4:function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},tLQN:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},tQYX:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},tuke:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("Lsrn"),r=a("k/Ka");const o=(e={})=>Object(r.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));o.metadata={width:24,height:24},t.a=o},ude7:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("A0bJ"),i=a("hJBK"),s=a("1auM");const r=1,o=2,l=3,c=e=>{if(Object(s.b)(e)){if(e.isGif){const{height:t,img:a,orientation:s,width:r}=e;return Object(i.b)(a,r,t,s).then((e=>Object(i.a)(e)),(e=>{throw new n.a("Gif preview could not be generated",l)}))}{const e=new n.a("The provided image must be a gif",o);return Promise.reject(e)}}{const e=new n.a("The provided file is not a valid image",r);return Promise.reject(e)}}},vxC8:function(e,t,a){var n=a("5nKN"),i=a("4p/L");e.exports=function(e,t){var a=i(e,t);return n(a)?a:void 0}},w3n3:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("/yvb"),r=a("3XMw"),o=a.n(r),l=a("3rWK"),c=a("Irs7");const d=o.a.a4993fa2,u=i.a.createElement(l.a,null),h=o.a.i0db46e6,p={viewType:"gif_search"};t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:a,history:n,onPress:r,style:o,testID:l})=>{const m=Object(c.b)(),g=i.a.useCallback((()=>{r&&r(),m.scribe({element:"found_media_button",action:"click"}),n.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:a,dmConversationId:e}})}),[e,m,a,n,r]);return i.a.createElement(s.a,{accessibilityLabel:d,behavioralEventContext:p,disabled:!t,hoverLabel:{label:h},icon:u,onPress:g,size:"medium",style:o,testID:l,type:"brandText"})}},wpu3:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m}));a("kYxP"),a("qd3W");var n=a("oEoC"),i=a("1auM"),s=a("kIAd"),r=a("VAyw"),o=a("/Ikv"),l=a("s1N3"),c=a("lnti");const d=({excludeReplyUser:e,inReplyToStatus:t,loggedInUserId:a})=>{const{retweeted_status:n}=t,{entities:i,unmentioned_user_ids:s,user:o}=n||t,d=n?n.user:{},h=n?t.user:{},p=(null==i?void 0:i.user_mentions)||[],m=r.a.mergeTaggedUsers((null==i?void 0:i.media)||[]),g=u(n||t)||{},b={[d.id_str]:d,[h.id_str]:h,[o.id_str]:o,[g.id_str]:g};p.forEach((e=>{b[e.id_str]=e})),m.forEach((({name:e,screen_name:t,user_id:a})=>{b[a]={id_str:a,name:e,screen_name:t}}));const f=e=>{const t=null==s?void 0:s.includes(e.id_str),a=e.id_str===o.id_str;return!t||a?[e.id_str]:[]},_=Object(l.a)(Object(c.a)([...f(d),...f(h),o.id_str,...p.flatMap((e=>f(e))),...m.map((e=>e.user_id))])).filter((e=>e!==a));let y=a&&o.id_str===a?[a,..._]:_;return e&&(y=y.filter((e=>e!==o.id_str))),y.map((e=>b[e]))},u=({card:e})=>{let t=null;if(e){const a=o.a.getBindingValue(e.binding_values,"site");a&&e.users&&(t=e.users[a.id_str])}return t},h=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const a=t.some((e=>!!e.externalMediaDetails)),n=!a&&t.some((e=>e.mediaFile&&e.mediaFile.isGif)),s=t.some((e=>e.mediaFile&&!(e.mediaFile instanceof i.a)&&e.mediaFile.isVideo));if(n||a||s)return 1===t.length;{const a=t.length<=e,n=t.every((e=>e.mediaFile&&e.mediaFile.isImage));return a&&n}},p=h({maxNumberOfPhotos:4}),m=(e,t=!1)=>{const a=e.split(s.b.WordBoundary);return t&&a.pop(),!!a.find((e=>{const t=Object(n.e)(e,"compose");return t&&"users"===t.result_type}))}},x8Sc:function(e,t,a){"use strict";a.r(t),a.d(t,"InlineComposeContainer",(function(){return d}));var n=a("ERkP"),i=a.n(n),s=a("h5NW"),r=a("MWbm"),o=a("7N4s"),l=a("cHvH"),c=a("rHpw");const d=({history:e,location:t,parentTweetId:a,replyPressToggle:n,richTextInputContext:c,typeaheadWrapper:d})=>{const{isModal:h}=i.a.useContext(o.b);return i.a.createElement(l.a,null,(({windowWidth:o})=>i.a.createElement(r.a,{style:u.root},i.a.createElement(s.a,{history:e,isInline:!0,isModal:h,location:t,parentTweetId:a,replyPressToggle:n,richTextInputContext:c,typeaheadWrapper:d,windowWidth:o}))))},u=c.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,zIndex:1}})));t.default=d},yTN1:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("WOwf"),r=a("3XMw"),o=a.n(r),l=a("k6Ei"),c=a("rHpw"),d=a("+/1j"),u=a("MWbm");const h=o.a.c2fc878d,p=o.a.db11b27f,m=e=>e,g=c.a.create((({colors:e})=>({root:{alignItems:"flex-start",minHeight:30,minWidth:30},center:{alignItems:"center",justifyContent:"center",margin:"auto"},progressCircle:{transitionDuration:"0.2s",transitionProperty:"opacity"},hide:{opacity:0},text:{fontSize:13,lineHeight:.8,minWidth:16,textAlign:"center"},gray700:{color:e.gray700},red500:{color:e.red500}})));t.a=e=>{const{count:t,maxCount:a,formatNumber:n=m,warningCount:r}=e,o=a-t,b=o>=0?p({count:n(o)}):h({count:n(t-a)}),f=t>=r?i.a.createElement(d.a,{accessibilityAtomic:!0,accessibilityLiveRegion:"polite",style:c.a.visuallyHidden},b):null,_=Object(s.a)(o,a),y=t>=a?"red500":t>=r?"yellow500":"primary",v=i.a.createElement(l.a,{color:y,progress:_,size:t>=r?30:20,style:[g.progressCircle,o<=-10&&g.hide]}),C=t>=r?i.a.createElement(d.a,{style:[g.text,o>0?g.gray700:g.red500]},n(o)):null;return i.a.createElement(u.a,{style:[g.root,g.center]},f,v,i.a.createElement(u.a,{style:[c.a.absoluteFill,g.center]},C))}},yZqq:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),s=(a("kYxP"),a("ERkP")),r=a.n(s),o=a("H7Rt"),l=a("3XMw"),c=a.n(l),d=a("MWbm"),u=a("t62R"),h=a("CKsB"),p=a("/yvb"),m=a("rHpw"),g=a("Zg3A"),b=a("Lsrn"),f=a("k/Ka");const _=(e={})=>Object(f.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[b.a.root,e.style],viewBox:"0 0 24 24"},r.a.createElement("g",null,r.a.createElement("path",{d:"M10.43 12.24c-1.37 0-2.89-.15-3.87-1.26-.82-.95-1.09-2.39-.81-4.43C6.13 3.7 7.88 2 10.43 2s4.3 1.7 4.68 4.55c.27 2.04.01 3.49-.81 4.42-.98 1.12-2.51 1.27-3.87 1.27zm0-8.73c-2.39 0-3.03 2.03-3.19 3.24-.21 1.56-.06 2.65.45 3.23.46.53 1.28.75 2.73.75 1.46 0 2.28-.22 2.74-.75.51-.58.66-1.67.45-3.23-.16-1.21-.79-3.24-3.18-3.24zm2.01 18.99H4.22c-.7 0-1.33-.3-1.75-.83-.43-.54-.57-1.26-.4-1.95.88-3.55 4.31-6.03 8.34-6.03.42 0 .75.34.75.75 0 .42-.34.75-.75.75-3.34 0-6.17 2.01-6.88 4.89-.06.25-.02.49.12.66.13.16.32.25.56.25h8.22c.42 0 .75.34.75.75.01.42-.32.76-.74.76zm9.15-10.87l-4.2 8.46c-.01.03-.02.05-.04.07-.02.06-.06.11-.1.15-.05.05-.1.09-.15.13h-.01c-.06.04-.12.06-.19.08-.07.02-.13.03-.2.03-.05 0-.11 0-.17-.02-.06-.01-.11-.03-.16-.06-.06-.03-.12-.07-.18-.12-.01-.01-.03-.02-.04-.03l-3.08-3.27c-.28-.3-.27-.78.04-1.06.3-.29.77-.27 1.06.03l2.34 2.48 3.74-7.53c.18-.37.63-.52 1-.34.37.17.52.63.34 1z"}),r.a.createElement("path",{d:"M17.1 20.44c.05-.04.1-.08.15-.13 0 .01-.02.03-.03.04-.04.04-.08.06-.12.09z"})));_.metadata={width:24,height:24};var y=_,v=a("boUI"),C=a("EweD");const w=c.a.g6185a9e,E=c.a.g2d04222,x=c.a.baffe39a,T=c.a.af293dc2,S=c.a.h1053f7e,I=c.a.bf994ab2,R=c.a.cf7f7e3a,D=c.a.cfd2f35e,M=m.a.create((e=>({root:{flexDirection:"column",paddingTop:e.spaces.space16,paddingBottom:e.spaces.space4,borderRadius:e.borderRadii.xLarge},popover:{maxWidth:5*e.spacesPx.space64},modal:{borderRadius:e.borderRadii.none},title:{flexDirection:"column",paddingHorizontal:e.spaces.space16,marginBottom:e.spaces.space12},menuRow:{flexDirection:"row",paddingTop:e.spaces.space12,paddingBottom:e.spaces.space12,alignItems:"center",borderRadius:e.borderRadii.small},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}})));var P=e=>{var t,a;const{dismiss:n,isModal:i,midConversationTweet:s,value:l}=e,c=t=>()=>{e.onChange(t),e.dismiss()},m=!!s,b=m&&!(null!=s&&null!=(t=s.entities)&&null!=(a=t.user_mentions)&&a.some((e=>e.id_str!==s.user.id_str)));let f=S;return b?f=I:m&&(f=R),r.a.createElement(d.a,{accessibilityDescribedBy:"conversation-controls-details",accessibilityLabelledBy:"conversation-controls-title",accessibilityRole:"dialog",style:[M.root,i?M.modal:M.popover]},r.a.createElement(d.a,{style:M.title},r.a.createElement(u.b,{nativeID:"conversation-controls-title",weight:"bold"},w),r.a.createElement(u.b,{color:"gray700",nativeID:"conversation-controls-details",size:"body"},E)),r.a.createElement(d.a,null,r.a.createElement(h.a,{Icon:g.a,actionText:x,isSelected:o.a.all===l,onClick:c(o.a.all),selectable:!0,style:M.menuRow,withIconAsThumbnail:!0}),r.a.createElement(h.a,{Icon:y,actionText:T,isSelected:o.a.community===l,onClick:c(o.a.community),selectable:!0,style:M.menuRow,withIconAsThumbnail:!0}),r.a.createElement(h.a,{Icon:b?v.a:C.a,actionText:f,isSelected:o.a.by_invitation===l,onClick:c(o.a.by_invitation),selectable:!0,style:M.menuRow,withIconAsThumbnail:!0}),e.isModal?r.a.createElement(p.a,{key:"button_cancel",onPress:n,size:"large",style:M.cancelButton,type:"primaryOutlined"},D):null))},k=a("OiMc"),A=a("efqG");t.a=e=>{const{children:t,controlled:a=!1,disabled:n}=e,[s,o]=r.a.useState(!1),l=r.a.useCallback((()=>o(!0)),[]),c=r.a.useCallback((()=>o(!1)),[]),d=a?s?k.a.VISIBILITY_BEHAVIOR.forceVisible:k.a.VISIBILITY_BEHAVIOR.forceHidden:void 0,u="function"==typeof t?t({openPopover:l,closePopover:c}):t;return r.a.createElement(A.a,{disabled:n,onDismiss:c,renderContent:(t,a)=>{const{children:n,controlled:s,...o}=e;return r.a.createElement(P,i()({},o,{dismiss:t,isModal:"sheet"===a}))},visibilityBehavior:d},u)}},z9Jh:function(e,t){e.exports=function(e){return e!=e}},zWgn:function(e,t){e.exports=function(e){return e}},zaNA:function(e,t){e.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},zmS9:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),s=a("3XMw"),r=a.n(s),o=a("J0mu"),l=a("t62R"),c=a("rHpw"),d=a("QbaN");const u=r.a.bfb895b1,h=c.a.create((e=>({icon:{fontSize:e.fontSizes.body,paddingRight:e.spaces.space12,textAlignVertical:"middle"}})));t.a=({onPress:e,scheduledFor:t,testID:a})=>{const n=Object(d.c)(t),s=!!n&&(Object(d.h)(t)&&!Object(d.g)(n)&&!Object(d.f)(n)),r=Boolean(e);return n&&s?i.a.createElement(l.b,{color:"gray700",onPress:e,size:"subtext2",testID:a,withInteractiveStyling:r},i.a.createElement(o.a,{style:h.icon}),u({date:Object(d.b)(n),time:Object(d.i)(n)})):null}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.RichTextCompose.3e2795d7.js.map