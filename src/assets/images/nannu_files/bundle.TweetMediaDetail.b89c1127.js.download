(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{NP4V:function(e,t,a){"use strict";var o=a("ERkP"),n=a.n(o),r=a("Lsrn"),c=a("shC7"),i=a("k/Ka");const s=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style,c.a.getConstants().isRTL&&r.a.iconRTL],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M4.656 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L4.655 12z"}),n.a.createElement("path",{d:"M12.465 12l8.72-8.72c.293-.293.293-.768 0-1.06s-.768-.294-1.06 0l-9.25 9.25c-.294.292-.294.767 0 1.06l9.25 9.25c.145.146.337.22.53.22s.383-.073.53-.22c.292-.293.292-.768 0-1.06L12.464 12z"})));s.metadata={width:24,height:24},t.a=s},iyiT:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var o=a("ZUOq");const n=o.a.columnWidths.secondary.normal,r=o.a.columnWidths.primary},kVR4:function(e,t,a){"use strict";a("kYxP");var o=a("ERkP"),n=a.n(o),r=a("ymux"),c=a("rkhm"),i=a("iyiT"),s=a("zTrU"),l=a("AUxQ"),d=a("rHpw"),u=a("yw4N"),m=a("v6aA");class w extends n.a.Component{constructor(...e){super(...e),this._getApiErrorHandlerMap=Object(s.a)((e=>Object(c.a)(e))),this._getModule=Object(s.a)(((e,t)=>Object(r.a)({focalTweetId:e,featureSwitches:t})))}render(){const{contextTweetId:e,location:t,promotedContent:a,rootTweet:o,screenName:r,socialContext:c,tweet:i,tweetId:s}=this.props,{featureSwitches:d}=this.context,m={selectedTweetId:s};return n.a.createElement(u.a,{accessibilityExpanded:!0,style:h.root},n.a.createElement(l.a,{apiErrorHandlerMap:this._getApiErrorHandlerMap(r),contextTweetId:e,focalTweet:i,focalTweetId:s,location:t,module:this._getModule(s,d),promotedContent:a,rootTweet:o,selectedTweet:m,socialContext:c,withFocalTweetMedia:!1}))}}w.contextType=m.a;const h=d.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,overflow:"auto",width:i.a,borderLeftWidth:e.borderWidths.small,borderColor:e.colors.borderColor,borderStyle:"solid"}})));t.a=w},mpWK:function(e,t,a){"use strict";var o=a("ERkP"),n=a.n(o),r=a("Lsrn"),c=a("shC7"),i=a("k/Ka");const s=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style,c.a.getConstants().isRTL&&r.a.iconRTL],viewBox:"0 0 24 24"},n.a.createElement("g",null,n.a.createElement("path",{d:"M21.185 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.145.146.337.22.53.22s.383-.073.53-.22l9.25-9.25c.293-.295.293-.77 0-1.062z"}),n.a.createElement("path",{d:"M13.376 11.47l-9.25-9.25c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l8.72 8.72-8.72 8.72c-.294.294-.294.77 0 1.062.146.145.337.218.53.218s.384-.073.53-.22l9.25-9.25c.293-.293.293-.767 0-1.06z"})));s.metadata={width:24,height:24},t.a=s},u1Qz:function(e,t,a){"use strict";a.r(t),a.d(t,"TweetMediaDetailScreen",(function(){return ne}));a("kYxP"),a("MvUL");var o=a("ERkP"),n=a.n(o),r=a("zh9S"),c=a("H9MA"),i=a("XOJV"),s=a("rxPX"),l=a("0KEI"),d=a("P1r1");const u=(e,t)=>t.match.params.screenName,m=(e,t)=>t.match.params.statusId,w=(e,t)=>{const{match:{params:{index:a}}}=t;return parseInt(a,10)-1},h=(e,t)=>i.a.selectFetchStatus(e,m(0,t)),p=(e,t)=>e.location&&e.location.state&&e.location.state[t],f=(e,t)=>p(t,"forwardPivotInfo"),b=(e,t)=>p(t,"promotedContent"),v=(e,t)=>p(t,"socialContext"),E=(e,t)=>p(t,"contextTweetId"),T=(e,t)=>{const a=m(0,t),o=i.a.select(e,a);return o&&o.conversation_id_str||void 0};var g=Object(s.a)().propsFromState((()=>({fetchStatus:h,forwardPivotInfo:f,index:w,screenName:u,tweetId:m,tweet:i.a.createHydratedTweetSelector(m),promotedContent:b,dataSaver:c.c,socialContext:v,contextTweetId:E,rootTweet:i.a.createHydratedTweetSelector(T),showTweetMediaDetailDrawer:d.A}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(l.createLocalApiErrorHandlerWithContextFactory)("TWEET_MEDIA_DETAIL_SCREEN"),fetchTweetIfNeeded:i.a.fetchOneIfNeeded,googleAnalyticsPageView:r.a,updateSettings:d.M}))).withAnalytics({page:"tweet",section:"media"}),x=a("kVR4"),C=a("v//M"),y=a("W5XZ"),I=a("3XMw"),M=a.n(I),k=a("tI3i"),_=a.n(k),S=a("2doW"),L=a("UPvq"),P=a("VTxf"),O=a("yoO3"),R=a("wiP2"),H=a("Rp9C"),j=a("xXop"),A=a("lklz"),D=a("MWbm"),N=a("7N4s"),W=a("/IST"),B=a("/Ikv"),F=a("mjJ+"),z=a("/yvb"),V=a("rOXj"),U=a("cHvH"),X=a("rHpw"),K=a("iyiT"),Z=a("RCZO"),$=a("mpWK"),q=a("NP4V"),J=a("ACHU");const Y=M.a.d132269c,Q=M.a.dd657212,G=M.a.h63a5c3c,ee=M.a.f20b040e,te=M.a.f1d9930c,ae=M.a.a0e81a2e,oe=e=>e-K.a<K.b,ne=e=>{const{isModal:t}=n.a.useContext(N.b),{handleMediaDetailZoomed:a,handleMediaItemTapped:o,hideButtons:r}=Object(Z.h)(),[c,i]=n.a.useState(!1),{analytics:s,contextTweetId:l,createLocalApiErrorHandler:d,dataSaver:u,fetchStatus:m,fetchTweetIfNeeded:w,forwardPivotInfo:h,googleAnalyticsPageView:p,history:f,index:b,location:v,promotedContent:E,rootTweet:T,screenName:g,showTweetMediaDetailDrawer:I,socialContext:M,tweet:k,tweetId:X,updateSettings:K}=e,ne=()=>{const{state:e}=v;if(!e)return;const t=e.mediaItems;return t&&"index"in t&&"items"in t?t:void 0},ce=()=>{const e=ne();return e?e.index:b},ie=()=>{var e;const t=ne();if(t)return t.items;if(!k)return;const a=null==(e=k.extended_entities)?void 0:e.media;if(a)return a;if(k.card){const e=se();if(e)return[e]}},se=()=>{if(null!=k&&k.card){const e={tweetId:k.id_str,tweetUserId:k.user.id_str,tweetPermalink:k.permalink};_()(void 0!==k.card,"tweet.card must be defined");const t=k.unified_card&&Object.keys(k.unified_card).length?k.unified_card:k.card,a=Object(W.b)(t,e);if(a){const e=B.a.getImageEntityFromCard(a.card);if(e)return B.a.convertImageEntityToPhoto(e)}}},le=()=>{const e=ce(),t=ie();return t&&t[e]},de=e=>{const t=ne();return t?{...v.state,mediaItems:{...t,index:e}}:v.state},ue=e=>e&&oe(e)?c:I,me=n.a.useCallback((()=>{if(k&&k.user&&g.toLowerCase()!==k.user.screen_name.toLowerCase()){const e=k&&k.user?`/${k.user.screen_name}/status/${k.id_str}/photo/${b+1}`:null;e&&f.replace(e)}}),[f,b,g,k]),we=n.a.useCallback((()=>{if(k){const e=H.a.getTweetItem(k);p(s.contextualScribeNamespace),s.scribe({action:"show",data:{items:[e]}})}}),[s,p,k]),he=()=>{f.goBackThroughModals()},pe=n.a.useCallback((()=>{w(X).catch(d(y.a))}),[d,w,X]),fe=e=>()=>{e&&oe(e)?(s.scribe({component:"conversation_drawer",action:c?"collapse":"expand"}),i(!c)):(s.scribe({component:"conversation_drawer",action:I?"collapse":"expand"}),K({showTweetMediaDetailDrawer:!I}))},be=e=>{const t=ce(),a=ie();if(e===t)return;s.scribe({component:"gallery",element:t<e?"next":"prev",action:"click",data:{event_value:e+1}});const o=a&&a[e];f.replace({state:de(e),pathname:o&&o.expanded_url})},ve=e=>n.a.createElement(F.a,{isFixed:!0,items:[{link:null!=k&&k.user?`/${k.user.screen_name}/status/${k.id_str}`:"/",text:Q}],onCloseRequested:e}),Ee=e=>{const a=le(),o=Object(Z.b)(a),r=e&&ue(e);return t?n.a.createElement(z.a,{accessibilityLabel:r?ee:Q,dominantColor:o.rgb,hoverLabel:{label:r?te:ae},icon:r?n.a.createElement($.a,null):n.a.createElement(q.a,null),onClick:fe(e),type:"onMediaDominantColorFilled"}):k&&!t?n.a.createElement(z.a,{accessibilityLabel:G,dominantColor:a?o.rgb:void 0,icon:n.a.createElement(J.a,null),renderMenu:ve,type:a?"onMediaDominantColorFilled":"onMediaWhiteFilled"}):void 0},Te=()=>{const e=ce(),t=ie();if(!t)return n.a.createElement(P.a,null);const r=t[e],c=Object(Z.b)(r).rgb;return n.a.createElement(S.a,{dataSaver:u,dominantColor:c,mediaIndex:e,mediaItems:t,onDismiss:he,onMediaDetailZoomed:a,onMediaItemChanged:be,onTap:o,promotedContent:E,videoId:1===t.length&&k?A.b.forTweet(k.id_str):void 0})},ge=e=>{const t=le(),a=Object(Z.b)(t),o=V.a.isTouchSupported()&&(()=>{const e=ce(),t=ie();if(!t)return!1;const a=t[e];return"photo"===(null==a?void 0:a.type)||!1})();return n.a.createElement(L.a,{backgroundColor:a,footerButtons:k?n.a.createElement(j.a,{actionSize:"large",activeColor:"white",allowDownvote:!0,color:"white",forwardPivotInfo:k.softIntervention||h,style:re.actionsBar,tweet:k,withCount:!0}):void 0,hideButtons:r,mediaItem:t,onCloseButtonPress:he,overlayFooter:o,topRightButton:Ee(e)},n.a.createElement(C.a,{accessibilityLabel:Y,fetchStatus:m,onRequestRetry:pe,render:Te}))},xe=n.a.useRef(null);n.a.useEffect((()=>{xe.current!==X&&(pe(),xe.current=X)}),[pe,X]);const Ce=n.a.useRef(null);return n.a.useEffect((()=>{var e;(null==(e=Ce.current)?void 0:e.id_str)!==(null==k?void 0:k.id_str)&&(we(),Ce.current=k)}),[we,k]),n.a.useEffect((()=>{me()}),[me]),n.a.createElement(O.a,{behavioralEventViewType:"fullscreen_image"},n.a.createElement(R.a.Configure,{headerless:!0},t?n.a.createElement(U.a,null,(({windowWidth:e})=>n.a.createElement(D.a,{style:re.container},n.a.createElement(D.a,{style:re.neighbor},ge(e)),ue(e)?n.a.createElement(x.a,{contextTweetId:l,location:v,promotedContent:E,rootTweet:T,screenName:g,socialContext:M,tweet:k,tweetId:X}):null))):ge()))},re=X.a.create((e=>({actionsBar:{height:e.spaces.space48,maxWidth:"none",paddingHorizontal:e.spaces.space12},container:{flexDirection:"row",overflowX:"hidden",overflowY:"hidden",height:"100%",width:"100%",position:"relative"},neighbor:{flexGrow:1,flexShrink:1}}))),ce=g(ne);t.default=ce}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.TweetMediaDetail.b89c1127.js.map