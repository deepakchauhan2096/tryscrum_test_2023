(window.webpackJsonp=window.webpackJsonp||[]).push([[221],{"+Aie":function(e,t,n){var i;!function(o,r,s){if(o){for(var a,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},h={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p=1;p<20;++p)c[111+p]="f"+p;for(p=0;p<=9;++p)c[p+96]=p.toString();y.prototype.bind=function(e,t,n){var i=this;return e=e instanceof Array?e:[e],i._bindMultiple.call(i,e,t,n),i},y.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},y.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},y.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},y.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(g(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},y.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},y.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);a=null},y.init=function(){var e=y(r);for(var t in e)"_"!==t.charAt(0)&&(y[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},y.init(),o.Mousetrap=y,e.exports&&(e.exports=y),void 0===(i=function(){return y}.call(t,n,t,e))||(e.exports=i)}function d(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function m(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function b(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function f(e,t,n){return n||(n=function(){if(!a)for(var e in a={},c)e>95&&e<112||c.hasOwnProperty(e)&&(a[c[e]]=e);return a}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function _(e,t){var n,i,o,r=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),o=0;o<n.length;++o)i=n[o],h[i]&&(i=h[i]),t&&"keypress"!=t&&u[i]&&(i=u[i],r.push("shift")),b(i)&&r.push(i);return{key:i,modifiers:r,action:t=f(i,r,t)}}function g(e,t){return null!==e&&e!==r&&(e===t||g(e.parentNode,t))}function y(e){var t=this;if(e=e||r,!(t instanceof y))return new y(e);t.target=e,t._callbacks={},t._directMap={};var n,i={},o=!1,s=!1,a=!1;function c(e){e=e||{};var t,n=!1;for(t in i)e[t]?n=!0:i[t]=0;n||(a=!1)}function l(e,n,o,r,s,a){var c,l,u,h,p=[],d=o.type;if(!t._callbacks[e])return[];for("keyup"==d&&b(e)&&(n=[e]),c=0;c<t._callbacks[e].length;++c)if(l=t._callbacks[e][c],(r||!l.seq||i[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!o.metaKey&&!o.ctrlKey||(u=n,h=l.modifiers,u.sort().join(",")===h.sort().join(",")))){var m=!r&&l.combo==s,f=r&&l.seq==r&&l.level==a;(m||f)&&t._callbacks[e].splice(c,1),p.push(l)}return p}function u(e,n,i,o){t.stopCallback(n,n.target||n.srcElement,i,o)||!1===e(n,i)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function h(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=m(e);n&&("keyup"!=e.type||o!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):o=!1)}function p(e,t,r,s){function l(t){return function(){a=t,++i[e],clearTimeout(n),n=setTimeout(c,1e3)}}function h(t){u(r,t,e),"keyup"!==s&&(o=m(t)),setTimeout(c,10)}i[e]=0;for(var p=0;p<t.length;++p){var d=p+1===t.length?h:l(s||_(t[p+1]).action);f(t[p],d,s,e,p)}}function f(e,n,i,o,r){t._directMap[e+":"+i]=n;var s,a=(e=e.replace(/\s+/g," ")).split(" ");a.length>1?p(e,a,n,i):(s=_(e,i),t._callbacks[s.key]=t._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},o,e,r),t._callbacks[s.key][o?"unshift":"push"]({callback:n,modifiers:s.modifiers,action:s.action,seq:o,level:r,combo:e}))}t._handleKey=function(e,t,n){var i,o=l(e,t,n),r={},h=0,p=!1;for(i=0;i<o.length;++i)o[i].seq&&(h=Math.max(h,o[i].level));for(i=0;i<o.length;++i)if(o[i].seq){if(o[i].level!=h)continue;p=!0,r[o[i].seq]=1,u(o[i].callback,n,o[i].combo,o[i].seq)}else p||u(o[i].callback,n,o[i].combo);var d="keypress"==n.type&&s;n.type!=a||b(e)||d||c(r),s=p&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var i=0;i<e.length;++i)f(e[i],t,n)},d(e,"keypress",h),d(e,"keydown",h),d(e,"keyup",h)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},"6oVL":function(e,t,n){"use strict";n("kYxP"),n("MvUL");var i=n("ERkP"),o=n.n(i),r=n("3XMw"),s=n.n(r),a=n("cnVF"),c=n("Ukpf"),l=n("BTou"),u=n("mrHL"),h="LoginForm_Login_Button",p=n("fEA7"),d=n.n(p),m=n("MWbm"),b=n("Irs7"),f=n("v6aA"),_=n("/yvb"),g=n("rHpw");const y=s.a.e919c3bc;class v extends o.a.Component{constructor(...e){super(...e),this._mobileLoginToken=d.a.v1().replace(/-/g,""),this._handleSubmit=()=>{const{analytics:e,onSubmit:t}=this.props;if(e.scribe({action:"submit"}),l.a.flushHTMLCache(),this._setLoginCookie(),t)return t(this._form.elements),!1},this._handleSubmitButtonClick=()=>{!1!==this._handleSubmit()&&this._form.submit()},this._setFormRef=e=>{e&&(this._form=e)},this._setLoginCookie=()=>{const e=new Date(Date.now());e.setTime(e.getTime()+3e5),Object(u.e)(a.q,this._mobileLoginToken,{featureSwitches:this.context.featureSwitches,cookieOptions:{domain:void 0,expires:e}})}}componentDidUpdate(e){this.props.autoSubmit&&!e.autoSubmit&&this._handleSubmitButtonClick()}componentDidMount(){c.a.inject({scriptId:"jsInstLibrary",src:"https://twitter.com/i/js_inst?c_name=ui_metrics"})}render(){const{children:e,formActionUrl:t,hideSubmitButton:n,horizontalLayout:i,loginReturnPath:r,submitButtonDisabled:s,submitButtonLabel:a,submitButtonSize:c,submitButtonStyle:l,submitButtonType:u}=this.props,[p,d]="string"==typeof r?r.split("?"):[],b=`${encodeURI(p||"/")}${d?`?${d}`:""}`,f=o.a.createElement(m.a,{style:i&&S.horizontalFields},o.a.createElement("input",{name:"redirect_after_login",type:"hidden",value:b}),o.a.createElement("input",{name:"remember_me",type:"hidden",value:"1"}),o.a.createElement("input",{name:"authenticity_token",type:"hidden",value:this._mobileLoginToken}),o.a.createElement("input",{name:"wfa",type:"hidden",value:"1"}),o.a.createElement("input",{autoComplete:"off",name:"ui_metrics",type:"hidden"}),e,n?null:o.a.createElement(m.a,{style:i&&S.loginButtonContainer},o.a.createElement(_.a,{disabled:s,onPress:this._handleSubmitButtonClick,size:c,style:l,testID:h,type:u},a)));return o.a.createElement(m.a,{style:S.loginForm},o.a.createElement("form",{action:t,children:f,method:"post",noValidate:!0,onSubmit:this._handleSubmit,ref:this._setFormRef}))}}v.contextType=f.a,v.defaultProps={autoSubmit:!1,formActionUrl:"/sessions",hideSubmitButton:!1,submitButtonDisabled:!1,submitButtonLabel:y,submitButtonType:"brandFilled"};const S=g.a.create((e=>({horizontalFields:{flexDirection:"row",justifyContent:"center",alignItems:"stretch"},loginForm:{width:"100%"},loginButtonContainer:{flexDirection:"column",justifyContent:"center"}})));t.a=Object(b.a)(v,{element:"inline_login_form"})},AS3p:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return p}));var i=n("SrIh"),o=n("JbbX");const r=1e3,s=Object.freeze({AcceptAllCookies:"acceptAllCookies",RefuseNonEssentialCookies:"refuseNonEssentialCookies",Invalid:"invalid",NotSet:"notSet"});function a(e){const t=Object(o.a)(e);return t?u(t)?h(t)?t[1]?s.AcceptAllCookies:t[2]?s.RefuseNonEssentialCookies:(Object(i.a)("Invalid consent signal state"),s.Invalid):s.NotSet:s.Invalid:s.NotSet}function c(e){Object(o.b)({consent_version:2,text_version:r,1:!0},e)}function l(e){Object(o.b)({consent_version:2,text_version:r,2:!0},e)}function u(e){return!(e[1]&&e[2])}function h(e){return e[1]||e[2]}function p(e){const t=Object(o.a)(e);return!t||(!u(t)||!h(t)||t.consent_version<2||t.text_version<r)}},Chb3:function(e,t,n){"use strict";n("kYxP");var i=n("ERkP"),o=n.n(i),r=n("Hde2"),s=n("H1k/"),a=n("zCf4"),c=n("496R");function l(e){return!["/i/flow/login"].includes(e)}t.a=Object(c.a)((function(e={hideCookieBannerPicker:!1}){const t=function(){const e=Object(a.g)(),[t,n]=o.a.useState((()=>l(e.pathname)));return o.a.useEffect((()=>{n(l(e.pathname))}),[n,e]),t}();return!e.hideCookieBannerPicker&&t?o.a.createElement(r.a,null,o.a.createElement(s.a,null)):null}))},"H1k/":function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("ERkP"),o=n.n(i),r=n("v6aA"),s=(n("kYxP"),n("AS3p")),a=n("Irs7"),c=n("aITJ"),l=n("MWbm"),u=n("t62R"),h=n("cHvH"),p=n("rHpw"),d=n("/yvb"),m=n("3XMw"),b=n.n(m);const f=b.a.d8817e36,_=b.a.b9288ee6,g=b.a.i1390ec2,y={page:"cookie_compliance_banner"};function v(){const e=o.a.createElement(b.a.I18NFormatMessage,{$i18n:"ad048ab9"},o.a.createElement(u.b,{color:"buttonWhite",link:"https://help.twitter.com/rules-and-policies/twitter-cookies",withUnderline:!0},b.a.id7ef731));return o.a.createElement(w,{body:e,title:g})}function S(e){const t=o.a.createElement(b.a.I18NFormatMessage,{$i18n:"bc8736af"},o.a.createElement(u.b,{accessibilityRole:"button",color:"buttonWhite",onClick:e.onExpand,withUnderline:!0},b.a.gfb2ba01));return o.a.createElement(w,{body:t,title:g})}function w(e){return o.a.createElement(l.a,{style:k.cookieComplianceMessageWrap},o.a.createElement(u.b,{color:"buttonWhite",size:"headline2",weight:"medium"},e.title),o.a.createElement(u.b,{color:"buttonWhite",size:"subtext2",style:k.cookieComplianceExpandedDetails},e.body))}var E=o.a.forwardRef((function(e,t){const n=Object(a.b)();o.a.useEffect((()=>{n.scribe({...y,action:"impression"})}),[n]);const{expand:i,isExpanded:u}=function(){const[e,t]=o.a.useState(!1),n=Object(a.b)();return{isExpanded:e,expand:()=>{n.scribe({...y,action:"click",element:"expand_message"}),t(!0)}}}(),{acceptAllCookies:m,isBannerOpen:b,refuseNonEssentialCookies:g}=function(){const e=Object(a.b)(),{featureSwitches:t}=o.a.useContext(r.a),[n,i]=o.a.useState((()=>s.e(t)&&!c.b.getTwitterAppVersion()));return{isBannerOpen:n,acceptAllCookies(){e.scribe({...y,action:"click",element:"accept_all"}),s.b(t),i(!1)},refuseNonEssentialCookies(){e.scribe({...y,action:"click",element:"refuse_non_essential"}),s.d(t),i(!1)}}}();return b?o.a.createElement(h.a,null,(({windowWidth:e})=>{const n=e<p.a.theme.breakpoints.xLarge;return o.a.createElement(l.a,{ref:t,style:[k.root,n&&k.rootNarrow]},u?o.a.createElement(v,null):o.a.createElement(S,{onExpand:i}),o.a.createElement(l.a,{style:[k.buttonContainer,n&&k.buttonContainerNarrow]},o.a.createElement(d.a,{dominantColor:"alwaysBaseGray1100",onPress:m,size:"medium",style:[k.ctaButton,n&&k.ctaButtonNarrow],type:p.a.isDarkMode()?"onMediaDominantColorFilled":"onMediaWhiteFilled"},f),o.a.createElement(d.a,{dominantColor:"alwaysBaseGray1100",onPress:g,size:"medium",style:[k.ctaButton,n&&k.ctaButtonNarrow],type:p.a.isDarkMode()?"onMediaDominantColorFilled":"onMediaWhiteFilled"},_)))})):null}));const k=p.a.create((e=>({root:{alignItems:"center",boxShadow:e.boxShadows.xSmall,flexDirection:"row",width:"100%",justifyContent:"space-evenly",paddingVertical:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal,backgroundColor:e.colors.buttonBlack},rootNarrow:{flexDirection:"column",paddingVertical:e.componentDimensions.gutterVertical,paddingTop:e.spaces.space20,backgroundColor:e.colors.buttonBlack},buttonContainer:{flexDirection:"column",marginVertical:e.spaces.space16,marginLeft:e.spaces.space20},buttonContainerNarrow:{width:"100%",maxWidth:550,marginLeft:0,flexDirection:"column",flexWrap:"wrap"},ctaButton:{height:e.spaces.space40,marginBottom:e.spaces.space8,width:420,flexGrow:0,flexShrink:0},ctaButtonNarrow:{marginLeft:0,width:"100%"},cookieComplianceMessageWrap:{flex:1,maxWidth:640},cookieComplianceExpandedDetails:{marginTop:e.spaces.space8,marginBottom:e.spaces.space8},background:{backgroundColor:e.colors.buttonBlack}})));var T=n("97Jx"),C=n.n(T),I=n("RqPI"),A=n("rxPX"),O=Object(A.a)().propsFromState((()=>({currentCountry:I.A}))),P=n("cnVF"),x=n("mrHL");const L=(e,t,n)=>e.indexOf(t.toLowerCase())>-1&&"1"!==n,j=b.a.ia5e7488;class D extends o.a.Component{constructor(e,t){super(e,t),this.state={euWarningIsOpen:!1},this._renderMessage=()=>o.a.createElement(u.b,{color:"white",size:"subtext2"},o.a.createElement(b.a.I18NFormatMessage,{$i18n:"i3c34583"},o.a.createElement(u.b,{color:"white",link:"https://help.twitter.com/rules-and-policies/twitter-cookies",style:R.link},b.a.a8a8d769))),this._handleEUBannerClose=()=>{(e=>{Object(x.e)(P.k,"1",{featureSwitches:e})})(this.context.featureSwitches),this.setState({euWarningIsOpen:!1})};const{currentCountry:n}=this.props,{featureSwitches:i}=this.context,r=i.getArrayValue("responsive_web_eu_countries",[]),s=Object(x.d)({featureSwitches:i,cookieName:P.k});this.state={euWarningIsOpen:!!n&&L(r,n,s)}}render(){return this.state.euWarningIsOpen?o.a.createElement(h.a,null,(({windowWidth:e})=>{const t=e<p.a.theme.breakpoints.medium;return o.a.createElement(l.a,{ref:this.props.innerRef,style:[R.root,t&&R.rootNarrow]},this._renderMessage(),o.a.createElement(d.a,{onPress:this._handleEUBannerClose,size:"medium",style:[R.closeButton,t&&R.closeButtonNarrow],type:"onMediaOutlined"},j))})):null}}D.contextType=r.a;const R=p.a.create((e=>({root:{alignItems:"center",boxShadow:e.boxShadows.medium,flexDirection:"row",width:"100%",justifyContent:"space-evenly",backgroundColor:e.colors.alwaysBaseGray1100,paddingHorizontal:e.spaces.space20,paddingVertical:e.spaces.space20},rootNarrow:{flexDirection:"column"},container:{alignItems:"center",flexShrink:1},closeButton:{marginLeft:e.spaces.space12,marginTop:0,flexGrow:0,flexShrink:0},closeButtonNarrow:{marginLeft:0,marginTop:e.spaces.space12,width:"100%"},link:{textDecorationLine:"underline"}}))),M=o.a.forwardRef(((e,t)=>o.a.createElement(D,C()({},e,{innerRef:t}))));var B=O.forwardRef(M),N=n("OQ9W"),U=n("+d3d");function F(e,t=100){return function(e,t=100){const n=o.a.useMemo((()=>Object(U.a)((t=>{if(!e)return;if(!t)return void e(null);const n=t.getBoundingClientRect();n&&e(n)}),t)),[e,t]);return o.a.useCallback((t=>{if("function"!=typeof e)return;const i=n.bind(null,t);return i(),window.addEventListener("resize",i),t&&N.a.observe(t,i),()=>{window.removeEventListener("resize",i),N.a.unobserve(t),n.cancel()}}),[e,n])}(o.a.useMemo((()=>"function"==typeof e?t=>{e(t?t.height:null)}:void 0),[e]))}function H(e){const{featureSwitches:t}=o.a.useContext(r.a),n=F(e.onHeightChange);return t.isTrue("responsive_web_cookie_compliance_banner_enabled")?o.a.createElement(E,{ref:n}):o.a.createElement(B,{ref:n})}},M6MT:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));const i=Object.freeze({granted:"granted",denied:"denied",prompt:"prompt"}),o=Object.freeze({PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3})},"Pc/x":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));n("849X");var i=n("CEs6");class o extends Error{constructor(e,t,n){super(`${o.displayName}: ${e} HTTP-${t} message: ${n}`),this.url=e,this.status=t}}o.displayName="ProxseeApiError";var r=n("epkG"),s=n("SrIh"),a=n("RqPI");let c,l=0;const u="X-Idempotence",h={["X-Periscope-User-Agent"]:"Twitter/m5",["X-Attempt"]:1};function p(){const e=Date.now();return l=e<=l?l+1:e,Object.assign({},h,{[u]:l,"content-type":"application/json"})}const d="m5-proxsee-login-a2011357b73e",m={},b={host:"https://proxsee.pscp.tv",errorFilter:function(e,t){return t(e).then((t=>{return t.status&&((n=t.status)<200||n>399)?Promise.reject(function(e,t){const{uri:n}=e,{status:r}=t,s=Object(i.a)(t);return new o(n,r,s.msg)}(e,t)):t;var n}))}};const f=Object.freeze({SelfHarm:"SELF_HARM",Violence:"VIOLENCE",SexualContent:"SEXUAL_CONTENT",ChildSafety:"CSE",PrivateInformation:"PRIVATE_INFO",AbusiveBehavior:"HARASSMENT"}),_=new class{constructor(e=m){this.reportSpaceFor={SelfHarm:e=>this._reportSpace({abuse_type:f.SelfHarm,...e}),Violence:e=>this._reportSpace({abuse_type:f.Violence,...e}),SexualContent:e=>this._reportSpace({abuse_type:f.SexualContent,...e}),ChildSafety:e=>this._reportSpace({abuse_type:f.ChildSafety,...e}),PrivateInformation:e=>this._reportSpace({abuse_type:f.PrivateInformation,...e}),AbusiveBehavior:e=>this._reportSpace({abuse_type:f.AbusiveBehavior,...e})};const{httpConfig:t}=e;this.client=new r.a({...b,...t}),this._authToken=void 0,this._authPromise=null}init(e){c=e}initialized(){return!!c}isLoggedIn(){return!!this._authToken}isTwitterAuthenticated(){if(!this.initialized())return!1;const e=c.store.getState();return Object(a.o)(e)}authToken(){return this._authToken}dispatch(e){return this.initialized()?this.client.dispatch(e).then(i.a):Promise.reject(new Error("[ProxseeApi] config not initialized"))}post(e,t,n={}){const{params:i}=n,o=Object.assign(p(),n.headers),r=JSON.stringify({...t,cookie:this._authToken}),s="Twitter"===this._authUserType?`twitter/${e}`:e;return this.dispatch({method:"POST",path:`/api/v2/${s}`,headers:o,params:i,data:r})}login(){return this._authPromise?this._authPromise:this.initialized()?this.isTwitterAuthenticated()?this.isLoggedIn()?Promise.resolve():(this._authPromise=c.api.Auth.authenticatePeriscope().then((e=>this.loginTwitterToken(e.token))).then((e=>{if(!e)throw new Error("[ProxseeApi] invalid loginTwitterToken response");this._authToken=e.cookie,this._authUserType=e.type})).catch((e=>{const t={err:e};Object(s.a)("[ProxseeApi] failed to login",{extra:t})})).then((()=>{this._authPromise=null})),this._authPromise):Promise.resolve():Promise.reject(new Error("[ProxseeApi] config not initialized"))}loginTwitterToken(e){const t={jwt:e,vendor_id:d,create_user:!1,direct:!0};return this.post("loginTwitterToken",t)}publicPath(e){return this.isLoggedIn()?e:`${e}Public`}accessChat(e){return this.login().then((()=>this.post(this.publicPath("accessChat"),{chat_token:e})))}getChatHistory(e,t={}){return this.login().then((()=>{const{params:n}=t,i=Object.assign(p(),t.headers),o=JSON.stringify({access_token:e.access_token,cursor:e.cursor,limit:1e3,since:null,quick_get:!0});return this.dispatch({method:"POST",host:e.host,path:e.path,headers:i,params:n,data:o})}))}createClip(e){return this.login().then((()=>this.post("createClip",e).catch((e=>{Object(s.a)("[ProxseeApi] failed to create clip",{extra:{err:e}})}))))}getClip(e){return this.login().then((()=>this.post("getClip",{clip_id:e}).catch((e=>{Object(s.a)("[ProxseeApi] failed to get clip",{extra:{err:e}})}))))}_reportSpace(e){return this.login().then((()=>this.post("markAbuse",e).catch((e=>{Object(s.a)("[ProxseeApi] failed to report space",{extra:{err:e}})}))))}};var g=n("G6rE");let y;const v=new Error("[AudioModule] config not initialized");var S=new class{constructor(){this.proxsee=_}init(e){y=e,_.init(y)}initialized(){return!!y}loggedInUser(){if(this.initialized()){const e=y.store.getState();return g.e.selectLoggedInUser(e)}}audioSpace(e){return y?y.api.AudioSpaces.byId(e):Promise.reject(v)}subscribeToScheduledSpace(e){return y?y.api.AudioSpaces.subscribeToScheduledSpaceById(e):Promise.reject(v)}unsubscribeFromScheduledSpace(e){return y?y.api.AudioSpaces.unsubscribeFromScheduledSpaceById(e):Promise.reject(v)}searchAudioSpace(e,t){return y?y.api.AudioSpaces.search(e,t):Promise.reject(v)}}},Sksh:function(e,t,n){"use strict";n("849X");var i=n("SrIh"),o=n("M0jS"),r=n("+d3d"),s=n("VY6S");t.a=new class{constructor(){this.usersInApp={},this._throttledInitialFetch=Object(r.a)((()=>{this.store.dispatch(o.b.fetchManyIfNeeded(Object.keys(this.usersInApp)))}),1500)}init(e){this.store=e}registerUserInApp(e){Object.keys(this.usersInApp).length>50&&(this.usersInApp={},Object(i.a)(new Error("Registered users in app has exceeded 50"),{level:"warning"})),this.usersInApp[e]?this.usersInApp[e]=this.usersInApp[e]+1:(this.usersInApp[e]=1,Object(s.a)(this._throttledInitialFetch(),100))}deregisterUserInApp(e){this.usersInApp[e]&&this.usersInApp[e]>1?this.usersInApp[e]=this.usersInApp[e]-1:delete this.usersInApp[e]}}},TpKd:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a}));var i=n("mrHL");const o="external_referer";function r(e){return Object(i.d)({cookieName:o,featureSwitches:e})}function s(e,t){const n=t&&t.encryptedReferralDetails||"",r=t&&t.encryptedReferer||"",s=t&&void 0!==t.referralType?`${t.referralType}`:"";if(!n&&!r&&!s)return;const a=`${encodeURIComponent(r)}|${s}|${encodeURIComponent(n)}`;Object(i.e)(o,a,{cookieOptions:{maxAge:604800,encode:e=>e},featureSwitches:e})}const a=e=>{const t=r(e);if(t&&t.split("|").length>1){const e=t.split("|");return{encryptedReferer:e[0],referralType:e[1],encryptedReferralDetails:e[2]}}}},XTym:function(e,t,n){"use strict";var i=n("97Jx"),o=n.n(i),r=(n("kYxP"),n("SV7d")),s=n("ERkP"),a=n.n(s),c=n("t62R"),l=n("/yvb"),u=n("mw9i"),h=n("hOZg"),p=n("Oe3h"),d=n("0FVZ"),m=n("zTrU"),b=n("cHvH"),f=n("rHpw"),_=n("3XMw"),g=n.n(_),y=n("+/1j"),v=n("MWbm");const S=g.a.af8fa2ae,w=a.a.createElement(h.a,null);class E extends a.a.Component{constructor(...e){super(...e),this._getMemoizedBehavioralEventContext=Object(m.a)((e=>({viewType:e}))),this._getMemoizedToastBehavioralEventContext=Object(m.a)((e=>({viewState:e?{type:"toast",entityToken:e}:void 0,viewType:"toast"}))),this._renderAriaOnly=()=>{const{testID:e,text:t}=this.props;return a.a.createElement(v.a,{accessibilityRole:"alert",style:f.a.visuallyHidden,testID:e},a.a.createElement(y.a,null,t))},this._renderContent=()=>{const{action:e,text:t,withAutoDismiss:n,withClearButton:i}=this.props;return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.b,{color:"whiteOnColor",style:k.titleText},t),a.a.createElement(v.a,{accessibilityHidden:n,style:k.actionButtons},e&&this._renderActionLabel(e),i&&a.a.createElement(l.a,{accessibilityLabel:S,borderColor:"transparent",color:"white",icon:w,onPress:this._handleClose,style:k.closeButton})))},this._renderContentWithLayer=({windowWidth:e})=>{const{LayerComponent:t,behavioralEventEntityToken:n,testID:i}=this.props,s=this._getMemoizedToastBehavioralEventContext(n);return a.a.createElement(t,null,a.a.createElement(u.a,null,a.a.createElement(p.a,{id:"Toast"},((t,n)=>a.a.createElement(r.b,{behavioralEventContext:s},a.a.createElement(v.a,o()({ref:t()},n({accessibilityRole:"alert",style:[k.root,e>f.a.theme.breakpoints.medium&&k.rootWide],testID:i})),this._renderContent()))))))},this._renderContentWithoutLayer=({windowWidth:e})=>{const{behavioralEventEntityToken:t,testID:n}=this.props,i=this._getMemoizedToastBehavioralEventContext(t);return a.a.createElement(u.a,null,a.a.createElement(r.b,{behavioralEventContext:i},a.a.createElement(v.a,{accessibilityRole:"alert",style:[k.root,e>f.a.theme.breakpoints.medium&&k.rootWide],testID:n},this._renderContent())))},this._createTimer=()=>{const{action:e,autoDismissDelay:t,onClose:n,text:i,withAutoDismiss:o}=this.props;if(o){const o=t||E.calculateDismissDelay(i,!!e);this._timerId=setTimeout(n,o)}},this._handleActionPress=e=>{this._stopTimer();const{action:t,onClose:n}=this.props;null!=t&&t.onAction&&t.onAction(e),n(e)},this._handleClose=e=>{this._stopTimer(),this.props.onClose(e)}}componentDidMount(){this._createTimer()}componentWillUnmount(){this._stopTimer()}render(){const{ariaOnly:e,withoutLayer:t}=this.props;return e?this._renderAriaOnly():a.a.createElement(b.a,null,t?this._renderContentWithoutLayer:this._renderContentWithLayer)}_renderActionLabel(e){const{behavioralEventViewType:t,label:n,link:i}=e,o=t||"action",s=this._getMemoizedBehavioralEventContext(o);return a.a.createElement(r.a,{behavioralEventContext:s},a.a.createElement(c.b,{children:n,color:"whiteOnColor",link:i,onClick:this._handleActionPress,style:[k.actionText,!i&&k.actionMargin],weight:"bold",withInteractiveStyling:!0}))}static calculateDismissDelay(e,t){const n=1e3*("string"==typeof e?e.split(" ").length:0)/5+225;return(n<4e3?4e3:n)+(t?2e3:0)}_stopTimer(){clearTimeout(this._timerId)}}E.defaultProps={withAutoDismiss:!0,withClearButton:!1,LayerComponent:d.a.ModalToasts};const k=f.a.create((e=>({root:{alignItems:"center",backgroundColor:e.colors.primary,flexDirection:"row",justifyContent:"space-between",padding:e.spaces.space12},rootWide:{alignSelf:"center",borderRadius:e.borderRadii.small,marginBottom:e.spaces.space32},titleText:{flexShrink:1,paddingHorizontal:e.spaces.space12},actionText:{alignSelf:"center",whiteSpace:"nowrap",marginRight:e.spaces.space12},actionButtons:{flexDirection:"row"},actionMargin:{marginHorizontal:e.spaces.space12},closeButton:{marginLeft:e.spaces.space12,paddingHorizontal:e.spaces.space4}})));t.a=E},"a/ea":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var i=n("M6MT"),o=n("Ssj5");const r="geoLocation",s=Object.freeze({permissionStatus:void 0,position:void 0});const a=e=>e.geoLocation.permissionStatus,c=e=>e.geoLocation.position,l="rweb/geoLocation/SET_PERMISSION_STATUS",u=e=>({payload:e,type:l}),h="rweb/geoLocation/SET_POSITION",p=()=>(e,t)=>m().then((t=>e({payload:t,type:h}))).catch((t=>(e(u(i.b.denied)),Promise.reject(t)))),d=()=>(e,t)=>c(t())?Promise.resolve():e(p()),m=()=>new Promise(((e,t)=>navigator.geolocation.getCurrentPosition((t=>{const n={timestamp:t.timestamp,coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,altitude:t.coords.altitude,accuracy:t.coords.accuracy,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed}};return e(n)}),t)));o.a.register({[r]:function(e=s,t){switch(t.type){case l:return{...e,permissionStatus:t.payload};case h:return{...e,position:t.payload};default:return e}}})},donR:function(e,t,n){"use strict";n.r(t),n.d(t,"inputDetect",(function(){return bt})),n.d(t,"BottomCookieBannerPicker",(function(){return ft})),n.d(t,"DtabBar",(function(){return _t})),n.d(t,"GlobalKeyboardShortcuts",(function(){return gt})),n.d(t,"LivePipeline",(function(){return yt})),n.d(t,"ModalSheet",(function(){return vt})),n.d(t,"SmartLockPrompt",(function(){return St})),n.d(t,"Seo",(function(){return wt})),n.d(t,"Toast",(function(){return Et})),n.d(t,"appReloader",(function(){return kt})),n.d(t,"badgeTimers",(function(){return Tt})),n.d(t,"bindKeyboardShortcuts",(function(){return Ct})),n.d(t,"ie11Reflower",(function(){return It})),n.d(t,"multiAccountListFetcher",(function(){return At})),n.d(t,"redirectEmailUser",(function(){return Ot})),n.d(t,"scribeExternalReferer",(function(){return Pt})),n.d(t,"getScreenReaderShortcutsDataAttribute",(function(){return xt})),n.d(t,"altSvc",(function(){return Lt})),n.d(t,"AppInstallOnLandingPrompt",(function(){return jt})),n.d(t,"AudioModule",(function(){return Dt})),n.d(t,"initGeoLocation",(function(){return Rt})),n.d(t,"userPresence",(function(){return Mt}));var i={};n.r(i),n.d(i,"initialize",(function(){return b})),n.d(i,"detectedTypes",(function(){return f})),n.d(i,"detectedType",(function(){return _})),n.d(i,"register",(function(){return g})),n.d(i,"registerSome",(function(){return y})),n.d(i,"registerEvery",(function(){return v})),n.d(i,"unregister",(function(){return S})),n.d(i,"reset",(function(){return w})),n.d(i,"KEYBOARD",(function(){return a})),n.d(i,"MOUSE",(function(){return c})),n.d(i,"_private",(function(){return E}));var o=n("3+LL"),r=n("z0MJ"),s=n.n(r);const a="keyboard",c="mouse";let l=[];const u={[a]:!1,[c]:!1};class h{constructor(e){this._handleTimerEnd=()=>{this._count>=3&&this._handleDetected(),this._reset()},this._handleDetected=()=>{this._reset(),this.detach(),this.detected()},this._reset=()=>{clearTimeout(this._timer),this._timer=void 0,this._count=0},this._handleMouseMove=()=>{this._count=this._count+1,this._count>=3?this._handleDetected():this._timer||(this._timer=setTimeout(this._handleTimerEnd,500))},this.attach=()=>{document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("touchend",this._reset)},this.detach=()=>{document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("touchend",this._reset)},this.detected=e,this._count=0}}class p{constructor(e){this._handleKeyDown=e=>{const{altKey:t,ctrlKey:n,metaKey:i,target:o}=e;var r;!(t||n||i)&&((r=o)instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)||(this.detach(),this.detected())},this.attach=()=>{document.addEventListener("keydown",this._handleKeyDown)},this.detach=()=>{document.removeEventListener("keydown",this._handleKeyDown)},this.detected=e}}function d(e){u[e]=!0;const t=l.filter((({matches:e})=>e())),n=l.filter((({matches:e})=>!e()));l=n,t.forEach((({callback:e})=>e()))}let m;const b=()=>{m=[new p((()=>d(a))),new h((()=>d(c)))],m.forEach((e=>e.attach()))},f=()=>Object.keys(u).filter((e=>u[e])),_=e=>u[e],g=(e,t)=>{const n=()=>u[t];n()?s()(e):l.push({matches:n,callback:e})},y=(e,t)=>{const n=()=>t.some((e=>u[e]));n()?s()(e):l.push({matches:n,callback:e})},v=(e,t)=>{const n=()=>t.every((e=>u[e]));n()?s()(e):l.push({matches:n,callback:e})},S=e=>{const t=l.indexOf(e);t>-1&&l.splice(t,1)},w=()=>{l=[],Object.keys(u).forEach((e=>{u[e]=!1})),m.forEach((e=>e.detach()))},E={MOUSE_INTERVAL_TIME_IN_MS:500,SUCCESSIVE_MOUSE_EVENTS:3,detected:d};var k=n("0KEI");var T=(e,t,n)=>{if(e.isTrue("responsive_web_alt_svc")){const e=n(Object(k.createLocalApiErrorHandlerWithContextFactory)("APP_INITIALIZATION_ALT_SVC")({}));t.AltSvc.fetch().catch(e)}},C=(n("kYxP"),n("ERkP")),I=n.n(C),A=n("sebV"),O=n("rxPX");const P=(e,t)=>t.location.pathname.includes("/intent/"),x=(e,t)=>t.location.pathname.includes("/login"),L=(e,t)=>t.location.pathname.includes("/ocf_arkose_challenge");var j=Object(O.a)().propsFromState((()=>({isIntentRoute:P,isLoginRoute:x,isArkoseRoute:L}))).adjustStateProps((({isArkoseRoute:e,isIntentRoute:t,isLoginRoute:n})=>({hideAppPrompt:t||n||e}))),D=n("RxYA"),R=n("aITJ"),M=n("TnY3"),B=n("v6aA");class N extends I.a.Component{constructor(...e){super(...e),this._isStandaloneApp=A.a.isStandaloneApp(),this._isWebView=!!R.b.getTwitterAppVersion(),this.state={showPrompt:!this.props.hideAppPrompt&&!this.context.loggedInUserId&&!this._isStandaloneApp&&this.context.featureSwitches.isTrue("responsive_web_use_app_prompt_enabled")&&!this.context.featureSwitches.isTrue("responsive_web_open_in_app_prompt_enabled")&&!this._isWebView},this._handleClose=()=>{this.setState({showPrompt:!1})}}render(){return this.state.showPrompt?I.a.createElement(D.a,{onClose:this._handleClose,onlyShowOnce:!0,useBottomBanner:!0}):null}}N.contextType=B.a;var U=Object(M.a)(j(N)),F=n("Pc/x"),H=n("RqPI"),z=n("k49u"),K=n("2g+p"),W=n("auX9"),V=n("fs1G"),X=n("B5iK"),$=n("l0YN");const q=(e,t=1e3)=>{window.requestIdleCallback?window.requestIdleCallback((()=>e.fire())):setTimeout((()=>e.fire()),t)};var G=e=>{if(!H.o(e.getState()))return;const t=e.dispatch(Object(k.createLocalApiErrorHandlerWithContextFactory)("BADGE_TIMERS")({showToast:!1,[z.a.AccessDeniedByBouncer]:{customAction:V.a}})),n=n=>e.dispatch(n).catch(t),i=new X.b(3e4).interval((()=>{"background"!==K.a.currentState&&(n(Object($.c)()),Object(W.b)(e.getState()).forEach(n))}));i.start(),q(i);K.a.addEventListener("change",(e=>{"active"===e&&q(i)}))},Y=n("YlqV"),J=n("+Aie"),Z=n.n(J);var Q=n("Chb3"),ee=(n("Cm4o"),n("KrtT"),n("Hde2")),te=n("P1r1"),ne=Object(O.a)().propsFromState((()=>({dtabBarInfo:te.m}))).adjustStateProps((({dtabBarInfo:e})=>({dtabAll:e&&e.dtabAll,dtabRweb:e&&e.dtabRweb,hide:e&&e.hide,ttsToken:e&&e.ttsToken}))).propsFromActions((()=>({setDtabBarInfo:te.H}))),ie=n("8jkQ"),oe=n("/yvb"),re=n("mw9i"),se=n("t62R"),ae=n("rHpw");class ce extends I.a.PureComponent{constructor(e,t){super(e,t),this._renderButtons=()=>I.a.createElement(I.a.Fragment,null,I.a.createElement(oe.a,{onClick:this._handleInfo,size:"xSmall",type:"destructiveFilled"},"Info"),I.a.createElement(oe.a,{onClick:this._handleClear,size:"xSmall",type:"destructiveFilled"},"Clear"),I.a.createElement(oe.a,{onClick:this._handleClose,size:"xSmall",type:"destructiveFilled"},"Hide")),this._handleInfo=()=>{const e=this._getOverrides();window.prompt(e.join("\n"),window.encodeURIComponent(e.join(";")))},this._getOverrides=()=>{const{dtabAll:e,ttsToken:t}=this.props;let n=[];return e&&!t?n=e:t&&(n=[`tts_token=${t}`]),n.filter((e=>!!e))},this._handleClear=()=>{const e=`OK to clear overrides?\n${this._getOverrides().join("\n")}`;if(window.confirm(e)){const e=new URL(ie.b.get());e.searchParams.set("dtab_local",""),e.searchParams.set("tts_token",""),ie.b.navigateTo(e.toString())}},this._handleClose=()=>{const{dtabAll:e,dtabRweb:t,setDtabBarInfo:n,ttsToken:i}=this.props;this.setState({show:!1}),n({dtabAll:e,dtabRweb:t,ttsToken:i,hide:!0})},this._shouldShow=()=>{const{dtabAll:e,hide:t,ttsToken:n}=this.props;return!(t||!e&&!n)},this.state={show:this._shouldShow()}}render(){const{dtabAll:e,ttsToken:t}=this.props,n=t||e?I.a.createElement(ee.a,{style:le.root},I.a.createElement(re.a,{isLarge:!0,style:le.container,withGutter:!0},I.a.createElement(se.b,{color:"whiteOnColor",numberOfLines:1,size:"subtext2",style:le.text},"Staging override is active"),this._renderButtons())):null;return this.state.show?n:null}}ce.defaultProps={hide:!1};const le=ae.a.create((e=>({root:{backgroundColor:e.colors.red500},container:{alignItems:"center",flexDirection:"row",height:e.spaces.space40,justifyContent:"space-between"},text:{width:"100%"}})));var ue=ne(ce),he=n("OrGc"),pe=n("rRIm");var de={init:e=>{const t=t=>{if("active"===t&&e&&e.body){const t=e.body.style.display;e.body.style.display="none",e.body.clientHeight,e.body.style.display=t}};R.b.isDesktopOS()&&R.b.isIE()&&K.a.addEventListener("change",t)}},me=n("6/RC"),be=n("M6MT"),fe=n("a/ea");const _e=e=>{var t,n,i;return null!=(t=navigator)&&t.permissions?null==(n=navigator)||null==(i=n.permissions)?void 0:i.query({name:"geolocation"}).then((function(t){return e.dispatch(Object(fe.e)(t.state)),t.onchange=function(){e.dispatch(Object(fe.e)(this.state))},Promise.resolve(t.state)})):Promise.resolve()};var ge=e=>Object(te.o)(e.getState())?_e(e).then((t=>{t===be.b.granted&&e.dispatch(Object(fe.a)())})):Promise.resolve(),ye=(n("849X"),n("pXBW")),ve=n("nS6Z");function Se(e){return e.json().then((e=>e.errors.some((e=>392===e.code))))}function we({condition:e,promiseFactory:t,sideEffect:n}){return(...i)=>{const o=t(...i);return o.then(e).then((e=>{e&&n()})).then((()=>o),(()=>o))}}function Ee(e){return Object.keys(ke(e))}function ke(e){return e.reduce(((e,t)=>(e[t]=!0,e)),{})}class Te{constructor({callback:e,makeEventSource:t,topics:n}){this.topics=[],this.backoffDuration=0,this._handleMessage=({data:e})=>{try{const t=JSON.parse(e);this.connection&&"/system/config"===t.topic&&(this.connection.hasConfig=!0),this.callback(t)}catch(e){}},this._handleError=()=>{if(!this.connection||this.connection.eventSource.readyState===this.connection.eventSource.OPEN)return;const e=this.connection;e&&e.eventSource.readyState===e.eventSource.CONNECTING&&function(e,t){const n=ke(e),i=Object.keys(n),o=Ee(t);return i.length===o.length&&o.every((e=>n[e]))}(e.topics,this._getTopicsForAutoSubscribe())||(this._cleanup(),this.connection&&this.connection.hasConfig?this.backoffDuration=1e3:this.backoffDuration=Math.max(1e3,Math.min(2*this.backoffDuration,6e4)),this.backoffTimeoutId=setTimeout(this._connect,this.backoffDuration*(.5+Math.random())))},this._connect=()=>{this._cleanup();const e=this._getTopicsForAutoSubscribe();this.makeEventSource(e).then((t=>{if("object"!=typeof t)throw new Error("EventSource must be defined");t.addEventListener("message",this._handleMessage),t.addEventListener("error",this._handleError),this.connection={eventSource:t,topics:e,hasConfig:!1}})).catch((()=>{this._handleError()}))},this.makeEventSource=t,this.callback=e,this.setTopics(n),this._connect()}setTopics(e){this.topics=e}getAutoSubscribedTopics(){return this.connection?this.connection.topics:[]}_getTopicsForAutoSubscribe(){return this.topics.slice(0,Te.MAX_AUTO_SUBSCRIBE_TOPICS)}_cleanup(){const e=this.connection;e&&(e.eventSource.removeEventListener("message",this._handleMessage),e.eventSource.removeEventListener("error",this._handleError),e.eventSource.close(),this.connection=null),clearTimeout(this.backoffTimeoutId)}teardown(){this._cleanup()}}Te.MAX_AUTO_SUBSCRIBE_TOPICS=20;var Ce=n("+d3d");class Ie{constructor(e){this.sessionId="",this.pendingState={topics:[],forceSubscribeAll:!1},this.appliedState={topics:[]},this.setTopics=(e=[])=>{this.pendingState.topics=Ee(e),this._applyPendingState()},this._subscribeAll=()=>{this.pendingState.forceSubscribeAll=!0,this._applyPendingState()},this._applyPendingState=()=>{const e=this.pendingState.forceSubscribeAll?this.pendingState.topics:this.pendingState.topics.filter((e=>-1===this.appliedState.topics.indexOf(e))),t=this.appliedState.topics.filter((e=>-1===this.pendingState.topics.indexOf(e))),n=!this.sessionId,i=0===e.length&&0===t.length;n||i||(this.appliedState={topics:this.pendingState.topics},this.pendingState={topics:this.appliedState.topics,forceSubscribeAll:!1},this.updateSubscriptions({toSubscribe:e,toUnsubscribe:t,sessionId:this.sessionId}))};const{updateSubscriptions:t,throttlePeriod:n=Ie.UPDATE_SUBSCRIPTIONS_THROTTLE}=e;this.updateSubscriptions=t,this.throttlePeriod=n,null!==n&&n>=0&&(this._applyPendingState=Object(Ce.a)(this._applyPendingState,n,{leading:!1}))}setConfig(e=null,t=[]){if(clearInterval(this.intervalId),!e||!e.config)return;this.sessionId=e.config.session_id,this.appliedState={topics:t},this._applyPendingState();const n=(e.config.subscription_ttl_millis||Ie.DEFAULT_TTL)-Ie.TIMEOUT_PREEMPT_DURATION;this.intervalId=setInterval(this._subscribeAll,n)}teardown(){clearInterval(this.intervalId),this.updateSubscriptions({toSubscribe:[],toUnsubscribe:this.appliedState.topics,sessionId:this.sessionId})}}Ie.DEFAULT_TTL=12e4,Ie.TIMEOUT_PREEMPT_DURATION=2e4,Ie.UPDATE_SUBSCRIPTIONS_THROTTLE=1e3;class Ae{constructor({makeEventSource:e,updateSubscriptions:t}){this.isSuspended=!1,this.eventSourceConnector=null,this.subscriptionsByTopic={},this._closeEventSource=()=>{this._clearExpiryTimeout(),this.livePipelineResubscriber.setConfig(null),this.eventSourceConnector&&(this.eventSourceConnector.teardown(),this.eventSourceConnector=null)},this.restartEventSource=()=>{this._closeEventSource(),this._reconcileTopics()},this._handleMessage=({payload:e,topic:t})=>{t===Ae.SYSTEM_CONFIG_TOPIC&&this.eventSourceConnector&&this.livePipelineResubscriber.setConfig(e,this.eventSourceConnector.getAutoSubscribedTopics());const n=Promise.resolve(e);return(this.subscriptionsByTopic[t]||[]).map((e=>n.then(e.callback)))},this.makeEventSource=e,this.livePipelineResubscriber=new Ie({updateSubscriptions:we({promiseFactory:t,condition:Se,sideEffect:this.restartEventSource})})}teardown(){this._clearExpiryTimeout(),this.subscriptionsByTopic={},this.livePipelineResubscriber.teardown(),this.eventSourceConnector&&(this.eventSourceConnector.teardown(),this.eventSourceConnector=null)}suspend(){this.isSuspended=!0,this._reconcileTopics()}resume(){this.isSuspended=!1,this._reconcileTopics()}subscribeTopic(e,t){if(!e)return{teardown:()=>{}};const n={topic:e,callback:t};return this.subscriptionsByTopic[e]=this.subscriptionsByTopic[e]||[],this.subscriptionsByTopic[e].push(n),this._reconcileTopics(),{teardown:()=>{const t=(this.subscriptionsByTopic[e]||[]).filter((e=>e!==n));0===t.length?delete this.subscriptionsByTopic[e]:this.subscriptionsByTopic[e]=t,this._reconcileTopics()}}}_reconcileTopics(){const e=this.isSuspended?[]:Object.keys(this.subscriptionsByTopic),t=e.length>0;t&&this._clearExpiryTimeout(),this.livePipelineResubscriber.setTopics(e),this.eventSourceConnector&&this.eventSourceConnector.setTopics(e),t&&!this.eventSourceConnector?(this._closeEventSource(),this.eventSourceConnector=new Te({makeEventSource:this.makeEventSource,callback:this._handleMessage,topics:e})):t||!this.eventSourceConnector||this.connectionExpiryTimeoutId||(this.connectionExpiryTimeoutId=setTimeout(this._closeEventSource,Ae.UNUSED_CONNECTION_EXPIRY))}_clearExpiryTimeout(){clearTimeout(this.connectionExpiryTimeoutId),this.connectionExpiryTimeoutId=null}}let Oe;Ae.SYSTEM_CONFIG_TOPIC="/system/config",Ae.UNUSED_CONNECTION_EXPIRY=3e4;var Pe={isSupported:e=>"EventSource"in window&&e.isTrue("livepipeline_client_enabled"),isSupportedAndReady(e){return this.isSupported(e)&&!!Oe},create(e,t,n){if(!this.isSupported(e))throw new Error("This browser does not support LivePipeline");if(Oe)throw new Error("LivePipeline should only be initialized once");return Oe=new Ae({makeEventSource:e=>{const t=(e=>{const t=e.map(encodeURIComponent).join(","),i=e=>`${e}/live_pipeline/events?topic=${t}`,o=i(ve.b),r=n.getReplacementHost(new URL(o));return r?i(`https://${r}`):o})(e);return Promise.resolve(new window.EventSource(t,{withCredentials:!0}))},updateSubscriptions:e=>t.LivePipeline.updateSubscriptions(e).catch((e=>{if(e)if(e instanceof ye.a&&Object(z.c)(e,z.a.SessionNotFound))Oe&&Oe.restartEventSource();else if(!(e instanceof ye.a)&&e instanceof Error)return Promise.reject(e);return Promise.resolve()}))}),K.a.addEventListener("change",(e=>this._handleAppStateChange(e))),Oe},get(){if(!Oe)throw new Error("LivePipeline instance has not been initialized");return Oe},destroy(){Oe&&Oe.teardown(),Oe=void 0},_handleAppStateChange(e){"active"===e?this.get().resume():this.get().suspend()}},xe=n("pf9B");var Le=e=>{const t=Object(k.createLocalApiErrorHandlerWithContextFactory)("MULTI_ACCOUNT_LIST_UPDATER"),n=e.dispatch(t({showToast:!1,[z.a.AccessDeniedByBouncer]:{customAction:V.a}})),i=t=>e.dispatch(t).catch(n);(window.requestIdleCallback||window.requestAnimationFrame)((()=>{i(Object(W.d)()).then((()=>{Object(W.b)(e.getState()).forEach(i)}))}))},je=n("Sksh"),De=(n("MvUL"),n("Sp5X"));const Re=["/login/error","/i/sms_login","/i/flow/lite_login","/i/flow/login","/i/flow/signup"];var Me=(e,t)=>{const n=!H.o(t),i=H.h(t),o=H.g(t),{pathname:r}=De.a.location;-1===Re.indexOf(r)&&(n&&i?De.a.replace("/i/sms_login"):n&&o&&De.a.replace("/i/flow/lite_login"))},Be=n("Mx3A"),Ne=n("qzfk"),Ue=n("YeIG"),Fe=n("TpKd");const He={page:"external",action:"referred"};var ze=(e,t,n,i)=>{const o=e=>i.dispatch(Object(k.createLocalApiErrorHandlerWithContextFactory)(e)({})),r=De.a&&De.a.location.query,s=Be.b({query:r,httpReferer:document.referrer||"",requestUrl:window.location.href});if(Object(Ue.a)(s))return Promise.resolve();if(s.referer&&!ie.b.isExternalUrl(s.referer)&&!ie.b.isInternalRedirect(s.referer))return Promise.resolve();s.referer||(s.referer=""),s.referral_details_str||(s.referral_details_str=""),s.referral_type||(s.referral_type=0);const a=Object(Fe.a)(t);a&&(s.external_referer_cookie_value=a);const c=s.referral_type===Be.a.Access,l={...He,client:Object(Ne.a)().clientName};a&&c&&(l.action="set_access_referer_cookie");const u=n.createEventObject(l,"client_event",s),h=n.createPayload([u]);let p,d;p=s?e.Ocf.referer({landing_url:s.url,referral_details:s.referral_details_str||void 0,referrer_url:s.referer||void 0}).catch((()=>o("OCF_EXTERNAL_REFERER"))):Promise.resolve(),d=s?e.Attribution.recordUserEvent({event:"open",referring_link_url:s.url}).catch((()=>o("ATTRIBUTION_EXTERNAL_REFERER"))):Promise.resolve();const m=e.Jot.externalReferer(h).then((e=>{e&&Object(Fe.c)(t,e[0])})).catch((()=>o("SCRIBE_EXTERNAL_REFERER")));return Promise.all([m,p,d])},Ke=n("O6Yq"),We=n("muX9"),Ve=n("zCf4");var Xe=function(){Object(Ve.g)();const e=function(){let e;return me.canUseDOM&&(e=window.location.href),e?Object(Ke.a)(e):null}();return e?I.a.createElement(We.a,null,I.a.createElement("link",{href:e,rel:"canonical"})):null};var $e=Object(O.a)().propsFromState((()=>({loginReturnPath:H.t}))).withAnalytics({component:"smartlock_prompt"}),qe=n("6oVL"),Ge=n("SrIh"),Ye=n("BnI0"),Je=n("pQ3Z"),Ze=n.n(Je),Qe=n("cnVF"),et=n("MWbm"),tt=n("mrHL");class nt extends I.a.Component{constructor(e,t){super(e,t),this.state={autoSubmit:!1,password:"",smartLockDisabled:!1,userName:""},this._smartLockSupported=!!(window.PasswordCredential&&navigator.credentials&&navigator.credentials.get)&&!t.loggedInUserId,this._isSmartLockDisabledFromCookie="1"===e.getCookie({featureSwitches:t.featureSwitches,cookieName:Qe.y})}componentDidMount(){"/login/error"===this.props.location.pathname?Object(Ye.a)(this.context.featureSwitches):this._checkShouldDisplayPrompt()}componentDidUpdate(e){Ze()(e.location,this.props.location)||this._checkShouldDisplayPrompt()}render(){const{loginReturnPath:e}=this.props,{autoSubmit:t,password:n,userName:i}=this.state;return this._shouldDisplaySmartLockPrompt()?I.a.createElement(et.a,{style:it.hidden},I.a.createElement(qe.a,{autoSubmit:t,loginReturnPath:e},I.a.createElement("input",{name:"session[username_or_email]",type:"hidden",value:i}),I.a.createElement("input",{name:"session[password]",type:"hidden",value:n}))):null}_scribeAction(e,t){const{analytics:n}=this.props;n.scribe({...t,action:e})}_checkShouldDisplayPrompt(){const{location:{pathname:e}}=this.props,{smartLockDisabled:t}=this.state;if(this._shouldDisplaySmartLockPrompt()){this._scribeAction("impression");const n=(t||this._isSmartLockDisabledFromCookie)&&"/login"===e?"required":"optional";let i=!0;setTimeout((()=>i=!1),250),navigator.credentials.get({mediation:n,password:!0}).then((e=>{if(e){i?this._scribeAction("select",{element:"unmediated"}):this._scribeAction("select",{element:"mediated"});const{id:t,password:n}=e;this.setState({autoSubmit:!0,userName:t,password:n})}else this._smartLockSupported&&this.setState({smartLockDisabled:!0},(()=>Object(Ye.a)(this.context.featureSwitches))),i?this._scribeAction("cancel",{element:"no_credentials"}):this._scribeAction("cancel",{element:"with_credentials"})}),(e=>{e&&"NotSupportedError"!==e.name&&"NotAllowedError"!==e.name&&"InvalidStateError"!==e.name&&Object(Ge.a)(e)}))}}_shouldDisplaySmartLockPrompt(e=this.props){const{loggedInUserId:t}=this.context,{location:{pathname:n}}=e,i="/login"===n;return!t&&this._smartLockSupported&&i}}nt.contextType=B.a,nt.defaultProps={getCookie:tt.d};const it=ae.a.create((e=>({hidden:{display:"none"}})));var ot=Object(M.a)($e(nt)),rt=n("HPNB"),st=n("+Kfv"),at=n("1YZw"),ct=Object(O.a)().propsFromState((()=>({toast:at.d}))).propsFromActions((()=>({onClose:at.c}))),lt=n("ZB2A"),ut="toast",ht=n("cHvH"),pt=n("0FVZ"),dt=n("XTym");var mt=ct((({onClose:e,toast:t})=>{const n=Object(Ve.g)(),i=Object(lt.b)(n),o=I.a.useMemo((()=>({viewType:i})),[i]);return t?I.a.createElement(ht.a,null,(({windowWidth:n})=>{const i=rt.a.shouldRenderAsModal(n)?pt.a.ModalToasts:pt.a.Toasts;return I.a.createElement(st.a,{behavioralEventContext:o},I.a.createElement(dt.a,{LayerComponent:i,action:t.action,ariaOnly:t.ariaOnly,autoDismissDelay:t.autoDismissDelay,behavioralEventEntityToken:t.behavioralEventEntityToken,key:t.id,onClose:e,testID:ut,text:t.text,withAutoDismiss:t.withAutoDismiss,withClearButton:t.withClearButton}))})):null}));const bt=i,ft=Q.a,_t=ue,gt=pe.a,yt=Pe,vt=xe.a,St=ot,wt=Xe,Et=mt,kt=o,Tt=G,Ct=function(e,t){const n=Object.keys(e);let i,o=!1;const r=()=>{o||(i=Z()(t),n.forEach((t=>i.bind(t,(n=>{var i;Object(Y.i)(window.location.pathname)||(i=e[t],e=>{e.preventDefault(),e.stopPropagation(),i(e)})(n)})))))};return y(r,[a,c]),()=>{o=!0,S(r),i&&i.unbind(n)}},It=de,At=Le,Ot=Me,Pt=ze,xt=he.d,Lt=T,jt=U,Dt=F.a,Rt=ge,Mt=je.a},rRIm:function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));n("kYxP");var i=n("ERkP"),o=n.n(i),r=n("sTyV"),s=n("6/RC"),a=n("sebV"),c=n("G6rE"),l=n("rxPX"),u=Object(l.a)().propsFromState((()=>({loggedInUser:c.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({loggedInUserScreenName:e?e.screen_name:void 0}))),h=n("3XMw"),p=n.n(h),d=n("OrGc"),m=n("QK5w"),b=n("aITJ"),f=n("MWbm"),_=n("TnY3"),g=n("rHpw"),y=n("t62R"),v=n("v6aA"),S=n("uScj"),w=n("fs1G"),E=n("BcsE"),k=n("VPAj");const T=p.a.b47e760e,C=p.a.fd2c7b44,I=new S.a,A=e=>{if(e.target instanceof HTMLInputElement){const t=e.target.tagName.toLowerCase();return"input"===t||"textarea"===t}return!1},O=e=>{if(!s.canUseDOM)return w.a;return I.subscribe(e).unsubscribe};class P extends o.a.Component{constructor(...e){super(...e),this._bindKeyboardShortcuts=()=>{const{history:e,loggedInUserScreenName:t}=this.props,n=t=>n=>{n.preventDefault(),I.getListeners().length?I.notify(t):e.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:t}})},i={[d.e.search]:n(),[d.e.goToUser]:n("@"),[d.e.openKeyboardShortcuts]:()=>e.push("/i/keyboard_shortcuts"),[d.e.goExplore]:()=>e.push("/explore"),[d.e.goSettings]:()=>e.push("/settings")},o=t=>({[d.e.goProfile]:()=>e.push(`/${t}`),[d.e.goLikes]:()=>e.push(`/${t}/likes`),[d.e.goLists]:()=>e.push(`/${t}/lists`)}),s=this.context.userClaims.isTrueAndEnabled("subscriptions_feature_1007"),a=t&&s?{...o(t),[d.e.goTopArticles]:()=>e.push("/i/articles")}:t?o(t):{},c={...i,...a,[d.e.goHome]:()=>e.push("/home"),[d.e.goDisplay]:()=>e.push("/i/display"),[d.e.goNotifications]:()=>e.push("/notifications"),[d.e.goMentions]:()=>e.push("/notifications/mentions"),[d.e.goMessages]:()=>e.push("/messages"),[d.e.newMessage]:()=>e.push("/messages/compose"),[d.e.newTweet]:()=>e.push("/compose/tweet"),[d.e.goMomentMaker]:()=>e.push("/i/moment_maker"),[d.e.goBookmarks]:()=>e.push("/i/bookmarks")},l=this.props.loggedInUserScreenName?c:i;this._unbindKeyboardShortcuts=Object(r.a)(l)},this._handleKeyDown=e=>{A(e)||"Backspace"!==e.key||(this._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())},this._handleKeyUp=e=>{if(!A(e)&&"Backspace"===e.key){e.preventDefault(),e.stopPropagation();const t=this._backspaceDown,n=!!Object(E.a)(t)&&Date.now()-t<500,i=Object(m.a)({},{location:this.props.location});n&&i?this.props.history.goBack():window.close()}}}componentDidMount(){this._bindKeyboardShortcuts(),b.b.isKaiOS()&&a.a.isStandaloneApp()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}componentWillUnmount(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),b.b.isKaiOS()&&a.a.isStandaloneApp()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}render(){return this.props.loggedInUserScreenName?o.a.createElement(f.a,{accessibilityLevel:2,accessibilityRole:"heading",style:g.a.visuallyHidden},o.a.createElement(y.b,null,T),o.a.createElement(y.b,{focusable:!1,link:"/i/keyboard_shortcuts"},C)):null}}P.contextType=v.a;const x=u(P),L=s.canUseDOM?Object(_.a)(x):Object(k.a)(null);t.a=L}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.AppModules.a6b58fe7.js.map