(window.webpackJsonp=window.webpackJsonp||[]).push([[227],{"+Bsv":function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("3XMw"),i=a.n(s),r=a("M2x3"),o="settingsAppBar",c=a("/yvb"),d=a("rHpw");const u=i.a.bb081ea2,m={viewType:"settings_button"},p=l.a.memo((({onPress:e,pullRight:t,to:a})=>l.a.createElement(c.a,{accessibilityLabel:u,behavioralEventContext:m,hoverLabel:{label:u},icon:l.a.createElement(r.a,null),link:a,onPress:e,pullRight:t,style:g.button,testID:o,type:"primaryText"}))),g=d.a.create((e=>({button:{marginVertical:`calc(-${e.spaces.space12})`}})));t.a=p},"/8XK":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("ERkP"),l=a.n(n),s=a("t62R"),i=a("3XMw"),r=a.n(i),o=a("4n2h");const c=r.a.fb3ccb56,d=(e=!1,t=!1)=>{const a=Object(o.b)(e),n=Object(o.a)(e,t);return l.a.createElement(s.b,{color:n,numberOfLines:1,weight:a},c)}},"/Kco":function(e,t,a){"use strict";var n={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"pinnedInboxSectionConversation",selections:[{alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],type:"DMConversation",abstractKey:null,hash:"a00816062f86303dc4d7de69da48a9eb"};e.exports=n},"0Bjv":function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("Lsrn"),i=a("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M17.931 2.508c0 .42-.34.75-.75.75h-8.39l1.38 2.08-.56 5.78-.47.16c-1.5.49-3.1 2.07-3.37 3.31-.07.35-.39.59-.73.59-.05 0-.11 0-.16-.01-.4-.09-.66-.49-.58-.89.39-1.81 2.24-3.52 3.91-4.25l.42-4.3-1.35-2.02c-.26-.38-.29-.87-.07-1.29.24-.41.66-.66 1.11-.66h8.86c.41 0 .75.34.75.75zm3.09 12.76c-.14.17-.46.46-1.05.46h-3.86l-2.64 6.1c-.12.28-.39.45-.69.45s-.57-.17-.69-.45l-1.96-4.53c-.16-.38.01-.82.39-.98.38-.17.82.01.99.39l1.27 2.93 1.69-3.91h-1.61c-.42 0-.75-.33-.75-.75 0-.41.33-.75.75-.75h6.81c-.41-1.06-1.64-2.26-2.91-2.82-.09-.04-.16-.09-.22-.16-.22-.21-.3-.54-.17-.83.17-.38.61-.55.99-.39 1.59.7 3.5 2.43 3.89 4.25.06.25.03.66-.23.99zm.839-12.259L3.2 21.659c-.15.15-.34.22-.53.22s-.39-.07-.53-.22c-.29-.29-.29-.76 0-1.06L20.8 1.939c.29-.29.76-.29 1.06 0 .29.3.29.77 0 1.07z"})));r.metadata={width:24,height:24},t.a=r},"29EQ":function(e,t,a){"use strict";a.d(t,"c",(function(){return R})),a.d(t,"a",(function(){return L})),a.d(t,"b",(function(){return K}));var n=a("ERkP"),l=a.n(n),s=a("/yvb"),i=a("3XMw"),r=a.n(i),o=a("Avzu");const c=r.a.f325afc4,d=r.a.cdcebd22;var u=({testID:e})=>l.a.createElement(s.a,{accessibilityLabel:c,hoverLabel:{label:d},icon:l.a.createElement(o.a,null),link:"/messages/compose",pullRight:!0,testID:e,type:"primaryText"}),m=(a("kYxP"),a("v6aA")),p=a("xN10"),g=a("MWbm"),y=a("OiMc"),h=a("t62R"),_=a("9RkS"),b=a("rHpw"),v=a("hX3w");const k=[[],["dm_evolution_enabled","dm_evolution_inbox_primary_enabled","dm_evolution_inbox_secondary_enabled","dm_evolution_inbox_tertiary_enabled"],["dm_evolution_enabled","dm_evolution_inbox_primary_enabled","dm_evolution_inbox_secondary_enabled","dm_evolution_inbox_tertiary_enabled","dm_evolution_message_creation_enabled"]];var f=function(){const{featureSwitches:e}=l.a.useContext(m.a);if(!e.isTrue("dm_evolution_responsive_web_early_bird_only_switch"))return null;const t=Object(v.a)(e),[a,n]=l.a.useState((e=>{for(let t=k.length-1;t>0;t--)if(Object(p.a)(k[t],(t=>e.isTrue(t))))return t;return 0})(e)),s=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(a);l.a.useEffect((()=>{void 0!==s&&s!==a&&window.location.reload()}),[a,s]);return l.a.createElement(g.a,{style:F.switchContainer},l.a.createElement(y.a,{enableHover:!0,renderContent:()=>l.a.createElement(h.b,{style:F.popoverContent},"How much fancy GraphQL do you want in your DMs?")},l.a.createElement(g.a,{style:[F.icon,F[`level${a}`]]},l.a.createElement("svg",{viewBox:"0 0 400 400",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("path",{d:"M57.468 302.66l-14.376-8.3 160.15-277.38 14.376 8.3z",fill:"#E535AB"}),l.a.createElement("path",{d:"M39.8 272.2h320.3v16.6H39.8z",fill:"#E535AB"}),l.a.createElement("path",{d:"M206.348 374.026l-160.21-92.5 8.3-14.376 160.21 92.5zm139.174-241.079l-160.21-92.5 8.3-14.376 160.21 92.5z",fill:"#E535AB"}),l.a.createElement("path",{d:"M54.482 132.883l-8.3-14.375 160.21-92.5 8.3 14.376z",fill:"#E535AB"}),l.a.createElement("path",{d:"M342.568 302.663l-160.15-277.38 14.376-8.3 160.15 277.38zM52.5 107.5h16.6v185H52.5z",fill:"#E535AB"}),l.a.createElement("path",{d:"M330.9 107.5h16.6v185h-16.6z",fill:"#E535AB"}),l.a.createElement("path",{d:"M203.522 367l-7.25-12.558 139.34-80.45 7.25 12.557z",fill:"#E535AB"}),l.a.createElement("path",{d:"M369.5 297.9c-9.6 16.7-31 22.4-47.7 12.8-16.7-9.6-22.4-31-12.8-47.7 9.6-16.7 31-22.4 47.7-12.8 16.8 9.7 22.5 31 12.8 47.7M90.9 137c-9.6 16.7-31 22.4-47.7 12.8-16.7-9.6-22.4-31-12.8-47.7 9.6-16.7 31-22.4 47.7-12.8 16.7 9.7 22.4 31 12.8 47.7M30.5 297.9c-9.6-16.7-3.9-38 12.8-47.7 16.7-9.6 38-3.9 47.7 12.8 9.6 16.7 3.9 38-12.8 47.7-16.8 9.6-38.1 3.9-47.7-12.8M309.1 137c-9.6-16.7-3.9-38 12.8-47.7 16.7-9.6 38-3.9 47.7 12.8 9.6 16.7 3.9 38-12.8 47.7-16.7 9.6-38.1 3.9-47.7-12.8M200 395.8c-19.3 0-34.9-15.6-34.9-34.9 0-19.3 15.6-34.9 34.9-34.9 19.3 0 34.9 15.6 34.9 34.9 0 19.2-15.6 34.9-34.9 34.9M200 74c-19.3 0-34.9-15.6-34.9-34.9 0-19.3 15.6-34.9 34.9-34.9 19.3 0 34.9 15.6 34.9 34.9 0 19.3-15.6 34.9-34.9 34.9",fill:"#E535AB"})))),l.a.createElement(g.a,{style:F.switch},l.a.createElement(_.a,{accessibilityLabel:"GraphQL Slider",hoverLabels:["Easy (no GraphQL, same as normal Twitter)","Medium (some GraphQL, next launch target) ","Jane Wong (all GraphQL, experimental)"],max:k.length-1,min:0,onChange:e=>{for(let a=k.length-1;a>e;a--)k[a].forEach((e=>t.set(e,!1)));k[e].forEach((e=>t.set(e,!0))),n(e)},value:a,withMarkers:!0})))};const F=b.a.create((e=>({level0:{filter:"grayscale(100%)"},level1:{filter:"grayscale(50%)"},level3:{},icon:{height:e.spaces.space20,marginRight:e.spaces.space8,marginTop:e.spaces.space2,width:e.spaces.space20},popoverContent:{padding:e.spaces.space24},switchContainer:{display:"flex",flexDirection:"row"},switch:{marginRight:e.spaces.space12,minWidth:`calc(2*${e.spaces.space48})`}})));var T=a("nySH"),S=a("M2mT"),E=a("Es6L"),C=a("aI6n"),I=a("Vc8w");const R=r.a.a2f81050,L="dmInbox";function K(e){Object(I.a)();const t=Object(E.a)()?l.a.createElement(g.a,{style:x.appBarButtons},l.a.createElement(f,null),Object(T.d)("/messages/settings",!1),l.a.createElement(u,{testID:C.a.newDM})):Object(T.d)("/messages/settings",!0);return l.a.createElement(S.a,{rightControl:t,screenType:"root",title:R},e.children)}const x=b.a.create((e=>({appBarButtons:{flexDirection:"row",alignItems:"center"}})))},"33Kz":function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));a("kYxP");const n=e=>e.getArrayValue("dm_reactions_config_active_reactions"),l=e=>{const t=e.getArrayValue("dm_reactions_config_inactive_reactions");return[...n(e),...t]},s=(e,t)=>{const a=l(t).find((t=>t.endsWith(e)));if(a)return a.split(":")[0]},i=(e,t={includeInactive:!1})=>t.includeInactive?l(e).map((e=>e.split(":")[1])):n(e).map((e=>e.split(":")[1]))},"3AAD":function(e,t,a){"use strict";const n={...a("7n04").a,pinToNewestWhenAtNewest:!0};t.a=n},"4AMG":function(e,t,a){"use strict";a.d(t,"a",(function(){return Ls}));var n=a("ejT/"),l=a("ERkP"),s=a.n(l),i=(a("kYxP"),a("gbD7")),r=a("X/yg"),o=a("b9JY");var c=(e,t)=>{if(e&&e.message_data&&t&&t.message_data&&Object(o.b)(e)&&Object(o.b)(t)){const{sender_id:a,time:n}=e.message_data,{sender_id:l,time:s}=t.message_data,i=parseInt(s,10)-parseInt(n,10);return a===l&&i>=0&&i<=6e4}return!1},d=a("jat/"),u=a("MMRb"),m=a("v6aA"),p=a("XnpN"),g=a("3XMw"),y=a.n(g),h=a("W27K"),_="ProfileInfoHeader",b="UserDescription",v=a("LhSm"),k=a("I4+6"),f=a("rHpw"),F=a("t62R"),T=a("855f"),S=a("PbQQ"),E=a("cm6r"),C=a("oSwX"),I=a("jV+4"),R=a("pBrB"),L=a("wCd/"),K=a("pjBI"),x=a("OOKO");const w=y.a.e535cae9,M=(e,t)=>{const a=Object(p.a)(e,t).map((({user:e})=>e)),n=a&&a[0];return{userAvatarUrl:n.profile_image_url_https,userDescription:n.description,userEntities:n.entities,userWithheldDescription:n.withheld_description,userWithheldEntities:n.withheld_entities,userFollowerCount:n&&n.followers_count,userFriendsCount:n&&n.friends_count,userIdStr:n&&n.id_str,userJoinDate:n&&n.created_at,userName:n&&n.name,userScreenName:n&&n.screen_name,userIsVerified:n&&n.verified}},O=f.a.create((e=>({root:{flexDirection:"column",alignItems:"center",marginBottom:e.spaces.space16,paddingVertical:e.spaces.space20,paddingHorizontal:e.spaces.space16,borderRadius:e.borderRadii.xSmall},profileInfoItemMargin:{marginBottom:e.spaces.space4},borderBottom:{borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid"},description:{width:"100%",textAlign:"center"},descriptionVDL:{marginBottom:0,marginTop:e.spaces.space12},statsVDL:{marginTop:e.spaces.space12,marginBottom:e.spaces.space12},userAvatar:{alignItems:"center"}})));var A=({conversation:e,withBottomBorder:t=!0,withVDLrefresh:a=!1})=>{const{loggedInUserId:n}=s.a.useContext(m.a);if(!e)return null;const{userAvatarUrl:l,userDescription:i,userEntities:r,userFollowerCount:o,userFriendsCount:c,userIdStr:d,userIsVerified:u,userJoinDate:p,userName:g,userScreenName:y,userWithheldDescription:A,userWithheldEntities:D}=M(e,n||""),P=!!(g&&y&&(o&&c||p)),U=k.a.generate({color:f.a.theme.colors.text,backgroundColor:f.a.theme.colors.transparent,customFocusBackgroundColor:f.a.theme.colors.gray0,customHoverBackgroundColor:f.a.theme.colors.gray0,customPressedBackgroundColor:f.a.theme.colors.activeFaintGray});return s.a.createElement(S.a.Consumer,{testId:_},(e=>{return s.a.createElement(E.a,{interactiveStyles:U,link:e.withAnchorless(`https://twitter.com/${y||""}`),style:[O.root,t&&P&&O.borderBottom]},a&&s.a.createElement(C.default,{uri:l}),s.a.createElement(I.a,{isVerified:u,name:g,screenName:y,style:[O.profileInfoItemMargin,a&&O.userAvatar],weight:"bold",withHoverCard:!0,withLink:!0,withStackedLayout:a}),i&&r&&d?s.a.createElement(R.a,{description:i,entities:r,style:[O.profileInfoItemMargin,O.description,a&&O.descriptionVDL],testID:b,userId:d,withheldDescription:A,withheldEntities:D}):null,!a&&o&&c?s.a.createElement(L.a,{followersCount:o,friendsCount:c,screenName:y||"",style:O.profileInfoItemMargin,withLink:!1}):null,!a&&p?s.a.createElement(v.a,{joinDate:p}):null,a?s.a.createElement(s.a.Fragment,null,s.a.createElement(K.a,{style:O.statsVDL},p?(e=>s.a.createElement(F.b,{color:"gray700",size:"subtext1"},s.a.createElement(v.a,{joinDate:e,withoutIcon:!0})))(p):null,o?(n=o,s.a.createElement(F.b,{color:"gray700",size:"subtext1"},w({count:T.a.getTruncatedCount(n)}))):null),s.a.createElement(h.a,{userId:d,userScreenName:y||""}),s.a.createElement(x.a,{spacing:"space28"})):null);var n}))},D=a("V/6K"),P=a("cFyg"),U=a("g54k"),H=a("aA19"),N=a("aWyx"),j=a("mN6z"),B=a("MWbm"),W=a("MAI/"),q=a("zQEV");const V=({children:e,link:t,style:a})=>s.a.createElement(F.b,{align:"center",color:"gray700",link:t,size:"subtext2",style:a},e);class z extends s.a.Component{constructor(...e){super(...e),this._renderContents=()=>{const{conversation:e,entry:t,entryType:a,perspective:n,users:l}=this.props,i=Object(q.a)(t,a,n,l);switch(a){case N.b.CONVERSATION_AVATAR_UPDATE:{const a=e.avatar_image_https===t.conversation_avatar_image_https;return s.a.createElement(s.a.Fragment,null,this._isValidImageSource(e.avatar_image_https)&&a?s.a.createElement(B.a,{style:Q.conversationAvatarContainer},s.a.createElement(H.a,{conversation:e,perspective:n})):null,s.a.createElement(V,null,i))}case N.b.JOIN_CONVERSATION:{const e=this._getAddedYouMessageWithProfileInfo(i),t=this._getParticipantsFromEntry(),a=s.a.createElement(F.b,{align:"center",color:"gray700",size:"subtext2"},this._getParticipantsFromEntryText(t)),n=this._getJoinConversationDetailsWithFacepile(t,a);return s.a.createElement(s.a.Fragment,null,e,n)}default:return s.a.createElement(V,null,i)}},this._getAddedYouMessageWithProfileInfo=e=>{const{entry:t,users:a}=this.props,n=t.sender_id?a[t.sender_id]:void 0,l=n?{pathname:`https://twitter.com/${n.screen_name}`}:void 0;return s.a.createElement(E.a,{interactiveStyles:null,link:l,style:Q.userAddedYouContainer},n?s.a.createElement(C.default,{accessibilityLabel:n.screen_name,screenName:n.screen_name,size:"medium",uri:n.profile_image_url_https,withHoverCard:!0,withLink:!0}):null,s.a.createElement(V,{link:l,style:Q.userAddedYouText},e))},this._getJoinConversationDetailsWithFacepile=(e,t)=>{const{conversation:a}=this.props,n=e.slice(0,20).map((({profile_image_url_https:e})=>e));return s.a.createElement(E.a,{interactiveStyles:null,link:{pathname:`/messages/${a.conversation_id}/participants`},style:Q.joinConversationDetails},t,s.a.createElement(W.a,{style:Q.userAvatarFacepile,userAvatarSize:"xLarge",userAvatarUrls:n}))}}shouldComponentUpdate(e){return!Object(j.a)(this.props,e)}render(){return s.a.createElement(B.a,{style:Q.root},this._renderContents())}_isValidImageSource(e){return e&&""!==e&&e.indexOf("MEDIA_NOT_FOUND")<0}_getParticipantsFromEntry(){const{entry:e,perspective:t,users:a}=this.props;return e.participants?e.participants.filter((({user_id:e})=>t!==e)).map((({user_id:e})=>a[e])).filter(Boolean):[]}_getParticipantsFromEntryText(e){const{conversation:{conversation_id:t}}=this.props;return Object(q.b)(e.length,t)}}const Q=f.a.create((e=>({root:{paddingBottom:e.spaces.space20},conversationAvatarContainer:{alignSelf:"center",height:e.spaces.space64,marginBottom:e.spaces.space12,width:e.spaces.space64},userAddedYouContainer:{flexDirection:"row",justifyContent:"center"},userAddedYouText:{flexShrink:1,marginLeft:e.spaces.space12},joinConversationDetails:{marginTop:e.spaces.space4},userAvatarList:{marginTop:e.spaces.space4},userAvatarFacepile:{marginTop:e.spaces.space4,justifyContent:"center"}})));var G=Object(U.a)(z),Y=a("zTrU");var X=Object(Y.a)((function(e){const t=f.a.theme.spacesPx.space40;return{DMUserAvatarSizeType:"xLarge",DMUserAvatarSizePx:t,DMUserAvatarSpacerPx:t+f.a.theme.spacesPx.space12}})),$=a("shC7"),J=a("38/B");const Z=function(e){return ee(e,J.a.reducedMotionEnabled)},ee=Object(Y.a)((function(e,t){const a=function(){const{DMUserAvatarSizePx:e,DMUserAvatarSpacerPx:t}=X(f.a.theme.scale),a=ne[f.a.theme.scale],n=te/a,l=ae/e,s=ae/2,i=ae-s,r=ae-s-t;return{cssTransition:J.a.reducedMotionEnabled?{}:{transition:`transform ${se}, opacity ${se}`},messageContainer:{base:{transform:[{translateX:0}]},active:{sent:{transform:[{translateX:($.a.getConstants().isRTL?1:-1)*i}]},received:{transform:[{translateX:($.a.getConstants().isRTL?-1:1)*r}]}}},actionsContainer:{base:{transform:[{translateX:0}]},active:{sent:{transform:[{translateX:($.a.getConstants().isRTL?1:-1)*le[f.a.theme.scale]}]},received:{transform:[{translateX:($.a.getConstants().isRTL?-1:1)*(le[f.a.theme.scale]+r)-s}]}}},voiceMessage:{container:{base:{height:a},active:{height:te}},base:{height:a,transform:[{scale:1}]},active:{base:{transform:[{scale:n}]},sent:{paddingRight:s/n,transformOrigin:$.a.getConstants().isRTL?"bottom left":"bottom right"},received:{paddingLeft:s/n,transformOrigin:$.a.getConstants().isRTL?"bottom right":"bottom left"}}},userAvatar:{base:{transform:[{scale:1}]},sent:{transformOrigin:$.a.getConstants().isRTL?"bottom left":"bottom right"},received:{transformOrigin:$.a.getConstants().isRTL?"bottom right":"bottom left"},active:{opacity:1,pointerEvents:"all",transform:[{scale:l}]},visuallyHidden:{opacity:0,pointerEvents:"none"}}}}();return{actionsContainer:function({isSent:e,isVoiceMessageActive:t}){const n=[a.cssTransition,a.actionsContainer.base];return t&&n.push(e?a.actionsContainer.active.sent:a.actionsContainer.active.received),n},messageContainer:function({isSent:e,isVoiceMessageActive:t}){const n=[a.cssTransition,a.messageContainer.base];return t&&n.push(e?a.messageContainer.active.sent:a.messageContainer.active.received),n},voiceMessageContainer:function({isSent:e,isVoiceMessageActive:t}){const n=[a.cssTransition,a.voiceMessage.container.base];return t&&n.push(a.voiceMessage.container.active),n},voiceMessage:function({isSent:e,isVoiceMessageActive:t}){const n=[a.cssTransition,a.voiceMessage.base];return t&&(n.push(a.voiceMessage.active.base),n.push(e?a.voiceMessage.active.sent:a.voiceMessage.active.received)),n},userAvatar:function({isSent:e,isVoiceMessageActive:t}){const n=[a.cssTransition,a.userAvatar.base,e?a.userAvatar.sent:a.userAvatar.received];return t?n.push(a.userAvatar.active):e&&n.push(a.userAvatar.visuallyHidden),n}}}));const te=60,ae=te,ne={xSmall:42,small:42,normal:47,large:47,xLarge:47},le={xSmall:72.26,small:165.61-89.3,normal:158.22-94.4,large:166.64-100.58,xLarge:181.55-111.81},se="0.2s 0s ease-in-out";var ie=a("+Kfv"),re=a("hqKg"),oe=a("oEGd"),ce=a("zh9S"),de=a("Yatk"),ue=a("G6rE"),me=a("P1r1");const pe={scribeAction:ce.c},ge=Object(re.createSelector)(((e,t)=>ue.e.select(e,t.senderId)),me.k,me.q,((e,t,a)=>({user:Object(de.a)(e),displaySensitiveMedia:t,isDmNsfwMediaFilterEnabled:a})));var ye=Object(oe.f)(ge,pe),he=(a("MvUL"),a("1YZw")),_e=a("rxPX"),be=a("0KEI");var ve=Object(_e.a)().propsFromActions((()=>({addToast:he.b,createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_OVERFLOW_ACTIONS"),deleteEntry:u.deleteEntry}))).withAnalytics(),ke=a("k49u"),fe=a("LVU8");const Fe=y.a.f58dff34,Te=y.a.ad5a8e8e,Se={[ke.a.MissingParameter]:{toast:Object(fe.a)(Fe)},[ke.a.DirectMessageDestroyPermissionsError]:{toast:{text:Te}},showToast:!0};var Ee=a("xCUF"),Ce=a("uKEd");const Ie=[],Re=Object(re.createSelector)((e=>Object(Ce.l)(e).entries),((e,t)=>Object(Ce.p)(e,t.entry.id)||Ie),((e,t)=>t.perspective),((e,t,a)=>({selectedReactions:t.filter((t=>{const n=e[t]&&e[t].data;return n&&n.sender_id===a})).map((t=>e[t].data.reaction_key))}))),Le={createReaction:Ce.d,createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_REACTIONS_POPOVER"),fetchUpdatesIfNeeded:Ee.d,removeReaction:Ce.k};var Ke=Object(oe.f)(Re,Le),xe=a("33Kz"),we=a("wTX1");var Me=({accessibilityLabelFormatter:e,count:t,emojiSize:a,emotion:n,enableHoverStyle:l,focusable:i,onPress:r,style:o})=>{const{featureSwitches:c}=s.a.useContext(m.a),d=Object(xe.b)(n,c),u=e&&d?e({emoji:d,count:t}):void 0,p=k.a.generate({backgroundColor:f.a.theme.colors.gray50,color:f.a.theme.colors.gray700});return s.a.createElement(E.a,{accessibilityLabel:u,focusable:i,interactiveStyles:l?p:null,onPress:r,style:[Oe.container,...o||[]]},s.a.createElement(F.b,{size:a,style:Oe.unsetLineHeight},d),t?s.a.createElement(we.a,{color:"gray700",containerStyle:Oe.count,count:t,size:"subtext3"},t):null)};const Oe=f.a.create((e=>({container:{flexDirection:"row"},count:{alignSelf:"center",minWidth:e.spaces.space16,paddingLeft:e.spaces.space2},unsetLineHeight:{lineHeight:"unset"}})));var Ae=a("pHkl"),De=a("Irs7");const Pe=y.a.ca7a2215,Ue=y.a.fc0e94b7;class He extends s.a.Component{constructor(...e){super(...e),this._handleReactionScribing=(e,t)=>{const{analytics:a,entry:n,isGroupDM:l,participantsCount:s}=this.props,i=t?"delete_reaction":"create_reaction",o=Object(r.c)(n);a.scribe({section:"twitter_service",component:"direct_messages",element:i,action:"success",data:{conversation_id:n.conversation_id,conversation_participant_count:s,conversation_type:l?Ae.l.GROUP:Ae.l.ONE_TO_ONE,message_type:o,reaction_emotion:e}})},this._reactionClickHandler=(e,t)=>()=>{const{createLocalApiErrorHandler:a,createReaction:n,dismiss:l,entry:s,fetchUpdatesIfNeeded:i,perspective:r,removeReaction:o}=this.props,c={reaction_key:e,conversation_id:s.conversation_id,dm_id:s.id,perspective:r};(t?o:n)(c).then(this._handleReactionScribing(e,t)).then((()=>i())).catch(a()),l()}}render(){const{selectedReactions:e}=this.props,t=Object(xe.a)(this.context.featureSwitches).map((t=>{const a=e.includes(t);return s.a.createElement(Me,{accessibilityLabelFormatter:a?Pe:Ue,emojiSize:"title4",emotion:t,enableHoverStyle:!0,focusable:!0,key:t,onPress:this._reactionClickHandler(t,a),style:[je.reaction,a&&je.selectedReaction]})}));return s.a.createElement(B.a,{style:je.reactions},t)}}He.contextType=m.a;var Ne=Object(De.a)(Ke(He));const je=f.a.create((e=>({reactions:{cursor:"pointer",flexDirection:"row",padding:e.spaces.space12},reaction:{borderRadius:e.borderRadii.small,padding:e.spaces.space4},selectedReaction:{backgroundColor:e.colors.gray50}})));var Be=a("OiMc");class We extends s.a.Component{constructor(...e){super(...e),this._renderDMReactionPickerContent=e=>{const{entry:t,isGroupDM:a,participantsCount:n,perspective:l}=this.props;return s.a.createElement(Ne,{dismiss:e,entry:t,isGroupDM:a,participantsCount:n,perspective:l})}}render(){const{children:e,onDismiss:t}=this.props;return s.a.createElement(Be.a,{enableEnterKeyToggle:!0,onDismiss:t,preferredVerticalOrientation:"up",renderContent:this._renderDMReactionPickerContent,withArrow:!0,withFixedPosition:this.context.isDrawer},e)}}We.contextType=D.a;var qe=a("TnY3"),Ve=a("mjJ+"),ze=a("Q0VY"),Qe=a("eb3s"),Ge=a("/yvb"),Ye=a("ZToW"),Xe=a("CaKu"),$e=a("i4Oy"),Je=a("4w6w");const Ze=(e,t)=>{if(null==e)return!1;const[a,n]=t||[0,0];return!((0===a||1===a)&&e.length===n)},et=e=>{const{message_data:t}=e;if(!t)return!1;const{attachment:a}=t;if(!a)return!0;if(a.sticker)return!1;const n=a.tweet||a.photo||a.animated_gif||a.video||void 0;if(n)return Ze(t.text,n.indices);if(a.card){var l;const e=((null==(l=t.entities)?void 0:l.urls)||[]).find((e=>e.url===a.card));return Ze(t.text,e&&e.indices)}return!0},tt=e=>{var t;const a=null==e||null==(t=e.message_data)?void 0:t.attachment;return!(!a||!(a.card||a.tweet||a.photo||a.animated_gif||a.video))},at=e=>{var t;const a=null==e||null==(t=e.message_data)?void 0:t.attachment;return!(!a||!a.fleet)},nt=(e,t,a)=>{const n=1.25*f.a.theme.fontSizesPx.body;return{compositeRendered:e?void 0!==t&&void 0!==a:void 0!==t,isTextSquared:void 0!==t&&void 0!==a&&(a===t||a<=t-n),isAttachmentSquared:void 0!==a&&void 0!==t&&(t===a||t<=a-n)}};var lt=a("hiGS"),st=a("zIWA"),it=a("Lsrn"),rt=a("k/Ka");const ot=(e={})=>Object(rt.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[it.a.root,e.style],viewBox:"0 0 24 24"},s.a.createElement("g",null,s.a.createElement("path",{d:"M16.925 9.5H14.5V7.075c0-.414-.336-.75-.75-.75s-.75.336-.75.75V9.5h-2.425c-.414 0-.75.336-.75.75s.336.75.75.75H13v2.425c0 .414.336.75.75.75s.75-.336.75-.75V11h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-.3 11H4.25c-.413 0-.75-.337-.75-.75V8.402c0-.414-.336-.75-.75-.75s-.75.336-.75.75V19.75C2 20.99 3.01 22 4.25 22h12.375c.414 0 .75-.336.75-.75s-.336-.75-.75-.75z"}),s.a.createElement("path",{d:"M19.75 2h-12C6.51 2 5.5 3.01 5.5 4.25v12c0 1.24 1.01 2.25 2.25 2.25h12c1.24 0 2.25-1.01 2.25-2.25v-12C22 3.01 20.99 2 19.75 2zm.75 14.25c0 .413-.337.75-.75.75h-12c-.413 0-.75-.337-.75-.75v-12c0-.413.337-.75.75-.75h12c.413 0 .75.337.75.75v12z"})));ot.metadata={width:24,height:24};var ct=ot,dt=a("DlVf"),ut=a("ACHU"),mt=a("UgB4"),pt=a("fz3c");const gt=y.a.ba60339a,yt=y.a.j4bfee22,ht=y.a.d96cf7ce,_t=y.a.faddd3a2,bt=y.a.eb497e08,vt=y.a.b170974a,kt=y.a.i202bd22,ft=y.a.f2e5491a,Ft=y.a.f88553c8,Tt=y.a.ifea3114,St=y.a.cac1482a,Et=y.a.h63a5c3c;class Ct extends s.a.Component{constructor(e,t){super(e,t),this._renderOverflowMenu=e=>{const{analytics:t,entry:a,featureSwitches:n,isSent:l}=this.props,i=pt.a.DMMessage,r=t.contextualScribeNamespace,o=[{text:gt,Icon:lt.a,isEmphasized:!0,onClick:this._handleShowDeleteConfirmation(e)}];if(!l)if(Object(pt.g)(n,i)){var c;const e=Object(pt.d)({clientReferer:window.location.pathname,isMedia:!1,isPromoted:!1,reportType:i,reportedConversationId:a.conversation_id,reportedMessageId:a.id,reportedUser:null==(c=a.message_data)?void 0:c.sender_id,scribeNamespace:t.contextualScribeNamespace});o.push({text:kt,Icon:st.a,link:{pathname:"/i/safety/report_story_start",state:{input:{requested_variant:JSON.stringify(e)}}},onClick:this.props.onReportMessage})}else o.push({text:kt,Icon:st.a,link:{pathname:`/i/report/${i}/${a.id}`,state:{clientReferer:window.location.pathname,conversationId:a.conversation_id,scribeNamespace:r}},onClick:this.props.onReportMessage});return Xe.a.isAvailable()&&o.push({text:ft,Icon:ct,onClick:this._handleCopyMessageText}),s.a.createElement(Ve.a,{isFixed:this.context.isDrawer,items:o,onCloseRequested:this._handleHideActionsAndMenus(e),preferredHorizontalOrientation:"right"})},this._handleCopyMessageText=e=>{const{addToast:t}=this.props,a=this._replaceMessageUrls();a&&(Xe.a.setString(a),t({text:Ft})),e&&e()},this._handleForwardButton=()=>{var e,t;const{entry:a,history:n}=this.props;if(null!=a&&null!=(e=a.message_data)&&null!=(t=e.attachment)&&t.tweet){const{tweet:e}=a.message_data.attachment;n.push({pathname:"/messages/compose",state:{tweetAttachment:{...e,id_str:e.status}}})}},this._handleSetActionsActive=()=>{const{setShouldFreezeUpdates:e}=this.props;this.setState({actionsAreActive:!0}),e(!0)},this._handleDelete=()=>{const{analytics:e,createLocalApiErrorHandler:t,deleteEntry:a,entry:n,inboxType:l,isGroupDM:s,participantsCount:i}=this.props,o=Object(r.c)(n);e.scribe({action:"delete",data:{conversation_id:n.conversation_id,conversation_type:s?Ae.l.GROUP:Ae.l.ONE_TO_ONE,conversation_participant_count:i,message_type:o,inbox_type:Object(r.l)(l)}}),a({conversationId:n.conversation_id,id:n.id}).catch(t(Se))},this._handleHideDeleteConfirmation=()=>{this.setState({showDeleteConfirmation:!1})},this._handleHideActionsAndMenus=e=>()=>{const{setShouldFreezeUpdates:t}=this.props;e&&e(),this.setState({actionsAreActive:!1}),t(!1)},this._handlePressReactionPickerButton=()=>{const{analytics:e,entry:t}=this.props;e.scribe({component:"reaction_button",element:Object(r.c)(t),action:"click"}),this._handleSetActionsActive()},this._handleShowDeleteConfirmation=e=>()=>{const{setShouldFreezeUpdates:t}=this.props;e(),this.setState({actionsAreActive:!1,showDeleteConfirmation:!0}),t(!1)},this._replaceMessageUrls=()=>{const{entry:e}=this.props,t=e&&e.message_data&&e.message_data.entities;let a=e&&e.message_data&&e.message_data.text||"";return ze.a.tweetTextParts(a,[0,a.length],t).forEach((e=>{"url"===e.entityType&&(a=a.replace(e.url,e.expandedUrl))})),a},this.state={actionsAreActive:!1,showDeleteConfirmation:!1},this._hasMedia=tt(this.props.entry),this._isNarrow=$e.a.get("screen").width<f.a.theme.breakpoints.xSmall}render(){var e,t;const{entry:a,isSent:n,shouldShowReactionButton:l,style:i,withVDLRefresh:r}=this.props,o=this._areActionsVisible();return s.a.createElement(B.a,{pointerEvents:o?"auto":"none",style:[Rt.messageActions,n?Rt.messageActionsLeft:Rt.messageActionsRight,o?Rt.visible:Rt.invisible,r&&Rt.vdlMessageActions,this._isNarrow&&(this._hasMedia?Rt.messageActionsMediaNarrow:Rt.messageActionsNarrow),i]},(null==a||null==(e=a.message_data)||null==(t=e.attachment)?void 0:t.tweet)&&r&&this._renderForwardButton(),l&&this._renderReactionButton(),this._renderOverflowButton(),this._renderDeleteConfirmation())}_renderDeleteConfirmation(){return this.state.showDeleteConfirmation?s.a.createElement(Qe.a,{confirmButtonLabel:ht,confirmButtonType:"destructiveFilled",headline:yt,onCancel:this._handleHideDeleteConfirmation,onConfirm:this._handleDelete,text:_t}):null}_renderForwardButton(){return s.a.createElement(Ge.a,{accessibilityLabel:Tt,hoverLabel:{label:Tt},icon:Lt,onPress:this._handleForwardButton,size:this._isNarrow?"small":"medium",type:"brandText"})}_renderReactionButton(){const{entry:e,isGroupDM:t,participantsCount:a,perspective:n,withVDLRefresh:l}=this.props,{actionsAreActive:i}=this.state,r=s.a.createElement(dt.a,{style:l?Rt.vdlActionIcon:Rt.actionIcon});return s.a.createElement(We,{entry:e,isGroupDM:t,onDismiss:this._handleHideActionsAndMenus(),participantsCount:a,perspective:n},s.a.createElement(Ge.a,{accessibilityExpanded:!!i,accessibilityHasPopup:"menu",accessibilityLabel:vt,hoverLabel:{label:St},icon:r,onPress:this._handlePressReactionPickerButton,size:this._isNarrow?"small":"medium",type:"brandText"}))}_renderOverflowButton(){const{withVDLRefresh:e}=this.props,t=s.a.createElement(ut.a,{style:e?Rt.vdlActionIcon:Rt.actionIcon});return s.a.createElement(Ge.a,{accessibilityLabel:bt,hoverLabel:{label:Et},icon:t,onPress:this._handleSetActionsActive,renderMenu:this._renderOverflowMenu,size:this._isNarrow?"small":"medium",type:"brandText"})}_areActionsVisible(){const{containerIsActive:e,containerIsFocused:t,containerIsHovered:a,isDraft:n}=this.props,{actionsAreActive:l}=this.state,s=(i=this.props.entry,!et(i)&&tt(i)&&!Ye.a.isEnabled);var i;return!n&&(s||e&&!Ye.a.isEnabled||t||a||l)}}Ct.contextType=D.a;var It=Object(qe.a)(ve(Ct));const Rt=f.a.create((e=>({invisible:{opacity:0},messageActions:{alignSelf:"flex-end",flexDirection:"row"},messageActionsMediaNarrow:{flexDirection:"column"},messageActionsNarrow:{flexShrink:1,flexWrap:"wrap",minWidth:e.spaces.space32},messageActionsLeft:{justifyContent:"flex-end",paddingRight:e.spaces.space4},messageActionsRight:{justifyContent:"flex-start",paddingLeft:e.spaces.space4},vdlMessageActions:{alignSelf:"center"},actionIcon:{color:e.colors.gray700},vdlActionIcon:{color:e.colors.gray600},visible:{opacity:1}}))),Lt=s.a.createElement(mt.a,{style:Rt.vdlActionIcon});var Kt=a("97Jx"),xt=a.n(Kt),wt=a("CDB5");var Mt=Object(_e.a)().propsFromActions((()=>({createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_CONVERSATION"),removeEntry:u.removeEntry,sendMessage:wt.m}))).withAnalytics();const Ot="87.5%",At="24px";var Dt=a("wrlS"),Pt=a("RqPI");const Ut=[],Ht=(e,t)=>Object(Ce.p)(e,t.entryId)||Ut,Nt=e=>Object(Ce.l)(e).entries,jt={createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_REACTIONS")};var Bt=Object(oe.e)((()=>Object(re.createSelector)(Nt,Ht,Pt.s,Dt.d,((e,t,a,n)=>{const l=Object(xe.a)(n,{includeInactive:!0});let s,i=0;return{reactionsWithCounts:t.reduceRight(((t,n)=>{const r=e[n]&&e[n].data;if(!r)return t;if(!l.includes(r.reaction_key))return t;const o=(t.get(r.reaction_key)||0)+1;return t.set(r.reaction_key,o),(null==r?void 0:r.sender_id)===a&&(s=r.reaction_key),i+=1,t}),new Map),selectedReactionKey:s,totalReactionCount:i}}))),jt);const Wt=[],qt=(e,t)=>t.entryId,Vt=e=>Object(Ce.l)(e).entries,zt=(e,t)=>Object(Ce.p)(e,qt(0,t))||Wt,Qt=(e,t)=>ue.e.selectMany(e,((e,t)=>Object(Ce.q)(e,qt(0,t)))(e,t)),Gt={removeReaction:Ce.k,fetchUpdatesIfNeeded:Ee.d,createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_REACTION_SUMMARY_CONTEXT")};var Yt=Object(oe.e)((()=>Object(re.createSelector)(Vt,zt,Pt.s,Qt,Dt.d,((e,t,a,n,l)=>{const s=Object(xe.a)(l,{includeInactive:!0}),i=[];t.forEach((t=>{const l=e[t]&&e[t].data;if(!(l&&s.includes(l.reaction_key)))return;const r=n.find((e=>e&&e.id_str===l.sender_id)),o=r&&{avatarUri:r.profile_image_url_https,userId:r.id_str,reactionKey:l.reaction_key,isLoggedInUser:r.id_str===a,screenName:r.screen_name,name:r.name,isProtected:r.protected,isVerified:r.verified,time:l.time};o&&i.push(o)})),i.sort(((e,t)=>t.time-e.time));const r=i.findIndex((e=>e.userId===a));return r>-1&&i.push(...i.splice(0,r)),{loggedInUserId:a,usersWithReactions:i}}))),Gt),Xt=a("TIdA"),$t=a("htQn");const Jt=y.a.gf5e9ea6,Zt=y.a.a2d48779,ea=Xt.a.createLayoutCache();const ta=f.a.create((e=>({bodyColumn:{flexShrink:1,flexGrow:1,justifyContent:"center",marginHorizontal:e.spaces.space4},body:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},bottomBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},column:{alignItems:"center",justifyContent:"center",marginRight:e.spaces.space4},reactionColumn:{alignItems:"center",justifyContent:"center",marginRight:e.componentDimensions.gutterHorizontal},root:{flexDirection:"row",minHeight:"56px",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical}})));var aa=function(e){const{featureSwitches:t}=s.a.useContext(m.a),{onUndoPress:a,renderUndo:n,user:l,withBottomBorder:i}=e,{avatarUri:r,isProtected:o,isVerified:c,name:d,screenName:u}=l,p=s.a.useMemo((()=>function(e){e.stopPropagation(),a()}),[a]),g=s.a.createElement(C.default,{imageLayoutCache:ea,screenName:u,size:"xxLarge",uri:r}),y=s.a.createElement(Me,{emojiSize:"title4",emotion:l.reactionKey,focusable:!1}),h=s.a.createElement(I.a,{badgeContext:"content",isProtected:o,isVerified:c,name:d,screenName:u,withHoverCard:!0,withStackedLayout:!0});return s.a.createElement($t.a,{link:{pathname:`/${u}`,anchorless:!0},style:[ta.root,i&&ta.bottomBorder]},s.a.createElement(B.a,{style:ta.reactionColumn},y),s.a.createElement(B.a,{style:ta.column},g),s.a.createElement(B.a,{style:ta.bodyColumn},s.a.createElement(B.a,{style:ta.body},h)),n?s.a.createElement(B.a,{style:ta.column},s.a.createElement(Ge.a,{accessibilityLabel:Zt({emoji:Object(xe.b)(l.reactionKey,t)}),onClick:p,size:"small",type:"brandText"},Jt)):null)},na=a("xKuM"),la=a("efqG");const sa=y.a.b772cd66,ia=y.a.c0098d4a,ra=y.a.j85999ec;class oa extends s.a.PureComponent{constructor(...e){super(...e),this._renderContent=(e,t)=>s.a.createElement(B.a,null,this._renderHeader(e,t),this._renderUsers(e,t),this._renderDoneButton(e,t)),this._renderHeader=(e,t)=>"sheet"===t?s.a.createElement(na.a,{title:ia}):s.a.createElement(F.b,{visuallyHidden:!0},ia),this._renderUsers=(e,t)=>s.a.createElement(B.a,{accessibilityLabel:ra,style:[ca.container,"sheet"===t?ca.sheet:ca.popover]},this._renderUserCells(e)),this._renderDoneButton=(e,t)=>"sheet"===t&&s.a.createElement(Ge.a,{key:"button_done",onPress:e,style:ca.cancelButton,type:"primaryOutlined"},sa),this._renderUserCells=e=>this.props.usersWithReactions.filter(Boolean).map(((t,a)=>s.a.createElement(aa,{history:this.props.history,key:t.userId,onUndoPress:this._reactionUndoHandler(t.reactionKey,e),renderUndo:t.isLoggedInUser,user:t,withBottomBorder:a!==this.props.usersWithReactions.length-1}))),this._reactionUndoHandler=(e,t)=>()=>{const{conversationId:a,createLocalApiErrorHandler:n,entryId:l,fetchUpdatesIfNeeded:s,loggedInUserId:i,removeReaction:r}=this.props,o={reaction_key:e,conversation_id:a,dm_id:l,perspective:i};t(),r(o).then(this._handleScribeRemoveReaction(e)).then(s).catch(n())},this._handleScribeRemoveReaction=e=>()=>{const{analytics:t}=this.props;t.scribe({page:"app",section:"twitter_service",component:"direct_messages",element:"delete_reaction",action:"success",data:{reaction_emotion:e}})}}render(){const{children:e}=this.props;return s.a.createElement(la.a,{renderContent:this._renderContent,withFixedPosition:this.context.isDrawer},e)}}oa.contextType=D.a;const ca=f.a.create((e=>({cancelButton:{marginHorizontal:e.spaces.space12,marginVertical:e.spaces.space12},container:{overflowY:"auto",paddingVertical:e.spaces.space12},popover:{maxHeight:"35vh",minWidth:"320px"},sheet:{maxHeight:"65vh"}})));var da=Object(qe.a)(Object(De.a)(Yt(oa)));const ua=y.a.h95f9e77;class ma extends s.a.PureComponent{constructor(e){super(e),this._handleScribeDMReactionSummary=()=>{const{analytics:e}=this.props;e.scribe({component:"dm_reaction_summary",action:"show"})},this._onSetReactionsNode=e=>{this._measureWidths(e||void 0)},this._renderReactions=({isHovered:e})=>{const{reactionsWithCounts:t,selectedReactionKey:a}=this.props,n=this.state.emojiSize||"headline1",l=t.size-1;return Array.from(t,(([t,i],r)=>s.a.createElement(Me,{count:i,emojiSize:n,emotion:t,enableHoverStyle:!1,focusable:!0,key:t,style:[r===l&&pa.rightPadding,pa.elementPadding,a===t?pa.selfSelect:null,e&&pa.isHoveredDMReaction]})))},this.state={emojiSize:void 0}}render(){const{conversationId:e,entryId:t,isEndOfDM:a,isSent:n,totalReactionCount:l}=this.props,{emojiSize:i}=this.state;if(0===l)return null;const r=k.a.generate({backgroundColor:f.a.theme.colors.gray50,color:f.a.theme.colors.gray700}),o=ua({reactionCount:l});return s.a.createElement(B.a,{style:[pa.container,a?pa.marginShort:pa.marginLong,n?pa.alignRight:pa.alignLeft,i?pa.visible:pa.invisible]},s.a.createElement(da,{conversationId:e,entryId:t},s.a.createElement(E.a,{accessibilityLabel:o,focusable:!0,interactiveStyles:r,onPress:this._handleScribeDMReactionSummary,ref:this._onSetReactionsNode,style:pa.content},this._renderReactions)))}_measureWidths(e){const t=e&&e.parentElement,a={emojiSize:"headline1"};if(t){const{width:n}=t.getBoundingClientRect(),{width:l=0}=e?e.getBoundingClientRect():{};l>n&&(a.emojiSize="subtext2")}this.setState({...a})}}const pa=f.a.create((e=>({container:{boxSizing:"border-box"},content:{borderRadius:e.borderRadii.infinite,display:"flex",flexDirection:"row"},rightPadding:{paddingRight:e.spaces.space2},elementPadding:{borderColor:e.colors.transparent,borderWidth:e.borderWidths.small,paddingBottom:e.spaces.space2,paddingTop:e.spaces.space2,paddingLeft:`calc(${e.spaces.space2} * 2)`},selfSelect:{borderColor:f.a.theme.colors.gray50,borderRadius:e.borderRadii.infinite},alignLeft:{alignSelf:"flex-start"},alignRight:{alignSelf:"flex-end"},invisible:{opacity:0},visible:{opacity:1},marginShort:{marginBottom:e.spaces.space4},marginLong:{marginBottom:e.spaces.space12},isHoveredDMReaction:{borderColor:e.colors.transparent,cursor:"pointer"}})));var ga=Object(De.a)(Bt(ma)),ya=a("Xrkv");const ha=y.a.icd0bf34,_a=y.a.e8bd8fec,ba=y.a.b2d32fae,va=y.a.a763d33f;class ka extends s.a.PureComponent{constructor(e){super(e),this._handlePress=e=>{e.stopPropagation(),this.setState({showFullList:!0})},this.state={showFullList:!1}}render(){const{isGroupDM:e,isSeenByEveryone:t,namesToDisplay:a}=this.props;return s.a.createElement(B.a,{style:fa.root},s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2",style:fa.seenLabel},this._renderSeenLabel()),!t&&e&&a.length?this._renderNameList():null)}_renderSeenLabel(){const{isGroupDM:e,isSeenByEveryone:t,namesToDisplay:a}=this.props;return t?e?ba:ha:a.length?va({count:a.length}):_a}_renderNameList(){let{namesToDisplay:e}=this.props;const{showFullList:t}=this.state,a=!t&&e.length>10,n=e.length-10,l=({namesList:e,othersCount:t})=>s.a.createElement(y.a.I18NFormatMessage,{$i18n:"f6464107"},s.a.createElement(F.b,null,e),s.a.createElement(F.b,{color:"link",onPress:this._handlePress},y.a.e762ce30({othersCount:t})));a&&(e=e.slice(0,10));const i=Object(ya.a)(e,a);return s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2",style:fa.namesList},a?s.a.createElement(l,{namesList:i,othersCount:n}):s.a.createElement(F.b,null,i))}}const fa=f.a.create((e=>({root:{alignItems:"flex-end",width:`calc(100% - ${e.spaces.space2})`},seenLabel:{cursor:"pointer"},namesList:{marginBottom:e.spaces.space2,whiteSpace:"pre-line"}})));var Fa=ka,Ta=a("t0aI");const Sa=({entryId:e,participants:t,user:a})=>{const n=Ea({entryId:e,participants:t,user:a});return{namesToDisplay:n,isSeenByEveryone:n.length===t.length-1}},Ea=({entryId:e,participants:t,user:a})=>t.reduce(((t,n)=>{const{join_conversation_event_id:l,last_read_event_id:s,user:{name:i}}=n,r=n.user_id!==a.id_str,o=s&&1!==Object(Ta.a)(e,s),c=!l||1!==Object(Ta.a)(l,e);return r&&o&&c&&t.push(i),t}),[]);var Ca=a("IMYl"),Ia=a("21zW"),Ra=a("gmpV");const La=y.a.fad48eea,Ka=y.a.ba60339a,xa=y.a.d338f53e,wa=y.a.ae7d7a24,Ma=y.a.d725a289,Oa=y.a.bbe74f3f,Aa=y.a.h0e4cdf5,Da=y.a.bfbc051d;class Pa extends s.a.PureComponent{constructor(...e){super(...e),this._handleRemove=()=>{const{conversationId:e,entryId:t,removeEntry:a}=this.props;a(e,null,{id:t})},this._handleTryAgain=()=>{const{conversationId:e,entryText:t,localMediaId:a,sendMessage:n,user:l}=this.props;n({tweetAttachment:void 0,senderId:l.id_str,conversationId:e,text:t,localMediaId:a}),this._handleRemove()}}render(){const{isSent:e,onPress:t}=this.props,a=this._renderSending(),n=this._renderError(),l=this._renderTimestamp(),i=this._renderReadReceipt(),r=this._renderSentCheckmark(),o=this._renderReactions(),c=l||i||r,d=a||n||o||c,u=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled");return d&&s.a.createElement(B.a,{style:[Ua.root,u&&Ua.vdlRootMargin,e&&Ua.sentMessage]},a,n,o,c?s.a.createElement(E.a,{interactiveStyles:null,onPress:t,style:e&&Ua.sentContainer},s.a.createElement(B.a,{style:e&&Ua.groupedItems},l,r),i):null)}_renderError(){const{isError:e}=this.props;return e&&s.a.createElement(B.a,null,s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2"},wa),s.a.createElement(B.a,{style:Ua.groupedItems},s.a.createElement(F.b,{accessibilityRole:"button",color:"magenta500",onPress:this._handleRemove,size:"subtext2",withInteractiveStyling:!0},Ka),s.a.createElement(Ia.a,null),s.a.createElement(F.b,{accessibilityRole:"button",color:"primary",onPress:this._handleTryAgain,size:"subtext2",withInteractiveStyling:!0},xa)))}_renderReactions(){const{conversationId:e,entryId:t,isLastRapidFire:a,isRapidFire:n,isSent:l,withUserAvatar:i}=this.props,r=!n||a;return e?s.a.createElement(B.a,{style:i&&Ua.footerPadderWithAvatar},s.a.createElement(ga,{conversationId:e,entryId:t,isEndOfDM:r,isSent:l})):null}_renderReadReceipt(){const{entryId:e,isActive:t,isDraft:a,isError:n,isGroupDM:l,isSent:i,participants:r,user:o}=this.props;return t&&i&&!a&&!n?s.a.createElement(Fa,xt()({isGroupDM:l},Sa({entryId:e,participants:r,user:o}))):null}_renderSending(){const{isDraft:e,isError:t}=this.props;return e&&!t&&s.a.createElement(F.b,{align:"right",color:"gray700",size:"subtext2"},La)}_renderSentCheckmark(){const{entryId:e,isDraft:t,isError:a,isLastRapidFire:n,isRapidFire:l,isSent:i,participants:r,user:o}=this.props,{isSeenByEveryone:c}=Sa({entryId:e,participants:r,user:o});return!i||t||a||l&&!n?null:s.a.createElement(F.b,{color:c?"primary":"gray700",style:Ua.checkmarkContainer},s.a.createElement(Ca.a,{style:Ua.checkmark}))}_renderTimestamp(){const{entryTime:e,isDraft:t,isError:a,isGroupDM:n,isLastRapidFire:l,isRapidFire:i,isSent:r,user:{name:o},withUserAvatar:c}=this.props;if(t||a||i&&!l)return null;const d=new Date(Number(e));let u;u=Object(Ra.c)(d)?Ma(d):Object(Ra.d)(d)?Oa({time:Ma(d)}):Object(Ra.e)(d)?Aa(d):Da(d);const m=n&&!r,p=r?"right":"left";return s.a.createElement(B.a,{style:[c&&Ua.footerPadderWithAvatar,r&&Ua.timestamp]},s.a.createElement(F.b,{align:p,color:"gray700",size:"subtext2",withInteractiveStyling:r||!Ye.a.isEnabled},m&&s.a.createElement(y.a.I18NFormatMessage,{$i18n:"c8b914d5"},s.a.createElement(F.b,null,o)),m&&" ",u))}}Pa.contextType=m.a;const Ua=f.a.create((e=>({root:{marginTop:e.spaces.space2,overflow:"hidden",width:Ot},vdlRootMargin:{marginTop:`calc(${e.spaces.space8} - ${e.spaces.space2})`},sentMessage:{alignSelf:"flex-end",justifyContent:"flex-end"},sentContainer:{flexDirection:"column"},groupedItems:{justifyContent:"flex-end",flexDirection:"row"},timestamp:{cursor:"pointer"},checkmark:{cursor:"pointer",flexShrink:0,height:"1rem",paddingLeft:e.spaces.space2},checkmarkContainer:{lineHeight:"1"},footerPadderWithAvatar:{marginLeft:`calc(${e.spaces.space40} + ${e.spaces.space12})`}})));var Ha=Mt(Pa),Na=a("jtO7");const ja=f.a.create((e=>({root:{borderColor:e.colors.gray50,borderStyle:"solid",borderWidth:e.borderWidths.small,borderBottomWidth:e.borderWidths.none,boxSizing:"border-box",overflow:"hidden"},isLast:{borderBottomWidth:e.borderWidths.small},insideTopRoundedSent:{borderTopLeftRadius:e.borderRadii.xLarge},insideTopRoundedReceived:{borderTopRightRadius:e.borderRadii.xLarge},outsideTopRoundedSent:{borderTopRightRadius:e.borderRadii.xLarge},outsideTopRoundedReceived:{borderTopLeftRadius:e.borderRadii.xLarge},sentLast:{borderBottomLeftRadius:e.borderRadii.xLarge},receivedLast:{borderBottomRightRadius:e.borderRadii.xLarge}})));var Ba=({insideTopRounded:e,isLast:t,isSent:a,label:n,onClick:l,outsideTopRounded:i,tcoUrl:r})=>{const o=[ja.root,t&&ja.isLast,t&&a&&ja.sentLast,t&&!a&&ja.receivedLast,e&&a&&ja.insideTopRoundedSent,e&&!a&&ja.insideTopRoundedReceived,i&&a&&ja.outsideTopRoundedSent,i&&!a&&ja.outsideTopRoundedReceived];return s.a.createElement(B.a,{style:o},s.a.createElement(Na.a,{align:"center",color:"primary",label:n,link:r,onClick:l}))},Wa=a("fs1G");class qa extends s.a.Component{componentDidMount(){this.props.onImpression()}render(){const{callToActions:e,isSent:t,onCtaClick:a,withSticker:n,withUserText:l}=this.props,i=e.map(((i,r)=>{const o=0===r;return s.a.createElement(Ba,{insideTopRounded:o&&(n||!l),isLast:r===e.length-1,isSent:t,key:r,label:i.label,onClick:a,outsideTopRounded:o&&n,tcoUrl:i.tco_url})}));return s.a.createElement(B.a,null,i)}}qa.defaultProps={onCtaClick:Wa.a,onImpression:Wa.a};var Va=qa,za=a("vjRr"),Qa=a("EGrD");const Ga=(e,t)=>t.cardUrl;var Ya=Object(_e.a)().propsFromState((()=>({adFreeArticleDomains:Qa.c,card:za.a.createSingleHydratedSelector(Ga)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(be.createLocalApiErrorHandlerWithContextFactory)("DM_CARD_MESSAGE"),fetchAdFreeToken:Qa.a,loadAdFreeArticleDomainsFromPersistence:Qa.b,popOutConversation:u.popOutConversation})));const Xa=f.a.create((e=>({root:{width:"100%"},invisible:{opacity:0},visible:{opacity:1}})));var $a=({attachmentContent:e,attachmentHeader:t,isVisible:a=!0,textContent:n})=>s.a.createElement(B.a,{style:[a?Xa.visible:Xa.invisible,Xa.root]},t,e,n),Ja=a("cTG8");const Za=({excludeCardUrl:e,isActive:t=!1,isFailedDraft:a,isFirstRapidFire:n=!1,isLastRapidFire:l=!1,isRapidFire:i=!1,isSent:r,hasAssociatedAttachment:o,messageData:c={},rootStyle:d,tweetId:u,withCta:p,withMediaLinks:g,withMessageBubble:y})=>{const{featureSwitches:h}=s.a.useContext(m.a),_=h.isTrue("dm_vdl_enabled")&&h.isTrue("dm_vdl_chat_p0_enabled"),b=[d,y&&en.messageTextContainer,y&&_&&en.messageTextContainerVDL,y&&r&&en.sent,y&&_&&r&&en.vdlSent,y&&!r&&en.received,y&&_&&!r&&en.received,a&&en.failedDraft,i&&!_&&!n&&!r&&en.rapidFireReceived,i&&!_&&!n&&r&&en.rapidFireSent,l&&_&&r&&en.rapidFireLastSentVDL,l&&_&&!r&&en.rapidFireLastReceivedVDL,o&&r&&en.hasAssociatedAttachmentSent,o&&!r&&en.hasAssociatedAttachmentReceived,y&&t&&r&&en.activeSent,y&&_&&t&&r&&en.vdlActiveSent,y&&t&&!r&&!Ye.a.isEnabled&&en.activeReceived,p&&en.withCta],v=[en.tweetText,y&&en.textAlignLeft,!y&&r&&en.textAlignRight],{gray0:F,magenta500:T,primary:S,text:C,white:I}=f.a.theme.colors,R=k.a.generate({color:r?I:C,backgroundColor:a?T:r?S:F}),L=c.text&&c.text.length||0;return s.a.createElement(E.a,{accessibilityRole:"none",interactive:r,interactiveStyles:y?R:null,style:b},s.a.createElement(Ja.a,{color:f.a.isDarkMode()||r?"whiteOnColor":void 0,displayTextRange:[0,L],entities:c.entities,excludeCardUrl:e,linkColor:y&&r||f.a.isDarkMode()?"whiteOnColor":"link",linkify:!0,quotedTweetId:u,size:y?void 0:"title2",style:v,text:c.text||"",underlineLinks:!0,withMediaLinks:g}))},en=f.a.create((e=>({tweetText:{overflow:"hidden",wordBreak:"break-word"},messageTextContainer:{borderRadius:e.borderRadii.xLarge,boxSizing:"border-box",maxWidth:"100%",paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space16},messageTextContainerVDL:{borderRadius:At},textAlignLeft:{textAlign:"left"},textAlignRight:{textAlign:"right"},sent:{alignSelf:"flex-end",backgroundColor:e.colors.primary,borderBottomRightRadius:e.borderRadii.none,borderColor:e.colors.primary},vdlSent:{backgroundColor:e.colors.primary600,borderBottomRightRadius:At},received:{alignSelf:"flex-start",backgroundColor:e.colors.dmReceivedBubbleBackground,borderBottomLeftRadius:e.borderRadii.none,borderColor:e.colors.gray200},vdlReceived:{borderBottomLeftRadius:At},activeSent:{backgroundColor:e.colors.lightPrimary},activeReceived:{backgroundColor:e.colors.gray200},vdlActiveSent:{backgroundColor:e.colors.primary700},failedDraft:{backgroundColor:e.colors.magenta500},rapidFireReceived:{borderTopLeftRadius:e.borderRadii.none},rapidFireSent:{borderTopRightRadius:e.borderRadii.none},rapidFireLastSentVDL:{borderBottomRightRadius:e.borderRadii.small},rapidFireLastReceivedVDL:{borderBottomLeftRadius:e.borderRadii.small},withCta:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},hasAssociatedAttachmentSent:{borderTopRightRadius:e.borderRadii.none},hasAssociatedAttachmentReceived:{borderTopLeftRadius:e.borderRadii.none}})));Za.defaultProps={withMediaLinks:!1};var tn=Za;var an=({isActive:e=!1,isFailedDraft:t,isFirstRapidFire:a=!1,isLastRapidFire:n=!1,isRapidFire:l=!1,isSent:i,messageData:r,withCta:o,withMessageBubble:c})=>s.a.createElement(tn,{isActive:e,isFailedDraft:t,isFirstRapidFire:a,isLastRapidFire:n,isRapidFire:l,isSent:i,messageData:r,withCta:o,withMediaLinks:!0,withMessageBubble:c}),nn=a("sCEu"),ln=a("aX4+"),sn=a("/Ikv");const{CardNames:rn}=sn.a;class on extends s.a.Component{constructor(...e){var t;super(...e),this.state={attachmentWidth:void 0,textContentWidth:void 0},this._hasClaimsForAdFreeArticles=null==(t=this.context.userClaims)?void 0:t.isTrueAndEnabled("subscriptions_feature_1006"),this._handleAttachmentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{attachmentWidth:a}=this.state;if(a!==t){const e={attachmentWidth:t};this.setState(e)}},this._handleOnClick=e=>{const{card:{binding_values:t}={},conversationId:a,popOutConversation:n}=this.props;if(a&&n(a),this._hasClaimsForAdFreeArticles){const{adFreeArticleDomains:a,createLocalApiErrorHandler:n,fetchAdFreeToken:l}=this.props,[s,i]=new nn.a(l,n()).getAdFreeArticlesClickHandler({destinationUrl:sn.a.getBindingValue(t,"card_url"),linkDomain:sn.a.getBindingValue(t,"domain"),adFreeArticleDomains:a});s&&i(e)}},this._handleTextContentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{textContentWidth:a}=this.state;if(a!==t){const e={textContentWidth:t};this.setState(e)}}}componentDidMount(){this._hasClaimsForAdFreeArticles&&this.props.loadAdFreeArticleDomainsFromPersistence()}render(){const{card:e,hasUserText:t,isActive:a,isFailedDraft:n,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,withCta:d,withMessageBubble:u}=this.props,{attachmentWidth:m,textContentWidth:p}=this.state,g=!!Object.values(rn).includes(null==e?void 0:e.name),y=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),h=nt(t,m,p);let _;h.isAttachmentSquared?_="both":y&&!t||(_=o?"right":"left");const b=e?s.a.createElement(B.a,{onClick:this._handleOnClick,onLayout:this._handleAttachmentLayout},s.a.createElement(ln.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values,users:e.users},cardContext:{tweetUserId:c.sender_id},dmSentOrReceived:o?"sent":"received",withBorderShadow:y,withSquareBottomBorderRadius:_})):null,v=t?s.a.createElement(B.a,{onLayout:this._handleTextContentLayout,style:o?cn.sentMessageWrapper:cn.receivedMessageWrapper},s.a.createElement(tn,{excludeCardUrl:null==e?void 0:e.url,hasAssociatedAttachment:!0,isActive:a,isFailedDraft:n,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,rootStyle:h.isTextSquared?o?cn.textSentSquared:cn.textReceivedSquared:void 0,withCta:d,withMessageBubble:u})):null;return g?s.a.createElement($a,{attachmentContent:b,isVisible:h.compositeRendered,textContent:v}):s.a.createElement(an,{isActive:a,isFailedDraft:n,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,withCta:d,withMessageBubble:u})}}on.defaultProps={hasUserText:!1},on.contextType=m.a;const cn=f.a.create((e=>({attachmentReceivedSquared:{borderBottomRightRadius:e.borderRadii.none},attachmentSentSquared:{borderBottomLeftRadius:e.borderRadii.none},card:{marginBottom:e.spaces.space2},receivedMessageWrapper:{alignSelf:"flex-start"},sentMessageWrapper:{alignSelf:"flex-end"},received:{borderBottomLeftRadius:e.borderRadii.none},sent:{borderBottomRightRadius:e.borderRadii.none},textReceivedSquared:{borderTopRightRadius:e.borderRadii.none},textSentSquared:{borderTopLeftRadius:e.borderRadii.none}})));var dn=Ya(on);const un=y.a.f7204380;class mn extends s.a.Component{constructor(...e){super(...e),this.state={attachmentWidth:void 0,textContentWidth:void 0},this._getSquareBottomStyles=e=>{const{isSent:t}=this.props;let a="left";return e?a="both":t&&(a="right"),pn[a]},this._handleAttachmentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{attachmentWidth:a}=this.state;a!==t&&this.setState({attachmentWidth:t})},this._handleTextContentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{textContentWidth:a}=this.state;a!==t&&this.setState({textContentWidth:t})}}render(){const{hasUserText:e,isActive:t,isFailedDraft:a,isFirstRapidFire:n,isLastRapidFire:l,isRapidFire:i,isSent:r,messageData:o,withCta:c,withMessageBubble:d}=this.props,{attachmentWidth:u,textContentWidth:m}=this.state;if(!o||!o.attachment||!o.attachment.fleet)return null;const{compositeRendered:p,isAttachmentSquared:g,isTextSquared:y}=nt(e,u,m),h=[gn.tombstoneWrapper,r?gn.sentMessageWrapper:gn.receivedMessageWrapper,this._getSquareBottomStyles(g)],_=s.a.createElement(B.a,{onLayout:this._handleAttachmentLayout,style:h},s.a.createElement(F.b,{color:"gray700"},un)),b=e?s.a.createElement(B.a,{onLayout:this._handleTextContentLayout,style:[r?gn.sentMessageWrapper:gn.receivedMessageWrapper,!d&&gn.fleetReactionSpacing]},s.a.createElement(tn,{hasAssociatedAttachment:!0,isActive:t,isFailedDraft:a,isFirstRapidFire:n,isLastRapidFire:l,isRapidFire:i,isSent:r,messageData:o,rootStyle:y?r?gn.sentSquared:gn.receivedSquared:void 0,withCta:c,withMessageBubble:d})):null;return s.a.createElement($a,{attachmentContent:_,isVisible:p,textContent:b})}}const pn=f.a.create((e=>({both:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},left:{borderBottomLeftRadius:e.borderRadii.none},right:{borderBottomRightRadius:e.borderRadii.none}}))),gn=f.a.create((e=>({fleetReactionSpacing:{marginTop:e.spaces.space4},receivedMessageWrapper:{alignSelf:"flex-start"},receivedSquared:{borderTopRightRadius:e.borderRadii.none},sentMessageWrapper:{alignSelf:"flex-end"},sentSquared:{borderTopLeftRadius:e.borderRadii.none},tombstoneWrapper:{backgroundColor:e.colors.gray0,borderColor:e.colors.gray50,borderRadius:e.borderRadii.xLarge,boxSizing:"border-box",flexDirection:"row",borderWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space12,overflow:"auto"}})));var yn=mn,hn=(a("849X"),a("prG5")),_n=a("RCZO"),bn=a("A91F");const vn=y.a.b327c12a,kn=e=>{e.stopPropagation()};var fn=({media:e,mediaUrl:t})=>{const a=e.ext_alt_text||vn,n=e.media_url_https,{height:l,width:i}=e.original_info||{},r=Object(_n.b)(e).rgb,o=s.a.createElement(hn.a,{accessibilityLabel:a,aspectMode:bn.a.withinRange(9/16,10),backgroundColor:r,image:{url:n,width:i,height:l},shouldShowAltLabel:!!e.ext_alt_text});return t?s.a.createElement(E.a,{interactiveStyles:null,link:t,onPress:kn},o):o},Fn=a("Modb"),Tn=a("lklz"),Sn=a("XrEN"),En=a("ZvMt");var Cn=({media:e,messageId:t})=>{const a=e&&Sn.a.extractVideoProps(Tn.b.forDm(t),e);return a?s.a.createElement(Fn.a,xt()({},a,{aspectRatio:En.a.getAspectRatio(e.video_info),withPostPlayback:!0})):null},In=Object(_e.a)().withAnalytics();class Rn extends s.a.PureComponent{constructor(e,t){super(e,t),this._handleLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e;this.state.width!==t&&this.setState({width:t})},this._getElement=()=>{const{contentType:e,isSensitive:t}=this.props;return`${t?"sensitive":"untrusted"}_${e}_interstitial`},this._handleClick=()=>{const{analytics:e}=this.props;this.setState({hide:!1}),e.scribe({element:this._getElement(),action:"reveal"})},this.state={hide:!0,width:0}}componentDidMount(){const{analytics:e}=this.props;e.scribe({element:this._getElement(),action:"impression"})}render(){const{children:e,ctaText:t,description:a,withSquareBottomBorderRadius:n}=this.props,{hide:l,width:i}=this.state,r=i<f.a.theme.breakpoints.micro;return l?s.a.createElement(B.a,{focusable:!0,onLayout:this._handleLayout,style:[Kn.root,r?{flexDirection:"column"}:{flexDirection:"row",alignItems:"center"},n&&Ln[n]]},s.a.createElement(B.a,{style:Kn.description},s.a.createElement(F.b,null,a)),s.a.createElement(B.a,{style:[Kn.button,r?Kn.breakButtonWrapper:void 0]},s.a.createElement(Ge.a,{onClick:this._handleClick,size:"small",style:Kn.buttonElement,type:"brandText"},t))):e}}Rn.defaultProps={isSensitive:!1};const Ln=f.a.create((e=>({both:{borderBottomRightRadius:e.borderRadii.none,borderBottomLeftRadius:e.borderRadii.none},left:{borderBottomLeftRadius:e.borderRadii.none},right:{borderBottomRightRadius:e.borderRadii.none}}))),Kn=f.a.create((e=>({breakButtonWrapper:{marginTop:f.a.theme.spaces.space4,marginLeft:`calc(-1 * ${e.spaces.space12})`},button:{flexGrow:1,alignItems:"flex-start"},buttonElement:{paddingHorizontal:e.spaces.space12},description:{flexGrow:1,flexShrink:1},root:{backgroundColor:e.colors.gray0,borderColor:e.colors.gray50,borderRadius:e.borderRadii.xLarge,boxSizing:"border-box",borderWidth:e.borderWidths.small,maxWidth:"100%",paddingLeft:e.spaces.space16,paddingTop:e.spaces.space16,paddingBottom:e.spaces.space16,paddingRight:e.spaces.space4,overflow:"auto",display:"flex"}})));var xn=Object(De.a)(In(Rn)),wn=a("CoGJ");const Mn=s.a.createElement(wn.a,null),On=y.a.d9de7b58,An=y.a.f2879f4e,Dn=y.a.b518221e,Pn=y.a.eeaa9f90,Un=y.a.g2b43664,Hn=y.a.f277e94a;class Nn extends s.a.Component{constructor(...e){super(...e),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),this.state={attachmentWidth:void 0,textContentWidth:void 0},this._renderAttachment=()=>{const{entry:e,hasUserText:t,isFirstRapidFire:a,isRapidFire:n,isSent:l,isTrusted:i,messageData:o}=this.props,{attachmentWidth:c,textContentWidth:d}=this.state,{attachment:u}=o||{},m=e.is_draft,p=nt(t,c,d),g=[jn.mediaAttachment,this._isVDLEnabled&&jn.vdlBorderRadius,(!this._isVDLEnabled||t)&&l&&jn.isSent,(!this._isVDLEnabled||t)&&!l&&jn.received,l&&p.isAttachmentSquared&&jn.equalComponentDimensionsSent,!l&&p.isAttachmentSquared&&jn.equalComponentDimensionsReceived,n&&!a&&l&&jn.rapidFireSent,n&&!a&&!l&&jn.rapidFireReceived];let y,h,_=null;if(!m&&e.conversation_id&&(_=`/messages/${e.conversation_id}/media/${e.id}`),u)if(u.photo)y=u.photo,h=s.a.createElement(fn,{media:y,mediaUrl:_});else if(u.animated_gif)y=u.animated_gif,h=s.a.createElement(Cn,{media:y,messageId:e.id});else if(u.video){if(y=u.video,Object(r.p)(u,this.context.featureSwitches))throw new Error("DMMediaMessage should not be used to render voice messages");h=s.a.createElement(Cn,{media:y,messageId:e.id})}const b=p.isAttachmentSquared?"both":l?"right":"left",v=y&&h&&(l?h:this._getMediaContentWithGuard(y,i,h,b));return{attachmentContent:s.a.createElement(B.a,{onLayout:this._handleAttachmentLayout,style:g},v),media:y}},this._handleAttachmentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{attachmentWidth:a}=this.state;if(a!==t){const e={attachmentWidth:t};this.setState(e)}},this._handleTextContentLayout=e=>{const{nativeEvent:{layout:{width:t}}}=e,{textContentWidth:a}=this.state;if(a!==t){const e={textContentWidth:t};this.setState(e)}}}render(){const{entry:e,hasUserText:t,isActive:a,isFailedDraft:n,isFirstRapidFire:l,isLastRapidFire:i,isRapidFire:r,isSent:o,messageData:c,withCta:d,withMessageBubble:u}=this.props,{attachmentWidth:m,textContentWidth:p}=this.state,g=e.is_draft,y=nt(t,m,p),{attachmentContent:h,media:_}=this._renderAttachment(),b=t?s.a.createElement(B.a,{onLayout:this._handleTextContentLayout,style:o?jn.sentMessageWrapper:jn.receivedMessageWrapper},s.a.createElement(tn,{hasAssociatedAttachment:!0,isActive:!!a,isFailedDraft:n,isFirstRapidFire:!!l,isLastRapidFire:!!i,isRapidFire:!!r,isSent:o,messageData:g?c:this._parseMessageData(c,_),rootStyle:y.isTextSquared?o?jn.sentSquared:jn.receivedSquared:void 0,withCta:d,withMessageBubble:u})):null;return s.a.createElement($a,{attachmentContent:h,isVisible:y.compositeRendered,textContent:b})}_getMediaContentWithGuard(e,t,a,n){const{displaySensitiveMedia:l,isDmNsfwMediaFilterEnabled:i}=this.props;if(e.possibly_sensitive&&this.context.featureSwitches.isTrue("dm_conversations_nsfw_media_filter_enabled")){if(i){const t="animated_gif"===e.type&&Un||"video"===e.type&&Pn||Dn;return s.a.createElement(xn,{contentType:e.type,ctaText:t,description:An,isSensitive:!0,withSquareBottomBorderRadius:n},a)}}else if(!l&&e.possibly_sensitive)return s.a.createElement(xn,{contentType:e.type,ctaText:Hn,description:Mn,isSensitive:!0,withSquareBottomBorderRadius:n},a);return t?a:s.a.createElement(xn,{contentType:e.type,ctaText:Hn,description:On,withSquareBottomBorderRadius:n},a)}_parseMessageData(e,t){var a;const n=null!=e&&null!=(a=e.entities)&&a.urls&&t?e.entities.urls.filter((e=>e.display_url!==t.display_url)):null;return e&&n?{...e,entities:{...e.entities,urls:n,media:t?[t]:[]}}:void 0}}Nn.contextType=m.a,Nn.defaultProps={hasUserText:!1};const jn=f.a.create((e=>({equalComponentDimensionsSent:{borderBottomLeftRadius:e.borderRadii.none},equalComponentDimensionsReceived:{borderBottomRightRadius:e.borderRadii.none},invisible:{opacity:0},isSent:{borderBottomRightRadius:e.borderRadii.none},mediaAttachment:{borderRadius:e.borderRadii.xLarge,WebkitMaskImage:"url(data:image/png;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICRAEAOw==)"},vdlBorderRadius:{borderRadius:At},receivedMessageWrapper:{alignSelf:"flex-start"},sentMessageWrapper:{alignSelf:"flex-end"},rapidFireReceived:{borderTopLeftRadius:e.borderRadii.none},rapidFireSent:{borderTopRightRadius:e.borderRadii.none},received:{borderBottomLeftRadius:e.borderRadii.none},receivedSquared:{borderTopRightRadius:e.borderRadii.none},sentSquared:{borderTopLeftRadius:e.borderRadii.none},visible:{opacity:1}})));var Bn=Nn,Wn=Object(_e.a)().propsFromActions((()=>({markSpamStatus:u.markSpamStatus})));const qn=y.a.fd079470,Vn=y.a.c7a92dca,zn=y.a.f277e94a,Qn=y.a.fb3ccb56;class Gn extends s.a.PureComponent{constructor(...e){super(...e),this._handlePress=e=>()=>{const{conversationId:t,dmId:a,markSpamStatus:n}=this.props;n({conversationId:t,dmId:a,markSpam:e})}}render(){const{children:e}=this.props;return s.a.createElement(xn,{contentType:"dm",ctaText:zn,description:Qn},e,this._renderButtons())}_renderButtons(){return s.a.createElement(B.a,{style:Xn.buttons},s.a.createElement(Ge.a,{onPress:this._handlePress(!1),style:Xn.leftButton,type:"brandOutlined"},Vn),s.a.createElement(Ge.a,{onPress:this._handlePress(!0),type:"brandOutlined"},qn))}}var Yn=Wn(Gn);const Xn=f.a.create((e=>({buttons:{flexDirection:"row",paddingTop:e.spaces.space4},leftButton:{marginRight:e.spaces.space12}})));var $n=a("U+bB");const Jn=e=>{const t=e.images,a=t.svg||t.size_1x;if(a)return a.url},Zn=f.a.create((e=>({stickerItem:{height:`calc(3 * ${e.fontSizes.title2})`,width:`calc(3 * ${e.fontSizes.title2})`}})));var el=({sticker:e})=>s.a.createElement($n.a,{accessibilityLabel:e.display_name,source:Jn(e),style:Zn.stickerItem}),tl=a("XOJV");const al=(e,t)=>{var a;const n=null==(a=t.messageData)?void 0:a.attachment;if(n&&n.tweet)return n.tweet.status};var nl=Object(_e.a)().propsFromState((()=>({tweet:tl.a.createHydratedTweetSelector(al)}))).propsFromActions((()=>({popOutConversation:u.popOutConversation}))),ll=a("b5s6");const sl=s.a.createElement(F.b,{link:"/settings/safety"});var il=e=>s.a.createElement(y.a.I18NFormatMessage,{$i18n:"j3c7dd33"},s.a.cloneElement(sl,null,y.a.adcf07b6));const rl=y.a.e4df0ad8,ol=y.a.f277e94a,cl=y.a.b5b91d58,dl=y.a.bb594d7c,ul=s.a.createElement(il,null);const ml=f.a.create((e=>({received:{boxShadow:e.boxShadows.small},receivedAttachmentSquared:{borderTopRightRadius:e.borderRadii.none,boxShadow:e.boxShadows.small},sent:{boxShadow:e.boxShadows.small},sentAttachmentSquared:{borderTopRightRadius:e.borderRadii.none,boxShadow:e.boxShadows.small}}))),pl=f.a.create((e=>({attachment:{marginBottom:0},receivedMessageWrapper:{alignSelf:"flex-start"},sentMessageWrapper:{alignSelf:"flex-end"},received:{borderBottomLeftRadius:e.borderRadii.none,borderColor:e.colors.gray200},receivedAttachmentSquared:{borderBottomRightRadius:e.borderRadii.none},receivedSquared:{borderTopRightRadius:e.borderRadii.none},sent:{borderBottomRightRadius:e.borderRadii.none,borderColor:e.colors.primary},sentAttachmentSquared:{borderBottomLeftRadius:e.borderRadii.none},sentSquared:{borderTopLeftRadius:e.borderRadii.none}}))),gl={attachment:pl.attachment,receivedMessageWrapper:pl.receivedMessageWrapper,sentMessageWrapper:pl.sentMessageWrapper,received:ml.received,receivedAttachmentSquared:ml.receivedAttachmentSquared,receivedSquared:pl.receivedSquared,sent:ml.sent,sentAttachmentSquared:ml.sentAttachmentSquared,sentSquared:pl.sentSquared};var yl=nl((function(e){const{featureSwitches:t}=s.a.useContext(m.a),{conversationId:a,displaySensitiveMedia:n,hasUserText:l=!1,isActive:i=!1,isDmNsfwMediaFilterEnabled:r,isFailedDraft:o,isFirstRapidFire:c=!1,isLastRapidFire:d=!1,isRapidFire:u=!1,isSent:p,isTrusted:g,isVdlEnabled:y,messageData:h,popOutConversation:_,tweet:b,withCta:v,withMessageBubble:k}=e,[f,F]=s.a.useState(void 0),[T,S]=s.a.useState(void 0),E=s.a.useMemo((()=>function(){a&&_(a)}),[a,_]),C=s.a.useMemo((()=>function(e){const{nativeEvent:{layout:{width:t}}}=e;f!==t&&F(t)}),[f]),I=s.a.useMemo((()=>function(e){const{nativeEvent:{layout:{width:t}}}=e;T!==t&&S(t)}),[T]);if(!h||!h.attachment||!h.attachment.tweet)return null;const R=h.attachment.tweet,L=p?"sent":"received",K=nt(l,f,T),x=y?gl:pl,w=s.a.createElement(ll.a,{onPress:E,style:[x[L],l&&x.attachment,K.isAttachmentSquared?p?x.sentAttachmentSquared:x.receivedAttachmentSquared:void 0],tweetId:R.status}),M=K.isAttachmentSquared?"both":p?"right":"left",O=(()=>{if(!b)return null;if(p)return w;if(b.possibly_sensitive&&t.isTrue("dm_conversations_nsfw_media_filter_enabled")){if(r||void 0===r)return s.a.createElement(xn,{contentType:"photo",ctaText:dl,description:cl,withSquareBottomBorderRadius:M},w)}else if(!n&&b.possibly_sensitive)return s.a.createElement(xn,{contentType:"photo",ctaText:ol,description:ul,withSquareBottomBorderRadius:M},w);return g?w:s.a.createElement(xn,{contentType:"tweet",ctaText:ol,description:rl,withSquareBottomBorderRadius:M},w)})(),A=s.a.createElement(B.a,{onLayout:C,style:x.attachment},O),D=l?s.a.createElement(B.a,{onLayout:I,style:p?x.sentMessageWrapper:x.receivedMessageWrapper},s.a.createElement(tn,{hasAssociatedAttachment:!0,isActive:i,isFailedDraft:o,isFirstRapidFire:c,isLastRapidFire:d,isRapidFire:u,isSent:p,messageData:h,rootStyle:K.isTextSquared?p?x.sentSquared:x.receivedSquared:void 0,tweetId:R.status,withCta:v,withMediaLinks:!0,withMessageBubble:k})):null;return s.a.createElement($a,{attachmentContent:A,isVisible:K.compositeRendered,textContent:D})})),hl=a("htvZ"),_l=a("MH+I"),bl=a("5Ixf"),vl=a("AtEG");function kl(e){var t,a;const n=s.a.useContext(hl.a),{isLowQuality:l,isSent:i,isTrusted:r}=e;if(null==(t=e.media)||!t.video_info)return null;const[o,c]=n.activeVoiceMessage,[d]=n.playerApi,[u]=n.playerState,{scribeAction:m}=n,[p]=o,g=e.messageId===p;if(!m)return null;const y=Fl(u),h=(null==(a=e.media)?void 0:a.video_info.duration_millis)||0,_={durationMs:h,isActive:g,isSent:i,playerApi:null,playerState:null,onImpression:()=>m.impression({isLowQuality:l,isTrusted:r}),onPlayRequest:()=>c([e.messageId,e.media]),onPlay:()=>m.play({data:{duration_ms:h}}),onPause:()=>m.pause()};return g&&y&&y.contentId===e.media.id_str&&(_.playerApi=d,_.playerState=u,null!=y&&y.durationMs&&(_.durationMs=null==y?void 0:y.durationMs)),s.a.createElement(fl,_)}function fl(e){const t=s.a.useContext(m.a),a=t.featureSwitches.isTrue("dm_vdl_enabled")&&t.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),{isActive:n,isSent:l,playerApi:i,playerState:r}=e,o=null==r?void 0:r.isPlaying,c=Fl(r),d=(null==c?void 0:c.currentTimeMs)||0,u=(null==c?void 0:c.durationMs)||e.durationMs,p=Math.max(n?u-d:u,0);s.a.useLayoutEffect((()=>{e.onImpression()}),[]),s.a.useEffect((()=>{i&&0===d&&(i.play(),e.onPlay())}),[i]);const g=f.a.isDarkMode()||l,y={color:g?"whiteOnColor":"text"},h=[El.voiceMessage,Cl({isSent:l,isVDLEnabled:a,squared:n}),l?El.voiceMessageSent:El.voiceMessageReceived,Z(f.a.theme.scale).voiceMessage({isVoiceMessageActive:n,isSent:l})],_=o?bl.a:vl.a;return s.a.createElement(B.a,{style:[El.container,Z(f.a.theme.scale).voiceMessageContainer({isVoiceMessageActive:n,isSent:l})]},s.a.createElement(B.a,{style:h},s.a.createElement(B.a,{style:El.startSpacer}),s.a.createElement(Ge.a,{accessibilityLabel:o?Sl:Tl,icon:s.a.createElement(_,{style:g?El.iconColorDark:El.iconColorDefault}),onPress:()=>{i?o?(i.pause(),e.onPause()):(i.play(),e.onPlay()):e.onPlayRequest()},type:"onMediaText"}),s.a.createElement(B.a,{style:El.durationSpacer}),s.a.createElement(B.a,{style:l?El.durationOpacity:void 0},s.a.createElement(_l.a,xt()({countdown:!0,timeMs:p},y,{color:"gray700",size:"subtext2",style:l?El.durationDark:void 0,weight:"bold",withCountdownSymbol:n}))),s.a.createElement(B.a,{style:El.endSpacer})))}const Fl=e=>e?e.tracks[e.currentTrackId]:null,Tl=y.a.c94b7d8a,Sl=y.a.eb6f9582,El=f.a.create((e=>({displayNone:{display:"none"},container:{flexDirection:"row",alignSelf:"flex-end",alignItems:"center",justifyContent:"center"},voiceMessage:{alignSelf:"flex-end",flexDirection:$.a.getConstants().isRTL?"row-reverse":"row",alignItems:"center",justifyContent:"center"},voiceMessageSent:{backgroundColor:e.colors.primary},voiceMessageReceived:{backgroundColor:e.colors.dmReceivedBubbleBackground},durationSpacer:{width:e.spaces.space4},durationOpacity:{opacity:.75},durationDark:{color:e.colors.whiteOnColor},iconColorDark:{color:e.colors.whiteOnColor},iconColorDefault:{color:e.colors.alwaysBaseGray1100},startSpacer:{width:e.spaces.space4},endSpacer:{width:e.spaces.space16}})));function Cl({isSent:e,isVDLEnabled:t,squared:a}){return[Il.base,t&&Il.vdlBorderRadius,!t&&e&&Il.sent,!t&&!e&&Il.received,a?e?Il.sentSquared:Il.receivedSquared:void 0]}const Il=f.a.create((e=>({base:{borderRadius:e.borderRadii.xLarge,WebkitMaskImage:"url(data:image/png;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICRAEAOw==)"},vdlBorderRadius:{borderRadius:At},sent:{borderBottomRightRadius:e.borderRadii.none},sentSquared:{borderTopRightRadius:e.borderRadii.none},received:{borderBottomLeftRadius:e.borderRadii.none},receivedSquared:{borderTopLeftRadius:e.borderRadii.none}})));class Rl extends s.a.Component{render(){const{entry:e,isSent:t,onCtaClick:a,onCtaImpression:n}=this.props,{message_data:l}=e,i=l&&l.attachment?l.attachment:{},o=e.marked_as_spam,c=tt(e),d=!!l&&!!l.ctas,u=et(e),m=(e=>{const{message_data:t}=e;if(!t)return!1;if(tt(e)&&!at(e))return!1;if(!t.text)return!1;const a=Object(Je.parse)(t.text);if(!a||0===a.length)return!1;const n=a.sort(((e,t)=>t.indices[1]-e.indices[1])).reduce(((e,t)=>`${e.slice(0,t.indices[0])}${e.slice(t.indices[1])}`),t.text).trim();return a.length<=10&&0===n.length})(e),p=!(u&&m),g=at(e);let y;y=i.sticker?s.a.createElement(el,{sticker:i.sticker}):this._renderDMMessage(u,d,p);const h=o?s.a.createElement(Yn,{conversationId:e.conversation_id,dmId:e.id},y):y,_=c&&!g&&!Object(r.p)(null==l?void 0:l.attachment,this.context.featureSwitches),b=[t?Ll.isSent:Ll.isReceived,d&&Ll.withCta,_?Ll.mediaRoot:Ll.flexShrink,this.props.style];return s.a.createElement(B.a,{style:b},h,l&&l.ctas?s.a.createElement(Va,{callToActions:l.ctas,isSent:t,onCtaClick:a,onImpression:n,withSticker:!!i.sticker||m,withUserText:u}):null)}_renderDMMessage(e,t,a){const{displaySensitiveMedia:n,entry:l,isActive:i,isDmNsfwMediaFilterEnabled:o,isFirstRapidFire:c,isLastRapidFire:d,isLowQuality:u,isRapidFire:m,isSent:p,isTrusted:g}=this.props,{error:y,message_data:h}=l,_=h&&{...h,entities:h&&h.entities||void 0,error:y},b=null==_?void 0:_.attachment,v={isActive:i,isFailedDraft:!!y,isFirstRapidFire:c,isLastRapidFire:d,isRapidFire:m,isSent:p,withCta:t,withMessageBubble:a},k=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled");if(_&&b){if(b.tweet)return s.a.createElement(yl,xt()({conversationId:l.conversation_id,displaySensitiveMedia:n,hasUserText:e,isDmNsfwMediaFilterEnabled:o,isTrusted:g,isVdlEnabled:k,messageData:_},v));if(b.photo||b.animated_gif||b.video)return b.video&&Object(r.p)(b,this.context.featureSwitches)?s.a.createElement(kl,{isLowQuality:u,isSent:!!p,isTrusted:g,media:b.video,messageId:l.id}):s.a.createElement(Bn,xt()({displaySensitiveMedia:n,entry:l,hasUserText:e,isDmNsfwMediaFilterEnabled:o,isTrusted:g,messageData:_},v));if(b.card)return s.a.createElement(dn,xt()({cardUrl:b.card,conversationId:l.conversation_id,hasUserText:e,messageData:_},v));if(b.fleet)return s.a.createElement(yn,xt()({entry:l,hasUserText:e,messageData:_},v))}return s.a.createElement(an,xt()({},v,{messageData:_}))}}Rl.contextType=m.a;const Ll=f.a.create((e=>({flexShrink:{flexShrink:1},mediaRoot:{flex:1},isSent:{alignItems:"flex-end"},isReceived:{alignItems:"flex-start"},withCta:{alignItems:"stretch"}})));var Kl=Rl;const xl=f.a.create((e=>({avatar:{borderRadius:e.borderRadii.infinite}})));var wl=({showAvatar:e,size:t="xLarge",user:a})=>e?s.a.createElement(C.default,{accessibilityLabel:a.name,link:{pathname:`/${a.screen_name}`},size:t,uri:a.profile_image_url_https}):s.a.createElement(B.a,{style:[xl.avatar,C.default.getSizeStyle(t)]}),Ml=a("B3eJ");function Ol({color:e,isActive:t,size:a,...n}){const l=s.a.useContext(hl.a),[i,r]=s.a.useState(.5),[o]=l.playerState;s.a.useEffect((()=>{t&&o&&o.isPlaying&&r(Math.random())}),[t,o]);const c=t&&(null==o?void 0:o.isPlaying),d=a+2*Al,u=[Dl.container,n.style,{width:a,height:a}];return s.a.createElement(B.a,{style:u},s.a.createElement(B.a,{style:[Dl.container,Dl.transitionOpacity,c?Dl.show:Dl.hide]},J.a.reducedMotionEnabled?null:s.a.createElement(Ml.a,{audioLevel:i,color:e,paused:!c,size:a})),s.a.createElement(B.a,{style:[Dl.border,{width:d,height:d},Dl.transitionOpacity,t?Dl.show:Dl.hide]}))}const Al=parseInt(f.a.theme.spaces.space2,10),Dl=f.a.create((e=>({container:{alignItems:"center",justifyContent:"center",pointerEvents:"none"},border:{position:"absolute",top:-1*Al,left:-1*Al,backgroundColor:e.colors.navigationBackground,borderRadius:e.borderRadii.infinite},transitionOpacity:{transition:"opacity 0.2s 0s ease-in-out"},hide:{opacity:0},show:{opacity:1}})));var Pl=a("uArA"),Ul="messageEntry";const Hl={element:"cta_dm"},Nl={viewType:"message"},jl={isGroupDM:!1,isRapidFire:!1,isFirstRapidFire:!1,isLastRapidFire:!1};class Bl extends s.a.Component{constructor(...e){super(...e),this.state={shouldFadeHighlight:!1},this._handleClick=Object(Pl.a)((()=>{const{entry:{error:e,id:t,is_draft:a},isActive:n,setActiveEntry:l}=this.props;a||e||(l(n?null:t),this._handleScribeMessageEntryClick())})),this._handleScribeMessageEntryClick=()=>{const{isActive:e}=this.props;if(!Ye.a.isEnabled&&!e){const{entry:e}=this.props,t={component:"message",element:Object(r.c)(e),action:"click"};this._scribeAction(t)}},this._handleCtaImpression=()=>{this._scribeAction({...Hl,action:"show"})},this._handleCtaClick=()=>{this._scribeAction({...Hl,action:"click"})},this._isDMVoiceMessage=()=>{var e;return Object(r.p)(null==(e=this.props.entry.message_data)?void 0:e.attachment,this.context.featureSwitches)}}componentDidMount(){this.props.isHighlightedMessageSearchEntry&&this.setState({shouldFadeHighlight:!0})}shouldComponentUpdate(e,t){return!Object(j.a)(this.props,e)||!Object(j.a)(this.state.shouldFadeHighlight,t.shouldFadeHighlight)}render(){const{isActive:e,isGroupDM:t,isHighlightedMessageSearchEntry:a,isSent:n,user:l}=this.props,i=this._getRapidFireProps(),r=!i.isRapidFire||i.isLastRapidFire,o=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),c=[ql.root.base,o&&ql.root.vdlPadding,r&&ql.root.contentSpacing,r&&o&&ql.root.vdlContentSpacing,a&&ql.root.highlightableEntry,a&&this.state.shouldFadeHighlight&&ql.root.remove],d=this._isDMVoiceMessage(),u=o?t&&!n:!n||d;if(!l)return null;const m=!Ye.a.isEnabled||n;return s.a.createElement(ie.a,{behavioralEventContext:Nl},s.a.createElement(B.a,{style:c},s.a.createElement(E.a,{accessibilityExpanded:!(!m||!e),focusable:!0,interactiveStyles:null,onPress:m?this._handleClick:void 0,style:n?ql.root.sent:ql.root.received,testID:Ul},(({isFocused:e,isHovered:t})=>this._renderMessage({isFocused:e,isHovered:t,rapidFireProps:i,withVDLRefresh:o,withUserAvatar:u}))),this._renderFooter(i,u)))}_renderMessage({isFocused:e,isHovered:t,rapidFireProps:a,withUserAvatar:n,withVDLRefresh:l}){const{displaySensitiveMedia:i,entry:r,inboxType:o,isActive:c,isDmNsfwMediaFilterEnabled:d,isGroupDM:u,isLowQuality:m,isReadOnly:p,isSent:g,isTrusted:y,isVoiceMessageActive:h,isWide:_,participants:b,perspective:v,scribeVoiceMessage:k,setShouldFreezeUpdates:F}=this.props,{isFirstRapidFire:T,isLastRapidFire:S,isRapidFire:E}=a,C=[g?ql.messageContainer.sent:ql.messageContainer.received,_?ql.messageContainer.wide:ql.messageContainer.narrow,g&&_&&ql.messageContainer.sentWide,!g&&_&&ql.messageContainer.receivedWide],I=y&&!p,R=this._isDMVoiceMessage(),L=(null==b?void 0:b.length)||0;return s.a.createElement(B.a,{style:C},r.error?null:s.a.createElement(It,{containerIsActive:c,containerIsFocused:e,containerIsHovered:t,entry:r,featureSwitches:this.context.featureSwitches,inboxType:o,isDraft:!!r.is_draft,isGroupDM:u,isSent:g,onReportMessage:R&&k?()=>k.report({isLowQuality:m,isTrusted:y}):void 0,participantsCount:L,perspective:v,setShouldFreezeUpdates:F,shouldShowReactionButton:I,style:R&&Z(f.a.theme.scale).actionsContainer({isSent:g,isVoiceMessageActive:h}),withVDLRefresh:l}),s.a.createElement(Kl,{displaySensitiveMedia:i,entry:r,isActive:c,isDmNsfwMediaFilterEnabled:d,isFirstRapidFire:T,isLastRapidFire:S,isLowQuality:m,isRapidFire:E,isSent:g,isTrusted:y,key:r.id,onCtaClick:this._handleClick,onCtaImpression:this._handleCtaImpression,style:R&&Z(f.a.theme.scale).messageContainer({isSent:g,isVoiceMessageActive:h})}),this._possiblyRenderUserAvatar(a,n))}_renderFooter({isLastRapidFire:e,isRapidFire:t},a){var n,l;const{entry:i,isActive:r,isGroupDM:o,isSent:c,participants:d,user:u}=this.props;return u?s.a.createElement(Ha,{conversationId:i.conversation_id,entryId:i.id,entryText:null==(n=i.message_data)?void 0:n.text,entryTime:i.time,isActive:r,isDraft:!!i.is_draft,isError:!!i.error,isGroupDM:o,isLastRapidFire:e,isRapidFire:t,isSent:c,localMediaId:null==(l=i.message_data)?void 0:l.localMediaId,onPress:this._handleClick,participants:d,user:u,withUserAvatar:a}):null}_possiblyRenderUserAvatar({isLastRapidFire:e,isRapidFire:t},a){const{isSent:n,isVoiceMessageActive:l,user:i}=this.props,r=this._isDMVoiceMessage();if(!i||!a&&!l)return null;const{DMUserAvatarSizePx:o,DMUserAvatarSizeType:c}=X(f.a.theme.scale),d={showAvatar:!!r||(!t||!!e),size:c,user:i},u=[ql.userAvatar.base,n?ql.userAvatar.sent:ql.userAvatar.received,r&&Z(f.a.theme.scale).userAvatar({isVoiceMessageActive:l,isSent:n})];return s.a.createElement(B.a,{style:ql.userAvatar.container},n?null:s.a.createElement(B.a,{style:ql.userAvatar.spacer}),r?s.a.createElement(Ol,{color:n?f.a.theme.colors.primary:f.a.theme.colors.text,isActive:!!l,size:o,style:u}):null,s.a.createElement(B.a,{style:u},s.a.createElement(wl,d)))}_scribeAction(e){const{analytics:t}=this.props;t.scribe({...e})}_getRapidFireProps(){return{isFirstRapidFire:this.props.isFirstRapidFire,isLastRapidFire:this.props.isLastRapidFire,isRapidFire:this.props.isRapidFire}}}Bl.contextType=m.a,Bl.defaultProps=jl;var Wl=Object(De.a)(ye(function(e){function t(t){const{entry:a}=t,n=s.a.useContext(hl.a),[l]=n.activeVoiceMessage,{scribeAction:i}=n,[r]=l,o=r===a.id,c={...t,isVoiceMessageActive:o,scribeVoiceMessage:i};return s.a.createElement(e,c)}return t.defaultProps=jl,t}(Bl)));const ql={root:f.a.create((e=>({base:{flexDirection:"column",paddingBottom:e.spaces.space2},vdlPadding:{paddingBottom:"0px"},received:{cursor:"default",alignItems:"flex-start"},sent:{cursor:"pointer",alignItems:"flex-end"},contentSpacing:{paddingBottom:e.spaces.space20},vdlContentSpacing:{paddingBottom:e.spaces.space24},highlightableEntry:{marginHorizontal:`calc(-${e.spaces.space16})`,paddingHorizontal:e.spaces.space16,transition:"background-color 3s ease-in",backgroundColor:e.colors.unreadCellBackground},remove:{backgroundColor:e.colors.cellBackground}}))),messageContainer:f.a.create((e=>({sent:{flexDirection:"row",justifyContent:"flex-end"},received:{flexDirection:"row-reverse",justifyContent:"flex-end"},narrow:{width:"100%"},wide:{width:Ot},receivedWide:{paddingRight:e.spaces.space12},sentWide:{paddingLeft:e.spaces.space12}}))),userAvatar:f.a.create((e=>({container:{flexDirection:"row",alignItems:"flex-end"},base:{position:"absolute"},sent:{right:0},received:{left:0},spacer:{width:X(e.scale).DMUserAvatarSpacerPx}})))};var Vl=a("H4nC");const zl=e=>{const{conversation:t,entry:a,inboxType:n,isActive:l,isFirstRapidFire:i,isHighlightedMessageSearchEntry:r,isLastRapidFire:c,isRapidFire:d,isWide:m,perspective:p,scribeNamespace:g,setActiveEntry:y,setShouldFreezeUpdates:h}=e;if(Object(o.b)(a)||Object(o.e)(a)){const{conversation_id:e,low_quality:o,participants:_,read_only:b,trusted:v,type:k}=t,{message_data:{sender_id:f}={}}=a,F=void 0===e||v;return s.a.createElement(Wl,{entry:a,inboxType:n,isActive:l,isFirstRapidFire:i,isGroupDM:k===u.CONVERSATION_TYPE.GROUP,isHighlightedMessageSearchEntry:r,isLastRapidFire:c,isLowQuality:!!o,isRapidFire:d,isReadOnly:b,isSent:f===p,isTrusted:!!F,isWide:m,participants:_,perspective:p,scribeNamespace:g,senderId:f,setActiveEntry:y,setShouldFreezeUpdates:h})}return Object(o.a)(a)?s.a.createElement(G,{conversation:t,entry:a,entryType:a.type,perspective:p}):Object(o.d)(a)?s.a.createElement(Vl.a,{entry:a,isCompact:!1}):null};var Ql=a("0JOx");const Gl=Object(re.createSelector)(((e,t)=>{const a=Object(Ce.o)(e,t.conversationId),n=a&&Object(d.a)(a);return n&&Object(u.selectEntry)(e,n)}),(e=>({lastEntry:e})));var Yl=Object(oe.c)(Gl),Xl=a("uDfI");const $l=Object(re.createSelector)(((e,t)=>ue.e.selectMany(e,t.userIds||[])),(e=>({users:e})));var Jl=Object(Xl.b)($l),Zl=a("VPAj"),es=a("Enqy"),ts=a("+/1j");const as="overflow",ns=(e,t)=>e.id_str<t.id_str?-1:e.id_str>t.id_str?1:0,ls={stiffness:1e3,damping:70},ss=140,is={scale:Object(es.spring)(1,ls),translateY:Object(es.spring)(0,ls)},rs=(e,t)=>({key:e.id_str,data:e,style:is}),os=Object(Zl.a)({translateY:ss,scale:0}),cs=Object(Zl.a)({scale:Object(es.spring)(1,ls),translateY:Object(es.spring)(ss,ls)}),ds=[{key:"bubble",style:{scale:Object(es.spring)(1,ls),translateY:Object(es.spring)(0,ls)}}],us=Object(Zl.a)({translateY:ss,scale:0}),ms=Object(Zl.a)({scale:Object(es.spring)(1,ls),translateY:Object(es.spring)(ss,ls)}),ps=e=>[isFinite(e.scale)&&{scale:e.scale.toFixed(3)},isFinite(e.translateY)&&{translateY:`${Math.round(e.translateY)}%`}].filter(Boolean);class gs extends s.a.Component{constructor(...e){super(...e),this.state={isHidden:!0},this._afterLeave=()=>{const{users:e}=this.props;this.setState((t=>({isHidden:0===e.length})))}}componentDidUpdate(e,t){this.state.isHidden&&this.props.users&&this.props.users.length&&this.setState({isHidden:!1})}shouldComponentUpdate(e,t){return!Object(j.a)(this.props,e)||!Object(j.a)(this.state,t)}render(){const{isHidden:e}=this.state,{users:t}=this.props,a=t.sort(ns).slice(0,5).map(rs);return t.length>5&&a.push({key:as,style:is}),s.a.createElement(B.a,{style:[ys.root,e&&ys.hidden]},s.a.createElement(B.a,{style:ys.avatarRow},s.a.createElement(es.TransitionMotion,{styles:a,willEnter:os,willLeave:cs},(e=>s.a.createElement(s.a.Fragment,null,e.map(((e,a)=>{if(e.style.scale<=.05)return null;const n=ps(e.style);return e.key===as?s.a.createElement(B.a,{key:e.key,style:[ys.avatar,ys.avatarSpacer,ys.overflowAvatar,{transform:n}]},s.a.createElement(ts.a,{style:ys.overflowAvatarText},"+",t.length-5)):s.a.createElement(B.a,{key:e.key,style:[ys.avatar,{transform:n}]},s.a.createElement(C.default,{accessibilityLabel:e.data&&e.data.name,size:"xLarge",uri:e.data&&e.data.profile_image_url_https}))})))))),s.a.createElement(es.TransitionMotion,{didLeave:this._afterLeave,styles:t.length>0?ds:[],willEnter:us,willLeave:ms},(e=>s.a.createElement(s.a.Fragment,null,e.map((e=>s.a.createElement(B.a,{key:e.key,style:[ys.messageBubble,{transform:ps(e.style)}]},s.a.createElement(B.a,{style:ys.dot}),s.a.createElement(B.a,{style:[ys.dot,ys.dot1]}),s.a.createElement(B.a,{style:[ys.dot,ys.dot2]}))))))))}}const ys=f.a.create((e=>({root:{flexDirection:"row",paddingBottom:e.spaces.space20,paddingRight:e.spaces.space12,width:"calc(100% * 7/8)",position:"relative",transitionProperty:"height, padding-bottom",transitionDuration:"0.2s",overflow:"hidden"},hidden:{paddingBottom:0,paddingRight:0,height:0,width:0},avatarRow:{display:"inline-flex",alignItems:"flex-start",flexDirection:"row"},avatar:{marginEnd:e.spaces.space12,transformOrigin:"50% 100%"},avatarSpacer:{height:e.spaces.space40,width:e.spaces.space40},overflowAvatar:{borderRadius:e.borderRadii.infinite,backgroundColor:e.colors.primary,alignItems:"center",justifyContent:"center"},overflowAvatarText:{color:"white"},messageBubble:{alignItems:"center",borderRadius:e.borderRadii.infinite,maxWidth:"100%",paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space16,backgroundColor:e.colors.gray50,borderBottomLeftRadius:e.borderRadii.none,borderColor:e.colors.gray200,flexDirection:"row",height:e.spaces.space40,overflow:"hidden",transformOrigin:"0% 100%"},dot:{display:"flex-inline",position:"relative",width:e.spaces.space12,height:e.spaces.space12,overflow:"hidden",borderRadius:e.borderRadii.infinite,backgroundColor:e.colors.gray700,marginEnd:e.spaces.space4,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationKeyframes:[{"15%":{transform:[{scale:1.4}],backgroundColor:e.colors.primary},"30%":{transform:[{scale:1}]}}]},dot1:{animationDelay:"0.1s"},dot2:{animationDelay:"0.2s"}})));var hs=Jl(gs),_s=a("tn7R");class bs extends s.a.PureComponent{constructor(...e){super(...e),this._timers={},this.state={forceHide:!1,userIds:[]},this._handleLivePipelineUpdate=e=>{const{user_id:t}=e.dm_typing;t!==this.context.loggedInUserId&&(this._timers[t]&&clearTimeout(this._timers[t]),this._timers[t]=setTimeout((()=>this._removeAvatar(t)),4e3),this.setState((e=>({forceHide:!1,userIds:[...e.userIds.filter((e=>e!==t)),t]}))))},this._removeAvatar=(e,t=!1)=>{this.setState((a=>{const n=a.userIds.filter((t=>t!==e));return{forceHide:t&&0===n.length,userIds:n}}))}}componentDidMount(){this._initializeLivePipeline()}componentDidUpdate(e,t){if(this.props.lastEntry){const{lastEntry:t={}}=e||{},{lastEntry:a}=this.props;t&&t.id!==a.id&&a.message_data&&this._removeAvatar(a.message_data.sender_id,!0)}e.conversationId!==this.props.conversationId&&(this._teardownLivePipeline(),this._initializeLivePipeline())}componentWillUnmount(){this._teardownLivePipeline()}render(){const{forceHide:e,userIds:t}=this.state;return!e&&s.a.createElement(hs,{userIds:t})}_teardownLivePipeline(){Object(_s.a)(this._timers).forEach((e=>clearTimeout(e))),this._livePipelineSubscription&&this._livePipelineSubscription.teardown()}_initializeLivePipeline(){const{conversationId:e}=this.props;Object(Ql.h)().then((({LivePipeline:t})=>{t.isSupportedAndReady(this.context.featureSwitches)&&this.context.featureSwitches.isTrue("livepipeline_dm_features_enabled")&&!this._livePipelineSubscription&&(this._livePipelineSubscription=t.get().subscribeTopic(`/dm_typing/${e}`,this._handleLivePipelineUpdate))}))}}bs.contextType=m.a;var vs=Yl(bs),ks=a("3AAD"),fs=a("iBK2"),Fs=a("RJrc"),Ts=a("yw4N"),Ss=a("mw9i");const Es=y.a.i859a9d4,Cs=y.a.i8ecae5c,Is=e=>e.entry.id,Rs=e=>e.entry.type===N.b.MESSAGE;class Ls extends s.a.Component{constructor(e,t){super(e,t),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),this._handleItemsRendered=e=>{var t,a;const n=e.positions.find((e=>"conversationProfileInfoHeader"===e.id)),l=void 0!==n&&e.viewport.getTop()<n.rectangle.getHeight();null==(t=(a=this.props).onConversationProfileVisibilityChange)||t.call(a,l)},this._handleScrollEnd=()=>{this.setState({didRenderMessageSearchEntry:!0})},this._renderItem=e=>{const{conversation:t}=this.props,a=t.conversation_id;switch(e.type){case N.b.TYPING_INDICATOR:return a?s.a.createElement(vs,{conversationId:a}):null;case N.b.READ_ONLY_INDICATOR:return a?s.a.createElement(B.a,{style:Ks.readOnly},s.a.createElement(F.b,{align:"center",color:"gray700",size:"subtext2"},Cs,"",s.a.createElement(F.b,{link:"https://support.twitter.com/articles/14606#faq"},Es))):null;case N.b.CONVERSATION_PROFILE_INFO_HEADER:return s.a.createElement(A,{conversation:t,withVDLrefresh:this._isVDLEnabled});default:return this._renderDMEntry(e)}},this._setActiveEntry=e=>{this.setState({activeEntryId:e})},this._setShouldFreezeUpdates=e=>{this.setState({shouldFreezeUpdates:e})},this.state={activeEntryId:null,didRenderMessageSearchEntry:!1,shouldFreezeUpdates:!1}}shouldComponentUpdate(e,t){return!1===t.shouldFreezeUpdates}render(){const{conversation:e,drawerHeader:t,isWide:a,messageSearchEntryId:l,onForwardRequest:o,onHistoryRequest:m,shouldScrollToCenter:p,style:g}=this.props,{activeEntryId:y}=this.state,h=(({activeEntryId:e,canInjectConversationProfileInfoHeader:t,conversation:a,footer:n,messageSearchEntryId:l,readOnlyEntry:s})=>{const o=a&&a.entries||[],m=null==a?void 0:a.max_search_entry_id,p=null==a?void 0:a.min_search_entry_id,g=(null==a?void 0:a.status)===u.PAGINATION_STATUS.AT_END,y=m?Object(r.d)(o,m):o.length-1,h=p?Object(r.d)(o,p):-1,_=l&&-1===h?Object(r.d)(o,l):h,b=o.slice(g?0:_,y+1),v=(l?b:o).reduce(((n,s,r)=>{t&&0===r&&n.push(i.b);const u=Object(d.a)(n),m=r===o.length-1;if(n.push({isRapidFire:!1,isFirstRapidFire:!1,isLastRapidFire:!1,entry:s,isActive:l===s.id||e===s.id,isTrusted:!(null==a||!a.trusted),messageSearchEntryId:l}),u){const e=c(u.entry,s),t=n[n.length-2];e?(n[n.length-1].isRapidFire=!0,t.isRapidFire||(t.isFirstRapidFire=!0,t.isRapidFire=!0),m&&(n[n.length-1].isLastRapidFire=!0)):t.isRapidFire&&(t.isLastRapidFire=!0)}return n}),[]);return n&&!l&&v.push(n),a.read_only&&s&&!l&&v.push(s),v})({conversation:e,footer:i.d,readOnlyEntry:i.c,canInjectConversationProfileInfoHeader:e.status===N.c.AT_END&&e.type===N.a.ONE_TO_ONE,activeEntryId:y,messageSearchEntryId:l}),_=e.conversation_id,b=e=>{for(let t=e.length-1;t>=0;t--){const a=e[t];if(a&&Rs(a))return a}return(e=>e[e.length-1])(e)},v=l?`dm-activity-${_}-${l}`:`dm-activity-${_}`,k=this.state.didRenderMessageSearchEntry&&(null==e?void 0:e.min_search_entry_id)&&e.status!==N.c.AT_END;return s.a.createElement(D.a.Consumer,null,(({isDrawer:i})=>{const r=i?P.b.drawerHeaderRadius:Ks.scrollSpace;return s.a.createElement(B.a,{style:[Ks.scrollContainer,r]},s.a.createElement(Ts.a,{style:[Ks.scrollContainer,a&&Ks.conversationsPadding,r,g]},t||null,e.status&&e.status!==N.c.AT_END&&!l||k?s.a.createElement(Fs.a,null):null,s.a.createElement(Ss.a,{style:[Ks.content,Ks.alignTop],withGutter:!0},s.a.createElement(fs.b,{anchoring:ks.a,assumedItemHeight:50,cacheKey:v,canBeAnchorFunction:Rs,centerInitialAnchor:l&&p,hasNewContentAtBottom:!0,identityFunction:Is,initialAnchor:h.length>0?n.a(l&&p?l:Is(b(h))):void 0,items:h,nearStartProximityRatio:2,onAtEnd:l&&this.state.didRenderMessageSearchEntry?o:void 0,onAtStart:l&&this.state.didRenderMessageSearchEntry?m:void 0,onItemsRendered:this._handleItemsRendered,onNearStart:l?void 0:m,onScrollEnd:l&&!this.state.didRenderMessageSearchEntry?this._handleScrollEnd:void 0,renderer:this._renderItem,withoutHeadroom:this._isVDLEnabled})),this.state.didRenderMessageSearchEntry&&l&&e.max_search_entry_id&&e.search_status!==N.c.AT_END?s.a.createElement(Fs.a,null):null))}))}_renderDMEntry({entry:e,isActive:t,isFirstRapidFire:a,isLastRapidFire:n,isRapidFire:l}){const{conversation:i,inboxType:r,isWide:o,messageSearchEntryId:c,perspective:d,scribeNamespace:u}=this.props,m=e.id===c;return e&&r?s.a.createElement(zl,{conversation:i,entry:e,inboxType:r,isActive:t,isFirstRapidFire:a,isHighlightedMessageSearchEntry:m,isLastRapidFire:n,isRapidFire:l,isWide:o,key:e.id,perspective:d,scribeNamespace:u,setActiveEntry:this._setActiveEntry,setShouldFreezeUpdates:this._setShouldFreezeUpdates}):null}}Ls.contextType=m.a;const Ks=f.a.create((e=>({spinner:{alignItems:"center",marginVertical:"30px"},scrollContainer:{backgroundColor:e.colors.cellBackground,flexGrow:1,height:"100%",overflowX:"hidden",WebkitOverflowScrolling:"touch"},scrollSpace:{paddingTop:e.componentDimensions.appBarHeightPx,marginTop:-e.componentDimensions.appBarHeightPx},conversationsPadding:{paddingTop:e.spaces.space20},content:{flexGrow:1,transform:[{translate3d:"0,0,0"}]},alignTop:{justifyContent:"flex-start"},readOnly:{paddingBottom:e.spaces.space20}})))},"4hmp":function(e,t,a){"use strict";const n=a("rHpw").a.create((e=>({inboxPip:{backgroundColor:e.colors.blue500,borderWidth:e.borderWidths.medium,borderColor:e.colors.cellBackground,borderStyle:"solid",position:"absolute",height:e.baseFontSize-4,width:e.baseFontSize-4,top:e.spacesPx.space8+e.spacesPx.space2,right:e.spacesPx.space8+e.spacesPx.space2},requestPivotContainer:{backgroundColor:e.colors.cellBackground,zIndex:2},requestPivotContainerBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},root:{backgroundColor:e.colors.cellBackground,flexGrow:1},searchInput:{backgroundColor:e.colors.cellBackground,padding:e.spaces.space12,zIndex:1},searchInputBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small}})));t.a=n},"4n2h":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l}));const n=e=>e?"medium":"normal",l=(e,t)=>e||t?"text":"gray700"},"6bmY":function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I,R,L,K,x,w,M,O,A,D={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"evolutionDMInboxPrimaryQuery",selections:[{alias:"trusted",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["Trusted"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__evolutionDMInboxPrimaryQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[d={alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[c={alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"}],type:"DMConversation",abstractKey:null},u={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},m={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null},u],storageKey:null},{alias:"untrusted",args:p=[{kind:"Literal",name:"desired_lists",value:["Untrusted"]},i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"evolutionMessageRequestsPivot"}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:g=[{kind:"Literal",name:"desired_lists",value:["LowQuality"]},i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[_={kind:"InlineFragment",selections:h=[y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"pinned",args:b=[{kind:"Literal",name:"label",value:"Pinned"},{kind:"Literal",name:"s",value:20}],concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"labeled_conversation_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"items_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"pinnedInboxSectionConversation"}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null},u],storageKey:'labeled_conversation_slice(label:"Pinned",s:20)'}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"evolutionDMInboxPrimaryQuery",selections:[{alias:"trusted",args:v=[l,{kind:"Variable",name:"cursor",variableName:"cursor"},s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[k={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[k,f={kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[d,y,F={alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},y],storageKey:null}],storageKey:null},R={alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[T={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},C={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},y],type:"User",abstractKey:null}],storageKey:null},I={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},y],storageKey:null}],storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},w={alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[y,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},T,x,S,E],storageKey:null},C,L],type:"User",abstractKey:null}],storageKey:null},I,y],storageKey:null}],storageKey:null}],storageKey:null},O={alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[k,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:h,storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[k,{kind:"InlineFragment",selections:M=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:M,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:M,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},y],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:h,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},x,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[T,x],storageKey:null},C,y],type:"User",abstractKey:null}],storageKey:null},I,y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[L,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[x],storageKey:null},C,y],type:"User",abstractKey:null}],storageKey:null},I,y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},L,y],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},A={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},u],storageKey:null},y],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},m],type:"DMConvoListSlice",abstractKey:null},u],storageKey:null},{alias:"trusted",args:v,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"evolutionDMInboxPrimaryQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"},{alias:"untrusted",args:p,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[k,f,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[K,{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"SocialProof",kind:"LinkedField",name:"social_proof",plural:!1,selections:[{alias:null,args:null,concreteType:"MutualFriendsSocialProof",kind:"LinkedField",name:"mutual_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_mutual_friends",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},y],type:"DMConversation",abstractKey:null}],storageKey:null},y],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:g,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[k,f,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,_],storageKey:null},y],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"pinned",args:b,concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"labeled_conversation_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"items_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[k,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],storageKey:null},y,F,R,L,K,w,O,A,u],type:"DMConversation",abstractKey:null}],storageKey:null},y],storageKey:null},u],storageKey:'labeled_conversation_slice(label:"Pinned",s:20)'}]},params:{id:"sG_LGJOfXCIn3oM1IuMjIw",metadata:{sliceInfoPath:["trusted","slice_info"]},name:"evolutionDMInboxPrimaryQuery",operationKind:"query",text:null}};D.hash="f0cfbe9bc3038b3aeb91d76154d06102",e.exports=D},"883S":function(e,t,a){"use strict";a.d(t,"a",(function(){return k})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return F}));var n=a("k49u"),l=a("3XMw"),s=a.n(l),i=a("fs1G");const r=s.a.c3752568,o=s.a.f78aa3ea,c=s.a.f9690dc0,d=s.a.i859a9d4,u=s.a.b1d35408,m=s.a.g539cca6,p=s.a.bbac001a,g=s.a.a1d2a68e,y=s.a.d4f2d9d8,h=s.a.hf383be4,_=s.a.b25c5b2a,b=s.a.c4fdbd16,v=s.a.hf3e7e38,k={[n.a.DirectMessageConversationNotFound]:{customAction:()=>!1}},f={defaultToast:{text:o},showToast:!0},F={defaultToast:{text:r},[n.a.CurrentUserSuspended]:{toast:{text:m,action:{label:d,link:"https://support.twitter.com/articles/15790"}}},[n.a.DirectMessageCannotDmOtherUser]:{toast:{text:c}},[n.a.DirectMessageDuplicate]:{toast:{text:_}},[n.a.DirectMessageOtherUserNotFollowing]:{toast:{text:g,action:{label:d,link:"https://support.twitter.com/articles/14606"}}},[n.a.DirectMessagesSenderBlocksRecipient]:{toast:{text:b}},[n.a.DirectMessageTooLongError]:{toast:{text:p}},[n.a.DirectMessageTweetNotFound]:{toast:{text:y}},[n.a.GenericBadRequest]:{customAction:i.a},[n.a.MessageSendError]:{toast:{text:v}},[n.a.OverStatusUpdateLimit]:{toast:{action:{label:d,link:"https://support.twitter.com/articles/15364"},text:u}},[n.a.TargetUserNotFound]:{toast:{text:h}},showToast:!0}},"8W85":function(e,t,a){"use strict";a("kYxP"),a("ERkP");var n=a("zb92");t.a=Object(n.a)({loader:()=>Promise.all([a.e(123),a.e(226)]).then(a.bind(null,"u2Vg")).then((e=>({default:e.__DANGEROUS_IMPORT__})))})},"8fJk":function(e,t,a){"use strict";var n={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"evolutionMessageRequestsPivot",selections:[{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"SocialProof",kind:"LinkedField",name:"social_proof",plural:!1,selections:[{alias:null,args:null,concreteType:"MutualFriendsSocialProof",kind:"LinkedField",name:"mutual_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_mutual_friends",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null,hash:"90ff34717d6f33cb87d17d696fbedc86"};e.exports=n},"8hvq":function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));a("MvUL");var n=a("MMRb"),l=a("ERkP"),s=a.n(l),i=a("1YZw"),r=a("v6aA"),o=a("EbOo"),c=a("tZH3"),d=a("3XMw"),u=a.n(d),m=a("5oT/"),p=a("YemM"),g=a("u0B7"),y=a("Irs7"),h=a("0KEI"),_=a("uDfI"),b=a("zCf4"),v=a("G6rE"),k=a("vMjK"),f=a("efqG"),F=a("/yvb"),T=a("6u/5"),S=a.n(T),E=a("PJTX"),C=a.n(E),I=a("pHkl"),R=a("X/yg"),L=a("fz3c");const K=u.a.d88d0790;function x(e){const{conversationId:t,conversationType:a,inboxType:l,participant:d}=e,u=Object(y.b)(),T=Object(h.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_INBOX_ITEM"),E=Object(_.c)(),x=C()(),{featureSwitches:w}=s.a.useContext(r.a),M=Object(b.f)(),O=w.isTrue("dm_vdl_enabled")&&w.isTrue("dm_vdl_inbox_p0_enabled"),A=a===n.CONVERSATION_TYPE.GROUP,D=e=>{E(v.e.unblock(e)).catch(T(g.a)),u.scribeAction("unblock")},P=()=>{const{participantCount:s,position:i,relayId:r}=e,o=a===n.CONVERSATION_TYPE.GROUP?"leave_group":"delete_thread",c={conversation_type:a===n.CONVERSATION_TYPE.GROUP?I.l.GROUP:I.l.ONE_TO_ONE,conversation_id:t,conversation_participant_count:s,position:i,inbox_type:Object(R.l)(l),entry_point:I.c.CELL_X_BUTTON};u.scribe({element:"thread",action:o,data:c}),E(n.leaveConversation({conversationId:t})).then((()=>{r&&S()(x,(e=>{e.delete(r)}))})).catch(T({showToast:!0})),M.replace(Object(R.g)(l))},U=()=>{const{userId:a}=e,n=L.a.DMConversation;if(u.scribeAction("report"),Object(L.g)(w,n)){const e=Object(L.d)({clientReferer:window.location.pathname,isMedia:!1,isPromoted:!1,reportType:n,reportedConversationId:t,reportedUser:a,scribeNamespace:u.contextualScribeNamespace});M.push({pathname:"/i/safety/report_story_start",state:{input:{requested_variant:JSON.stringify(e)}}})}else{const e=Object(R.j)(t,window.location.pathname,u.contextualScribeNamespace,l);M.push(e)}};return s.a.createElement(f.a,{renderContent:(e,t)=>s.a.createElement(c.a,{dismiss:e,flatBorders:"sheet"===t,isGroup:A,onBlockClick:()=>{return e=d.idStr,E(v.e.block(e)).then((()=>{E(Object(i.b)({action:{label:k.c,onAction:()=>D(e)},text:k.a}))}),T(o.a)),void u.scribeAction("block");var e},onDeleteClick:P,onReportClick:U,requestorScreenName:d.screenName,showBlock:!A,showCancel:"sheet"===t,showDelete:!0})},s.a.createElement(F.a,{accessibilityLabel:K,icon:s.a.createElement(m.a,{style:O?p.a.xIcon:void 0}),onPress:e=>{e.preventDefault()},style:O?p.a.vdlXButton:p.a.xButton,type:O?void 0:"destructiveText"}))}},AYcr:function(e,t,a){"use strict";var n,l,s={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"}],kind:"Fragment",metadata:null,name:"evolutionPinConversationMutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Literal",name:"label",value:"Pinned"},{kind:"Literal",name:"s",value:20}],concreteType:null,kind:"LinkedField",name:"add_dm_conversation_label_v3",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],type:"DMConversationLabelInfo",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"failure_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"DMConversationLabelUnavailable",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"evolutionPinConversationMutation",selections:l},params:{id:"ZHTYqgRlFOIozAdfcLAF_A",metadata:{},name:"evolutionPinConversationMutation",operationKind:"mutation",text:null}};s.hash="3a550c6d2710cd81564e2c2508b2f30f",e.exports=s},Avzu:function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("Lsrn"),i=a("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M23.25 3.25h-2.425V.825c0-.414-.336-.75-.75-.75s-.75.336-.75.75V3.25H16.9c-.414 0-.75.336-.75.75s.336.75.75.75h2.425v2.425c0 .414.336.75.75.75s.75-.336.75-.75V4.75h2.425c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-3.175 6.876c-.414 0-.75.336-.75.75v8.078c0 .414-.337.75-.75.75H4.095c-.412 0-.75-.336-.75-.75V8.298l6.778 4.518c.368.246.79.37 1.213.37.422 0 .844-.124 1.212-.37l4.53-3.013c.336-.223.428-.676.204-1.012-.223-.332-.675-.425-1.012-.2l-4.53 3.014c-.246.162-.563.163-.808 0l-7.586-5.06V5.5c0-.414.337-.75.75-.75h9.094c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25v13.455c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75z"})));r.metadata={width:24,height:24},t.a=r},CVqr:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d}));var n=a("3XMw"),l=a.n(n);const s=l.a.f041be05,i=l.a.a2fad0f3,r=l.a.cbddf365,o=l.a.fac945ad,c=l.a.h6beb5fb,d=e=>{const{newUntrustedWithSocialProof:t,newUntrustedWithoutSocialProof:a,oldUntrustedWithSocialProof:n,oldUntrustedWithoutSocialProof:l}=e;let c="normal",d="",m=!1;return t>0?(d=i({stringCount:u(t),count:t}),c="bold",m=!0):a>0?(d=o({stringCount:u(a),count:a}),c="bold",m=!0):n>0?(d=r({stringCount:u(n),count:n}),c="medium"):l>0&&(d=s({stringCount:u(l),count:l}),c="medium"),{titleWeight:c,description:d,showNotificationDot:m}},u=e=>e>10?c({count:10}):e},DQzJ:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));a("kYxP");var n=a("ERkP"),l=a.n(n),s=a("kGix"),i=a("tI3i"),r=a.n(i),o=a("SrIh"),c=a("0KEI"),d=a("IAZG"),u=a("VYI2"),m=a.n(u),p=a("PJTX"),g=a.n(p),y=a("P74S"),h=a.n(y),_=a("YWiL");function b(e,t){const[a,n]=l.a.useState(!1),[i,u]=l.a.useState(null),p=g()(),[y]=m()(t),b=Object(c.useApiErrorHandler)(),v=Object(d.a)(e,y);return l.a.useMemo((()=>{var t,l;const c=null==(t=Object(_.getRequest)(e).params)||null==(l=t.metadata)?void 0:l.sliceInfoPath;r()(!!c,"The provided query does not have an associated sliceInfoPath. Make sure you are using the `@slice` directive with your query.");const{next_cursor:d,previous_cursor:m}=function(e,t){try{r()("slice_info"===t[t.length-1],"Invalid sliceInfoPath!");let n=e;for(const e of t){var a;r()(!!n,"The provided path is invalid."),r()("string"==typeof e,"Unexpected value for path!"),n=null==(a=n)?void 0:a[e]}return n}catch(e){return void Object(o.a)(e.message)}}(v,c)||{},g=t=>{a||(n(!0),h()(p,e,{...y,cursor:t}).subscribe({complete:()=>{n(!1)},error:e=>{n(!1),u(e),b(e)}}))},k=()=>{d&&g(d)},f=()=>{m&&g(m)};return i?{subsequentFetchStatus:s.a.FAILED,error:i,fetchNext:k,fetchPrevious:f,data:v,hasNext:Boolean(d),hasPrevious:Boolean(m)}:{subsequentFetchStatus:a?s.a.LOADING:s.a.NONE,error:void 0,fetchNext:k,fetchPrevious:f,data:v,hasNext:Boolean(d),hasPrevious:Boolean(m)}}),[e,v,a,i,p,y,b])}},DbJc:function(e,t,a){"use strict";var n=a("VPAj");const l={...a("7n04").a,initialScrollHeadroom:Object(n.a)(0),scrollHeadroom:Object(n.a)(0),pinToNewestWhenAtNewest:!0};t.a=l},FWve:function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"EvolutionDMInboxSecondaryNoQualityFilterQuery",selections:[{alias:"untrusted",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["Untrusted","LowQuality"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__EvolutionDMInboxSecondaryNoQualityFilterQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[c={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},d={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"EvolutionDMInboxSecondaryNoQualityFilterQuery",selections:[{alias:"untrusted",args:u=[l,{kind:"Variable",name:"cursor",variableName:"cursor"},s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},p],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},_={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},p],type:"User",abstractKey:null}],storageKey:null},b={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},p],storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g,k,y,h],storageKey:null},_,v],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:f=[p],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:F=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:F,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:F,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:f,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},k,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},v,p],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},d],storageKey:null},p],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:"untrusted",args:u,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"EvolutionDMInboxSecondaryNoQualityFilterQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"}]},params:{id:"6YA3CFdh-WkgaC7_8ZJ_uA",metadata:{sliceInfoPath:["untrusted","slice_info"]},name:"EvolutionDMInboxSecondaryNoQualityFilterQuery",operationKind:"query",text:null}};T.hash="6fb9d9631c7c450980be91852c33c0c3",e.exports=T},GSsg:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a("B5iK");class l{constructor(e,t=Object.freeze({})){const{interval:a=6e4,burstInterval:l=3e3,burstDuration:s=3e5}=t;this.pollTimer=new n.b(a).interval(e),this.burstTimer=new n.a(this.pollTimer,l,s)}start(e){return this.pollTimer.start(),e&&this.burstTimer.requestBurst(),this}stop(){return this.burstTimer.stopBurst(),this.pollTimer.stop(),this}restart(){return this.stop(),this.start(),this}}},H4nC:function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("3XMw"),i=a.n(s),r=a("MWbm"),o=a("rHpw"),c=a("t62R"),d=a("4n2h");const u=o.a.create((e=>({root:{paddingBottom:e.spaces.space20}}))),m=i.a.d84b485e,p=i.a.be0c83d8;t.a=({entry:e,isCompact:t,isSelected:a=!1,unread:n=!1})=>{const s="follow"===e.reason?m:p,i=Object(d.b)(n),o=Object(d.a)(n,a);return t?l.a.createElement(c.b,{color:o,weight:i},s):l.a.createElement(r.a,{style:u.root},l.a.createElement(c.b,{align:"center",color:o,size:"subtext2",weight:i},s))}},HvW7:function(e,t,a){"use strict";var n=a("IGGJ")(a("yiKp")),l=a("XiYe"),s=a("PJTX"),i=a("ERkP"),r=a("e1/f").commitMutation,o=i.useState,c=i.useEffect,d=i.useRef,u=i.useCallback;e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=s(),i=l(),m=d(a),p=d(e),g=d(new Set),y=o(!1),h=y[0],_=y[1],b=u((function(t){m.current===a&&p.current===e&&(g.current.delete(t),i.current&&_(g.current.size>0))}),[a,i,e]);c((function(){m.current===a&&p.current===e||(g.current=new Set,i.current&&_(!1),m.current=a,p.current=e)}),[a,i,e]);var v=u((function(l){var s=t(a,(0,n.default)((0,n.default)({},l),{},{mutation:e,onCompleted:function(e,t){var a;b(s),null===(a=l.onCompleted)||void 0===a||a.call(l,e,t)},onError:function(e){var t;b(s),null===(t=l.onError)||void 0===t||t.call(l,e)},onUnsubscribe:function(){var e;b(s),null===(e=l.onUnsubscribe)||void 0===e||e.call(l)},onNext:function(){var e;null===(e=l.onNext)||void 0===e||e.call(l)}}));return g.current.add(s),i.current&&_(!0),s}),[b,t,a,i,e]);return[v,h]}},"I2k/":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("k49u"),l=a("lRnM"),s=a("LVU8");const i=e=>({[n.a.ClientNotPermitted]:{customAction:()=>(Object(s.d)("/messages/",{statusCode:401}),Object(l.v)(e))}})},IACL:function(e,t,a){"use strict";var n,l,s,i,r,o={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMDrawerQuery",selections:[{alias:null,args:l=[{kind:"Literal",name:"count",value:1},{kind:"Literal",name:"desired_lists",value:n=["Trusted","Untrusted","LowQuality"]},{kind:"Literal",name:"known_lists",value:n},{kind:"Literal",name:"s",value:17},{kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[i={kind:"InlineFragment",selections:[s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(count:1,desired_lists:["Trusted","Untrusted","LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"evolutionDMDrawerQuery",selections:[{alias:null,args:l,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[r,{kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[r,i],storageKey:null},s],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(count:1,desired_lists:["Trusted","Untrusted","LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}]},params:{id:"YmdLg9J6c80rHupQ-HKU2A",metadata:{},name:"evolutionDMDrawerQuery",operationKind:"query",text:null}};o.hash="12ce289bb1eb52629b06ad2c666962ca",e.exports=o},IpT4:function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("Lsrn"),i=a("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M22.238 2.257c-.293-.293-.768-.293-1.06 0L2.52 20.917c-.293.292-.293.767 0 1.06.146.146.338.22.53.22s.384-.073.53-.22l18.658-18.66c.293-.293.293-.767 0-1.06zM2.986 17.82c.155 0 .312-.048.446-.148.112-.083 2.752-2.104 2.708-7.248-.02-2.16.643-3.98 1.913-5.266 1.093-1.107 2.577-1.72 4.18-1.727 1.325.006 2.562.42 3.578 1.195.137.104.297.153.455.153.227 0 .45-.102.598-.295.25-.33.188-.8-.142-1.052-1.278-.975-2.828-1.493-4.483-1.5h-.003c-2.008.008-3.87.78-5.248 2.173-1.536 1.551-2.368 3.8-2.348 6.332.037 4.33-2.02 5.967-2.103 6.03-.332.247-.4.718-.154 1.05.147.2.374.303.603.303zm16.844-7.382c.002-.246-.003-.487-.017-.723-.024-.414-.387-.74-.792-.706-.413.023-.728.378-.705.79.012.205.017.413.015.624-.024 2.868.785 4.765 1.526 5.896h-8.314c-.414 0-.75.336-.75.75s.336.75.75.75h3.522c-.1 1.48-1.323 2.66-2.828 2.66-1.003 0-1.913-.514-2.436-1.372-.214-.354-.675-.467-1.03-.25-.354.214-.467.675-.25 1.03.795 1.31 2.185 2.09 3.716 2.09 2.332 0 4.227-1.85 4.328-4.158h4.922c.32 0 .604-.206.707-.51.104-.305 0-.643-.255-.84-.087-.066-2.145-1.7-2.108-6.032z"})));r.metadata={width:24,height:24},t.a=r},J2UM:function(e,t,a){"use strict";var n=a("0JOx");t.a=()=>Object(n.h)().then((({inputDetect:e})=>e))},K8Kw:function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"query"},{defaultValue:null,kind:"LocalArgument",name:"withConversationQueryHighlights"}],kind:"Fragment",metadata:null,name:"DMConversationSearchTabGroupsQuery",selections:[{alias:"dm_group_convo_slice_result",args:[l={kind:"Variable",name:"query",variableName:"query"},s={kind:"Literal",name:"s",value:21}],concreteType:null,kind:"LinkedField",name:"__DMConversationSearchTabGroupsQuery_dm_group_convo_slice_result_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMGroupConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[d,u={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"dm_group_convo_slice_result.items.dm_convo_search.legacy.metadata.created_by_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m,action:"THROW",path:"dm_group_convo_slice_result.items.dm_convo_search.legacy.metadata.admin_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:y={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},d,u,{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null}],storageKey:null},action:"THROW",path:"dm_group_convo_slice_result.items.dm_convo_search.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"join_time_millis",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"join_conversation_event_id",storageKey:null}],storageKey:null},v={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},k={condition:"withConversationQueryHighlights",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"DMHighlighting",kind:"LinkedField",name:"highlighting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"query_tokens",storageKey:null}],storageKey:null}]}],storageKey:null},f={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMGroupConvoSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"DMConversationSearchTabGroupsQuery",selections:[{alias:null,args:F=[{kind:"Variable",name:"cursor",variableName:"cursor"},l,s],concreteType:null,kind:"LinkedField",name:"dm_group_convo_slice_result",plural:!1,selections:[T={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMGroupConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i,r,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c,d,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:C=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,m,S={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"}],type:"User",abstractKey:null}],storageKey:null},E={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},i],storageKey:null},p,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:C,storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[T,g],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,y,S],type:"User",abstractKey:null}],storageKey:null},E,i],storageKey:null},h,_,b],storageKey:null},v],storageKey:null}],storageKey:null},k],storageKey:null},f],type:"DMGroupConvoSlice",abstractKey:null}],storageKey:null},{alias:null,args:F,filters:["query","s"],handle:"slice",key:"DMConversationSearchTabGroupsQuery_dm_group_convo_slice_result",kind:"LinkedHandle",name:"dm_group_convo_slice_result"}]},params:{id:"8D8KoSq5q9d5Su3emu2dwg",metadata:{sliceInfoPath:["dm_group_convo_slice_result","slice_info"]},name:"DMConversationSearchTabGroupsQuery",operationKind:"query",text:null}};I.hash="168f0d588de606cabd620a5a97abc402",e.exports=I},KWCo:function(e,t,a){"use strict";var n,l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMConversationAvatar",selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"participants.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null};l.hash="730d72814d575d9d07f0685f80113703",e.exports=l},Ka95:function(e,t,a){"use strict";a.d(t,"a",(function(){return be}));a("kYxP");var n,l=a("ERkP"),s=a.n(l),i=a("BUB3"),r=a("1YZw"),o=a("v6aA"),c=a("6M7t"),d=a("2Aal"),u=(a("YWiL"),a("CVPS")),m=a.n(u);const p=void 0!==n?n:n=a("KWCo");function g(e){var t,a;const{conversation:n,conversationId:l,conversationType:i,perspective:r,size:o,withBadge:u}=e,{metadata:g,participants:y}=m()(p,n),h=null==g||null==(t=g.avatar)?void 0:t.media_info,_=h&&"ApiImage"===h.__typename?{height:h.original_img_height,width:h.original_img_width,url:h.original_img_url}:void 0,b=y||[],v=[];for(let e=0;e<b.length;e++){var k,f;const t=b[e];if("User"===(null==t||null==(k=t.user_results)||null==(f=k.result)?void 0:f.__typename)){const{legacy:e}=t.user_results.result;if(e){const{id_str:t,profile_image_url_https:a,screen_name:n}=e;v.push({id_str:t,profile_image_url_https:a,screen_name:n})}}}const F=v.filter((e=>e.id_str!==r)).slice(0,d.a),T=Object(d.b)(_)||Object(d.c)(F,o),S=(null==(a=F[0])?void 0:a.screen_name)||"",E=Object(d.e)(l,S,i),C=u?v.length-1:0;return T?s.a.createElement(c.a,{avatar:T,avatarLink:E,badgeCount:C}):null}var y=a("OhSZ"),h=a("t62R"),_=a("zQEV"),b=a("4n2h");function v({entry:e,entryType:t,isSelected:a=!1,perspective:n,unread:l=!1,users:i}){const r=Object(_.a)(e,t,n,i),o=Object(b.b)(l),c=Object(b.a)(l,a);return s.a.createElement(h.b,{color:c,weight:o},r)}var k,f=a("ijJS"),F=a("XYIr");const T=void 0!==k?k:k=a("VGyq");function S({dm:e,isGroupDM:t,isSelected:a,perspective:n,senderId:l,senderName:i,unread:r}){const{attachments:o,text:c}=m()(T,e),d=o?o[0]:null,u=d&&(d.card||d.media||d.tweet_results),p=n===l,g=Boolean(u&&p)||Boolean(t&&!p);let y,h=Object(F.a)(i,g,c);if(d)if(d.card)h=Object(F.d)(p,i,g);else if(d.tweet_results)h=Object(F.i)(p,i,g);else if(d.media){const e=d.media.media_info;if("ApiGif"===(null==e?void 0:e.__typename))y=e.alt_text,h=Object(F.c)(p,i,g);else if("ApiImage"===(null==e?void 0:e.__typename))y=e.alt_text,h=Object(F.e)(p,i,g);else if("ApiVideo"===(null==e?void 0:e.__typename)){var _;y=null==(_=e.preview_image)?void 0:_.alt_text,h=Object(F.g)(p,i,g)}}return s.a.createElement(f.a,{accessibilityLabel:y,content:h,isSelected:a,unread:r})}var E,C=a("/8XK"),I=a("pHkl");const R=void 0!==E?E:E=a("vL4t"),L=(e,t)=>({created_at:"",description:"",entities:{description:{}},followed_by:!1,followers_count:0,following:!1,friends_count:0,id:parseInt(t,10),id_str:t,name:e||"",profile_image_url_https:"",protected:!1,screen_name:"",verified:!1});function K({entry:e,isGroupDM:t,isSelected:a,perspective:n,type:l,unread:i}){var r,o,c,d,u,p;const{legacy:g}=m()(R,e);let y=(null==g||null==(r=g.initiating_user_results)?void 0:r.rest_id)||"",h=(null==g||null==(o=g.initiating_user_results)||null==(c=o.result)||null==(d=c.legacy)?void 0:d.name)||"";const _=null==g?void 0:g.event_id;if(null!=g&&null!=(u=g.event_detail)&&u.is_spam_hide)return Object(C.a)(i,a);if(null!=g&&null!=(p=g.event_detail)&&p.dm&&l===I.e.MESSAGE_CREATE)return s.a.createElement(S,{dm:g.event_detail.dm,isGroupDM:t,isSelected:a,perspective:n,senderId:y,senderName:h,unread:i});if([I.e.CONVERSATION_NAME_UPDATE,I.e.PARTICIPANTS_JOIN,I.e.PARTICIPANTS_LEAVE].includes(l)){var b;const e=I.f[l];let t={},r=[];if(l===I.e.PARTICIPANTS_LEAVE){var k,f,F,T,E,K,x,w,M,O;if(null==g||null==(k=g.event_detail)||!k.users_results||(null==g||null==(f=g.event_detail)?void 0:f.users_results.length)<1)return null;if(y=null==g||null==(F=g.event_detail)||null==(T=F.users_results[0])||null==(E=T.result)||null==(K=E.legacy)?void 0:K.id_str,h=null==g||null==(x=g.event_detail)||null==(w=x.users_results[0])||null==(M=w.result)||null==(O=M.legacy)?void 0:O.name,!y)return null;r=[{user_id:y}],t={[y]:{name:h}}}else{t={[y]:L(h,y)};for(const e of(null==g||null==(A=g.event_detail)?void 0:A.users_results)||[]){var A,D,P,U,H;const a=null==e||null==(D=e.result)||null==(P=D.legacy)?void 0:P.id_str,n=null==e||null==(U=e.result)||null==(H=U.legacy)?void 0:H.name;a&&n&&(t[a]=L(n,a),r.push({user_id:a}))}}const o={by_user_id:y,conversation_name:(null==g||null==(b=g.event_detail)?void 0:b.name)||"",id:_||"",participants:r,sender_id:y,time:"",type:e};return s.a.createElement(v,{entry:o,entryType:e,isSelected:a,perspective:n,unread:i,users:t})}return null}var x=a("h3MB"),w=a("XnpN"),M=a("X/yg"),O=a("3XMw"),A=a.n(O),D=a("IpT4"),P=a("AQ79"),U=a("t0aI"),H=a("sNn6"),N=a("VcIV"),j=a("NjAB"),B=a("gEJU"),W=a("RqPI"),q=a("YemM"),V=a("Irs7"),z=a("0KEI"),Q=a("zCf4"),G=a("MWbm"),Y=a("8hvq");var X,$,J,Z=a("Znyr"),ee=a("GBcw"),te=a("cm6r"),ae=a("htQn"),ne=a("5mJL"),le=a("6u/5"),se=a.n(le),ie=a("HvW7"),re=a.n(ie),oe=a("PJTX"),ce=a.n(oe),de=a("MMRb"),ue=a("q8SM"),me=a("uDfI");const pe=A.a.d98e066c,ge=A.a.j302dba8,ye=void 0!==X?X:X=a("Sy9O"),he=void 0!==$?$:$=a("AYcr"),_e=void 0!==J?J:J=a("whlN");function be({conversationIds:e,dm_conversation:t,dmDrawerOnClick:a,inboxType:n,isMessageItem:l,isPinned:c,pinnedSliceId:d}){var u,p;const h=Object(V.b)(),_=Object(z.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_INBOX_ITEM_EVOLUTION"),b=Object(me.c)(),v=ce()(),k=Object(Q.g)(),[f,F]=s.a.useState(!1),T=m()(ye,t),S=Object(j.b)([T],[x.a]).entities.conversations[null==T||null==(u=T.legacy)?void 0:u.conversation_id],E=((null==T||null==(p=T.legacy_conversation_slice)?void 0:p.items)||[]).map((e=>null==e?void 0:e.dm_event)).find((e=>{var t;return I.d.includes(null==e||null==(t=e.legacy)?void 0:t.event_type)})),{featureSwitches:C}=s.a.useContext(o.a),R=C.getNumberValue("dm_conversation_labels_max_pinned_count"),L=C.isTrue("dm_vdl_enabled")&&C.isTrue("dm_vdl_inbox_p0_enabled"),O=C.isTrue("dm_conversation_labels_pinned_enabled")&&C.isTrue("direct_messages_incremental_holdback_2022h1"),{conversation_id:A,id:X,last_read_event_id:$,last_readable_event_id:J,muted:le,participants:ie,type:oe}=S,be=Object(me.d)(W.s)||"",ve=oe===de.CONVERSATION_TYPE.GROUP,ke=e.findIndex((e=>e===X))+1,fe=Object.keys(ie).length,Fe=!J||!($&&Object(U.c)($,J)),Te=L&&ve,Se=ve?"0":(()=>{const e=Object(w.a)(S,be).map((({user:e})=>e)),t=e&&e[0]||null;return t?t.id_str:""})();s.a.useEffect((()=>{b(Object(de.updateLastSeenEventIdEvolution)(J,n)).catch(_({}))}),[_,b,J,n]);const Ee=e=>{h.scribe({element:"thread",action:"click",data:{event_value:0,conversation_id:A,conversation_participant_count:fe,conversation_type:ve?I.l.GROUP:I.l.ONE_TO_ONE,position:ke}}),Fe&&b(Object(de.updateConversationReadState)(A)).then((()=>{se()(v,(e=>{((e,t,a)=>{const n=a.get(e);if(!n)return;const l=n.getLinkedRecord("perspectival_conversation_metadata");l&&l.setValue(t,"last_read_event_id")})(X,J,e)}))})).catch(_({})),a&&a(e,A)},[Ce]=re()(he),Ie=s.a.useCallback((()=>{Ce({variables:{conversation_id:A},onCompleted(e){var t,a;if("DMConversationLabelUnavailable"===(null==(t=e.add_dm_conversation_label_v3)?void 0:t.__typename)){const{failure_reason:t}=e.add_dm_conversation_label_v3;h.scribe({element:"thread",action:"error_shown",data:{error_type:I.i.MAX_PINS_REACHED}}),"ExceededMaxPinnedConversations"===t&&F(!0)}else"DMConversationLabelInfo"===(null==(a=e.add_dm_conversation_label_v3)?void 0:a.__typename)&&b(Object(r.b)({ariaOnly:!0,text:pe}))},updater(e,t){var a;"DMConversationLabelInfo"===(null==t||null==(a=t.add_dm_conversation_label_v3)?void 0:a.__typename)&&((e,t,a)=>{if(!a)return;const n=t.get(e),l=t.getRootField("add_dm_conversation_label_v3"),s=t.get(a);if(!n||!l||!s)return;const i=n.getLinkedRecord("result");if(!i)return;const r=n.getLinkedRecords("labels")||[];i.setLinkedRecords([...r,l],"labels"),n.setLinkedRecord(i,"result");const o=(s.getLinkedRecords("items_results")||[]).concat(n);s.setLinkedRecords(o,"items_results")})(X,e,d)},onError(e){_(ue.a)(e)}})}),[h,A,_,b,X,Ce,d]),[Re]=re()(_e),Le=s.a.useCallback((()=>{Re({variables:{conversation_id:A},onCompleted(){b(Object(r.b)({ariaOnly:!0,text:ge}))},updater(e){((e,t)=>{const a=t.get(e);if(!a)return;const n=a.getLinkedRecord("result");if(!n)return;const l=n.getLinkedRecords("labels")||[],s=[];l.forEach((e=>{e&&e.getValue("label_type")!==P.a.PINNED&&s.push(e)})),n.setLinkedRecords(s,"labels")})(X,e),((e,t,a)=>{if(!a)return;const n=t.get(e),l=t.get(a);if(!n||!l)return;const s=l.getLinkedRecords("items_results")||[],i=[];s.forEach((t=>{if(!t)return;const a=t.getLinkedRecord("result");if(!a)return;const n=a.getValue("__id");n!==e&&n!==`DMConversation:${e}`&&i.push(t)})),l.setLinkedRecords(i,"items_results")})(X,e,d)},onError(e){_(ue.b)(e)}})}),[A,_,b,X,d,Re]),Ke=({isFocused:e,isFocusedWithin:t,isHovered:a})=>s.a.createElement(N.a,{conversationId:A,conversationType:oe,inboxType:n,isHovered:e||t||a,isPinned:c,isSnoozed:le,participantCount:fe,position:ke,relayId:X,togglePinStateEvolution:c?Le:Ie,userId:Se}),xe=()=>{var e;const t=Number(null==E||null==(e=E.legacy)?void 0:e.created_at_millis),a=[L||l?q.a.inlineNotificationsDisabledIcon:q.a.notificationsDisabledIcon,L&&q.a.inlineNotificationsDisabledIconVDL];return s.a.createElement(G.a,{style:L&&q.a.inlineTimestamp},t?s.a.createElement(ee.a,{timestamp:t}):null,le?s.a.createElement(D.a,{style:a}):null)},we=()=>{const e=Object(M.m)(S,be);return s.a.createElement(Y.a,{conversationId:A,conversationType:oe,inboxType:n,participant:e,participantCount:fe,position:ke,relayId:X,userId:Se})},Me=e=>{const t=[q.a.root,Fe&&!L&&q.a.unread,e&&L&&q.a.active];let a="text",i="bold";return L&&!Fe&&(a="gray900",i="medium"),L&&e&&(a="text",i="medium"),s.a.createElement(te.a,null,(({isFocused:r,isFocusedWithin:o,isHovered:c})=>{var d;return s.a.createElement(ae.a,{accessibilityRole:"none",accessibilityState:{selected:e},link:{pathname:`/messages/${A}`,anchorless:!0,state:{...k.state,entryPoint:l?null==E?void 0:E.rest_id:null,position:ke,isMessageItem:l}},onPress:Ee,style:t},s.a.createElement(ne.a,{avatarCell:s.a.createElement(g,{conversation:T,conversationId:A,conversationType:oe,perspective:be,withBadge:Te}),avatarSize:"xxLarge"},s.a.createElement(G.a,{style:q.a.bodyColumn},s.a.createElement(G.a,{style:q.a.titleContainer},s.a.createElement(y.b,{conversation:S,perspective:be,renderTimestamp:()=>xe(),textColor:a,titleWeight:i,withScreenName:!0,withVDLRefresh:L}),s.a.createElement(G.a,{style:q.a.snippet},E?s.a.createElement(K,{entry:E,isGroupDM:ve,isSelected:L&&e,perspective:be,type:(null==(d=E.legacy)?void 0:d.event_type)||I.e.MESSAGE_CREATE,unread:L&&Fe}):null)),s.a.createElement(G.a,{style:q.a.endCell},(()=>{const e=Fe?s.a.createElement(Z.a,{pip:!0,style:q.a.unreadMessagePip,truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):null;return L?e:xe()})()),(({isFocused:e,isFocusedWithin:t,isHovered:a})=>{switch(n){case P.d.PRIMARY:return O?Ke({isFocused:e,isFocusedWithin:t,isHovered:a}):null;case P.d.SECONDARY:case P.d.TERTIARY:return we();default:return null}})({isFocused:r,isFocusedWithin:o,isHovered:c}))))}))};return s.a.createElement(s.a.Fragment,null,f?s.a.createElement(B.a,{count:R,setShowPinError:F}):null,L?s.a.createElement(H.a,{exact:!1,path:`/messages/${A}`},Me):s.a.createElement(i.a,{exact:!1,path:`/messages/${A}`},Me))}},Lz2T:function(e,t,a){"use strict";var n=a("97Jx"),l=a.n(n),s=a("ERkP"),i=a.n(s),r=a("PnKw"),o=a("vYiB"),c=a("X3+4"),d=a("rcen"),u=a("k89r");function m(e){const{bodyRichText:t,bodyText:a,onImpression:n,primaryAction:s,titleRichText:m,titleText:p,...g}=e,y=Object(u.a)(),h=()=>{y.scribe({action:"click"})},_=m?i.a.createElement(d.a,{entities:m.entities,onEntityClick:h,text:m.text}):p&&p.length?p:null,b=t?i.a.createElement(d.a,{entities:t.entities,onEntityClick:h,text:t.text}):a&&a.length?a:null,v=e=>({...s,onClick:t=>{(null==s?void 0:s.onClick)&&s.onClick(t),e(t)}}),k=i.a.createElement(c.a.Consumer,null,(({handleNextSlide:e})=>i.a.createElement(r.a,l()({},g,{headline:_,primaryAction:s?v(e):void 0,subtext:b}))));return"function"==typeof n?i.a.createElement(o.a,{onImpression:n},k):k}m.defaultProps={shouldRenderBorder:!1},t.a=m},M2mT:function(e,t,a){"use strict";a("kYxP");var n=a("+/5o"),l=a("ERkP"),s=a.n(l),i=a("HPNB"),r=a("VAZu"),o=a("wiP2"),c=a("Es6L"),d=a("rHpw");var u=d.a.create((e=>({fill:{flex:1,alignSelf:"stretch"},viewportView:{...d.a.absoluteFillObject,overflowY:"auto"},appBarContainer:{position:"sticky",top:0,backfaceVisibility:"hidden",zIndex:e.componentZIndices.appBarZIndex}}))),m=a("MWbm"),p=a("yw4N"),g=a("TnY3"),y=a("cHvH"),h=a("3xLC");class _ extends s.a.Component{constructor(...e){super(...e),this._renderChildren=()=>{const{children:e}=this.props;return this.context.rootDetailPerColumnScroll?s.a.createElement(m.a,{style:u.fill},s.a.createElement(p.a,{style:u.viewportView},this._renderInlineNav({isTwoColumnLayout:!0}),e)):e}}render(){return s.a.createElement(y.a,null,(({windowWidth:e})=>i.a.isTwoColumnLayout(e)?this._renderForTwoColumnLayout():this._renderForOneColumnLayout()))}_renderForOneColumnLayout(){const{appBarStyle:e,children:t,leftControl:a,screenType:n,showSubtitleOnRoot:l,showSubtitleOnWideDetail:i,withBottomBorder:r,withDetailOpen:d,...u}=this.props;return s.a.createElement(s.a.Fragment,null,Object(c.a)()?this._renderInlineNav({isTwoColumnLayout:!1}):s.a.createElement(o.a.Configure,u),t)}_renderForTwoColumnLayout(){const e=this.context.rootDetailPerColumnScroll;return s.a.createElement(s.a.Fragment,null,!e&&this._renderInlineNav({isTwoColumnLayout:!0}),this._renderChildren())}_renderInlineNav({isTwoColumnLayout:e}){const{SideNavButton:t,TabBar:a,TeamsSwitcher:l,appBarStyle:i,backLocation:c,documentTitle:d,headerless:p,history:g,leftControl:y,middleControl:h,onBackClick:_,rightControl:b,screenType:v,searchBoxOptions:k,secondaryBar:f,showSubtitleOnRoot:F,showSubtitleOnWideDetail:T,subtitle:S,title:E,titleIconCell:C,titleIconCellSize:I,withDetailOpen:R,withSearchBox:L,withTweetButton:K}=this.props,x="root"===v,w="secondaryRoot"===v,M="primaryDetail"===v,O=M&&T||x&&F,A=x||M&&e,D=x?n.c:M?n.a:void 0,P=s.a.createElement(m.a,{style:u.appBarContainer},s.a.createElement(r.a,{backLocation:c,fixed:!1,hideBackButton:A,history:g,leftControl:y,middleControl:h,onBackClick:_,rightControl:b,secondaryBar:f,style:i,subtitle:O?S:void 0,title:E,titleDomId:D,titleIconCell:C,titleIconCellSize:I})),U=x||w&&R?null:s.a.createElement(o.a.Configure,{SideNavButton:t,TabBar:a,TeamsSwitcher:l,backLocation:c,documentTitle:d,headerless:p,middleControl:h,onBackClick:_,rightControl:b,searchBoxOptions:k,subtitle:S,title:E,withSearchBox:L,withTweetButton:K});return s.a.createElement(s.a.Fragment,null,U,P)}}_.contextType=h.a,_.defaultProps={screenType:"secondaryDetail",showSubtitleOnWideDetail:!0};t.a=Object(g.a)(_)},OOE2:function(e,t,a){"use strict";a.d(t,"b",(function(){return T})),a.d(t,"c",(function(){return S})),a.d(t,"a",(function(){return E}));var n=a("ERkP"),l=a.n(n),s=a("v6aA"),i=a("3XMw"),r=a.n(i),o=a("Lsrn"),c=a("k/Ka");const d=(e={})=>Object(c.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[o.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M20.075 10.12c-.414 0-.75.337-.75.75v8.08c0 .413-.337.75-.75.75H4.095c-.412 0-.75-.337-.75-.75V8.292l6.778 4.518c.368.247.79.37 1.213.37.422 0 .844-.123 1.212-.368l4.53-3.014c.336-.223.428-.676.204-1.012-.223-.334-.675-.427-1.012-.203l-4.53 3.015c-.246.162-.563.163-.808 0l-7.586-5.06V5.496c0-.414.337-.75.75-.75h8.092c.414 0 .75-.336.75-.75s-.336-.75-.75-.75H4.096c-1.24 0-2.25 1.01-2.25 2.25V18.95c0 1.24 1.01 2.25 2.25 2.25h14.48c1.24 0 2.25-1.01 2.25-2.25v-8.078c0-.415-.337-.75-.75-.75zm3.165-6.87h-5.624l1.64-1.64c.315-.317.315-.828 0-1.144-.316-.315-.826-.316-1.143 0l-2.96 2.96c-.157.16-.236.367-.236.574 0 .207.08.414.237.57l2.96 2.962c.16.158.365.236.572.236s.413-.08.57-.236c.316-.315.316-.827 0-1.143l-1.64-1.64h5.623c.412 0 .75-.338.75-.75s-.338-.75-.75-.75z"})));d.metadata={width:24,height:24};var u=d,m=a("AQ79"),p=a("nySH"),g=a("4hmp"),y=a("aI6n"),h=a("Irs7"),_=a("MWbm"),b=a("Znyr"),v=a("csss"),k=a("t62R"),f=a("j7Bv"),F=a("CVqr");const T=r.a.cf2d1048,S=r.a.da2f9225;function E(e){const t=l.a.useContext(s.a),a=Object(h.b)(),{allowUntrustedInbox:n,allowUntrustedVDLInbox:i,secondaryInboxCounts:r,untrustedUnreadCount:o}=e,c=t.featureSwitches.isTrue("dm_vdl_enabled")&&t.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),d=[g.a.requestPivotContainer,c?void 0:g.a.requestPivotContainerBorder],{description:E,showNotificationDot:C,titleWeight:I}=Object(F.a)(r);return n||i?l.a.createElement(_.a,{style:d},l.a.createElement(v.a,{description:c?E:void 0,label:c?l.a.createElement(k.b,{weight:I},T):T,link:Object(p.b)(m.d.SECONDARY),onPress:()=>{a.scribe({element:"requests_pivot",action:"click"})},renderRightContent:c?(R=C,R?()=>l.a.createElement(b.a,{pip:!0,standalone:!0,truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):()=>null):()=>o>0?l.a.createElement(b.a,{count:o,standalone:!0,truncatedCountFormatter:F.b,unreadCountLabel:S}):null,thumbnail:c?l.a.createElement(_.a,{testID:y.a.untrustedThumbnail},l.a.createElement(f.a,{Icon:u,color:"neutral"})):null,withoutArrow:c})):null;var R}},OOKO:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("ERkP"),l=a.n(n),s=a("rHpw"),i=a("MWbm");function r({spacing:e}){return l.a.createElement(i.a,{accessibilityRole:"separator",style:[o.divider,{marginVertical:null!=e?s.a.theme.spaces[e]:void 0}]})}const o=s.a.create((e=>({divider:{backgroundColor:e.colors.borderColor,height:e.borderWidths.small}})))},Oi4X:function(e,t,a){"use strict";a("Qavd"),a("MvUL"),a("kYxP");var n=a("ERkP"),l=a.n(n),s=a("0JOx"),i=a("MMRb"),r=a("CDB5"),o=a("RqPI"),c=a("1YZw"),d=a("hqKg"),u=a("kGix"),m=a("AQOc"),p=a("UhuB"),g=a("pNZL"),y=a("G6rE"),h=a("rxPX"),_=a("X/yg"),b=a("0KEI"),v=a("P1r1");const k=(e,t)=>t.conversationId,f=(e,t)=>i.selectConversation(e,k(0,t)),F=Object(d.createSelector)(i.selectFetchStatus,((e,t)=>i.selectConversationFetchStatus(e,k(0,t))),((e,t)=>e===u.a.LOADED?t:e)),T=Object(d.createSelector)(((e,t)=>i.selectEntriesForConversation(e,k(0,t))),o.s,((e,t)=>t?Object(_.e)(e,t):void 0)),S=(e,t)=>r.j(e,k(0,t)),E=(e,t)=>r.i(e,k(0,t)),C=(e,t)=>r.k(e,k(0,t)),I=(e,t)=>r.h(e,k(0,t)),R=(e,t)=>r.l(e,k(0,t)),L=(e,t)=>r.g(e,k(0,t)),K=(e,t)=>{const a=k(0,t);return i.selectInboxTypeByConversation(e,a)},x=e=>(t,a)=>r.a(e,t,a);var w=Object(h.a)().propsFromState((()=>({cardUrl:L,conversation:f,dataSaverMode:v.j,draftText:R,dtabBarInfo:v.m,entries:i.selectEntries,fetchStatus:F,gifMetadata:I,inboxType:K,isDmReceiptSettingEnabled:p.n,isNewGroupConversation:_.q,isUploading:S,media:E,mediaUploadProgress:C,newConversationParticipants:_.r,perspective:o.s,quickReplyOptions:T,tweetAttachment:_.s,users:y.e.selectAll}))).adjustStateProps((({cardUrl:e,conversation:t,dataSaverMode:a,draftText:n,dtabBarInfo:l,entries:s,fetchStatus:i,gifMetadata:r,inboxType:o,isDmReceiptSettingEnabled:c,isNewGroupConversation:d,isUploading:u,media:p,mediaUploadProgress:g,newConversationParticipants:y,perspective:h,quickReplyOptions:_,tweetAttachment:b,users:v})=>{const k=null==t?void 0:t.data;return{conversation:k&&Object(m.a)(k,s,v)||void 0,dataSaverMode:a,draftText:n,dtabBarInfo:l,entries:s,fetchStatus:i,gifMetadata:r,inboxType:o,isDmReceiptSettingEnabled:c,cardUrl:e,isNewGroupConversation:d,isUploading:u,media:p,mediaUploadProgress:g,newConversationParticipants:y,perspective:h,quickReplyOptions:_,tweetAttachment:b}})).propsFromActions((({conversationId:e})=>({acceptConversation:i.acceptConversation,addMedia:x(e),saveText:r.f,addToast:c.b,addWelcomeMessageToConversation:i.addWelcomeMessageToConversation,cancelUpload:Object(_.a)(e),createLocalApiErrorHandler:Object(b.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_CONVERSATION"),fetchConversationFuture:i.fetchConversationFuture,fetchConversationHistoricalSnapshot:i.fetchConversationHistoricalSnapshot,fetchConversationHistory:i.fetchConversationHistory,fetchConversationIfNeeded:i.fetchConversationIfNeeded,fetchInboxIfNeeded:i.fetchInboxIfNeeded,fetchUpdatesIfNeeded:i.fetchUpdatesIfNeeded,leaveConversation:i.leaveConversation,removeMedia:Object(_.b)(e),removeText:r.d,sendMessage:r.m,updateConversationReadState:i.updateConversationReadState,updateTweetDetailNav:g.b,updateTyping:i.updateTyping,removeConversation:i.removeConversation,popOutConversation:i.popOutConversation}))).withAnalytics(),M=a("I2k/"),O=a("4AMG"),A=a("uB9N"),D=a("htvZ"),P=a("v//M"),U=a("3XMw"),H=a.n(U),N=a("J2UM"),j=a("07FG"),B=a("I8M8"),W=a("yoO3"),q=a("7myi"),V=a("pHkl"),z=a("883S"),Q=a("z0MJ"),G=a.n(Q),Y=a("Es6L"),X=a("LsPn"),$=a("sl05"),J=a("GSsg"),Z=a("v6aA"),ee=a("EbOo");var te=Object(h.a)().propsFromActions((()=>({addToast:c.b,block:y.e.block,createLocalApiErrorHandler:Object(b.createLocalApiErrorHandlerWithContextFactory)("UNTRUSTED_CONVERSATION_ACTIONS"),muteDMUser:i.muteDMUser,unmuteDMUser:i.unmuteDMUser,unblock:y.e.unblock}))).withAnalytics({element:"untrusted_interstitial"}),ae=(a("AQ79"),a("u0B7")),ne=a("97Jx"),le=a.n(ne),se=a("tZH3"),ie=a("/yvb"),re=a("efqG");const oe=H.a.ccf2f24e,ce=H.a.ib3fe8aa;var de=({isGroup:e,onBlockClick:t,onReportClick:a,requestorScreenName:n})=>{const s={type:"destructiveOutlined"},i=l.a.createElement(ie.a,le()({},s,{accessibilityRole:"button"}),ce),r=l.a.createElement(ie.a,le()({},s,{onPress:a}),oe),o=l.a.useCallback(((e,s)=>l.a.createElement(se.a,{dismiss:e,flatBorders:"sheet"===s,onBlockClick:t,onReportClick:a,requestorScreenName:n,showBlock:!0,showCancel:"sheet"===s})),[t,a,n]);return e?r:l.a.createElement(re.a,{renderContent:o},i)},ue=a("MWbm"),me=a("cHvH"),pe=a("rHpw");const ge=e=>{const t=l.a.useContext(Z.a),a=t.featureSwitches.isTrue("dm_vdl_enabled")&&t.featureSwitches.isTrue("dm_vdl_chat_p0_enabled"),{loggedInUserId:n}=t,s=()=>e.onAccept(),i=()=>e.onBlock(),r=()=>e.onReport(),o=()=>e.onLeave();return l.a.createElement(me.a,null,(({windowWidth:t})=>{const c=t<=pe.a.theme.breakpoints.small;return l.a.createElement(ue.a,{style:ye.actionsContainer},a&&l.a.createElement(ie.a,{onPress:s,size:"medium",style:[ye.actionFullWidth,ye.actionMarginBottom],type:"primaryOutlined"},e.acceptButtonText),l.a.createElement(ue.a,{style:c?ye.actionFullWidth:[ye.actionHalfWidth,ye.actionMarginRight]},l.a.createElement(de,{isGroup:e.isGroup,onBlockClick:i,onReportClick:r,requestorScreenName:Object(_.m)(e.conversation,n).screenName})),l.a.createElement(ie.a,{onPress:o,size:"medium",style:c?[ye.actionFullWidth,ye.actionMarginTop]:[ye.actionHalfWidth,ye.actionMarginLeft],type:"destructiveOutlined"},e.declineButtonText),!a&&l.a.createElement(ie.a,{onPress:s,size:"medium",style:[ye.actionFullWidth,ye.actionMarginTop],type:"primaryOutlined"},e.acceptButtonText))}))},ye=pe.a.create((e=>({actionsContainer:{display:"flex",flexWrap:"wrap",flexDirection:"row"},actionFullWidth:{width:"100%"},actionHalfWidth:{width:`calc(50% - ${e.spaces.space4})`},actionMarginRight:{marginRight:e.spaces.space4},actionMarginLeft:{marginLeft:e.spaces.space4},actionMarginTop:{marginTop:e.spaces.space12},actionMarginBottom:{marginBottom:e.spaces.space12}})));var he=a("aITJ"),_e=a("t62R"),be=a("eb3s"),ve=a("vMjK"),ke=a("24HD"),fe=a("zCf4");const Fe=H.a.da878dc0,Te=H.a.d96cf7ce,Se=(H.a.gde6b425,H.a.e308019b,H.a.gf5e9ea6,H.a.hc52446c),Ee=H.a.f7e1ad65,Ce={headline:H.a.gdf4b790,text:H.a.bbf83d84,confirmButtonLabel:H.a.bb1d57b6},Ie=pe.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:"1px",paddingVertical:e.spaces.space20,paddingHorizontal:e.componentDimensions.gutterHorizontal},copy:{paddingBottom:e.spaces.space20}})));var Re=te((e=>{const{analytics:t,conversation:a}=e,n=l.a.useContext(Z.a),s=Object(fe.f)(),r=Object(fe.g)(),[o,c]=l.a.useState(!1),[d,u]=l.a.useState(!1),m=l.a.useCallback((()=>({items:[{conversation_type:a.type===i.CONVERSATION_TYPE.GROUP?V.l.GROUP:V.l.ONE_TO_ONE}]})),[a.type]),p=l.a.useCallback(((e,a)=>{t.scribe({action:e,data:a||m()})}),[t,m]);l.a.useEffect((()=>{p("impression")}),[p]);const g=()=>{c(!0),u(!1)},y=()=>{c(!1)},h=()=>{u(!1)},b=()=>{var t;const{conversationId:n,inboxType:l,leaveConversation:s}=e,o=a.type===i.CONVERSATION_TYPE.GROUP?"leave_group":"delete_thread",d=(null==a?void 0:a.participants.length)||0,u=(null==r||null==(t=r.state)?void 0:t.position)||0,m={conversation_type:(null==a?void 0:a.type)===i.CONVERSATION_TYPE.GROUP?V.l.GROUP:V.l.ONE_TO_ONE,conversation_id:n,conversation_participant_count:d,position:u,inbox_type:Object(_.l)(l),entry_point:V.c.REQUEST_ACTION_SHEET};c(!1),s({conversationId:n}),p(o,m),v()},v=()=>{const{inboxType:t}=e;s.push(Object(_.g)(t))},k=()=>{(()=>{var t;const{acceptConversation:n,analytics:l,conversationId:s,inboxType:o}=e,c=(null==a?void 0:a.participants.length)||0,d=(null==r||null==(t=r.state)?void 0:t.position)||0;s&&(n(s),l.scribe({action:"accept",data:{conversation_id:s,conversation_type:a.type===i.CONVERSATION_TYPE.GROUP?V.l.GROUP:V.l.ONE_TO_ONE,conversation_participant_count:c,entry_point:V.c.REQUEST_ACTION_SHEET,inbox_type:Object(_.l)(o),position:d}}))})()},f=t=>()=>{const{addToast:a,block:n,createLocalApiErrorHandler:l}=e;u(!1),n(t).then((()=>{a({action:{label:ve.c,onAction:F(t)},text:ve.a})}),l(ee.a)),p("block")},F=t=>()=>{const{createLocalApiErrorHandler:a,unblock:n}=e;n(t).catch(a(ae.a)),p("unblock")},T=(a&&a.type)===i.CONVERSATION_TYPE.GROUP;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ue.a,{style:Ie.root},(e=>{const{loggedInUserId:t}=n;return l.a.createElement(_e.b,{style:Ie.copy},e?Se:Ee({senderName:Object(_.m)(a,t).name}))})(T),l.a.createElement(ge,{acceptButtonText:Fe,conversation:a,declineButtonText:Te,isGroup:T,onAccept:k,onBlock:()=>{c(!1),u(!0)},onLeave:g,onReport:()=>{const{analytics:t,conversationId:a,inboxType:n}=e;a&&(p("report"),s.push(Object(_.j)(a,window.location.pathname,t.contextualScribeNamespace,n)))}})),he.b.isKaiOS()?l.a.createElement(X.a,{leftText:Te,onLeftClick:g,onRightClick:k,rightText:Fe}):null,o?l.a.createElement(be.a,{confirmButtonLabel:Ce.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:Ce.headline,onCancel:y,onConfirm:b,text:Ce.text}):null,d?(()=>{const{loggedInUserId:e}=n,{idStr:t,screenName:l}=Object(_.m)(a,e);return Object(ke.j)({confirmation:Object(ke.f)(l),onClose:h,handleConfirm:f(t)})})():null)})),Le=a("yw4N"),Ke=a("rFBM"),xe=a("mw9i");const we=(e,t,a)=>{let n;return a?n={tweet:a}:t?t.mediaFile?n={media:t}:t.externalMediaDetails&&e&&(n={media:t,provider:e.provider,gifUrl:e.url}):n=null,n};var Me=a("jTgF"),Oe=a("+d3d"),Ae=a("mN6z");const De=H.a.badb01a0,Pe=H.a.d6b11d9c,Ue=H.a.i7ca1446,He=e=>e&&(e.tweet||e.media);class Ne extends l.a.PureComponent{constructor(e,t){super(e,t),this._composer=l.a.createRef(),this._handleLivePipelineUpdate=()=>{this._fetchUpdatesIfNeeded(),this._updatePolling&&this._updatePolling.restart()},this._fetchUpdatesIfNeeded=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchUpdatesIfNeeded:a,isDmReceiptSettingEnabled:n}=this.props;a(n?{active_conversation_id:e,dm_users:!0}:{}).catch(t())},this._handleInitialFetch=()=>{this._initialFetch()},this._initialFetch=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchInboxIfNeeded:a,fetchUpdatesIfNeeded:n}=this.props;return a().then((()=>{if(e)return this._fetchConversation(e).then((()=>this._requestWelcomeMessage(e)))})).then((()=>n())).catch(t()).finally((()=>{this._updatePolling&&this._updatePolling.start()}))},this._isUntrustedConversation=e=>{const{isNewGroupConversation:t}=this.props;return!(null!=e&&e.trusted||t)},this._leaveConversation=()=>{const{conversationId:e,createLocalApiErrorHandler:t,leaveConversation:a}=this.props;a({conversationId:e}).catch(t({showToast:!0}))},this._acceptConversation=e=>{const{acceptConversation:t,createLocalApiErrorHandler:a}=this.props;t(e).then((()=>{he.b.isMobileOS()&&this._fetchConversation(e)})).catch(a({showToast:!0}))},this._renderActions=()=>{const{conversation:e,conversationId:t,inboxType:a}=this.props;return e&&this._isUntrustedConversation(e)?e.read_only?null:t&&l.a.createElement(Re,{acceptConversation:this._acceptConversation,conversation:e,conversationId:t,inboxType:a,leaveConversation:this._leaveConversation}):l.a.createElement(l.a.Fragment,null,this._renderComposerBar(),he.b.isKaiOS()?l.a.createElement(X.a,{leftText:Ue,onLeftClick:this._handleInfoClick,onRightClick:this._handleComposeClick,rightText:De}):null)},this._render=()=>{var e,t,a;const{analytics:n,conversation:s,conversationId:i,drawerHeader:r,inboxType:o,isWide:c,location:d,onConversationProfileVisibilityChange:u,perspective:m}=this.props,{attachment:p,composerHeight:g}=this.state;return l.a.createElement(D.b,{key:i},l.a.createElement(Ke.a,{allowDragDrop:!He(p),onFilesAdded:this._handleDragDrop,style:$.a.dragDrop},l.a.createElement(Le.a,{style:[$.a.scrollView,!Object(Y.a)()&&!this._isUntrustedConversation(s)&&{paddingBottom:g}]},m&&s&&(null==d||null==(e=d.state)||!e.entryPoint||this.state.hasLoadedSnapshot)?l.a.createElement(O.a,{conversation:s,drawerHeader:r,inboxType:o,isWide:c,messageSearchEntryId:null==d||null==(t=d.state)?void 0:t.entryPoint,onConversationProfileVisibilityChange:u,onForwardRequest:this._handleForwardRequest,onHistoryRequest:null!=d&&null!=(a=d.state)&&a.entryPoint?this._handleRelativeHistoryRequest:this._handleHistoryRequest,perspective:m,scribeNamespace:n.contextualScribeNamespace,shouldScrollToCenter:this.state.shouldScrollToCenter,style:$.a.activity}):null),this._renderActions()))},this._handleNavHeightChange=e=>{this.setState({composerHeight:`${e}px`})},this._handleTyping=()=>{this._throttleSaveDraftText(),this._throttleUpdateTyping()},this._throttleUpdateTyping=Object(Oe.a)((()=>{const{conversationId:e,createLocalApiErrorHandler:t,updateTyping:a}=this.props;e&&a({conversationId:e}).catch(t())}),2e3,{trailing:!1}),this._throttleSaveDraftText=Object(Oe.a)((()=>{const{conversationId:e}=this.props;e&&this._handleSaveDraftText()}),1e3,{leading:!1}),this._handleDragDrop=e=>{this._currentComposer&&this._currentComposer.handleAddMediaFiles(e)},this._handleForwardRequest=()=>{const{conversation:e,conversationId:t,createLocalApiErrorHandler:a,fetchConversationFuture:n}=this.props;this.setState({shouldScrollToCenter:!1}),null!=e&&e.max_search_entry_id&&n({conversationId:t}).catch(a())},this._handleHistoryRequest=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchConversationHistory:a}=this.props;a({conversationId:e}).catch(t())},this._handleRelativeHistoryRequest=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchConversationHistory:a}=this.props;this.setState({shouldScrollToCenter:!1}),a({conversationId:e,isSearch:!0}).catch(t())},this._willSendMessage=(e,t,a)=>{const{analytics:n,cardUrl:l,conversation:s,conversationId:r,gifMetadata:o,tweetAttachment:c}=this.props,{attachment:d}=this.state,u=null!=s&&s.participants?s.participants.length:0,m=(null==s?void 0:s.type)===i.CONVERSATION_TYPE.GROUP;e.quickReply||a||(this._currentComposer&&this._currentComposer.clear(),this._currentComposer&&this._currentComposer.focus());const p=((e,t,a,n,l)=>{var s;if(e)return"gif";if(t)return"card";if(n)return"tweet";const i=null==l||null==(s=l.media)?void 0:s.mediaFile,r=null!=i&&i.isVideo?"video":null!=i&&i.isGif?"gif":"photo";return i?r:a?"text":"unknown"})(o,l,t,c,d);return r&&n.scribe({...n.contextualScribeNamespace,element:p,action:"send_dm",data:{conversation_id:r,conversation_participant_count:u,conversation_type:m?V.l.GROUP:V.l.ONE_TO_ONE}}),this.setState({isSending:!0}),p},this._didSendMessage=(e,t,a,n,l)=>{if(l){const{analytics:e,history:n,newConversationParticipants:l}=this.props;e.scribe({...e.contextualScribeNamespace,element:a,action:"send_dm",data:{conversation_id:t,conversation_participant_count:l?l.length+1:0,conversation_type:V.l.GROUP}}),this.setState({attachment:null}),n.replace(`/messages/${t}`)}else!e.quickReply&&n&&(this._currentComposer&&this._currentComposer.clear(),this._currentComposer&&this._currentComposer.focus());this.setState({isSending:!1})},this._failedToSendMessage=(e,t)=>{const{createLocalApiErrorHandler:a}=this.props;if(t){const{addToast:t,createLocalApiErrorHandler:a}=this.props;if(this.setState({isSending:!1}),Object(Me.d)(e)&&e.code===B.b.CANCELED)return;if(Object(Me.d)(e)){const a=Object(Me.b)(e,Pe);a&&t(a)}else a(z.b)(e)}else a(z.b)},this._handleSendMessage=(e,t,a)=>{var n,l;const{cardUrl:s,conversationId:i,history:r,location:o,newConversationParticipants:c,perspective:d,sendMessage:u,tweetAttachment:m}=this.props,{attachment:p}=this.state,g=!(!p||!p.media),y=this._willSendMessage(e,t,g);if(!i){return u({senderId:d,recipients:c&&c.map((({data:e})=>e.id_str)),text:t,tweetAttachment:m}).then((t=>{this._didSendMessage(e,t,y,g,!0)})).catch((e=>{this._failedToSendMessage(e,!0)})),Promise.resolve()}return!this.state.attachment||null!=(n=this.state.attachment)&&null!=(l=n.media)&&l.uploading||(this.setState({attachment:null}),r.replace(o.pathname)),u({senderId:d,cardUrl:s,conversationId:i,text:t,tweetAttachment:m,...e&&e.quickReply&&{quickReply:e.quickReply}}).then((()=>{this._didSendMessage(e,i,y,g,!1)})).catch((e=>{this._failedToSendMessage(e,!1)}))},this._handlePopOutConvo=()=>{const{conversationId:e,popOutConversation:t}=this.props;t(e)},this._handleInfoClick=()=>{const{conversationId:e,history:t}=this.props;e&&t.push(`/messages/${e}/info`)},this._handleComposeClick=()=>{this._currentComposer&&this._currentComposer.focus()},this._handleSaveDraftText=()=>{const{conversationId:e,saveText:t}=this.props;e&&this._currentComposer&&t(e,this._currentComposer.value())},this.state={attachment:we(e.gifMetadata,e.media,e.tweetAttachment),composerHeight:pe.a.theme.componentDimensions.appBarHeight,hasLoadedSnapshot:!1,isSending:!1,shouldScrollToCenter:!1}}componentDidMount(){var e,t;return this._initializePolling({interval:3e3}),this._initializeLivePipeline(),this._focusComposerIfNeeded(),null!=(e=this.props.location)&&null!=(t=e.state)&&t.entryPoint&&this.setState({shouldScrollToCenter:!0}),this._initialFetch()}_focusComposerIfNeeded(){G()((()=>Object(N.a)().then((({KEYBOARD:e,MOUSE:t,detectedType:a})=>{const n=this.props.quickReplyOptions;(a(e)||a(t))&&!n&&this._currentComposer&&this._currentComposer.focus()}))))}_initializeLivePipeline(){const{conversationId:e}=this.props;Object(s.h)().then((({LivePipeline:t})=>{e&&t.isSupportedAndReady(this.context.featureSwitches)&&this.context.featureSwitches.isTrue("livepipeline_dm_features_enabled")&&!this._livePipelineSubscription&&(this._livePipelineSubscription=t.get().subscribeTopic(`/dm_update/${e}`,this._handleLivePipelineUpdate),this._initializePolling({interval:1e4}))}))}_initializePolling({interval:e}){this._updatePolling&&this._updatePolling.stop(),this._updatePolling=new J.a(this._fetchUpdatesIfNeeded,{interval:e})}componentWillUnmount(){const{conversation:e,conversationId:t,removeConversation:a}=this.props,n=(null==e?void 0:e.entries)||[];this._updatePolling&&this._updatePolling.stop(),this._updatePolling=void 0,this._livePipelineSubscription&&this._livePipelineSubscription.teardown(),0===n.length&&a(t),1===n.length&&"welcome_message_create"===n[0].type&&a(t)}componentDidUpdate(e,t){var a,n,l;const{conversation:s,conversationId:i,fetchStatus:r,isUploading:o,location:c,quickReplyOptions:d,updateConversationReadState:m}=this.props;var p;((null==c||null==(a=c.state)?void 0:a.entryPoint)!==(null==(n=e.location)||null==(l=n.state)?void 0:l.entryPoint)&&i&&this._fetchConversation(i),i!==e.conversationId)?(i&&this._fetchConversation(i),this._focusComposerIfNeeded(),this._livePipelineSubscription&&this._livePipelineSubscription.teardown(),this._initializeLivePipeline()):((null==s?void 0:s.sort_event_id)!==(null==(p=e.conversation)?void 0:p.sort_event_id)&&m(i),o||!e.isUploading||d||this._currentComposer&&this._currentComposer.focus(),e.fetchStatus===u.a.LOADED&&r!==u.a.LOADED&&i&&this._fetchConversation(i))}UNSAFE_componentWillReceiveProps(e){const{media:t}=this.props,{media:a}=e;Object(Ae.a)(t,a)||this.setState({attachment:we(e.gifMetadata,e.media,e.tweetAttachment)})}render(){const{fetchStatus:e}=this.props;return l.a.createElement(W.a,null,l.a.createElement(xe.a,{style:[$.a.root,he.b.isKaiOS()&&$.a.kaiOSFix]},l.a.createElement(P.a,{fetchStatus:e,onRequestRetry:this._handleInitialFetch,render:this._render})))}_renderComposerBar(){const{addMedia:e,analytics:t,cardUrl:a,conversation:n,conversationId:s,dataSaverMode:i,draftText:r,dtabBarInfo:o,history:c,isUploading:d,mediaUploadProgress:u,quickReplyOptions:m,removeMedia:p,richTextInputContext:g,typeaheadWrapper:y}=this.props,{attachment:h,isSending:_}=this.state,b=this.props.prefillText||r;return null!=n&&n.read_only?null:l.a.createElement(A.a,{attachment:h,conversationId:s,disabled:d,dtabBarInfo:o,history:c,isCardPreviewTombstoned:Object(j.a)(a),isSending:_,isUploading:d,key:s,mediaUploadProgress:u,onAddMedia:e,onBlur:this._handleSaveDraftText,onHeightChange:this._handleNavHeightChange,onPrimaryAction:this._handleSendMessage,onTyping:i?this._throttleSaveDraftText:this._handleTyping,prefillText:"string"==typeof b?b:void 0,quickReplyOptions:m,ref:this._composer,removeMedia:p,richTextInputContext:g,scribeNamespace:t.contextualScribeNamespace,showPrimaryActionIconInsteadOfLabel:!0,typeaheadWrapper:y})}get _currentComposer(){return this._composer.current}_fetchConversation(e){var t;const{createLocalApiErrorHandler:a,fetchConversationHistoricalSnapshot:n,fetchConversationIfNeeded:l,location:s,updateConversationReadState:r}=this.props;var o;return null!=s&&null!=(t=s.state)&&t.entryPoint?(this.setState({hasLoadedSnapshot:!1}),n({conversationId:e,entryId:null==s||null==(o=s.state)?void 0:o.entryPoint}).then((e=>{var t,a;let n=!0;(null==e||null==(t=e.result)||null==(a=t.conversation_timeline)?void 0:a.status)===i.PAGINATION_STATUS.AT_END&&(n=!1),this.setState({hasLoadedSnapshot:!0,shouldScrollToCenter:n})})).catch((e=>(this.setState({hasLoadedSnapshot:!0}),a(e))))):l({conversationId:e}).then((()=>r(e))).catch(a(Object(M.a)(e)))}_requestWelcomeMessage(e){var t;const{addWelcomeMessageToConversation:a,conversation:n,createLocalApiErrorHandler:l,location:s}=this.props,{text:r}=s.query,o=Array.isArray(s.query.welcome_message_id)?s.query.welcome_message_id[0]:s.query.welcome_message_id,c=!!this.state.attachment||!(!r||o),d=!n||!n.type||n.type===i.CONVERSATION_TYPE.GROUP,u=n&&(null==n||null==(t=n.participants)?void 0:t.length)<=1;return c||d||u?Promise.resolve():a(e,o).catch(l({showToast:!1}))}}Ne.contextType=Z.a,Ne.defaultProps={isNewGroupConversation:!1,typeaheadWrapper:q.a};const je=w(Ne);t.a=je},PnKw:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));a("kYxP");var n=a("ERkP"),l=a.n(n),s=a("TIdA"),i=a("t62R"),r=a("A91F"),o=a("/yvb"),c=a("rHpw"),d="inlinePrompt",u="inlinePrompt-primaryAction",m="inlinePrompt-secondaryAction",p="inlinePrompt-centeredImageContainer",g=a("MWbm");class y extends l.a.Component{constructor(...e){super(...e),this._renderImage=(e,t)=>{const a=l.a.createElement(s.a,{accessibilityLabel:"",aspectMode:r.a.exact(e.width/e.height),backgroundColor:e.backgroundColor,customVariants:t,image:e});return e.isCentered?l.a.createElement(g.a,{style:h.centeredImage,testID:p},l.a.createElement(g.a,{style:{width:`${e.width}px`,height:`${e.height}px`}},a)):a},this._renderTitle=()=>{const{headline:e}=this.props;return e?l.a.createElement(i.b,{accessibilityRole:"heading",align:"left",size:"title3",style:h.flexGrow,weight:"heavy",withHashflags:!0},e):null},this._renderBodyText=()=>{const{subtext:e}=this.props;return e?l.a.createElement(i.b,{align:"left",color:"gray700",style:this.styles.body,withHashflags:!0},e):null},this._renderAction=({action:e,buttonSize:t,buttonType:a,style:n,testID:s})=>{const{secondaryAction:i}=this.props,{link:r,onClick:c,text:d}=e;return l.a.createElement(g.a,{style:[this.styles.actionContainer,n,{justifyContent:"flex-start"}],testID:s},l.a.createElement(o.a,{link:r,onPress:c,size:t,style:{width:i?"100%":"auto"},type:a},d))}}render(){const{image:e,imageVariants:t,primaryAction:a,rightControl:n,secondaryAction:s,shouldRenderBorder:i}=this.props;return l.a.createElement(g.a,{style:i?[_.root,_.rootMargin]:h.root},l.a.createElement(l.a.Fragment,null,e?this._renderImage(e,t):null,l.a.createElement(g.a,{style:this.styles.rootPadding,testID:d},this._renderTitle(),this._renderBodyText(),a?this._renderAction({action:a,buttonType:"primaryFilled",style:this.styles.primaryAction,buttonSize:"large",testID:u}):null,s?this._renderAction({action:s,buttonType:"primaryOutlined",style:this.styles.secondaryAction,buttonSize:"large",testID:m}):null)),n?l.a.createElement(g.a,{style:h.rightControl},n):null)}get styles(){return this.props.isCompact?v:b}}y.defaultProps={shouldRenderBorder:!1};const h=c.a.create((e=>({root:{backgroundColor:e.colors.cellBackground},flexGrow:{flexGrow:1},centeredImage:{display:"flex",flexDirection:"row",justifyContent:"center"},rightControl:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,position:"absolute",right:0,top:0}}))),_=c.a.create((e=>({root:{borderColor:e.colors.nestedBorderColor,borderWidth:e.borderWidths.small,borderRadius:e.borderRadii.xLarge,overflow:"hidden"},rootMargin:{marginLeft:e.spaces.space16,marginRight:e.spaces.space16}}))),b=c.a.create((e=>({rootPadding:{padding:e.spaces.space32},body:{marginTop:e.spaces.space8},actionContainer:{flexDirection:"row"},primaryAction:{marginTop:e.spaces.space28},secondaryAction:{marginTop:e.spaces.space16}}))),v=c.a.create((e=>({rootPadding:{padding:e.spaces.space16},body:{marginTop:e.spaces.space2},actionContainer:{flexDirection:"row"},primaryAction:{marginTop:e.spaces.space4},secondaryAction:{marginTop:e.spaces.space2}})))},QvgI:function(e,t,a){"use strict";a("kYxP"),a("Qavd");var n=a("ERkP"),l=a.n(n),s=a("BUB3"),i=a("rxPX"),r=a("0KEI");const o=(e,{module:t})=>t.selectItems(e),c=(e,{module:t})=>t.selectFetchStatus(e);var d=Object(i.a)().propsFromState((()=>({fetchStatus:c,sliceItems:o}))).adjustStateProps((({fetchStatus:e,sliceItems:t})=>{const a=(e=>{var t,a;return(null==(t=e.find((e=>e.groupData)))||null==(a=t.groupData)?void 0:a.result)||[]})(t),n=(e=>{var t,a;return(null==(t=e.find((e=>e.peopleData)))||null==(a=t.peopleData)?void 0:a.result)||[]})(t),l=(e=>{var t,a;return(null==(t=e.find((e=>e.messageData)))||null==(a=t.messageData)?void 0:a.conversationIds)||[]})(t);return{entryIds:(e=>{var t,a;return(null==(t=e.find((e=>e.messageData)))||null==(a=t.messageData)?void 0:a.entryIds)||[]})(t),fetchStatus:e,groupConversationIds:a,groupHighlightingTokens:(e=>{var t,a;return null==(t=e.find((e=>e.groupData)))||null==(a=t.groupData)?void 0:a.highlightingTokens})(t),messageConversationIds:l,messageHighlightingTokens:(e=>{var t,a;return null==(t=e.find((e=>e.messageData)))||null==(a=t.messageData)?void 0:a.highlightingTokens})(t),peopleHighlightingTokens:(e=>{var t,a;return null==(t=e.find((e=>e.peopleData)))||null==(a=t.peopleData)?void 0:a.highlightingTokens})(t),peopleSearchConversationIds:n,sliceItems:t}})).propsFromActions((({module:e})=>({createLocalApiErrorHandler:Object(r.createLocalApiErrorHandlerWithContextFactory)("DM_SEARCH_ALL_CONTEXT"),fetchSearchIfNeeded:e.fetchIfNeeded}))),u=a("d9IC"),m=a("MDbM"),p=a("v//M"),g=a("3XMw"),y=a.n(g),h=a("MWbm"),_=a("0yYu"),b=a("t62R"),v=a("rHpw"),k=a("v6aA"),f=a("lBmi"),F=a("91AQ"),T=a("6ZHn");const S=y.a.c94ac69e,E=y.a.a2f81050,C=y.a.g2fd3206,I=y.a.ffd9cfe6;class R extends l.a.Component{constructor(...e){super(...e),this._groupBucketSize=this.context.featureSwitches.getNumberValue("dm_inbox_search_groups_bucket_size"),this._messagesBucketSize=this.context.featureSwitches.getNumberValue("dm_inbox_search_messages_bucket_size"),this._peopleBucketSize=this.context.featureSwitches.getNumberValue("dm_inbox_search_people_bucket_size"),this._renderSearchResults=()=>{const{groupConversationIds:e,messageConversationIds:t,peopleSearchConversationIds:a,renderEmptyState:n}=this.props,s=a.length&&e.length,i=this._groupBucketSize<e.length,r=this._messagesBucketSize<t.length,o=this._peopleBucketSize<a.length;return(null==e?void 0:e.length)||a.length||t.length?l.a.createElement(l.a.Fragment,null,a.length?this._renderPeopleSection():null,s&&!o?l.a.createElement(_.a,null):null,o?this._renderDMSearchFooter(C):null,e.length?this._renderGroupsSection():null,i?this._renderDMSearchFooter(S):null,t.length?this._renderMessagesSection():null,r?this._renderDMSearchFooter(E):null):n()},this._handleFetch=()=>{const{createLocalApiErrorHandler:e,fetchSearchIfNeeded:t}=this.props;t().catch(e())},this._renderDMSearchFooter=e=>{const{location:t}=this.props;return l.a.createElement(h.a,{style:L.header},l.a.createElement(b.b,{link:{pathname:t.pathname,state:{tab:e}}},I))},this._renderDMHeader=({headerText:e,icon:t})=>l.a.createElement(u.a,{headerText:e,icon:t}),this._renderGroupsSection=()=>{const{groupConversationIds:e,groupHighlightingTokens:t,pinConversation:a,renderInboxItem:n,unpinConversation:s}=this.props;return l.a.createElement(l.a.Fragment,null,this._renderDMHeader({icon:f.a,headerText:S}),e.map(((l,i)=>l?n({conversationIds:e,pinConversation:a,unpinConversation:s,highlightingTokens:t})(l):null)).slice(0,this._groupBucketSize))},this._renderMessagesSection=()=>{const{entryIds:e,messageConversationIds:t,messageHighlightingTokens:a,pinConversation:n,renderInboxItem:s,unpinConversation:i}=this.props;return l.a.createElement(l.a.Fragment,null,this._renderDMHeader({icon:F.a,headerText:E}),e.map(((l,r)=>l?((l,r)=>s({conversationIds:t,isMessageItem:!0,messageIds:e,pinConversation:n,unpinConversation:i,highlightingTokens:a})(l))(l):null)).slice(0,this._messagesBucketSize))},this._renderPeopleSection=()=>{const{peopleHighlightingTokens:e,peopleSearchConversationIds:t,pinConversation:a,renderInboxItem:n,unpinConversation:s}=this.props;return l.a.createElement(l.a.Fragment,null,this._renderDMHeader({icon:T.a,headerText:C}),t.map(((l,i)=>l?n({conversationIds:t,pinConversation:a,unpinConversation:s,highlightingTokens:e})(l):null)).slice(0,this._peopleBucketSize))}}componentDidUpdate(e){const{fetchStatus:t,module:a}=this.props;e.module!==a&&t!==m.a.FAILED&&this._handleFetch()}componentDidMount(){this._handleFetch()}render(){const{fetchStatus:e,loadingLabel:t}=this.props;return l.a.createElement(p.a,{accessibilityLabel:t,fetchStatus:e,onRequestRetry:this._handleFetch,render:this._renderSearchResults})}}R.contextType=k.a;const L=v.a.create((e=>({header:{backgroundColor:e.colors.cellBackground,paddingLeft:e.spaces.space16,paddingVertical:e.spaces.space12,alignItems:"center",flexDirection:"row",justifyContent:"space-between",borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,borderTopColor:e.colors.borderColor}})));var K=d(R),x=a("hqKg"),w=a("wAC9"),M=a("q+MS"),O=a("pHkl");var A=e=>Object(w.a)({contextSuffix:"DM_SEARCH_SLICE",getFetchApiEndpoint:e=>e.DirectMessagesGraphQL.fetchDMAllSearch,sliceKey:`${O.j}-${e}`,getEndpointParams:t=>({...t,query:e}),mapEntitiesToActions:M.a});const D=(e,t)=>t.query;var P=Object(i.a)().propsFromState((()=>({sliceModule:Object(x.createSelector)(D,(e=>e?A(e):void 0))})))((e=>{const{loadingLabel:t,location:a,pinConversation:n,query:s,renderEmptyState:i,renderInboxItem:r,sliceModule:o,unpinConversation:c}=e;return o?l.a.createElement(K,{loadingLabel:t,location:a,module:o,pinConversation:n,query:s,renderEmptyState:i,renderInboxItem:r,unpinConversation:c}):i()})),U=a("MMRb"),H=a("kGix");const N=U.selectRecentSearches,j=(e,t)=>t.query?U.selectSearchConversations(e,t.query):[],B=(e,t)=>t.query?U.selectSearchFetchStatus(e,t.query):H.a.LOADED,W=(e,t)=>t.conversationIds||[],q=(e,t)=>null!=e&&e.length?t.filter((t=>e.indexOf(t)>-1)):e;var V,z,Q=Object(i.a)().propsFromState((()=>({conversationIds:W,recentSearches:N,searchFetchStatus:B,searchConversationIds:j}))).adjustStateProps((({conversationIds:e,recentSearches:t,searchConversationIds:a,searchFetchStatus:n})=>({conversationIds:e,recentSearches:t,searchFetchStatus:n,searchConversationIds:q(a,e)}))).propsFromActions((()=>({addRecentSearch:U.addRecentSearches,createLocalApiErrorHandler:Object(r.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_SEARCH"),search:U.searchConversations,clearRecentSearch:U.clearRecentSearch,clearRecentSearches:U.clearRecentSearches}))),G=a("s14A"),Y=a("h3MB"),X=(a("YWiL"),a("mN6z")),$=a("TEoO"),J=a("NjAB"),Z=a("Fr3L"),ee=a("uDfI"),te=a("s8G+"),ae=a("DQzJ");const ne=void 0!==V?V:V=a("K8Kw"),le=void 0!==z?z:z=a("uMiA"),se="DM_CONVERSATION_SEARCH",ie={context:se},re=e=>e,oe=e=>{const{footer:t,noItemsRenderer:a,onScrollEnd:n,pinConversation:s,renderInboxItem:i,searchTerm:r,tabType:o,unpinConversation:c}=e,d=Object(ee.c)(),u=Object(te.a)("dm_inbox_search_query_highlighting_conversation_results_enabled"),m=o===O.k.GROUPS?ne:le,{data:p,fetchNext:g,hasNext:y}=Object(ae.a)(m,{query:r,withConversationQueryHighlights:u});let h;var _;if(null!=p&&p.dm_group_convo_slice_result)h=null==p||null==(_=p.dm_group_convo_slice_result)?void 0:_.items;else if(null!=p&&p.dm_people_convo_slice_result){var b;h=null==p||null==(b=p.dm_people_convo_slice_result)?void 0:b.items}const{entities:v,highlightingTokens:k,normalizedConversations:f}=l.a.useMemo((()=>{var e,t;const a=(null==(e=h)?void 0:e.map((e=>null==e?void 0:e.dm_convo_search)))||{},n=u?null==(t=h)?void 0:t.map((e=>{var t;return null==e||null==(t=e.highlighting)?void 0:t.query_tokens})):void 0,l=Object(J.b)(a,[Y.a]);return{normalizedConversations:l,entities:{...null==l?void 0:l.entities},highlightingTokens:n}}),[h,u]),F=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(p);return l.a.useEffect((()=>{Object(X.a)(p,F)||d(Object(M.a)(v,!0))}),[v,p,F,d]),l.a.createElement($.a,{cacheKey:se,footer:y?null:t,identityFunction:re,items:null==f?void 0:f.result,noItemsRenderer:a,onNearEnd:g,onScrollEnd:n,renderer:i({conversationIds:null==f?void 0:f.result,isMessageItem:!1,pinConversation:s,unpinConversation:c,highlightingTokens:k}),withoutHeadroom:!0})};function ce(e){return l.a.createElement(Z.a,{errorConfig:ie},l.a.createElement(oe,e))}var de,ue=a("ZYFu");const me=void 0!==de?de:de=a("y59G"),pe="DM_MESSAGE_SEARCH",ge={context:pe},ye=e=>e,he=e=>{var t;const{footer:a,noItemsRenderer:n,onScrollEnd:s,pinConversation:i,renderInboxItem:r,searchTerm:o,unpinConversation:c}=e,d=Object(ee.c)(),u=Object(te.a)("dm_inbox_search_message_attachment_previews_enabled"),m=Object(te.a)("dm_inbox_search_query_highlighting_message_results_enabled"),p=Object(te.a)("rito_safety_mode_blocked_profile_enabled"),g=Object(te.a)("super_follow_user_api_enabled"),{data:y,fetchNext:h,hasNext:_}=Object(ae.a)(me,{query:o,withAttachments:u,withMessageQueryHighlights:m,withSafetyModeUserFields:p,withSuperFollowsUserFields:g}),{entities:b,highlightingTokens:v,normalizedConversations:k,normalizedMessages:f}=l.a.useMemo((()=>{var e,t,a;const n=null==y||null==(e=y.dm_message_slice_result)||null==(t=e.items)?void 0:t.map((e=>{var t,a;return null==e||null==(t=e.dm_event)||null==(a=t.legacy)?void 0:a.conversation})),l=null==y||null==(a=y.dm_message_slice_result)?void 0:a.items,s=m?null==l?void 0:l.map((e=>{var t;return null==e||null==(t=e.highlighting)?void 0:t.query_tokens})):void 0,i=Object(J.b)(n,[Y.a]),r=Object(J.b)(l,[Y.b]);return{normalizedConversations:i,normalizedMessages:r,entities:{...null==i?void 0:i.entities,...null==r?void 0:r.entities},highlightingTokens:s}}),[null==y||null==(t=y.dm_message_slice_result)?void 0:t.items,m]),F=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(y);return l.a.useEffect((()=>{Object(X.a)(y,F)||d(Object(M.a)(b,!0))}),[b,y,F,d]),l.a.createElement($.a,{cacheKey:pe,footer:_?null:a,identityFunction:ye,items:null==f?void 0:f.result,noItemsRenderer:n,onNearEnd:h,onScrollEnd:s,renderer:r({conversationIds:null==k?void 0:k.result,isMessageItem:!0,messageIds:null==f?void 0:f.result,pinConversation:i,unpinConversation:c,highlightingTokens:v}),withoutHeadroom:!0})};function _e(e){return l.a.createElement(Z.a,{errorConfig:ge},l.a.createElement(he,e))}var be=a("j7Bv"),ve=a("htQn"),ke=a("5mJL"),fe=a("/yvb"),Fe=a("VwDm"),Te=a("hOZg");const Se=y.a.dbd5d400;class Ee extends l.a.PureComponent{render(){const{clearRecentSearch:e,handleRecentSearchClick:t,recentSearch:a}=this.props,n=l.a.createElement(be.a,{Icon:Fe.a,color:"neutral",size:"xLarge",style:Ce.searchIcon}),s=[Ce.listItemView,Ce.bottomBorder];return l.a.createElement(ve.a,{onPress:t,style:s},l.a.createElement(h.a,null,l.a.createElement(ke.a,{avatarCell:n,avatarSize:"xLarge",cellStyle:Ce.avatarColumn},l.a.createElement(h.a,{style:Ce.container},l.a.createElement(b.b,{numberOfLines:1},a),l.a.createElement(fe.a,{accessibilityLabel:Se,borderColor:"transparent",icon:l.a.createElement(Te.a,null),onPress:e,type:"brandText"})))))}}const Ce=v.a.create((e=>({container:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},searchIcon:{marginRight:e.spaces.space12,padding:e.spaces.space4},avatarColumn:{flexGrow:1,minWidth:"32px"},bottomBorder:{borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},listItemView:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space12,width:"100%"}})));var Ie=Ee,Re=a("DbJc"),Le=a("AQ79"),Ke=a("tI3i"),xe=a.n(Ke),we=a("sNn6"),Me=a("IG4P"),Oe=a("RJrc"),Ae=a("TnY3"),De=a("FIs5"),Pe=a("cm6r"),Ue=a("6OUF"),He=a("k/OQ"),Ne=a("BcsE"),je=a("VY6S"),Be=a("95Se");const We=e=>e,qe=y.a.b08821f4,Ve=y.a.a66ac766,ze=y.a.fe61929e,Qe=y.a.a846382a,Ge=y.a.b9dae4f4,Ye=y.a.e7fb2028,Xe=y.a.ae111c99,$e=y.a.efb6c154,Je=y.a.e8581cce,Ze=y.a.f08940ac,et=y.a.gaae1fd6,tt=y.a.i5d7593a,at=y.a.f8321d82,nt=y.a.c94ac69e,lt=y.a.a2f81050,st=y.a.g2fd3206,it=y.a.fb3c8e74;class rt extends l.a.Component{constructor(...e){super(...e),this.state={debouncedQuery:"",isLoadingMore:!1,isRefreshing:!1},this._conversationHighlightingEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_query_highlighting_conversation_results_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),this._messageSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_message_results_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._modularSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_modular_results_enabled"),this._setInputRef=e=>{this._textInputRef=e},this._handleConversationClick=(e,t,a,n)=>{const{analytics:l}=this.props,s=(null==a?void 0:a.participants.length)||0,i=(null==a?void 0:a.type)===U.CONVERSATION_TYPE.GROUP;l.scribe({element:"thread",action:"click",data:{event_value:this.props.query.length,conversation_id:t,conversation_participant_count:s,conversation_type:i?O.l.GROUP:O.l.ONE_TO_ONE,position:n}})},this._renderEmptyDMSearchInbox=()=>{const{analytics:e,query:t}=this.props,{debouncedQuery:a}=this.state;return a&&t?(e.scribe({component:"search",element:"results",action:"empty"}),l.a.createElement(De.a,{buttonLink:"/messages/compose",buttonText:Ze,header:Xe({query:a}),message:this._messageSearchEnabled?Je:$e,onButtonPress:this._handleComposeButtonPress})):l.a.createElement(h.a,{style:ot.emptyState},l.a.createElement(b.b,{align:"center",color:"gray700"},this._messageSearchEnabled?tt:et))},this._renderRecentSearches=()=>{const{analytics:e,query:t,recentSearches:a}=this.props;return a.length&&!t?l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{analytics:e,clearRecentSearches:this._clearRecentSearches,headerText:it,withClearButton:!0}),a.map((e=>l.a.createElement(Ie,{clearRecentSearch:t=>this._handleClearRecentSearch(t,e),handleRecentSearchClick:()=>this._handleRecentSearchClick(e),key:e,recentSearch:e})))):this._renderEmptyDMSearchInbox()},this._renderAllDMSearchResultsTab=()=>{const{location:e,pinConversation:t,unpinConversation:a}=this.props,{debouncedQuery:n}=this.state;return n?l.a.createElement(P,{loadingLabel:Ve,location:e,pinConversation:t,query:n,renderEmptyState:this._renderEmptyDMSearchInbox,renderInboxItem:this._renderSearchInboxItem,unpinConversation:a}):this._renderEmptyDMSearchInbox()},this._renderConversationsTab=e=>{const{pinConversation:t,unpinConversation:a}=this.props,{debouncedQuery:n}=this.state;return l.a.createElement(ce,{footer:this._renderFooter(),noItemsRenderer:this._renderEmptyDMSearchInbox,onScrollEnd:this._handleScrollEnd,pinConversation:t,renderInboxItem:this._renderSearchInboxItem,searchTerm:n,tabType:e?O.k.GROUPS:O.k.PEOPLE,unpinConversation:a})},this._renderMessagesTab=()=>{const{pinConversation:e,unpinConversation:t}=this.props,{debouncedQuery:a}=this.state;return a?l.a.createElement(_e,{footer:this._renderFooter(),noItemsRenderer:this._renderEmptyDMSearchInbox,onScrollEnd:this._handleScrollEnd,pinConversation:e,renderInboxItem:this._renderSearchInboxItem,searchTerm:a,unpinConversation:t}):this._renderEmptyDMSearchInbox()},this._renderTabContent=()=>{const{location:e}=this.props,{tab:t}=(null==e?void 0:e.state)||{};switch(t){case st:return this._renderConversationsTab(!1);case nt:return this._renderConversationsTab(!0);case lt:return this._renderMessagesTab();default:return this._renderAllDMSearchResultsTab()}},this._renderSearchInboxItem=({conversationIds:e,highlightingTokens:t,isMessageItem:a=!1,messageIds:n,pinConversation:i,unpinConversation:r})=>(o,c)=>{const{loggedInUserId:d}=this.context,{location:u}=this.props,{query:m}=this.props,p=a?(n||[]).indexOf(o):-1,g=-1!==p&&null!=e&&e.length?e[p]:null,y=g?o:"",h=g||o,_={pathname:`/messages/${h}`,state:{...null==u?void 0:u.state,entryPoint:null,searchQuery:m}},b=h&&null!=e&&e.length?e.indexOf(h):null,v=b?b+1:0;xe()(!!d,"loggedInUserId must be defined"),c&&c(!0);const k=null!=t&&t.length&&Object(Ne.a)(b)&&b>=0?t[b]:void 0,f=e=>l.a.createElement(ue.a,{conversationId:h,highlightingTokens:k,inboxType:Le.d.PRIMARY,isActive:e,isMessageItem:a,key:h,link:_,messageId:y,onClick:this._handleConversationClick,perspective:d,pinConversation:i,position:v,searchQuery:m,unpinConversation:r});return this._isVDLEnabled?l.a.createElement(we.a,{exact:!1,path:_.pathname},f):l.a.createElement(s.a,{exact:!1,path:_.pathname},f)},this._renderSearchResults=()=>{const{accessibilityTitle:e,pinConversation:t,searchConversationIds:a,unpinConversation:n}=this.props,{isRefreshing:s}=this.state;return l.a.createElement(G.a,null,l.a.createElement(Me.a,{isRefreshing:s,onRefresh:this._handlePullToRefresh},l.a.createElement($.a,{accessibilityRole:"tablist",accessibilityTitle:e,anchoring:Re.a,assumedItemHeight:100,cacheKey:"dmSearchInbox",footer:this._renderFooter(),identityFunction:We,items:a,noItemsRenderer:this._renderRecentSearches,onNearEnd:this._handleNearEnd,onScrollEnd:this._handleScrollEnd,renderer:this._renderSearchInboxItem({conversationIds:a,pinConversation:t,unpinConversation:n}),withoutHeadroom:!0})))},this._renderFooter=()=>this.state.isLoadingMore?l.a.createElement(Oe.a,null):l.a.createElement(h.a,{style:ot.footerContainer},l.a.createElement(b.b,{align:"center",size:"body",weight:"bold"},Ye),l.a.createElement(Pe.a,{interactiveStyles:null},l.a.createElement(b.b,{align:"center",color:"primary",onPress:this._handleFooterClick,size:"subtext2",withInteractiveStyling:!0},Ge))),this._clearRecentSearches=()=>{const{analytics:e,clearRecentSearches:t}=this.props;e.scribe({component:"recent_search",action:"clear"}),t()},this._handleComposeButtonPress=()=>{const{analytics:e}=this.props;e.scribe({component:"search",element:"empty_results",action:"compose"})},this._handleFooterClick=()=>{var e,t;null==(e=this._textInputRef)||e.clear(),null==(t=this._textInputRef)||t.focus()},this._handleRefetchSearch=()=>{const{analytics:e,createLocalApiErrorHandler:t,search:a}=this.props,{debouncedQuery:n}=this.state;a&&n&&(e.scribe({component:"search",element:"retry",action:"click"}),a({query:n.toLowerCase(),preserveResults:!1,fetchNextPage:!1}).catch(t()))},this._handlePullToRefresh=()=>{const{createLocalApiErrorHandler:e,search:t}=this.props,{debouncedQuery:a}=this.state;this.setState({isRefreshing:!0}),t&&a&&t({query:a.toLowerCase(),preserveResults:!0,fetchNextPage:!1}).then((()=>this.setState({isRefreshing:!1}))).catch((t=>(this.setState({isRefreshing:!1}),e()(t))))},this._handleSearchChangeInner=e=>{const{createLocalApiErrorHandler:t,onQueryChange:a,search:n}=this.props;a(e),this.setState({debouncedQuery:e}),n&&e&&!this._modularSearchEnabled&&n({query:e,preserveResults:!1,fetchNextPage:!1}).catch(t())},this._handleSearchChangeDebounced=Object(je.a)(this._handleSearchChangeInner,200),this._handleSearchChange=({currentTarget:{value:e}})=>{const{onQueryChange:t}=this.props;(e&&e.trim()||!e)&&(t(e),this._handleSearchChangeDebounced(e))},this._handleNearEnd=()=>{const{analytics:e,search:t}=this.props,{debouncedQuery:a}=this.state;this.setState({isLoadingMore:!0}),a&&(e.scribe({component:"search",element:"results",action:"get_older"}),t({query:a,preserveResults:!1,fetchNextPage:!0}).finally((()=>this.setState({isLoadingMore:!1}))))},this._handleScrollEnd=()=>{const{addRecentSearch:e,analytics:t,query:a}=this.props,{debouncedQuery:n}=this.state;n&&a&&(e(a),t.scribe({component:"recent_search",action:"add"}))},this._handleSearchClear=()=>this._handleSearchChangeInner(""),this._handleHideRecentSearches=()=>{const{hideRecentSearches:e}=this.props;e()},this._handleAddRecentSearch=({currentTarget:{value:e}})=>{const{addRecentSearch:t,analytics:a}=this.props;e&&(t(e),a.scribe({component:"recent_search",action:"add"}),this._textInputRef&&this._textInputRef.blur())},this._handleRecentSearchClick=e=>{const{analytics:t,onQueryChange:a}=this.props;a(e),t.scribe({component:"recent_search",action:"click"}),this._handleSearchChangeInner(e)},this._handleClearRecentSearch=(e,t)=>{const{analytics:a,clearRecentSearch:n}=this.props;e.stopPropagation(),e.preventDefault(),a.scribe({component:"recent_search",action:"clear"}),n(t)}}componentDidMount(){var e;const{location:t}=this.props;var a;null!=t&&null!=(e=t.state)&&e.searchQuery&&this._handleSearchChangeInner(null==t||null==(a=t.state)?void 0:a.searchQuery);this._textInputRef&&this._textInputRef.focus()}componentDidUpdate(e){const{analytics:t,query:a,recentSearches:n}=this.props;e.query||!a||n.includes(a)||t.scribe({component:"search",action:"began_typing"})}render(){const{location:e,query:t,searchFetchStatus:a}=this.props,n=!(this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled")||this._modularSearchEnabled&&t),s=[ot.searchInput,n?ot.searchInputBorder:void 0],{tab:i}=(null==e?void 0:e.state)||{},r=[at,st,nt];this._messageSearchEnabled&&r.push(lt);const o=r.map((t=>({key:t,label:t,accessibilityLabel:t,isActive:()=>i===t||!i&&t===at,to:{...e,state:{...e.state,tab:t}}}))),c=i===lt&&this._messageSearchEnabled;return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{style:s},l.a.createElement(fe.a,{accessibilityLabel:qe,icon:l.a.createElement(Be.a,null),onPress:this._handleHideRecentSearches,pullLeft:!0,type:"primaryText"}),l.a.createElement(Ue.a,{Icon:Fe.a,autoComplete:"off",onChange:this._handleSearchChange,onClear:this._handleSearchClear,onSubmitEditing:this._handleAddRecentSearch,placeholder:this._messageSearchEnabled?Qe:ze,ref:this._setInputRef,value:t,withClearButton:!0})),this._modularSearchEnabled&&(t||i===st||i===nt||c)?l.a.createElement(l.a.Fragment,null,l.a.createElement(He.a,{links:o}),this._renderTabContent()):l.a.createElement(p.a,{accessibilityLabel:Ve,fetchStatus:a,onRequestRetry:this._handleRefetchSearch,render:this._renderSearchResults}))}}rt.contextType=k.a,rt.defaultProps={recentSearches:[],searchConversationIds:[],query:""};const ot=v.a.create((e=>({emptyState:{marginTop:e.spaces.space32},searchInput:{backgroundColor:e.colors.cellBackground,padding:e.spaces.space12,flexDirection:"row",alignItems:"center",zIndex:1},searchInputBorder:{borderBottomColor:e.colors.borderColor,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small},footerContainer:{marginVertical:e.spaces.space32}})));t.a=Object(Ae.a)(Q(rt))},RJrc:function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("3XMw"),i=a.n(s),r=a("MWbm"),o=a("Qwev"),c=a("rHpw");const d=i.a.ffde2fdc,u=c.a.create((e=>({spinner:{alignItems:"center",marginVertical:"30px"}})));t.a=()=>l.a.createElement(r.a,{style:u.spinner},l.a.createElement(o.a,{accessibilityLabel:d}))},SDjT:function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"evolutionDMInboxTertiaryQuery",selections:[{alias:"dm_convo_list_slice",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["LowQuality"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__EvolutionDMInboxTertiaryQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},c={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"evolutionDMInboxTertiaryQuery",selections:[{alias:null,args:u=[l,{kind:"Variable",name:"cursor",variableName:"cursor"},s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},p],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},_={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},p],type:"User",abstractKey:null}],storageKey:null},b={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},p],storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[p,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g,k,y,h],storageKey:null},_,v],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[m,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:f=[p],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[m,{kind:"InlineFragment",selections:F=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:F,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:F,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:f,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},k,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[v,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[k],storageKey:null},_,p],type:"User",abstractKey:null}],storageKey:null},b,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},v,p],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},c],storageKey:null},p],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:null,args:u,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"EvolutionDMInboxTertiaryQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"}]},params:{id:"n9y7xrXgQq4xLR1fVh0hOg",metadata:{sliceInfoPath:["dm_convo_list_slice","slice_info"]},name:"evolutionDMInboxTertiaryQuery",operationKind:"query",text:null}};T.hash="24482eb5cbdc697f7bf3d475cdd9cdcd",e.exports=T},"ShJ/":function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("Lsrn"),i=a("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M20.472 14.738c-.388-1.808-2.24-3.517-3.908-4.246l-.474-4.307 1.344-2.016c.258-.387.28-.88.062-1.286-.218-.406-.64-.66-1.102-.66H7.54c-.46 0-.884.254-1.1.66-.22.407-.197.9.06 1.284l1.35 2.025-.42 4.3c-1.667.732-3.515 2.44-3.896 4.222-.066.267-.043.672.222 1.01.14.178.46.474 1.06.474h3.858l2.638 6.1c.12.273.39.45.688.45s.57-.177.688-.45l2.638-6.1h3.86c.6 0 .92-.297 1.058-.474.265-.34.288-.745.228-.988zM12 20.11l-1.692-3.912h3.384L12 20.11zm-6.896-5.413c.456-1.166 1.904-2.506 3.265-2.96l.46-.153.566-5.777-1.39-2.082h7.922l-1.39 2.08.637 5.78.456.153c1.355.45 2.796 1.78 3.264 2.96H5.104z"})));r.metadata={width:24,height:24},t.a=r},Sy9O:function(e,t,a){"use strict";var n,l,s,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMInboxItem",selections:[n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"evolutionDMConversationAvatar"},l={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[n,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"legacy.participants_metadata.user_results.result.legacy"},l],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMEntryPreview"},{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null}],storageKey:null},l],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null};i.hash="f052fa01019907de89b033bd2795b7d7",e.exports=i},"V/6K":function(e,t,a){"use strict";var n=a("ERkP");const l=a.n(n).a.createContext({isDrawer:!1});t.a=l},VGyq:function(e,t,a){"use strict";var n,l,s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMMessageEntry",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:l=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:l,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:l,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:n,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],type:"DirectMessageInfo",abstractKey:null};s.hash="92f772325badd93bf2f53eadbc54446b",e.exports=s},Vc8w:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("ERkP"),l=a.n(n),s=a("pxuL");const i=()=>{const{decrementDmDrawerSuppressorCount:e,incrementDmDrawerSuppressorCount:t}=l.a.useContext(s.a);l.a.useEffect((()=>(t(),()=>e())),[t,e])}},VcIV:function(e,t,a){"use strict";a.d(t,"a",(function(){return ae}));a("kYxP"),a("MvUL");var n=a("MMRb"),l=a("ERkP"),s=a.n(l),i=a("1YZw"),r=a("HPNB"),o=a("v6aA"),c=a("V/6K"),d=a("3XMw"),u=a.n(d),m=a("tI3i"),p=a.n(m),g=a("xZGM"),y=a("YemM"),h=a("Irs7"),_=a("0KEI"),b=a("uDfI"),v=a("ii+P"),k=a("zCf4"),f=a("MWbm"),F=a("mjJ+"),T=a("eb3s"),S=a("ZToW"),E=a("cHvH"),C=a("kb9v"),I=a("IG7M"),R=a("6u/5"),L=a.n(R),K=a("PJTX"),x=a.n(K),w=a("pHkl"),M=a("X/yg"),O=a("0Bjv"),A=a("ShJ/"),D=a("Lsrn"),P=a("k/Ka");const U=(e={})=>Object(P.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[D.a.root,e.style],viewBox:"0 0 32 32"},s.a.createElement("g",null,s.a.createElement("path",{d:"M28.05 6.52h-5.42V4.887c0-1.548-1.26-2.808-2.81-2.808h-7.54c-1.548 0-2.807 1.26-2.807 2.808v1.63H4.05c-.414 0-.75.337-.75.75s.336.75.75.75h.753L7 26.435c.27 1.504 1.657 2.554 3.37 2.554h11.36c1.713 0 3.1-1.05 3.376-2.598l2.19-18.37h.753c.413 0 .75-.337.75-.75s-.336-.75-.75-.75zM10.972 4.887c0-.72.586-1.308 1.307-1.308h7.542c.72 0 1.308.587 1.308 1.308v1.63H10.972V4.89zm12.65 21.28c-.163.91-1.068 1.32-1.893 1.32H10.37c-.824 0-1.73-.41-1.887-1.276L6.313 8.02h19.472l-2.162 18.148z"}),s.a.createElement("path",{d:"M13.312 23.123c.414 0 .75-.336.75-.75v-9.6c0-.414-.336-.75-.75-.75s-.75.336-.75.75v9.6c0 .414.336.75.75.75zm5.486 0c.414 0 .75-.336.75-.75v-9.6c0-.414-.336-.75-.75-.75s-.75.336-.75.75v9.6c0 .414.336.75.75.75z"})));U.metadata={width:32,height:32};var H=U,N=a("zIWA"),j=a("5pef"),B=a("IpT4"),W=a("fz3c");const q=u.a.a30a206e,V=u.a.ib4b1b86,z=u.a.bd3ca2ef,Q={confirmButtonLabel:u.a.bb1d57b6,actionTextLeave:u.a.g9074da4,header:u.a.gdf4b790,text:u.a.h09b49f8},G=u.a.ad63377e,Y=u.a.e1c9ec9c,X=u.a.i6b19b08,$=u.a.e3cfff7c,J=u.a.f398722e,Z=u.a.bdd91964,ee=u.a.a8ed0eca,te=u.a.jac4eb1e;function ae(e){const{conversation:t,conversationId:a,conversationType:l,inboxType:d,isHovered:u,isMessageSearchResult:m,isPinned:R,isSnoozed:K,participantCount:D,pinConversation:P,position:U,relayId:ae,unpinConversation:ne}=e,le=Object(h.b)(),se=Object(_.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_INBOX_ITEM"),ie=Object(b.c)(),re=x()(),{featureSwitches:oe}=s.a.useContext(o.a),ce=Object(k.f)(),{isDrawer:de}=s.a.useContext(c.a),ue=oe.getValue("dm_conversation_labels_max_pinned_count"),me=oe.isTrue("dm_conversation_labels_pinned_education_enabled")&&!R&&1===U,[pe,ge]=s.a.useState(!1),[ye,he]=s.a.useState(!1),[_e,be]=Object(v.a)(g.t),[ve,ke]=s.a.useState(me&&_e);s.a.useEffect((()=>{if(ve)return be}),[be,ve]);const fe=()=>{const e=l===n.CONVERSATION_TYPE.GROUP?"leave_group":"delete_thread",t={conversation_type:l===n.CONVERSATION_TYPE.GROUP?w.l.GROUP:w.l.ONE_TO_ONE,conversation_id:a,conversation_participant_count:D,position:U,inbox_type:Object(M.l)(d),entry_point:w.c.THREE_DOT_MENU};he(!1),le.scribe({element:"thread",action:e,data:t}),R&&Ee(),ie(n.leaveConversation({conversationId:a})).then((()=>{ae&&L()(re,(e=>{e.delete(ae)}))})).catch(se({showToast:!0})),ce.replace(Object(M.g)(d))},Fe=e=>()=>{e&&e(),ge(!1)},Te=t=>()=>{const{userId:n}=e,l=W.a.DMConversation;if(le.scribeAction("report"),Object(W.g)(oe,l)){const e=Object(W.d)({clientReferer:window.location.pathname,isMedia:!1,isPromoted:!1,reportType:l,reportedConversationId:a,reportedUser:n,scribeNamespace:le.contextualScribeNamespace});t.push({pathname:"/i/safety/report_story_start",state:{input:{requested_variant:JSON.stringify(e)}}})}else{const e=Object(M.j)(a,window.location.pathname,le.contextualScribeNamespace,d);t.push(e)}},Se=()=>{if(K)ie(n.enableNotifications({conversationId:a})).then((()=>{ae&&L()(re,(e=>{const t=e.get(ae);p()(t,"relayId must be defined");const a=t.getLinkedRecord("perspectival_conversation_metadata");p()(a,"metadataRef must be defined"),a.setValue(!1,"muted")})),ie(Object(i.b)({ariaOnly:!0,text:te}))}));else{const e={conversation_type:l===n.CONVERSATION_TYPE.GROUP?w.l.GROUP:w.l.ONE_TO_ONE,conversation_id:a,conversation_participant_count:D,entry_point:w.c.THREE_DOT_MENU};le.scribe({element:"thread",action:"mute_dm_thread_forever",data:e}),ie(n.disableNotifications({conversationId:a})).then((()=>{ae&&L()(re,(e=>{const t=e.get(ae);p()(t,"relayId must be defined");const a=t.getLinkedRecord("perspectival_conversation_metadata");p()(a,"metadataRef must be defined"),a.setValue(!0,"muted")})),ie(Object(i.b)({ariaOnly:!0,text:J}))}))}},Ee=()=>{const{togglePinStateEvolution:s}=e,i=R?"unpin_dm_conversation":"pin_dm_conversation",r=R?ne:P,o={conversation_type:l===n.CONVERSATION_TYPE.GROUP?w.l.GROUP:w.l.ONE_TO_ONE,conversation_id:a,conversation_participant_count:D,position:U};le.scribe({element:"thread",action:i,data:o}),s?s():t&&r&&r(a,t)},Ce=e=>{const t=[{Icon:R?O.a:A.a,onClick:Ee,text:R?Z:Y,withBottomBorder:!0},{Icon:H,isEmphasized:!0,onClick:()=>he(!0),text:G,withBottomBorder:!0},{Icon:N.a,onClick:Te(ce),text:X,withBottomBorder:!0},{Icon:K?j.a:B.a,onClick:Se,text:K?ee:$,withBottomBorder:!0}];return s.a.createElement(F.a,{items:t,onCloseRequested:Fe(e),shouldCloseOnClick:!0})},Ie=!S.a.isEnabled||u||pe||ve;return s.a.createElement(s.a.Fragment,null,ye?s.a.createElement(T.a,{confirmButtonLabel:Q.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:Q.header,onCancel:()=>he(!1),onConfirm:fe,text:Q.text}):null,Ie?s.a.createElement(E.a,null,(({windowWidth:e})=>{const t=r.a.isTwoColumnLayout(e);return s.a.createElement(f.a,{style:[y.a.menuContainer,m&&y.a.messageSearchResultMenuContainer]},s.a.createElement(C.a,{actionPrimary:{text:q,onClick:()=>ke(!1)},headline:V,onDismiss:()=>ke(!1),shouldDisplay:ve&&!de,text:z({count:ue}),withMask:!t},t?s.a.createElement(I.a,{onClick:()=>ge(!0),renderActionMenu:Ce,style:Ie?y.a.menu:y.a.hiddenMenu}):null),t?null:s.a.createElement(I.a,{onClick:()=>ge(!0),renderActionMenu:Ce,style:Ie?y.a.menu:y.a.hiddenMenu}))})):null)}},"X3+4":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("ERkP"),l=a.n(n),s=a("fs1G");const i=l.a.createContext({handleNextSlide:s.a})},X8um:function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"label"}],kind:"Fragment",metadata:null,name:"DMPinnedInboxQuery",selections:[{alias:"labeled_conversation_slice",args:l=[{kind:"Variable",name:"label",variableName:"label"},{kind:"Literal",name:"s",value:20}],concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"__DMPinnedInboxQuery_labeled_conversation_slice_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"items",plural:!0,selections:[s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[r,o={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[u={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[s,i,{kind:"RequiredField",field:m={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null}],storageKey:null},action:"THROW",path:"labeled_conversation_slice.items.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},p={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null}],storageKey:null},g={alias:null,args:null,concreteType:"DMConversationLabelInfo",kind:"LinkedField",name:"labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],storageKey:null}],storageKey:null},y={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null},h={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"DMPinnedInboxQuery",selections:[{alias:null,args:l,concreteType:"DMLabeledConversationsSlice",kind:"LinkedField",name:"labeled_conversation_slice",plural:!1,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"items",plural:!0,selections:[s,i,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[r,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[r,o,c,d,{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[s,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[_={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},u],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[_,{kind:"InlineFragment",selections:[s,i,m,{alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"}],type:"User",abstractKey:null}],storageKey:null},{alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},s],storageKey:null}],storageKey:null},p],storageKey:null},g],storageKey:null},y,h],storageKey:null},{alias:null,args:l,filters:["label","s"],handle:"slice",key:"DMPinnedInboxQuery_labeled_conversation_slice",kind:"LinkedHandle",name:"labeled_conversation_slice",handleArgs:[{kind:"Literal",name:"itemsFieldName",value:"items_results"}]}]},params:{id:"_gBQBgClVuMQb8efxWkbbQ",metadata:{sliceInfoPath:["labeled_conversation_slice","slice_info"]},name:"DMPinnedInboxQuery",operationKind:"query",text:null}};b.hash="ce2e2976cf1d1610f3238a158593facf",e.exports=b},XYIr:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return g})),a.d(t,"e",(function(){return h})),a.d(t,"f",(function(){return b})),a.d(t,"g",(function(){return k})),a.d(t,"h",(function(){return F})),a.d(t,"i",(function(){return S}));var n=a("ERkP"),l=a.n(n),s=a("cTG8"),i=a("t62R"),r=a("3XMw"),o=a.n(r);const c=(e,t,a,n,i)=>l.a.createElement(l.a.Fragment,null,E(e,t)," ",a&&l.a.createElement(s.a,{displayTextRange:[0,a.length],entities:n,highlightType:"background",hitHighlights:i,key:"message",text:a,withMediaLinks:!0})),d=(e,t,a)=>e?l.a.createElement(o.a.I18NFormatMessage,{$i18n:"i005f1fd"},l.a.createElement(i.b,null,t),l.a.createElement(i.b,null,a||"")):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b35cee41"},l.a.createElement(i.b,null,a||"")),u=o.a.a9cc8cfe,m=(e,t,a)=>a?e?l.a.createElement(i.b,null,o.a.eb3d722e):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"dc4b75a1"},l.a.createElement(i.b,null,t)):u,p=o.a.e5bfe07e,g=(e,t,a)=>a?e?l.a.createElement(i.b,null,o.a.db53c018):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"hcbbbb35"},l.a.createElement(i.b,null,t)):p,y=o.a.bf584cd2,h=(e,t,a)=>a?e?l.a.createElement(i.b,null,o.a.f80629ba):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"c1e1f849"},l.a.createElement(i.b,null,t)):y,_=o.a.e20b65b0,b=(e,t,a)=>a?e?l.a.createElement(i.b,null,o.a.d30c2d40):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"c7e2464f"},l.a.createElement(i.b,null,t)):_,v=o.a.a876e58c,k=(e,t,a)=>a?e?l.a.createElement(i.b,null,o.a.j7d8101a):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"eee2f121"},l.a.createElement(i.b,null,t)):v,f=o.a.dedfd266,F=(e,t,a)=>a?e?l.a.createElement(i.b,null,o.a.h7033cac):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"be5a9617"},l.a.createElement(i.b,null,t)):f,T=o.a.b1a614fe,S=(e,t,a)=>a?e?l.a.createElement(i.b,null,o.a.d5b762c8):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"dfd2b3b9"},l.a.createElement(i.b,null,t)):T,E=(e,t)=>t?l.a.createElement(i.b,{key:"senderName"},l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b3a2b11d"},l.a.createElement(i.b,null,e))):null},XZOd:function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:null,name:"EvolutionDMInboxSecondaryQuery",selections:[{alias:"untrusted",args:[l={kind:"Variable",name:"count",variableName:"count"},s={kind:"Literal",name:"desired_lists",value:["Untrusted"]},i={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},r={kind:"Literal",name:"s",value:17},o={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"__EvolutionDMInboxSecondaryQuery_dm_convo_list_slice_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"},c={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:"low_quality",args:m=[l,u={kind:"Variable",name:"cursor",variableName:"cursor"},{kind:"Literal",name:"desired_lists",value:["LowQuality"]},i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[c],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"EvolutionDMInboxSecondaryQuery",selections:[{alias:"untrusted",args:p=[l,u,s,i,r,o],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[g={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[g,y={kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[h={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},h],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[_={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},k={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},h],type:"User",abstractKey:null}],storageKey:null},f={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},h],storageKey:null}],storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[h,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},_,T,b,v],storageKey:null},k,F],type:"User",abstractKey:null}],storageKey:null},f,h],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[g,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:S=[h],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g,{kind:"InlineFragment",selections:E=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:E,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:E,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},h],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:S,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},T,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[_,T],storageKey:null},k,h],type:"User",abstractKey:null}],storageKey:null},f,h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[F,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[T],storageKey:null},k,h],type:"User",abstractKey:null}],storageKey:null},f,h],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},F,h],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},c],storageKey:null},h],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null},d],type:"DMConvoListSlice",abstractKey:null}],storageKey:null},{alias:"untrusted",args:p,filters:["count","desired_lists","known_lists","s","sort_by"],handle:"slice",key:"EvolutionDMInboxSecondaryQuery_dm_convo_list_slice",kind:"LinkedHandle",name:"dm_convo_list_slice"},{alias:"low_quality",args:m,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[g,y,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[g,{kind:"InlineFragment",selections:S,type:"DMConversation",abstractKey:null},c],storageKey:null},h],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:null}]},params:{id:"qQhbAvYHElGk7VIUFdll7g",metadata:{sliceInfoPath:["untrusted","slice_info"]},name:"EvolutionDMInboxSecondaryQuery",operationKind:"query",text:null}};C.hash="02c89e4a60b7684bb3a0b1864b759197",e.exports=C},XiYe:function(e,t,a){"use strict";var n=a("ERkP"),l=n.useEffect,s=n.useRef;e.exports=function(){var e=s(!0);return l((function(){return e.current=!0,function(){e.current=!1}}),[]),e}},YemM:function(e,t,a){"use strict";const n=a("rHpw").a.create((e=>({root:{backgroundColor:e.colors.cellBackground,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16,width:"100%"},rootMessageAttachment:{paddingVertical:`calc(${e.spaces.space2} + ${e.spaces.space8})`},active:{backgroundColor:e.colors.gray0},avatarCellContainer:{flexGrow:1,maxWidth:e.spaces.space32,marginRight:`calc(${e.spaces.space2} + ${e.spaces.space8})`,minWidth:e.spaces.space32},bodyColumn:{flexDirection:"row"},inlineTimestamp:{flexDirection:"row"},inlineTimestampVDL:{flexDirection:"row",alignItems:"center"},messageSearchTitleContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},titleContainer:{flex:1},inlineNotificationsDisabledIcon:{paddingLeft:`calc(${e.spaces.space2} * 3)`,color:e.colors.gray700},inlineNotificationsDisabledIconVDL:{width:e.spaces.space16,height:e.spaces.space16},hiddenMenu:{opacity:0,overflow:"hidden",width:0},menu:{alignSelf:"flex-start"},menuContainer:{height:0,marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`},messageSearchResultMenuContainer:{height:"100%",marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`},notificationsDisabledIcon:{alignSelf:"flex-end",color:e.colors.gray700,paddingTop:e.spaces.space4},unreadMessagePip:{backgroundColor:e.colors.blue500,marginTop:`calc(${e.spaces.space8} - ${e.spaces.space1})`,height:e.baseFontSize-5,width:e.baseFontSize-5},unreadMessagePipMessageSearchResult:{marginTop:0,top:`calc(-3 * ${e.spaces.space2} + ${e.spaces.space1})`},vdlXButton:{border:"none",marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`,marginRight:`calc(-1 * ${e.spaces.space4})`,marginTop:`calc(-1 * (${e.spaces.space8} - ${e.spaces.space1}))`},xButton:{alignSelf:"center",marginRight:`calc(-1 * ${e.spaces.space4})`},xIcon:{height:`calc(${e.spaces.space28} - ${e.spaces.space1})`,width:`calc(${e.spaces.space28} - ${e.spaces.space1})`},trashcanIcon:{color:e.colors.gray700},snippet:{maxHeight:e.spaces.space40,overflow:"hidden"},snippetPadding:{paddingRight:`calc(${e.spaces.space28} + ${e.spaces.space1} * 0.75)`},unread:{backgroundColor:e.colors.unreadCellBackground},socialProofContainer:{marginTop:e.spaces.space4},socialProofText:{marginLeft:0},convoLabelIcon:{marginRight:e.spaces.space4},endCell:{marginLeft:e.spaces.space16}})));t.a=n},ZH9U:function(e,t,a){"use strict";var n,l,s={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"},{defaultValue:null,kind:"LocalArgument",name:"label"}],kind:"Fragment",metadata:null,name:"DMPinnedInboxAppend_Mutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Variable",name:"label",variableName:"label"},{kind:"Literal",name:"s",value:20}],concreteType:null,kind:"LinkedField",name:"add_dm_conversation_label_v3",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"label_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"timestamp",storageKey:null}],type:"DMConversationLabelInfo",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"failure_reason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],type:"DMConversationLabelUnavailable",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"DMPinnedInboxAppend_Mutation",selections:l},params:{id:"o0aymgGiJY-53Y52YSUGVA",metadata:{},name:"DMPinnedInboxAppend_Mutation",operationKind:"mutation",text:null}};s.hash="86e5601441f8d07b68ccbcf112746d23",e.exports=s},ZYFu:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),l=a.n(n),s=a("MMRb"),i=a("1YZw"),r=a("hqKg"),o=a("AQOc"),c=a("G6rE"),d=a("xZGM"),u=a("0KEI"),m=a("oEGd");const p=(e,t)=>t.conversationId,g=Object(r.createSelector)(p,((e,t)=>s.selectConversation(e,p(0,t))),s.selectEntries,c.e.selectAll,((e,t)=>!s.selectConversationIsRead(e,p(0,t))),((e,t)=>{const a=p(0,t);return Object(s.selectInboxTypeByConversation)(e,a)}),((e,t)=>Object(d.E)(e,d.t)),((e,t,a,n,l,s,i)=>({conversation:(null==t?void 0:t.data)&&Object(o.a)(t.data,a,n),conversationId:e,unread:l,inboxType:s,shouldShowPinnedEducation:i}))),y={addFlag:d.A,addRecentSearch:s.addRecentSearches,addToast:i.b,block:c.e.block,createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX_ITEM"),disableNotifications:s.disableNotifications,enableNotifications:s.enableNotifications,leaveConversation:s.leaveConversation,muteDMUser:s.muteDMUser,unmuteDMUser:s.unmuteDMUser,unblock:c.e.unblock};var h=Object(m.f)(g,y),_=a("aA19"),b=a("OhSZ"),v=a("t62R"),k=a("g54k"),f=a("rxPX");const F=(e,t)=>t.entry;var T=Object(f.a)().propsFromState((()=>({users:Object(r.createSelector)(c.e.selectAll,F,k.b)}))).adjustStateProps((({users:e})=>({...e}))),S=a("zQEV"),E=a("4n2h");var C=T((({entry:e,entryType:t,isSelected:a=!1,perspective:n,unread:s=!1,users:i})=>{const r=Object(S.a)(e,t,n,i),o=Object(E.b)(s),c=Object(E.a)(s,a);return l.a.createElement(v.b,{color:c,weight:o},r)})),I=a("v6aA"),R=a("vjRr");const L=(e,t)=>{var a,n,l;return t.isMessageItem&&(null==(a=t.entry)||null==(n=a.message_data)||null==(l=n.attachment)?void 0:l.card)},K=(e,t)=>c.e.select(e,t.senderId),x=(e,t)=>t.recipientId?c.e.select(e,t.recipientId):void 0;var w=Object(f.a)().propsFromState((()=>({card:R.a.createSingleHydratedSelector(L),user:K,recipient:x}))),M=a("ijJS"),O=a("3dad"),A=a("XYIr"),D=a("X/yg");var P=w((({card:e,entry:t,perspective:a,isGroupDM:n,highlightingTokens:s,isMessageItem:i,unread:r=!1,user:o={},recipient:c={},isSelected:d=!1})=>{var u;const{featureSwitches:m}=l.a.useContext(I.a),p=t&&t.message_data;if(!p)return null;const{attachment:g}=p,y=g&&!!(g.video||g.photo||g.animated_gif||g.tweet||g.fleet||g.sticker||g.card);let h;const _=a===o.id_str,b=!(!y||!_)||!(!n||_),v=o.name,k=c.name;let f;if(s&&null!=s&&s.length&&null!=p&&p.text){const e=Object(D.n)(s);f=null!=e&&e.length?null==e?void 0:e.map((e=>Object(D.h)(e,p.text))):void 0}let F,T=Object(A.a)(v,b,null==p?void 0:p.text,p.entities,f);const S=T;g&&(g.tweet?(F=g.tweet.status,T=Object(A.i)(_,v,b)):g.fleet?T=Object(A.b)(_,k,p.text):g.video?Object(D.p)(g,m)?(T=Object(A.h)(_,v,b),h=g.video):(T=Object(A.g)(_,v,b),h=g.video):g.photo?(T=Object(A.e)(_,v,b),h=g.photo):g.animated_gif?(T=Object(A.c)(_,v,b),h=g.animated_gif):g.sticker?T=Object(A.f)(_,v,b):g.card&&(T=Object(A.d)(_,v,b)));const E=h&&i?O.a.getOriginalImage(h):null,C=null==(u=h)?void 0:u.ext_alt_text;return l.a.createElement(M.a,{accessibilityLabel:C,card:e,content:i?S:T,isMessageSearchItem:i,isSelected:d,searchImage:E,tweetId:F,tweetUserId:p.sender_id,unread:r})})),U=a("uKEd");const H=(e,t)=>t.senderId?c.e.select(e,t.senderId):void 0,N=(e,t)=>Object(U.n)(e,t.reactionEntry.message_id),j=(e,t)=>{const a=N(e,t);return a&&a.message_data&&c.e.select(e,a.message_data.sender_id)};var B=Object(f.a)().propsFromState((()=>({reactingUser:H,reactedMessageEntry:N,messageUser:j}))),W=a("3XMw"),q=a.n(W),V=a("33Kz");var z=B((({isGroupDM:e,isSelected:t=!1,messageUser:a,perspective:n,reactedMessageEntry:s,reactingUser:i,reactionEntry:r,unread:o=!1})=>{const{featureSwitches:c}=l.a.useContext(I.a),d=s&&s.message_data,u=d&&d.attachment,m=d&&d.text,p=a&&a.screen_name,g=n===(i&&i.id_str),y=i&&i.name,h=Object(V.b)(r.reaction_key||"",c),_=Object(E.b)(o),b=Object(E.a)(o,t);let k;return k=u&&u.tweet?e?((e,t,a,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"c4202785"},l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"b493a891"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)))(g,y,p,h):((e,t,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"ca684bf5"},l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"h5797be5"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a)))(g,y,h):u&&u.video?e?((e,t,a,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d1f8bdd9"},l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d764af97"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)))(g,y,p,h):((e,t,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"ab1cdfe3"},l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"f0cf1699"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a)))(g,y,h):u&&u.photo?e?((e,t,a,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"hec0fd4d"},l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"j55320df"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)))(g,y,p,h):((e,t,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"jf27606b"},l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"cd110359"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a)))(g,y,h):u&&u.animated_gif?e?((e,t,a,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"e70dcc35"},l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"g1bf440b"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)))(g,y,p,h):((e,t,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"b2da1bf9"},l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"g84c0421"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a)))(g,y,h):u&&u.card?e?((e,t,a,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"cd2e7c19"},l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"aee9e7fb"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)))(g,y,p,h):((e,t,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"f9fb1cf7"},l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"f2bf910f"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a)))(g,y,h):m?e?((e,t,a,n,s)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"i6cec545"},l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,s)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d6998bab"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,n),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,s)))(g,y,h,p,m):((e,t,a,n)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"cec676f3"},l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"a2706f9b"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a),l.a.createElement(v.b,null,n)))(g,y,h,m):((e,t,a)=>e?l.a.createElement(q.a.I18NFormatMessage,{$i18n:"d6b15bbf"},l.a.createElement(v.b,null,a)):l.a.createElement(q.a.I18NFormatMessage,{$i18n:"ac0d4bc7"},l.a.createElement(v.b,null,t),l.a.createElement(v.b,null,a)))(g,y,h),l.a.createElement(v.b,{color:b,numberOfLines:1,weight:_},k)})),Q=a("H4nC"),G=a("/8XK"),Y=a("b9JY");var X=({conversationType:e,entry:t,highlightingTokens:a,isMessageItem:n=!1,isSelected:i=!1,perspective:r,unread:o})=>{if(t.marked_as_spam)return Object(G.a)(o,i);if(Object(Y.b)(t)){const{message_data:{recipient_id:c,sender_id:d}={}}=t;return l.a.createElement(P,{entry:t,highlightingTokens:a,isGroupDM:e===s.CONVERSATION_TYPE.GROUP,isMessageItem:n,isSelected:i,perspective:r,recipientId:c,senderId:d,unread:o})}return Object(Y.c)(t)?l.a.createElement(z,{isGroupDM:e===s.CONVERSATION_TYPE.GROUP,isSelected:i,perspective:r,reactionEntry:t,senderId:t.sender_id,unread:o}):Object(Y.a)(t)?l.a.createElement(C,{entry:t,entryType:t.type,isSelected:i,perspective:r,unread:o}):Object(Y.d)(t)?l.a.createElement(Q.a,{entry:t,isCompact:!0,isSelected:i,unread:o}):null},$=a("Myq3"),J=a("3wZR"),Z=a("XnpN"),ee=a("IpT4"),te=a("VcIV"),ae=a("aWyx"),ne=a("YemM"),le="conversation",se=a("MWbm"),ie=a("Irs7"),re=a("8hvq"),oe=a("Znyr"),ce=a("0PHd"),de=a("yrzJ"),ue=a("Xrkv"),me=a("cTG8"),pe=a("GBcw"),ge=a("cm6r"),ye=a("htQn"),he=a("5mJL"),_e=a("AQ79"),be=a("pHkl");const ve=({children:e})=>l.a.createElement(se.a,{style:ne.a.socialProofContainer},e);class ke extends l.a.Component{constructor(...e){super(...e),this._isPinnedInboxEnabled=this.context.featureSwitches.isTrue("dm_conversation_labels_pinned_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),this._renderAvatarCell=()=>{const{conversation:e,perspective:t}=this.props;return l.a.createElement(se.a,{style:ne.a.avatarCellContainer},l.a.createElement(_.a,{conversation:e,perspective:t,size:"large",withBadge:!1}))},this._renderEndCellWithMenu=(e,t,a,n)=>l.a.createElement(l.a.Fragment,null,e?l.a.createElement(se.a,{style:ne.a.endCell},e):null,this._renderConversationActions({isFocused:t,isFocusedWithin:a,isHovered:n})),this._renderMenu=({isFocused:e,isFocusedWithin:t,isHovered:a})=>{const{conversation:n,conversationId:i,inboxType:r,isMessageItem:o,pinConversation:c,position:d,unpinConversation:u}=this.props;if(n&&c&&u){const m=(e=>{var t;return Boolean(null==e||null==(t=e.labels)?void 0:t.find((e=>e.label_type===_e.a.PINNED)))})(n),p=n.notifications_disabled,g=n.participants.length||0,y=n.type===s.CONVERSATION_TYPE.GROUP?"0":this._getUserIdOfOneToOneConvo();return l.a.createElement(te.a,{conversation:n,conversationId:i,conversationType:n.type,inboxType:r,isHovered:e||t||a,isMessageSearchResult:o,isPinned:m,isSnoozed:p,participantCount:g,pinConversation:c,position:d,unpinConversation:u,userId:y})}return null},this._renderConversationActions=({isFocused:e,isFocusedWithin:t,isHovered:a})=>{const{inboxType:n}=this.props;switch(n){case _e.d.PRIMARY:return this._isPinnedInboxEnabled?this._renderMenu({isFocused:e,isFocusedWithin:t,isHovered:a}):null;case _e.d.SECONDARY:case _e.d.TERTIARY:return this._renderX();default:return null}},this._renderConversationEndCell=e=>{const{inboxType:t,isMessageItem:a,searchQuery:n,unread:s}=this.props,i=s?l.a.createElement(oe.a,{pip:!0,style:[ne.a.unreadMessagePip,a&&ne.a.unreadMessagePipMessageSearchResult],truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):null;switch(t){case _e.d.PRIMARY:return this._isVDLEnabled?i:n?null:this._renderTimestamp(e);case _e.d.SECONDARY:return this._isVDLEnabled?i:null;default:return null}},this._renderConversationLabel=({convo_label:e})=>{if(null==e||!e.text)return null;const t=Object(J.b)(e.icon);return l.a.createElement(v.b,{color:"gray700",size:"subtext2"},t?l.a.createElement(t,{style:ne.a.convoLabelIcon}):null,e.text)},this._renderSocialProof=({social_proof:e})=>{if(!e||0===e.length)return null;const t=e[0];switch(t.proof_type){case ae.d.MUTUAL_FRIENDS:{if(0===t.total)return null;const e=t.users.map((({profile_image_url_https:e})=>e)),a=t.users.map((({name:e})=>e));return l.a.createElement(ve,null,l.a.createElement(v.b,{weight:this._isVDLEnabled?"medium":"normal"},l.a.createElement(ce.a,{displayFacepileInline:!0,knownFollowersAvatarUrls:e,knownFollowersCount:t.total,knownFollowersNames:a,textStyle:this._isVDLEnabled&&ne.a.socialProofText,withFacepile:!this._isVDLEnabled})))}default:return null}},this._renderSearchConversationPreview=()=>{const{conversation:e,highlightingTokens:t,perspective:a,searchQuery:n}=this.props,i=e?Object(Z.a)(e,a):[],r=[],o=(e,t)=>e.localeCompare(t),c=i.map((({user:e})=>e)).filter((e=>{var t;const l=null==(t=e.name)?void 0:t.toLowerCase().includes(n);return e.id_str!==a&&(l&&r.push(e.name),!l)})).map((e=>e.name)).sort(o),d=r.sort(o).concat(c);if(e){if(e.type===s.CONVERSATION_TYPE.ONE_TO_ONE){const[e]=i.map((({user:e})=>e)),a=`@${e.screen_name}`,n=a?Object(D.i)(t,a):null,s=null!=n&&n.length?Object(D.f)(n,a):void 0;return l.a.createElement(de.a,{color:"gray700",renderScreenNameHighlights:s,screenName:e.screen_name})}{const e=!0,a=Object(ue.a)(d,e),n=Object(D.n)(t),s=null==n?void 0:n.filter((e=>a&&-1!==a.toLowerCase().indexOf(e.toLowerCase()))),i=null!=s&&s.length?s.map((e=>Object(D.h)(e,a))):void 0;return l.a.createElement(me.a,{color:"gray700",displayTextRange:[0,a.length],entities:{},highlightType:"background",hitHighlights:i,key:"groupsearchresult",numberOfLines:2,text:a})}}},this._renderX=()=>{const{conversation:e,conversationId:t,inboxType:a,position:n}=this.props,{loggedInUserId:i}=this.context;if(e){const r=Object(D.m)(e,i),o=e.participants.length||0,c=(null==e?void 0:e.type)===s.CONVERSATION_TYPE.GROUP?"0":this._getUserIdOfOneToOneConvo();return l.a.createElement(re.a,{conversationId:t,conversationType:e.type,inboxType:a,participant:r,participantCount:o,position:n,userId:c})}return null},this._getUserIdOfOneToOneConvo=()=>{const{conversation:e,perspective:t}=this.props,a=e&&Object(Z.a)(e,t).map((({user:e})=>e)),n=a&&a[0]||null;return n?n.id_str:""},this._renderTimestamp=e=>{const{conversation:t,isMessageItem:a}=this.props,n=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),s=[n||a?ne.a.inlineNotificationsDisabledIcon:ne.a.notificationsDisabledIcon,n&&ne.a.inlineNotificationsDisabledIconVDL],i=Number(e&&a?null==e?void 0:e.time:null==t?void 0:t.sort_timestamp);return l.a.createElement(l.a.Fragment,null,l.a.createElement(se.a,{style:[a&&ne.a.inlineTimestamp,n&&ne.a.inlineTimestampVDL]},t&&i?l.a.createElement(pe.a,{timestamp:i}):null,null!=t&&t.notifications_disabled?l.a.createElement(ee.a,{style:s}):null))},this._handleOnClick=e=>{const{addRecentSearch:t,analytics:a,conversation:n,conversationId:l,onClick:i,position:r,searchQuery:o}=this.props,c=(null==n?void 0:n.participants.length)||0,d=(null==n?void 0:n.type)===s.CONVERSATION_TYPE.GROUP;o&&(a.scribe({component:"search",element:"conversation",action:"click",data:{conversation_id:l,conversation_participant_count:c,conversation_type:d?be.l.GROUP:be.l.ONE_TO_ONE,entry_point:be.c.ALL,inbox_type:be.g.PRIMARY,dm_search_result_type:be.a.CONVERSATION,message_type:be.h.NOT_APPLICABLE,position:r}}),a.scribe({component:"recent_search",action:"add"}),t(o)),i(e,l,n,r)}}shouldComponentUpdate(e){const t=this.props.conversation,a=null==t?void 0:t.conversation_id,n=null==t?void 0:t.notifications_disabled,l=null==t?void 0:t.last_read_event_id,s=null==t?void 0:t.sort_event_id,i=null==t?void 0:t.max_entry_id,r=null==t?void 0:t.convo_label,o=this.props.highlightingTokens,c=this.props.messageId,d=e.conversation,u=null==d?void 0:d.conversation_id,m=null==d?void 0:d.notifications_disabled,p=e.highlightingTokens,g=null==d?void 0:d.last_read_event_id,y=null==d?void 0:d.sort_event_id,h=null==d?void 0:d.max_entry_id,_=null==d?void 0:d.convo_label,b=e.messageId,{filter:v,isActive:k}=this.props,{filter:f,isActive:F}=e;return a!==u||n!==m||o!==p||l!==g||s!==y||i!==h||c!==b||k!==F||v!==f||r!==_}render(){var e;const{conversation:t,highlightingTokens:a,isActive:n,isMessageItem:i,link:r,messageId:o,perspective:c,position:d,searchQuery:u,unread:m}=this.props,p=(null==t?void 0:t.entries)||[],g=i?p.find((e=>e.id===o)):Object($.a)(p,(e=>!be.b.includes(e.type))),y=null==g||null==(e=g.message_data)?void 0:e.attachment,h=[ne.a.root,i&&y&&ne.a.rootMessageAttachment,m&&!this._isVDLEnabled&&ne.a.unread,n&&this._isVDLEnabled&&ne.a.active],v=(null==t?void 0:t.type)===s.CONVERSATION_TYPE.GROUP,k=this._isVDLEnabled&&v;if(!t)return null;const f=!!t.convo_label,F=!t.trusted&&!f,T=this._renderConversationEndCell(g),S=u&&!i;let E="text",C="bold";return this._isVDLEnabled&&!m&&(E="gray900",C="medium"),this._isVDLEnabled&&n&&(E="text",C="medium"),!t||!u&&t.isSearchResultOnly?null:l.a.createElement(ge.a,null,(({isFocused:e,isFocusedWithin:s,isHovered:o})=>{var p;return l.a.createElement(ye.a,{accessibilityRole:"none",accessibilityState:{selected:n},link:{pathname:null==r?void 0:r.pathname,anchorless:!0,state:{...null==r?void 0:r.state,position:d,entryPoint:i?null==g?void 0:g.id:null,isMessageItem:i}},onPress:this._handleOnClick,style:h,testID:le},l.a.createElement(he.a,{avatarCell:i?void 0:l.a.createElement(_.a,{conversation:t,perspective:c,withBadge:k}),avatarSize:"xxLarge"},l.a.createElement(se.a,{style:ne.a.bodyColumn},l.a.createElement(se.a,{style:ne.a.titleContainer},l.a.createElement(se.a,{style:i?ne.a.messageSearchTitleContainer:void 0},l.a.createElement(b.b,{conversation:t,highlightingTokens:a,isConversationSearchTitle:!!S,isMessageSearchTitle:!!i,perspective:c,renderAvatarCell:this._renderAvatarCell,renderTimestamp:()=>this._renderTimestamp(g),textColor:E,titleWeight:C,withScreenName:!u&&!i,withVDLRefresh:this._isVDLEnabled}),l.a.createElement(se.a,{style:ne.a.messageSearchTitleContainer},i?this._renderEndCellWithMenu(T,e,s,o):null)),l.a.createElement(se.a,{style:[!(i&&(null!=y&&y.card||null!=y&&y.tweet))&&ne.a.snippet,!e&&!s&&!o&&!(i&&null!=g&&null!=(p=g.message_data)&&p.attachment)&&ne.a.snippetPadding]},g&&!S?l.a.createElement(X,{conversationType:t.type,entry:g,highlightingTokens:a,isMessageItem:i,isSelected:this._isVDLEnabled&&n,perspective:c,unread:this._isVDLEnabled&&m}):S?this._renderSearchConversationPreview():null),f?this._renderConversationLabel(t):null,F?this._renderSocialProof(t):null),i?null:this._renderEndCellWithMenu(T,e,s,o))))}))}}ke.contextType=I.a,ke.defaultProps={searchQuery:"",inboxType:"primary",isActive:!1,filter:e=>!0};t.a=Object(ie.a)(h(ke),{page:"messages",section:"inbox"})},b9JY:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c}));var n=a("aWyx");const l=e=>e&&e.type===n.b.MESSAGE,s=e=>e&&e.type===n.b.WELCOME_MESSAGE,i=e=>e&&e.type===n.b.TRUST_CONVERSATION,r=e=>e&&e.type===n.b.REACTION_CREATE,o=[n.b.CONVERSATION_AVATAR_UPDATE,n.b.CONVERSATION_NAME_UPDATE,n.b.JOIN_CONVERSATION,n.b.PARTICIPANTS_JOIN,n.b.PARTICIPANTS_LEAVE],c=e=>e&&o.indexOf(e.type)>-1},d9IC:function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("3XMw"),i=a.n(s),r=a("Irs7"),o=a("MWbm"),c=a("/yvb"),d=a("t62R"),u=a("rHpw");const m=i.a.b08821f4,p=i.a.e047b8fa,g=u.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,paddingLeft:e.spaces.space16,paddingVertical:e.spaces.space4,alignItems:"center",flexDirection:"row",justifyContent:"space-between",borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor},backButton:{marginRight:e.spaces.space4},iconContainer:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.text,marginRight:e.spaces.space12,fontSize:e.fontSizes.body,marginVertical:e.spaces.space8},labelHeader:{borderBottomStyle:"none",paddingVertical:e.spaces.space12}})));t.a=e=>{const t=Object(r.b)(),{clearRecentSearches:a,headerText:n,icon:s,isInboxLabelHeader:i,withClearButton:u}=e;l.a.useEffect((()=>{t.scribe({component:"recent_search",action:"impression"})}),[t]);const y=[g.root,i&&g.labelHeader];return l.a.createElement(o.a,{style:y},l.a.createElement(o.a,{style:g.iconContainer},(()=>{const e=s;return e?l.a.createElement(e,{style:g.icon}):null})(),l.a.createElement(d.b,{accessibilityLevel:2,accessibilityRole:"heading",size:"headline1",weight:"heavy"},n)),u?l.a.createElement(c.a,{accessibilityLabel:m,onPress:a,style:g.backButton,type:"onMediaWhiteFilled"},p):null)}},"ejT/":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l}));const n=e=>({id:e,distanceToViewportTop:0}),l=e=>({id:e,distanceToViewportBottom:0})},f42t:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("97Jx"),l=a.n(n),s=(a("kYxP"),a("ERkP")),i=a.n(s);class r extends i.a.Component{constructor(...e){super(...e),this.state={isLoaded:!1}}componentDidMount(){return this._isMounted=!0,this.load()}componentDidUpdate(e){return this.props.modules===e.modules?null:this.load()}componentWillUnmount(){this._isMounted=!1}load(){this.setState({isLoaded:!1});const{modules:e}=this.props,t=Object.keys(e);return Promise.all(t.map((t=>e[t]()))).then((e=>t.reduce(((t,a,n)=>(t[a]=e[n],t)),{}))).then((e=>{if(!this._isMounted)return null;this.setState({modules:e,isLoaded:!0})}))}render(){const{isLoaded:e}=this.state,t=e?this.state.modules:{};return i.a.Children.only(this.props.children(t||{}))}}const o=(e,t)=>a=>i.a.createElement(r,{modules:t},(t=>i.a.createElement(e,l()({},t,a))))},fuhe:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ht}));var n=a("ERkP"),l=a.n(n),s=a("v6aA"),i=(a("kYxP"),a("MMRb")),r=a("97Jx"),o=a.n(r),c=a("ZUOq"),d=a("V/6K"),u=a("CDB5"),m=a("RqPI"),p=a("1YZw"),g=a("hqKg"),y=a("X/yg"),h=a("AQOc"),_=a("UhuB"),b=a("l0YN"),v=a("G6rE"),k=a("rxPX"),f=a("0KEI"),F=a("P1r1");const T=(e,t)=>t.conversationId,S=Object(g.createSelector)(((e,t)=>i.selectEntriesForConversation(e,T(0,t))),m.s,((e,t)=>t?Object(y.e)(e,t):void 0)),E=e=>t=>u.c(e,t),C=e=>(t,a)=>u.a(e,t,a),I={conversation:(e,t)=>i.selectConversation(e,T(0,t)),entries:i.selectEntries,perspective:m.s,users:v.e.selectAll,dataSaverMode:F.j,dtabBarInfo:F.m,quickReplyOptions:S,visibility:i.selectDrawerVisibility,inboxUnreadCount:b.a,isUnread:(e,t)=>!i.selectConversationIsRead(e,T(0,t)),isDmReceiptSettingEnabled:_.n},R={draftText:(e,t)=>u.l(e,T(0,t)),gifMetadata:(e,t)=>u.h(e,T(0,t)),isUploading:(e,t)=>u.j(e,T(0,t)),media:(e,t)=>u.i(e,T(0,t)),mediaUploadProgress:(e,t)=>u.k(e,T(0,t))};var L=Object(k.a)().propsFromState((()=>({...I,...R}))).adjustStateProps((({conversation:e,dataSaverMode:t,draftText:a,dtabBarInfo:n,entries:l,gifMetadata:s,inboxUnreadCount:i,isDmReceiptSettingEnabled:r,isUnread:o,isUploading:c,media:d,mediaUploadProgress:u,perspective:m,quickReplyOptions:p,users:g,visibility:y})=>{const _=null==e?void 0:e.data;return{conversation:_&&Object(h.a)(_,l,g),perspective:m,dataSaverMode:t,draftText:a,dtabBarInfo:n,gifMetadata:s,inboxUnreadCount:i,isDmReceiptSettingEnabled:r,isUploading:c,isUnread:o,media:d,mediaUploadProgress:u,quickReplyOptions:p,visibility:y}})).propsFromActions((({conversationId:e})=>({addMedia:C(e),addToast:p.b,createLocalApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_CONVERSATION"),fetchConversationHistory:i.fetchConversationHistory,removeMedia:E(e),saveText:u.f,sendMessage:u.m,updateConversationReadState:i.updateConversationReadState,updateTyping:i.updateTyping,fetchUpdatesIfNeeded:i.fetchUpdatesIfNeeded}))).withAnalytics({page:"messages",section:"thread_drawer"}),K=a("aWyx"),x=a("qz2E"),w=a("Oi4X"),M=a("OhSZ"),O=a("3XMw"),A=a.n(O),D=a("95Se"),P=a("uDfI"),U=a("MWbm"),H=a("/yvb"),N=a("Znyr"),j=a("rHpw");const B=A.a.b08821f4;function W({buttonType:e,inboxUnreadCount:t}){const a=Object(P.c)();return l.a.createElement(U.a,null,l.a.createElement(H.a,{accessibilityLabel:B,icon:l.a.createElement(D.a,null),onPress:()=>{a(i.popOutConversation(null))},type:e}),t&&t>0?l.a.createElement(N.a,{pip:!0,style:q.newMessagePip,truncatedCountFormatter:()=>"",unreadCountLabel:()=>""}):null)}const q=j.a.create((e=>({newMessagePip:{right:e.spaces.space4,top:e.spaces.space4}})));var V=a("zCf4"),z=a("Avzu"),Q=a("Lsrn"),G=a("k/Ka");const Y=(e={})=>Object(G.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Q.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M12 19.344l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 19.344z"}),l.a.createElement("path",{d:"M12 11.535l-8.72-8.72c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l9.25 9.25c.292.294.767.294 1.06 0l9.25-9.25c.146-.145.22-.337.22-.53s-.073-.383-.22-.53c-.293-.292-.768-.292-1.06 0L12 11.535z"})));Y.metadata={width:24,height:24};var X=Y;const $=(e={})=>Object(G.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Q.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M12 4.656l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0L12 4.656z"}),l.a.createElement("path",{d:"M12 12.465l8.72 8.72c.293.293.768.293 1.06 0s.294-.768 0-1.06l-9.25-9.25c-.292-.294-.767-.294-1.06 0l-9.25 9.25c-.146.145-.22.337-.22.53s.073.383.22.53c.293.292.768.292 1.06 0l8.72-8.72z"})));$.metadata={width:24,height:24};var J=$;const Z=A.a.d227d19e,ee=A.a.c64c1884,te=A.a.j7d0e836,ae=A.a.cdcebd22;function ne({analytics:e,buttonType:t,conversationTitle:a,handleToggleVisibility:n,isExpanded:s}){const i=Object(V.f)();return l.a.createElement(U.a,{style:le.rightControls},a?null:l.a.createElement(H.a,{accessibilityLabel:ee,hoverLabel:{label:ae},icon:l.a.createElement(z.a,null),onPress:()=>{e.scribe({section:"compose_drawer",component:"dm",action:"show"}),i.push({pathname:"/messages/compose",state:{source:"drawer"}})},type:t}),s?l.a.createElement(H.a,{accessibilityLabel:Z,hoverLabel:{label:Z},icon:l.a.createElement(X,null),onPress:n,type:t}):l.a.createElement(H.a,{accessibilityLabel:te,hoverLabel:{label:te},icon:l.a.createElement(J,null),onPress:n,type:t}))}const le=j.a.create((e=>({rightControls:{flexDirection:"row"}})));var se=a("x0mb"),ie=a("t62R");const re=A.a.a2f81050,oe=A.a.e736990a;function ce({conversationTitle:e,hasNewMessages:t,isHighlighted:a}){const n=e||l.a.createElement(ie.b,null,re);return l.a.createElement(U.a,{style:de.titleContainer},l.a.createElement(U.a,{style:[de.titleTextRoot,a&&t?de.titleTextHighlighted:null]},n),t?l.a.createElement(U.a,{style:de.newMessageDotContainer},l.a.createElement(se.a,{accessibilityLabel:oe,style:[de.newMessageDotRoot,a?de.newMessageDotHighlighted:de.newMessageDotRegular]})):null)}const de=j.a.create((e=>({newMessageDotContainer:{flexGrow:1},newMessageDotRoot:{width:e.spaces.space12,height:e.spaces.space12,marginLeft:e.spaces.space4},newMessageDotRegular:{color:e.colors.primary},newMessageDotHighlighted:{color:e.colors.white},titleContainer:{alignItems:"center",display:"flex",flexDirection:"row",flexGrow:1},titleTextRoot:{flexGrow:1,flexShrink:1},titleTextHighlighted:{color:e.colors.white}})));var ue=a("AQ79"),me=a("OrGc"),pe=a("hACr"),ge=a("fs1G"),ye="DMDrawerHeader",he="DMDrawerHeaderHighlighted",_e="DMDrawer",be=a("Irs7"),ve=a("xKuM");function ke({conversationSubtitle:e,conversationTitle:t,hasNewMessages:a,inboxUnreadCount:n,isHighlighted:s,onDrawerOpen:r,triggerHighlight:o}){const c=l.a.createRef(),d=Object(be.b)(),u=Object(P.c)(),m=Object(P.d)(i.selectDrawerVisibility),p=fe(a,s),g=m===ue.b.EXPANDED;l.a.useEffect((()=>{a&&!s&&o&&o()}),[a,s,o]);const y=()=>{const e=g?ue.b.COLLAPSED:ue.b.EXPANDED;e===ue.b.COLLAPSED?d.scribe({action:"collapse"}):e===ue.b.EXPANDED&&(d.scribe({action:"expand"}),r&&r()),u(i.setDrawerVisibility(e))},h=a?s?[Fe.headerHighlighted]:[Fe.headerActive]:[];return l.a.createElement(pe.a,{enabled:!0,handlers:{[me.e.goLists]:ge.a,[me.e.toggleDMDrawer]:()=>{y(),c&&c.current&&c.current.focus()}}},l.a.createElement(U.a,{ref:c,style:[Fe.headerRoot,!g&&Fe.headerBorderClosed,...h,Fe.cursor],testID:s?he:ye},l.a.createElement(ve.a,{leftControl:t&&g?l.a.createElement(W,{buttonType:p,inboxUnreadCount:n}):null,onMiddleControlClick:y,rightControl:l.a.createElement(ne,{analytics:d,buttonType:p,conversationTitle:t,handleToggleVisibility:y,isExpanded:g}),style:Fe.roundedAppBarCorners,subtitle:e,title:l.a.createElement(ce,{conversationTitle:t,hasNewMessages:a,isHighlighted:s}),withBackground:!s})))}const fe=(e,t)=>e&&t?"onMediaText":"primaryText",Fe=j.a.create((e=>({cursor:{cursor:"pointer"},headerRoot:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge,transition:"all 0.3s ease"},headerBorderClosed:{borderColor:e.colors.navigationBackground},headerActive:{backgroundColor:e.colors.unreadCellBackground},headerHighlighted:{borderColor:e.colors.primary,backgroundColor:e.colors.primary},roundedAppBarCorners:{borderTopLeftRadius:e.borderRadii.xLarge,borderTopRightRadius:e.borderRadii.xLarge}})));var Te=a("zb92");var Se=Object(Te.a)({loader:()=>Promise.all([a.e(0),a.e(289)]).then(a.bind(null,"Rk1B"))}),Ee=a("aWzz"),Ce=a("XnpN"),Ie=a("GSsg"),Re=a("aITJ"),Le=a("yrzJ");class Ke extends l.a.Component{constructor(e,t){super(e,t),this._composer=l.a.createRef(),this._renderConversation=(e,t)=>{const{conversationId:a,history:n,location:s}=this.props;return l.a.createElement(w.a,{conversationId:a,drawerHeader:this._renderHeader(),history:n,isWide:!1,location:s,richTextInputContext:e,typeaheadWrapper:t})},this._isExpanded=()=>{const{visibility:e}=this.props;return e===ue.b.EXPANDED},this._fetchUpdatesIfNeeded=()=>{const{conversationId:e,createLocalApiErrorHandler:t,fetchUpdatesIfNeeded:a,isDmReceiptSettingEnabled:n}=this.props;a(n?{active_conversation_id:e,dm_users:!0}:{}).catch(t())},Object(x.a)()}componentDidMount(){this._updatePolling()}componentDidUpdate(e){e.visibility!==this.props.visibility&&this._updatePolling()}render(){const e=this._isExpanded();return l.a.createElement(l.a.Fragment,null,!e&&this._renderHeader(),e?Re.b.isDesktopOS()?l.a.createElement(Se,null,(({richTextInputContext:e,typeaheadWrapper:t})=>this._renderConversation(e,t))):this._renderConversation():null)}_renderHeader(){const{conversation:e,inboxUnreadCount:t,isHeaderHighlighted:a,isUnread:n,onDrawerOpen:s,perspective:i,triggerHeaderHighlight:r}=this.props,o=a?"white":"text",c=a?"white":"gray700",d=e&&e.type===K.a.ONE_TO_ONE&&i&&Object(Ce.a)(e,i).map((({user:e})=>e.screen_name)),u=d?l.a.createElement(Le.a,{color:c,screenName:d[0]}):void 0;return l.a.createElement(U.a,{style:xe.headerRoot},l.a.createElement(ke,{conversationSubtitle:u,conversationTitle:l.a.createElement(M.b,{conversation:e,perspective:i,textColor:o,withScreenName:!1}),hasNewMessages:n,inboxUnreadCount:t,isHighlighted:a,onDrawerOpen:s,triggerHighlight:r}))}_updatePolling(){this._pollingTimer&&this._pollingTimer.stop(),this.props.visibility===ue.b.COLLAPSED&&(this._pollingTimer=new Ie.a(this._fetchUpdatesIfNeeded,{interval:3e3}),this._pollingTimer.start())}getChildContext(){return{getCustomLocation:null}}}Ke.contextType=s.a,Ke.childContextTypes={getCustomLocation:Ee.func};const xe=j.a.create((e=>({headerRoot:{position:"sticky",top:0,zIndex:e.componentZIndices.appBarZIndex}})));var we=L(Ke),Me=a("4q8G"),Oe=a("6xIQ"),Ae=a("maE+"),De=a("pXKu"),Pe=a("OOE2"),Ue=a("tn7R");const He=A.a.a2f81050;function Ne({dmDrawerOnClick:e,drawerCacheKey:t}){const a=Object(be.b)(),n=Object(P.c)(),s=Object(P.d)(i.selectConversations),r=[];for(const e of Object(Ue.a)(s)){var o;!e.isDeleted&&null!=(o=e.data)&&o.trusted&&r.push(e.data)}r.sort(Me.a);const c=r.map((e=>e.conversation_id)),d=Object(P.d)(F.s),u=Object(P.d)(i.selectUntrustedConversationCount),m=Object(P.d)(Object(Oe.a)((e=>i.selectUntrustedCounts(e)),(e=>e))),p=Object(P.d)(i.selectUntrustedUnreadCount),g=d&&u>0,y=d&&m.newUntrustedWithSocialProof+m.oldUntrustedWithSocialProof+m.newUntrustedWithoutSocialProof+m.oldUntrustedWithoutSocialProof>0,h=()=>l.a.createElement(Pe.a,{allowUntrustedInbox:g,allowUntrustedVDLInbox:y,secondaryInboxCounts:m,untrustedUnreadCount:p});return l.a.createElement(De.a,{accessibilityTitle:He,analytics:a,conversationIds:c,customCellClick:e,fetchInboxHistory:()=>n(i.fetchTrustedInboxHistory()),isDrawer:!0,renderEmptyDMInbox:()=>l.a.createElement(Ae.a,{messageRequestPivot:h()}),renderStickyContent:h,updateLastSeenEventId:()=>n(i.updateTrustedLastSeenEventId()),virtualScrollerCacheKey:t,withPinnedInbox:!0})}var je=a("cFyg"),Be=a("pdDm"),We=a("lAtx"),qe=a("s8G+"),Ve=a("yw4N");const ze="dmDrawerInbox";function Qe({renderHeader:e}){const t=Object(P.c)(),a=Object(qe.a)("dm_evolution_enabled"),n=Object(qe.a)("dm_evolution_inbox_primary_enabled"),s=(e,a)=>{t(i.popOutConversation(a)),e.preventDefault()};return l.a.createElement(U.a,{style:Ge.fill},l.a.createElement(U.a,{style:[Ge.viewportView,je.b.drawerHeaderRadius]},l.a.createElement(Ve.a,{style:[Ge.viewportView,je.b.drawerHeaderRadius]},e(),a&&n?l.a.createElement(Be.a,{dmDrawerCacheKey:ze,dmDrawerOnClick:s,pollInterval:We.POLL_INTERVAL}):l.a.createElement(Ne,{dmDrawerOnClick:s,drawerCacheKey:ze}))))}const Ge=j.a.create((e=>({fill:{flex:1,alignSelf:"stretch"},viewportView:{...j.a.absoluteFillObject,overflowY:"auto"}})));var Ye=a("7JQg");const Xe={page:"messages",section:"inbox_drawer"};function $e({isHeaderHighlighted:e,onDrawerOpen:t,triggerHeaderHighlight:a}){const n=Object(P.d)(b.a),s=Object(P.d)(i.selectDrawerVisibility)===ue.b.EXPANDED,r=n>0;l.a.useEffect((()=>{s&&Object(x.a)()}),[s]);const o=()=>l.a.createElement(U.a,{style:Je.headerRoot},l.a.createElement(ke,{hasNewMessages:r,isHighlighted:e,onDrawerOpen:t,triggerHighlight:a}));return l.a.createElement(Ye.c,{namespace:Xe},l.a.createElement(l.a.Fragment,null,!s&&o(),s&&l.a.createElement(Qe,{renderHeader:o})))}const Je=j.a.create((e=>({headerRoot:{position:"sticky",top:0,zIndex:e.componentZIndices.appBarZIndex}})));var Ze=a("A69o"),et=a("0FVZ"),tt=a("Oe3h"),at=a("nBUg");const nt={isGlobal:!0,isSticky:!0},lt={isGlobal:!0,isSticky:!1};function st({hasConversations:e,isHideDMDrawerPath:t,width:a}){const n=l.a.useRef(null),s=Object(V.f)(),r=Object(V.g)(),c=Object(P.d)(m.s),u=Object(P.d)(i.selectPoppedOutConversationId),p=Object(P.d)(i.selectDrawerVisibility),[g,y]=l.a.useState(!1),[h,_]=l.a.useState(void 0),b=p===ue.b.EXPANDED,v=()=>{g&&(y(!1),clearTimeout(n.current))},k=e=>{const{nativeEvent:{layout:{height:t}}}=e;b||void 0!==h||_(t)},f=l.a.useCallback((()=>{b||g||n.current||(y(!0),n.current=setTimeout((()=>{y(!1),n.current=null}),3e3))}),[b,g]);return l.a.useEffect((()=>()=>{clearTimeout(n.current)}),[n]),(()=>{const a=p===ue.b.CLOSED;return!t()&&e&&!a})()?l.a.createElement(et.a.Drawer,null,l.a.createElement(tt.a,{id:"DMDrawer"},((e,t)=>l.a.createElement(d.a.Provider,{value:{isDrawer:!0}},l.a.createElement(at.b.Provider,{value:{isDMDrawer:()=>!0}},l.a.createElement(U.a,o()({ref:e()},t({style:[je.b.root,{width:a}],testID:_e})),l.a.createElement(U.a,{onLayout:h?void 0:k,style:[je.b.expandable,{height:h,maxHeight:h},b&&je.b.expanded]},u?l.a.createElement(Ze.a.Provider,{value:lt},l.a.createElement(we,{conversationId:u,history:s,isHeaderHighlighted:g,location:r,onDrawerOpen:v,perspective:c,triggerHeaderHighlight:f})):l.a.createElement(Ze.a.Provider,{value:nt},l.a.createElement($e,{isHeaderHighlighted:g,onDrawerOpen:v,triggerHeaderHighlight:f}))))))))):null}st.defaultProps={width:c.a.dmDrawerWidth.max};var it,rt=a("P74S"),ot=a.n(rt),ct=(a("YWiL"),a("PJTX")),dt=a.n(ct);const ut=void 0!==it?it:it=a("IACL");function mt({isHideDMDrawerPath:e,width:t}){const a=Object(f.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_DRAWER_EVOLUTION"),n=Object(P.c)(),s=dt()(),[r,o]=l.a.useState(!1),[c,d]=l.a.useState(!1),u=l.a.useCallback((()=>{ot()(s,ut,{}).toPromise().then((e=>{var t,a,n,l;null!=(a=((null==e||null==(t=e.dm_convo_list_slice)?void 0:t.items)||[])[0])&&null!=(n=a.dm_conversation_results)&&null!=(l=n.result)&&l.id&&o(!0)})).catch(a({}))}),[a,s]),m=l.a.useCallback((()=>{e()||c||(n(i.loadDrawerVisibilityFromPersistence()),u(),d(!0))}),[n,u,e,c]);return l.a.useEffect((()=>{m()}),[m]),l.a.createElement(st,{hasConversations:r,isHideDMDrawerPath:e,width:t})}var pt=a("YeIG");function gt({isHideDMDrawerPath:e,width:t}){const a=Object(f.useCreateLocalApiErrorHandler)("DIRECT_MESSAGES_DRAWER"),n=Object(P.c)(),[s,r]=l.a.useState(!1),o=Object(P.d)(i.selectConversations),c=!Object(pt.a)(o),d=l.a.useCallback((()=>{e()||s||(n(i.loadDrawerVisibilityFromPersistence()),n(i.fetchInboxIfNeeded()).catch(a({})),r(!0))}),[a,n,s,e]);return l.a.useEffect((()=>{d()}),[d]),l.a.createElement(st,{hasConversations:c,isHideDMDrawerPath:e,width:t})}var yt=a("YlqV");function ht({width:e}){const t=Object(V.g)(),{featureSwitches:a}=l.a.useContext(s.a),n=()=>Object(yt.i)(t.pathname)||t.pathname.startsWith("/i/birdwatch");return a.isTrue("dm_evolution_enabled")&&a.isTrue("dm_evolution_inbox_primary_enabled")?l.a.createElement(mt,{isHideDMDrawerPath:n,width:e}):l.a.createElement(gt,{isHideDMDrawerPath:n,width:e})}},g54k:function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var n=a("hqKg"),l=a("s1N3");var s=e=>{const{sender_id:t,by_user_id:a,participants:n=[]}=e;return Object(l.a)(n.map((({user_id:e})=>e)).concat([t,a]).filter(Boolean))},i=a("G6rE"),r=a("oEGd");const o=(e,t)=>({users:s(t).reduce(((t,a)=>(t[a]=e[a],t)),{})}),c=Object(n.createSelector)(i.e.selectAll,((e,t)=>t.entry),o);t.a=Object(r.c)(c)},gEJU:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("ERkP"),l=a.n(n),s=a("eb3s"),i=a("3XMw"),r=a.n(i);const o=r.a.a219e218,c=r.a.d571e4f9,d=r.a.a551bf7e;function u(e){const{count:t,setShowPinError:a}=e;return l.a.createElement(s.a,{confirmButtonLabel:o,headline:c({count:t}),onConfirm:()=>a(!1),text:d,withCancelButton:!1})}},gbD7:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return o}));a("ERkP");var n=a("aWyx");const l=(e,t)=>({entry:{id:t,time:"",type:e},isActive:!1,isRapidFire:!1,isFirstRapidFire:!1,isLastRapidFire:!1,type:e}),s=l(n.b.CONVERSATION_PROFILE_INFO_HEADER,"conversationProfileInfoHeader"),i="typingIndicator",r=l(n.b.TYPING_INDICATOR,i),o=l(n.b.READ_ONLY_INDICATOR,"readOnlyIndicator")},"hl/W":function(e,t,a){"use strict";var n=a("MMRb"),l=a("P1r1"),s=a("qdEw"),i=a("6xIQ"),r=a("X/yg"),o=a("AQ79"),c=a("z2Pn"),d=a("rxPX"),u=a("0KEI");const m=e=>e===o.d.PRIMARY?n.fetchTrustedInboxHistory:e===o.d.SECONDARY?n.fetchUntrustedInboxHistory:n.fetchUntrustedLowQualityInboxHistory,p=e=>e===o.d.PRIMARY?n.updateTrustedLastSeenEventId:e===o.d.SECONDARY?n.updateUntrustedLastSeenEventId:()=>()=>Promise.resolve();t.a=({inbox:e})=>Object(d.a)().propsFromState((()=>({conversationIds:Object(i.a)((t=>n.selectConversationIdsByInbox(t,e)),(e=>e)),dmNsfwMediaFilter:l.l,isLoadingTop:n.selectIsLoadingTop,isDmNsfwMediaFilterEnabled:l.q,isDmsOpenForAll:l.s,hasConversations:n.selectHasConversations,untrustedUnreadCount:n.selectUntrustedUnreadCount,untrustedCounts:Object(i.a)((e=>n.selectUntrustedCounts(e)),(e=>e)),untrustedCursor:n.selectUntrustedCursor,untrustedConversationCount:n.selectUntrustedConversationCount,untrustedLowQualityConversationCount:n.selectUntrustedLowQualityConversationCount,untrustedLowQualityCursor:n.selectUntrustedLowQualityCursor}))).adjustStateProps((({conversationIds:e,dmNsfwMediaFilter:t,hasConversations:a,isDmNsfwMediaFilterEnabled:n,isDmsOpenForAll:l,isLoadingTop:s,untrustedConversationCount:i,untrustedCounts:r,untrustedCursor:o,untrustedLowQualityConversationCount:c,untrustedLowQualityCursor:d,untrustedUnreadCount:u})=>({dmNsfwMediaFilter:t,isDmNsfwMediaFilterEnabled:n,conversationIds:e,untrustedUnreadCount:u,untrustedCounts:r,allowUntrustedInbox:l&&i>0,allowUntrustedVDLInbox:l&&r.newUntrustedWithSocialProof+r.oldUntrustedWithSocialProof+r.newUntrustedWithoutSocialProof+r.oldUntrustedWithoutSocialProof>0,allowLowQualityUntrustedInbox:l&&c>0,isAtEndOfUntrustedInbox:o&&"AT_END"===o.status}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX"),clearSearchCache:n.clearSearchCache,clearSearchSlicesCache:s.b,fetchInboxHistory:m(e),setLastViewedDmInboxPath:c.h,updateLastSeenEventId:p(e),updateDmNsfwMediaFilter:l.L}))).withAnalytics({page:"messages",section:"inbox",component:Object(r.k)(e)})},htvZ:function(e,t,a){"use strict";a.d(t,"b",(function(){return _})),a.d(t,"a",(function(){return b}));var n=a("ERkP"),l=a.n(n),s=a("v6aA"),i=(a("kYxP"),a("8W85"));function r(){const e=l.a.useContext(b),[t,a]=e.activeVoiceMessage,[,n]=e.playerApi,[,s]=e.playerState,[,r]=t;const o={media:r,onEnded:function(){a([null,null]),e.scribeAction&&e.scribeAction.complete()},onPlayerApi:n,onPlayerState:s};return l.a.createElement(i.a,o)}var o=a("X/yg"),c=(a("849X"),a("89tF")),d=a("k89r");function u(e){const t=function(){const e=l.a.useState(g.activeVoiceMessage),t=l.a.useState(g.playerApi),a=l.a.useState(g.playerState),n=function(){const e=Object(d.a)();return l.a.useMemo((()=>{const t={page:"messages",section:"thread",component:"message",element:"voice"};function a({action:e,component:a=t.component}){const{element:n,page:l,section:s}=t;return{page:l,section:s,component:a,element:n,action:e}}const n=(t,n)=>n?n.data?e.scribe({...a({action:t}),data:n.data}):e.scribe({...a({action:t,component:p(n)})}):e.scribe({...a({action:t})});return{impression:e=>n("impression",e),report:e=>n("report",e),play:e=>n("play",e),pause:()=>n("pause"),complete:()=>n("complete")}}),[e])}();return{activeVoiceMessage:e,playerApi:t,playerState:a,scribeAction:n}}();return l.a.createElement(y.Provider,{value:t},e.children)}const m={Timelines:Object(c.a)({message:!0,inbox_timeline:!0,low_quality_timeline:!0,requests_timeline:!0})};function p({isLowQuality:e,isTrusted:t}){return t?m.Timelines.inbox_timeline:e?m.Timelines.low_quality_timeline:m.Timelines.requests_timeline}const g={activeVoiceMessage:[null,null],playerApi:null,playerState:null,scribeAction:null},y=l.a.createContext({activeVoiceMessage:[g.activeVoiceMessage,h],playerApi:[g.playerApi,h],playerState:[g.playerState,h],scribeAction:null});function h(){throw new Error("DMVoiceContext is not initialized")}function _(e){const{featureSwitches:t}=l.a.useContext(s.a);return Object(o.o)(t)?l.a.createElement(u,null,e.children,l.a.createElement(r,null)):e.children}const b=y},"ii+P":function(e,t,a){"use strict";a.d(t,"b",(function(){return i}));var n=a("ERkP"),l=a.n(n),s=a("wtru");function i(e){const t=Object(s.b)();return[!!t&&!t.flags[e],l.a.useCallback((()=>{null==t||t.addFlag(e)}),[t,e])]}t.a=i},ijJS:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a("ERkP"),l=a.n(n),s=a("aX4+"),i=a("3XMw"),r=a.n(i),o=a("b5s6"),c=a("MWbm"),d=a("TIdA"),u=a("A91F"),m=a("rHpw"),p=a("t62R"),g=a("4n2h");const y=r.a.ga086a54,h=({accessibilityLabel:e,image:t})=>l.a.createElement(c.a,{style:v.thumbnail},l.a.createElement(d.a,{accessibilityLabel:e,aspectMode:u.a.SQUARE,backgroundColor:m.a.theme.colors.gray300,image:t})),_=({card:e,tweetUserId:t})=>l.a.createElement(s.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values,users:e.users},cardContext:{tweetUserId:t}});function b({accessibilityLabel:e,card:t,content:a,isMessageSearchItem:n=!1,isSelected:s=!1,searchImage:i,tweetId:r,tweetUserId:d,unread:u=!1}){const m=Object(g.a)(u,s),b=Object(g.b)(u);return n&&(i||t||r)?l.a.createElement(c.a,{style:i?v.mediaContainer:void 0},l.a.createElement(c.a,{style:t||r?v.cardMessageText:v.messageText},l.a.createElement(p.b,{color:m,numberOfLines:2,weight:b},a)),t&&d?l.a.createElement(_,{card:t,tweetUserId:d}):null,r?l.a.createElement(o.a,{tweetId:r}):null,i?l.a.createElement(h,{accessibilityLabel:e||y,image:i}):null):l.a.createElement(p.b,{color:m,numberOfLines:n?2:1,style:n?v.messageText:void 0,weight:b},a)}const v=m.a.create((e=>({thumbnail:{height:e.spacesPx.space40,width:e.spacesPx.space40,borderRadius:e.borderRadii.large,marginLeft:`calc(${e.spaces.space8} + ${e.spaces.space2})`,overflow:"hidden"},cardMessageText:{paddingVertical:`calc(${e.spaces.space8} + ${e.spaces.space2})`},messageText:{maxWidth:`calc(100% - (${e.spaces.space48} + ${e.spaces.space2}))`,paddingVertical:e.spaces.space2},mediaContainer:{flexDirection:"row",justifyContent:"space-between"}})))},iunV:function(e,t,a){"use strict";var n,l,s={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"message"},{defaultValue:null,kind:"LocalArgument",name:"target"}],kind:"Fragment",metadata:null,name:"useSendMessageMutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"message",variableName:"message"},{kind:"Literal",name:"s",value:18},{kind:"Variable",name:"target",variableName:"target"}],concreteType:null,kind:"LinkedField",name:"create_dm",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"useSendMessageMutation",selections:l},params:{id:"V1X0AqeRDf3jOpVzYKlvdg",metadata:{},name:"useSendMessageMutation",operationKind:"mutation",text:null}};s.hash="9f02923cb63ff1de10d44a45b2029eab",e.exports=s},kb9v:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),l=a.n(n),s=a("TIdA"),i=a("t62R"),r=a("A91F"),o=a("/yvb"),c=a("Eqye"),d=a("efqG"),u=a("sgih"),m=a("rHpw"),p=a("MWbm"),g=a("3dyc");const y=m.a.create((e=>({root:{paddingVertical:e.spacesPx.space32},rootWithImage:{paddingTop:0},graphic:{marginBottom:e.spacesPx.space20},icon:{alignSelf:"center",height:e.spacesPx.space64,width:e.spacesPx.space64},container:{paddingHorizontal:e.spacesPx.space32},description:{marginTop:e.spacesPx.space8,marginBottom:e.spacesPx.space4},actionButton:{marginTop:e.spacesPx.space16}})));t.a=({actionPrimary:e,actionSecondary:t,children:a,headline:n,icon:h,iconColor:_,imageUrl:b,onDismiss:v,shouldDisplay:k,text:f,withMask:F=!0})=>{const[T,S]=l.a.useState(!1),E=e=>l.a.createElement(d.a,{onDismiss:w,renderContent:()=>I(w),switchOnlyOnXSmallBreakpoint:!0,visibilityBehavior:g.b.forceVisible,withArrow:!0,withFixedPosition:!0,withMask:F},e),C=()=>l.a.createElement(u.a,{onMaskClick:()=>w(),type:"center",withMask:!0},I(w)),I=a=>l.a.createElement(p.a,{style:[y.root,b&&y.rootWithImage]},R(),l.a.createElement(p.a,{style:y.container},L(),K(),x({action:e,dismiss:a,type:t&&"primaryFilled"}),x({action:t,dismiss:a}))),R=()=>{let e=h&&l.a.createElement(h,{style:_?[y.icon,{color:m.a.theme.colors[_]}]:y.icon});return b&&!c.a.isEnabled&&(e=l.a.createElement(s.a,{accessibilityLabel:"",aspectMode:r.a.exact(2),image:b})),e&&l.a.createElement(p.a,{style:y.graphic},e)},L=()=>l.a.createElement(i.b,{size:"title3",weight:"heavy"},n),K=()=>l.a.createElement(i.b,{color:"gray700",style:y.description},f),x=({action:e,dismiss:t,type:a})=>e&&l.a.createElement(o.a,{link:e.link&&e.link,onPress:e.onClick?e.onClick:t,size:"large",style:y.actionButton,type:a},e.text),w=()=>{v&&v(),S(!0)};return k&&!T?a?E(a):C():a||null}},lAtx:function(e,t,a){"use strict";a.r(t),a.d(t,"POLL_INTERVAL",(function(){return Oe}));var n=a("ERkP"),l=a.n(n),s=a("v6aA"),i=a("Y6L+"),r=a("zCf4"),o=a("MMRb"),c=a("rxPX");const d=(e,t)=>{const a=Object(r.e)(t.location.pathname,{path:`/messages/${i.j}(/.*)?`,exact:!0,strict:!1});return null==a?void 0:a.params.conversationId},u=(e,t)=>{const a=d(0,t);return Object(o.selectInboxTypeByConversation)(e,a)};var m=Object(c.a)().propsFromState((()=>({conversationId:d,inboxType:u}))),p=a("zsGg"),g=a("pdDm"),y=(a("kYxP"),a("hl/W")),h=a("qz2E"),_=a("pXKu"),b=a("jYSG"),v=a("nySH"),k=a("FIs5"),f=a("rHpw");function F(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(k.a,{header:e.tombstone?"":v.a,message:b.a,style:T.emptyMessage}),e.tombstone)}const T=f.a.create((e=>({emptyMessage:{borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.space16}})));var S=a("AQ79"),E=a("f42t"),C=a("P1r1"),I=a("0KEI");var R=Object(c.a)().propsFromState((()=>({dmNsfwMediaFilter:C.l}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(I.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX"),updateDmNsfwMediaFilter:C.L}))).withAnalytics({page:"messages",section:"inbox"}),L=a("0yYu"),K=a("3XMw"),x=a.n(K),w=a("Lz2T"),M=a("Irs7");const O=x.a.j24c37b2,A=x.a.f5dc353c,D=x.a.daeda054,P=x.a.fe1eaa96;var U=R((e=>{const{createLocalApiErrorHandler:t,dmNsfwMediaFilter:a,updateDmNsfwMediaFilter:n}=e,{featureSwitches:i}=l.a.useContext(s.a),r=i.isTrue("dm_conversations_nsfw_media_filter_enabled"),[o,c]=l.a.useState(void 0===a&&r),d=Object(M.b)(),u=l.a.useCallback((()=>{c(!1),n(!0).catch(t())}),[n,t]);return l.a.useEffect((()=>()=>{void 0===a&&r&&u()}),[a,r,u]),o?l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{bodyText:P,primaryAction:{onClick:()=>{d.scribe({component:"dm_nsfw_prompt",element:"primary_action",action:"click"}),u()},text:O},secondaryAction:{link:"/settings/direct_messages",onClick:()=>{d.scribe({component:"dm_nsfw_prompt",element:"secondary_action",action:"click"})},text:D},titleText:A}),l.a.createElement(L.a,null)):null})),H=a("5FtR"),N=a("uDfI"),j=a("MWbm"),B=a("t62R"),W=a("cm6r");const q=x.a.eb7de4aa,V=x.a.a0e81a2e;function z(e){const{isAtEndOfUntrustedInbox:t,untrustedConversationIds:a}=e,n=Object(M.b)(),s=Object(N.d)(C.r);l.a.useEffect((()=>{s&&t&&n.scribe({element:"low_quality_pivot",action:"impression"})}),[n,t,s]);return t&&s?l.a.createElement(j.a,null,a.length>0&&l.a.createElement(L.a,null),l.a.createElement(j.a,{style:Q.tombstoneDescription},l.a.createElement(B.b,{color:"gray700",size:"subtext2"},q)),l.a.createElement(W.a,{link:Object(v.b)(S.d.TERTIARY),onPress:()=>{n.scribe({element:"low_quality_pivot",action:"click"})},style:Q.tombstoneContainer},l.a.createElement(B.b,{align:"center",color:"primary",size:"body"},V))):null}const Q=f.a.create((e=>({tombstoneContainer:{borderTopStyle:"solid",borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small,borderBottomStyle:"solid",borderBottomColor:e.colors.borderColor,borderBottomWidth:e.borderWidths.small,paddingVertical:e.spaces.space12},tombstoneDescription:{paddingHorizontal:e.spaces.space16,paddingVertical:e.spaces.space16}})));var G=a("pxuL"),Y=a("M2mT");const X=x.a.cf2d1048;function $(e){const t=Object(r.f)(),a=Object(r.i)();return l.a.createElement(Y.a,{backLocation:"/messages",onBackClick:()=>{t.push(Object(v.b)(S.d.PRIMARY))},rightControl:Object(v.d)("/settings/direct_messages",!0),screenType:"secondaryRoot",title:l.a.createElement(B.b,{size:"headline2"},X),withDetailOpen:!a.isExact},e.children)}class J extends l.a.Component{constructor(...e){super(...e),this.componentDidMount=()=>{this.context.incrementDmDrawerSuppressorCount()},this.componentWillUnmount=()=>{this.context.decrementDmDrawerSuppressorCount()},this._renderTombstone=()=>{const{allowLowQualityUntrustedInbox:e,conversationIds:t,isAtEndOfUntrustedInbox:a}=this.props;return e?l.a.createElement(z,{isAtEndOfUntrustedInbox:a,untrustedConversationIds:t}):null},this._renderEmptyDMInbox=()=>{const e=this._renderTombstone();return l.a.createElement(F,{tombstone:e})}}render(){const{allowUntrustedInbox:e,analytics:t,conversationIds:a,fetchInboxHistory:n,updateLastSeenEventId:s}=this.props;return e?l.a.createElement($,null,l.a.createElement(U,null),l.a.createElement(_.a,{accessibilityTitle:X,analytics:t,conversationIds:a,fetchInboxHistory:n,footer:this._renderTombstone(),inboxType:S.d.SECONDARY,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:()=>Object(v.e)(this.props.conversationIds),updateLastSeenEventId:s,virtualScrollerCacheKey:"dmUntrustedInbox"})):l.a.createElement(H.a,{to:"/messages"})}}J.contextType=G.a,J.defaultProps={conversationIds:[]};var Z=Object(E.a)(Object(y.a)({inbox:S.d.SECONDARY})(J),{directMessages:h.a}),ee=(a("Qavd"),a("lnti"));var te,ae,ne=Object(c.a)().propsFromState((()=>({isDmQualityFilterEnabled:C.r,isDmsOpenForAll:C.s}))).withAnalytics({page:"messages",section:"inbox"}),le=a("Ka95"),se=a("DbJc"),ie=a("TEoO"),re=a("IG4P"),oe=a("Fr3L"),ce=a("GSsg"),de=a("DQzJ"),ue=a("P74S"),me=a.n(ue),pe=(a("YWiL"),a("PJTX")),ge=a.n(pe);const ye=e=>e.__id,he=void 0!==te?te:te=a("XZOd"),_e=void 0!==ae?ae:ae=a("FWve"),be={context:"DM_INBOX_SECONDARY_CONTEXT"},ve=e=>{var t;const{isDmQualityFilterEnabled:a,isDmsOpenForAll:n,pollInterval:s}=e,[i,r]=l.a.useState(!1),o=a?he:_e,{data:c,fetchNext:d,hasNext:u}=Object(de.a)(o,{}),m=Object(I.useCreateLocalApiErrorHandler)("DM_INBOX_SECONDARY_EVOLUTION"),p=ge()(),g=(null==c||null==(t=c.untrusted)?void 0:t.items)||[],y=Object(ee.a)(g.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),h=y.map((e=>e.__id));let _=[];if(a){var b;const e=(null==c||null==(b=c.low_quality)?void 0:b.items)||[];_=Object(ee.a)(e.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result})))}const k=l.a.useCallback((()=>{r(!0),me()(p,he,{}).toPromise().catch(m({})).finally((()=>r(!1)))}),[m,p]);l.a.useEffect((()=>{const e=new ce.a((()=>{k()}),{interval:s});return e.start(),()=>{e.stop()}}),[k,s]);const f=Object(v.e)(h),T=()=>a&&_.length?l.a.createElement(z,{isAtEndOfUntrustedInbox:!u,untrustedConversationIds:h}):null;return n?l.a.createElement($,null,l.a.createElement(U,null),l.a.createElement(re.a,{isRefreshing:i,onRefresh:k},l.a.createElement(ie.a,{accessibilityRole:"tablist",accessibilityTitle:X,anchoring:se.a,assumedItemHeight:100,cacheKey:"dmUntrustedInbox",footer:T(),header:f,identityFunction:ye,items:y,noItemsRenderer:()=>l.a.createElement(F,{tombstone:T()}),onNearEnd:d,renderer:(e,t)=>(t&&t(!0),l.a.createElement(le.a,{conversationIds:h,dm_conversation:e,inboxType:S.d.SECONDARY,isPinned:!1})),withKeyboardShortcuts:!0,withoutHeadroom:!0}))):l.a.createElement(H.a,{to:"/messages"})};var ke=ne((function(e){return l.a.createElement(oe.a,{errorConfig:be},l.a.createElement(ve,e))}));function fe(e){const t=Object(r.f)(),a=Object(r.i)();return l.a.createElement(Y.a,{backLocation:Object(v.b)(S.d.SECONDARY),onBackClick:()=>{t.push(Object(v.b)(S.d.SECONDARY))},rightControl:Object(v.d)("/settings/direct_messages",!0),screenType:"secondaryRoot",title:v.f,withDetailOpen:!a.isExact},e.children)}function Fe(e){return l.a.createElement(k.a,{header:v.a,message:b.a})}var Te=a("WjvF");const Se=x.a.bece84b4,Ee=x.a.ee8c0c8a;class Ce extends l.a.Component{constructor(...e){super(...e),this.componentDidMount=()=>{this.context.incrementDmDrawerSuppressorCount()},this.componentWillUnmount=()=>{this.context.decrementDmDrawerSuppressorCount()},this._renderEmptyDMInbox=()=>l.a.createElement(k.a,{header:Se,imageVariants:Object(Te.b)(Te.a.PaintCoveredHand),message:Ee}),this._handleBackClick=()=>{this.props.history.push(Object(v.b)(S.d.SECONDARY))},this._hasDetailOpen=()=>{const{match:e}=this.props;return!e.isExact}}render(){const{analytics:e,conversationIds:t,fetchInboxHistory:a,updateLastSeenEventId:n}=this.props;return l.a.createElement(fe,null,l.a.createElement(_.a,{accessibilityTitle:v.f,analytics:e,conversationIds:t,fetchInboxHistory:a,inboxType:S.d.TERTIARY,renderEmptyDMInbox:()=>l.a.createElement(Fe,null),renderStickyContent:()=>Object(v.e)(this.props.conversationIds),updateLastSeenEventId:n,virtualScrollerCacheKey:"dmLowQualityUntrustedInbox"}))}}Ce.contextType=G.a;var Ie,Re=Object(E.a)(Object(y.a)({inbox:S.d.TERTIARY})(Ce),{directMessages:h.a});const Le=e=>e.__id,Ke=void 0!==Ie?Ie:Ie=a("SDjT"),xe=e=>{var t;const{pollInterval:a}=e,{data:n,fetchNext:s}=Object(de.a)(Ke,{}),[i,r]=l.a.useState(!1),o=Object(I.useCreateLocalApiErrorHandler)("DM_INBOX_TERTIARY_EVOLUTION"),c=ge()(),d=l.a.useCallback((()=>{r(!0),me()(c,Ke,{}).toPromise().catch(o({})).finally((()=>r(!1)))}),[o,c]);l.a.useEffect((()=>{const e=new ce.a((()=>{d()}),{interval:a});return e.start(),()=>{e.stop()}}),[d,a]);const u=(null==n||null==(t=n.dm_convo_list_slice)?void 0:t.items)||[],m=Object(ee.a)(u.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),p=m.map((e=>e.__id)),g=Object(v.e)(p);return l.a.createElement(fe,null,l.a.createElement(re.a,{isRefreshing:i,onRefresh:d},l.a.createElement(ie.a,{accessibilityRole:"tablist",accessibilityTitle:v.f,anchoring:se.a,assumedItemHeight:100,cacheKey:"dmLowQualityUntrustedInbox",header:g,identityFunction:Le,items:m,noItemsRenderer:()=>l.a.createElement(Fe,null),onNearEnd:s,renderer:(e,t)=>(t&&t(!0),l.a.createElement(le.a,{conversationIds:p,dm_conversation:e,inboxType:S.d.TERTIARY,isPinned:!1})),withKeyboardShortcuts:!0,withoutHeadroom:!0})))};function we(e){return l.a.createElement(oe.a,{errorConfig:{context:"DM_INBOX_TERTIARY_CONTEXT"}},l.a.createElement(xe,e))}var Me=a("Vc8w");const Oe=8e3,Ae=m((e=>{const{conversationId:t,inboxType:a,...n}=e,{location:i}=e,{featureSwitches:r}=l.a.useContext(s.a);return Object(Me.a)(),a===S.d.TERTIARY||"/messages/requests/additional"===i.pathname?r.isTrue("dm_evolution_enabled")&&r.isTrue("dm_evolution_inbox_tertiary_enabled")?l.a.createElement(we,{pollInterval:Oe}):l.a.createElement(Re,n):a===S.d.SECONDARY||"/messages/requests"===i.pathname?r.isTrue("dm_evolution_enabled")&&r.isTrue("dm_evolution_inbox_secondary_enabled")?l.a.createElement(ke,{pollInterval:Oe}):l.a.createElement(Z,n):r.isTrue("dm_evolution_enabled")&&r.isTrue("dm_evolution_inbox_primary_enabled")?l.a.createElement(g.a,{pollInterval:Oe}):l.a.createElement(p.a,n)}));t.default=Ae},lBmi:function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("Lsrn"),i=a("k/Ka");const r=(e={})=>Object(i.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[s.a.root,e.style],viewBox:"0 0 24 24"},l.a.createElement("g",null,l.a.createElement("path",{d:"M23.885 19.5c-.762-3.064-3.72-5.206-7.19-5.206-1.17 0-2.27.265-3.258.707 1.246 1.08 2.157 2.5 2.564 4.138.252 1.004.052 2.03-.52 2.86h6.48c.627 0 1.2-.27 1.57-.744.38-.49.51-1.13.355-1.753zm-9.695 1.755c.38-.49.512-1.13.356-1.754-.375-1.506-1.284-2.785-2.52-3.7-1.278-.95-2.905-1.507-4.67-1.507-3.47 0-6.428 2.142-7.19 5.208-.156.626-.025 1.266.356 1.755.37.473.94.744 1.567.744h10.533c.627 0 1.197-.272 1.567-.745zm2.505-8.218c1.185 0 2.51-.132 3.368-1.11.72-.823.952-2.08.715-3.847-.333-2.478-1.86-3.956-4.083-3.956-2.225 0-3.75 1.48-4.084 3.956-.235 1.766 0 3.023.718 3.846.858.98 2.184 1.11 3.368 1.11zm-9.34 0c1.185 0 2.51-.132 3.367-1.11.72-.823.953-2.08.716-3.847-.333-2.478-1.86-3.956-4.083-3.956-2.225 0-3.75 1.48-4.084 3.956-.235 1.766 0 3.023.718 3.846.858.98 2.184 1.11 3.368 1.11z"})));r.metadata={width:24,height:24},t.a=r},"maE+":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a("ERkP"),l=a.n(n),s=a("FIs5"),i=a("3XMw"),r=a.n(i),o=a("Irs7");const c=r.a.a676a876,d=r.a.j2611eac,u=r.a.efe8fda0;function m(e){const t=Object(o.b)();return l.a.createElement(l.a.Fragment,null,e.messageRequestPivot,l.a.createElement(s.a,{buttonLink:"/messages/compose",buttonText:u,header:c,message:d,onImpression:()=>{t.scribe({component:"empty_message",action:"impression"})}}))}},nySH:function(e,t,a){"use strict";a.d(t,"a",(function(){return y})),a.d(t,"f",(function(){return h})),a.d(t,"b",(function(){return _})),a.d(t,"c",(function(){return b})),a.d(t,"d",(function(){return v})),a.d(t,"e",(function(){return k}));var n=a("ERkP"),l=a.n(n),s=a("HPNB"),i=a("jYSG"),r=a("3XMw"),o=a.n(r),c=a("AQ79"),d=a("+Bsv"),u=a("MWbm"),m=a("cHvH"),p=a("t62R"),g=a("rHpw");const y=o.a.bece84b4,h=o.a.e7172d70,_=e=>{switch(e){case c.d.SECONDARY:return"/messages/requests";case c.d.TERTIARY:return"/messages/requests/additional";case c.d.PRIMARY:default:return"/messages"}},b=(e,t,a)=>{const n=a&&t.get(a);if(!n)return;const l=n.getLinkedRecords("items")||[],s=[];let i=!1;l.forEach((t=>{const a=t&&t.getLinkedRecord("dm_conversation_results"),n=a&&a.getDataID();n&&(e===`DMConversation:${n}`&&i||(s.push(t),i||(i=!0)))})),n.setLinkedRecords(s,"items")},v=(e,t)=>l.a.createElement(d.a,{pullRight:t,to:e}),k=e=>l.a.createElement(m.a,null,(({windowWidth:t})=>{const a=s.a.isTwoColumnLayout(t),n=0===e.length;return a||n?null:l.a.createElement(u.a,{style:f.stickyCopyContainer},l.a.createElement(p.b,{style:f.stickyCopy},i.a))})),f=g.a.create((e=>({stickyCopyContainer:{backgroundColor:e.colors.cellBackground,borderBottomStyle:"solid",borderBottomWidth:e.borderWidths.small,borderBottomColor:e.colors.borderColor,zIndex:1},stickyCopy:{color:e.colors.gray700,padding:e.spaces.space20}})))},pXKu:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),l=a.n(n),s=a("BUB3"),i=a("v6aA"),r=a("xZGM"),o=a("rxPX");var c=Object(o.a)().propsFromState((()=>({shouldShowPrompt:(e,t)=>Object(r.E)(e,r.k)}))).propsFromActions((()=>({addFlag:r.A}))).withAnalytics({component:"dm_education_flags_prompt"}),d=a("fs1G"),u=a("t62R"),m=a("feu+"),p=a("3XMw"),g=a.n(p);const y=g.a.fd6150fc,h=l.a.createElement(g.a.I18NFormatMessage,{$i18n:"iac7f92b"},l.a.createElement(u.b,{link:"/privacy"},g.a.ac25e02e)),_=g.a.j24c37b2;var b=c((e=>{const{addFlag:t,analytics:a,shouldShowPrompt:n}=e,{featureSwitches:s}=l.a.useContext(i.a);if(!(n&&s.isTrue("dm_education_flags_prompt")))return!1;return a.scribeAction("impression"),l.a.createElement(m.a,{actionLabel:_,headline:y,onAction:()=>{a.scribeAction("click"),t(r.k)},onClose:d.a,subtext:h,withCloseButton:!1})})),v=a("MMRb"),k=a("kGix"),f=a("0KEI");var F=Object(o.a)().propsFromState((()=>({hasConversations:v.selectHasConversations,fetchStatus:v.selectFetchStatus,isLoadingTop:v.selectIsLoadingTop}))).adjustStateProps((({fetchStatus:e,hasConversations:t,isLoadingTop:a})=>({fetchStatus:t?k.a.LOADED:e,isRefreshing:t&&a}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)("DIRECT_MESSAGES_INBOX"),fetchInbox:v.fetchInbox,fetchInboxIfNeeded:v.fetchInboxIfNeeded,fetchUpdates:v.fetchUpdatesIfNeeded}))),T=a("ZYFu"),S=a("1YZw");var E,C,I,R=Object(o.a)().propsFromState((()=>({pinnedConversationIds:v.selectPinnedConversationIds}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(f.createLocalApiErrorHandlerWithContextFactory)("DM_PINNED_INBOX_CONTEXT")}))).withAnalytics({page:"messages",section:"inbox"}),L=a("AQ79"),K=a("oUUt"),x=a("d9IC"),w=a("h3MB"),M=a("QvgI"),O=a("P74S"),A=a.n(O),D=(a("YWiL"),a("q+MS")),P=a("DbJc"),U=a("TEoO"),H=a("NjAB"),N=a("gEJU"),j=a("pHkl"),B=a("IG4P"),W=a("Fr3L"),q=a("uDfI"),V=a("DQzJ"),z=a("MWbm"),Q=a("q8SM"),G=a("HvW7"),Y=a.n(G),X=a("PJTX"),$=a.n(X);const J=g.a.e4b3f520,Z=g.a.ae4d666a,ee=g.a.d98e066c,te=g.a.j302dba8,ae=e=>e,ne=void 0!==E?E:E=a("X8um"),le={context:"DM_PINNED_INBOX"},se=e=>{var t;const n=Object(q.c)(),{accessibilityTitle:s,analytics:r,cacheKey:o,conversationIds:c,createLocalApiErrorHandler:d,footer:u,header:m,onNearEnd:p,pinnedConversationIds:g,renderEmptyDMInbox:y,renderInboxItem:h,showSearchView:_,withKeyboardShortcuts:b}=e,k=$()(),{data:f}=Object(V.a)(ne,{label:L.a.PINNED}),F=l.a.useMemo((()=>{var e;return(null==f||null==(e=f.labeled_conversation_slice)?void 0:e.items)||[]}),[f]),{entities:T}=Object(H.b)(F,[w.a]),{featureSwitches:E}=l.a.useContext(i.a),R=E.getNumberValue("dm_conversation_labels_max_pinned_count"),[x,O]=l.a.useState(!1),[W,z]=l.a.useState(!1),G=(e=>{const t=l.a.useRef();return l.a.useEffect((()=>{t.current=e})),t.current})(f);l.a.useEffect((()=>{var e;const t=(null==G||null==(e=G.labeled_conversation_slice)?void 0:e.items)||[],a=null==t?void 0:t.filter((e=>-1===F.indexOf(e.rest_id)));a.length&&a.forEach((e=>{var t;const a=null==(t=e.labels)?void 0:t.filter((e=>e.label_type!==L.a.PINNED));n(Object(D.a)({conversations:{[e.rest_id]:{...e,labels:a}}}))})),n(Object(D.a)(T,!1))}),[f]);const X=l.a.useCallback((()=>{O(!0);const e=A()(k,ne,{label:L.a.PINNED}).toPromise();Promise.all([e,()=>n(v.fetchInbox())]).then((()=>O(!1))).catch((e=>{d()(e),O(!1)}))}),[d,n,k]),[le]=Y()(void 0!==C?C:C=a("ZH9U")),[se]=Y()(void 0!==I?I:I=a("rQjK")),re=l.a.useCallback(((e,t)=>{le({variables:{conversation_id:e,label:L.a.PINNED},onCompleted(a){var l;switch(null==(l=a.add_dm_conversation_label_v3)?void 0:l.__typename){case"DMConversationLabelInfo":{const{label_type:l,timestamp:s}=a.add_dm_conversation_label_v3;n(Object(D.a)({conversations:{[e]:{...t,labels:[{label_type:l,timestamp:s}]}}})),n(Object(S.b)({ariaOnly:!0,text:ee}));break}case"DMConversationLabelUnavailable":{const{failure_reason:e}=a.add_dm_conversation_label_v3;r.scribe({element:"thread",action:"error_shown",data:{error_type:j.i.MAX_PINS_REACHED}}),"ExceededMaxPinnedConversations"===e&&z(!0);break}}},onError(e){d(Q.a)(e)}})}),[n,d,le,r]),oe=l.a.useCallback(((e,t)=>{se({variables:{conversation_id:e,label_type:L.a.PINNED},onCompleted(a){var l;const s=t?null==t||null==(l=t.labels)?void 0:l.filter((e=>e.label_type!==L.a.PINNED)):[];n(Object(D.a)({conversations:{[e]:{...t,labels:s}}})),n(Object(S.b)({ariaOnly:!0,text:te}))},updater(t){var a,n;const l=null==(a=F.find((t=>t.rest_id===e)))?void 0:a.id,s=null==f||null==(n=f.labeled_conversation_slice)?void 0:n.__id;if(!l||!s)return;const i=t.get(l),r=t.get(s);r&&i&&(Object(K.b)(r,l),t.delete(l))},onError(e){d(Q.b)(e)}})}),[d,F,null==f||null==(t=f.labeled_conversation_slice)?void 0:t.__id,n,se]),ce=null==c?void 0:c.filter((e=>-1===g.indexOf(e))),de=g.length&&ce.length,ue=l.a.createElement(l.a.Fragment,null,m,null!=g&&g.length?l.a.createElement(l.a.Fragment,null,ie(J),g.map(((e,t)=>h({conversationIds:g,pinConversation:re,unpinConversation:oe})(e)))):null,de?ie(Z):null);return null!=c&&c.length?l.a.createElement(l.a.Fragment,null,W?l.a.createElement(N.a,{count:R,setShowPinError:z}):null,_?l.a.createElement(M.a,{accessibilityTitle:s,analytics:r,conversationIds:c,hideRecentSearches:e.hideRecentSearches,onQueryChange:e.onQueryChange,pinConversation:re,query:e.query,unpinConversation:oe}):l.a.createElement(B.a,{isRefreshing:x,onRefresh:X},o&&null!=ce&&ce.length?l.a.createElement(U.a,{accessibilityRole:"tablist",accessibilityTitle:s,anchoring:P.a,assumedItemHeight:100,cacheKey:o,footer:u,header:ue,identityFunction:ae,items:ce,onNearEnd:p,renderer:h({conversationIds:ce,pinConversation:re,unpinConversation:oe}),withKeyboardShortcuts:b,withoutHeadroom:!0}):ue)):y()},ie=e=>l.a.createElement(z.a,null,l.a.createElement(x.a,{headerText:e,isInboxLabelHeader:!0}));function re(e){return l.a.createElement(W.a,{errorConfig:le},l.a.createElement(se,e))}var oe=R(l.a.memo(re)),ce=a("dwig"),de=a("v//M"),ue=a("QB0K"),me=a("Avzu"),pe=a("FRNI");const ge=g.a.h845f282,ye=g.a.f325afc4;function he(){return l.a.createElement(ue.a,{accessibilityLabel:ge,href:"/messages/compose",icon:l.a.createElement(me.a,null),label:ge,scribeComponent:"floating_dm_button",shortLabel:ye,testID:pe.a.message})}var _e=l.a.memo(he),be=a("VwDm"),ve=a("tI3i"),ke=a.n(ve),fe=a("sNn6"),Fe=a("883S"),Te=a("yoO3"),Se=a("4hmp"),Ee=a("GSsg"),Ce=a("TnY3"),Ie=a("2g+p"),Re=a("6OUF"),Le=a("mw9i"),Ke=a("BcsE"),xe=a("+d3d");const we=e=>e,Me=g.a.a66ac766,Oe=g.a.fe61929e,Ae=g.a.a846382a;class De extends l.a.Component{constructor(e,t){var a,n,i,r,o,c,d;super(e,t),this.state={showSearchView:!(null==(a=this.props)||null==(n=a.location)||null==(i=n.state)||!i.searchQuery),searchQuery:null!=(r=null==(o=this.props)||null==(c=o.location)||null==(d=c.state)?void 0:d.searchQuery)?r:""},this._enablePinnedInbox=this.context.featureSwitches.isTrue("dm_conversation_labels_pinned_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._messageSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_message_results_enabled")&&this.context.featureSwitches.isTrue("direct_messages_incremental_holdback_2022h1"),this._modularSearchEnabled=this.context.featureSwitches.isTrue("dm_inbox_search_modular_results_enabled"),this._isVDLEnabled=this.context.featureSwitches.isTrue("dm_vdl_enabled")&&this.context.featureSwitches.isTrue("dm_vdl_inbox_p0_enabled"),this._render=()=>{const{withPinnedInbox:e}=this.props;return this._enablePinnedInbox&&e?this._renderPinnedInbox():this._renderInbox()},this._renderFocusedSearch=()=>{const{accessibilityTitle:e,analytics:t,conversationIds:a}=this.props,{searchQuery:n}=this.state;return l.a.createElement(M.a,{accessibilityTitle:e,analytics:t,conversationIds:a,hideRecentSearches:this._hideRecentSearches,onQueryChange:this._handleQueryChange,query:n})},this._renderInbox=()=>{var e,t;const{accessibilityTitle:a,conversationIds:n,footer:s,isDrawer:i,isRefreshing:r,renderEmptyDMInbox:o,virtualScrollerCacheKey:c}=this.props,{showSearchView:d}=this.state;return d||null!=(e=this.props.location)&&null!=(t=e.state)&&t.searchQuery?this._renderFocusedSearch():l.a.createElement(B.a,{isRefreshing:r,onRefresh:this._handlePullToRefresh},c&&n?l.a.createElement(U.a,{accessibilityRole:"tablist",accessibilityTitle:a,anchoring:P.a,assumedItemHeight:100,cacheKey:c,footer:s,header:this._renderHeader(),identityFunction:we,items:n,noItemsRenderer:o,onNearEnd:this._handleNearEnd,renderer:this._renderInboxItem({conversationIds:n}),withKeyboardShortcuts:!i,withoutHeadroom:!0}):null)},this._handleNearEnd=()=>{this._handleHistoryRequest()},this._handleQueryChange=e=>{this.setState({searchQuery:e})},this._handleSearchChange=({currentTarget:{value:e}})=>{this.state.showSearchView||this.setState({showSearchView:!0})},this._handleSearchClick=()=>{const{analytics:e}=this.props;e.scribe({component:"search",action:"click"}),this.setState({showSearchView:!0})},this._hideRecentSearches=()=>{this.setState({showSearchView:!1,searchQuery:""})},this._renderInboxItem=({conversationIds:e,pinConversation:t,unpinConversation:a})=>(n,i)=>{const{loggedInUserId:r}=this.context,{location:o}=this.props,{searchQuery:c}=this.state,d=n,u={pathname:`/messages/${d}`,state:{...null==o?void 0:o.state,entryPoint:null,searchQuery:c}},m=d&&null!=e&&e.length?e.indexOf(d):null,p=Object(Ke.a)(m)?m+1:0;ke()(!!r,"loggedInUserId must be defined"),i&&i(!0);const g=e=>l.a.createElement(T.a,{conversationId:d,inboxType:this.props.inboxType,isActive:e,key:d,link:u,onClick:this._handleConversationClick,perspective:r,pinConversation:t,position:p,searchQuery:c,unpinConversation:a});return this._isVDLEnabled?l.a.createElement(fe.a,{exact:!1,path:u.pathname},g):l.a.createElement(s.a,{exact:!1,path:u.pathname},g)},this._renderPinnedInbox=()=>{const{accessibilityTitle:e,conversationIds:t,footer:a,isDrawer:n,renderEmptyDMInbox:s,virtualScrollerCacheKey:i}=this.props,{searchQuery:r,showSearchView:o}=this.state;return t.length?l.a.createElement(oe,{accessibilityTitle:e,cacheKey:i,conversationIds:t,footer:a,header:this._renderHeader(),hideRecentSearches:this._hideRecentSearches,onNearEnd:this._handleNearEnd,onQueryChange:this._handleQueryChange,query:r,renderEmptyDMInbox:s,renderInboxItem:this._renderInboxItem,showSearchView:o,withKeyboardShortcuts:!n}):s()},this._handleFetchInitialWrapper=()=>{this._handleFetchInitial()},this._handleFetchInitial=()=>{const{createLocalApiErrorHandler:e,fetchInboxIfNeeded:t,fetchUpdates:a}=this.props;return t().then(this._updateLastSeenEventId,e()).then((()=>{this._updatePolling.start()})).then((()=>a().catch(e())))},this._handleConversationClick=(e,t)=>{const{customCellClick:a}=this.props;a&&a(e,t)},this._handleEmptyDMInboxImpression=()=>{const{analytics:e}=this.props;e.scribe({component:"empty_message",action:"impression"})},this._handlePullToRefresh=()=>{const{createLocalApiErrorHandler:e,fetchInbox:t}=this.props;t().then(this._updateLastSeenEventId,e())},this._updateLastSeenEventIdIfActive=()=>{if("background"!==Ie.a.currentState)return this._updateLastSeenEventId()},this._renderHeader=()=>{const{renderStickyContent:e,withDmSearch:t}=this.props,a=[Se.a.searchInput,this._isVDLEnabled?void 0:Se.a.searchInputBorder];return l.a.createElement(l.a.Fragment,null,t?l.a.createElement(z.a,{onClick:this._handleSearchClick,style:a},l.a.createElement(Re.a,{Icon:be.a,autoComplete:"off",isCompact:!0,onChange:this._handleSearchChange,placeholder:this._messageSearchEnabled?Ae:Oe,withClearButton:!0})):null,e?e():null)},this._updateLastSeenEventId=()=>{const{createLocalApiErrorHandler:e,updateLastSeenEventId:t}=this.props;return t().catch(e())},this._fab=l.a.createElement(_e,null)}componentDidMount(){const{createLocalApiErrorHandler:e,fetchInboxHistory:t,fetchUpdates:a}=this.props;return this._updatePolling=new Ee.a((()=>{a().then(this._updateLastSeenEventIdIfActive,e(Fe.a))}),{interval:8e3}),this._handleHistoryRequest=Object(xe.a)(((...a)=>{t(...a).catch(e())}),1e3),this._handleFetchInitial()}componentWillUnmount(){this._updatePolling.stop()}render(){return l.a.createElement(Te.a,{locationKey:"messagesRoot"},l.a.createElement(b,null),l.a.createElement(ce.a,{component:Le.a,fab:this._fab,style:Se.a.root},l.a.createElement(de.a,{accessibilityLabel:Me,fetchStatus:this.props.fetchStatus,onRequestRetry:this._handleFetchInitialWrapper,render:this._render})))}}De.contextType=i.a,De.defaultProps={conversationIds:[],inboxType:L.d.PRIMARY,isDrawer:!1,withDmSearch:!1,withPinnedInbox:!1};t.a=Object(Ce.a)(F(De))},pdDm:function(e,t,a){"use strict";a.d(t,"a",(function(){return ke}));a("kYxP"),a("Qavd");var n,l=a("ERkP"),s=a.n(l),i=a("v6aA"),r=a("lnti"),o=a("V/6K"),c=a("Ka95"),d=a("QvgI"),u=a("maE+"),m=a("qdEw"),p=a("6OUF"),g=a("3XMw"),y=a.n(g),h=a("VwDm"),_=a("d9IC"),b=a("MWbm"),v=a("AQ79"),k=(a("YWiL"),a("CVPS")),f=a.n(k);const F=y.a.e4b3f520,T=y.a.ae4d666a,S=(e,t)=>{var a,n,l,s;const i=null==(a=e.labels)||null==(n=a.find((e=>e.label_type===v.a.PINNED)))?void 0:n.timestamp,r=null==(l=t.labels)||null==(s=l.find((e=>e.label_type===v.a.PINNED)))?void 0:s.timestamp;return i?r?i-r:-1:1},E=void 0!==n?n:n=a("/Kco");function C({dmDrawerOnClick:e,pinnedConversations:t,pinnedSliceId:a,unpinnedConversations:n}){const l=f()(E,t).map((e=>e)).sort(S),i=l.map((e=>e.__id));return t.length?s.a.createElement(s.a.Fragment,null,I(F),l.map(((t,n)=>s.a.createElement(c.a,{conversationIds:i,dmDrawerOnClick:e,dm_conversation:t,inboxType:v.d.PRIMARY,isPinned:!0,key:n,pinnedSliceId:a}))),n?I(T):null):null}const I=e=>s.a.createElement(b.a,null,s.a.createElement(_.a,{headerText:e,isInboxLabelHeader:!0}));var R=a("4hmp"),L=a("uDfI");const K=y.a.fe61929e,x=y.a.a846382a;function w({dmDrawerOnClick:e,handleSearchChange:t,handleSearchClick:a,pinnedConversations:n,pinnedSliceId:l,renderPivot:r,unpinnedConversations:c,withPinnedInbox:d}){const u=Object(L.c)(),{featureSwitches:g}=s.a.useContext(i.a),y=g.isTrue("dm_inbox_search_message_results_enabled")&&g.isTrue("dm_inbox_search_modular_results_enabled")&&g.isTrue("direct_messages_incremental_holdback_2022h1"),_=g.isTrue("dm_vdl_enabled")&&g.isTrue("dm_vdl_inbox_p0_enabled");return s.a.useEffect((()=>()=>{u(m.b)}),[u]),s.a.createElement(o.a.Consumer,null,(({isDrawer:i})=>s.a.createElement(s.a.Fragment,null,i?null:s.a.createElement(b.a,{onClick:a,style:[R.a.searchInput,_?void 0:R.a.searchInputBorder]},s.a.createElement(p.a,{Icon:h.a,autoComplete:"off",isCompact:!0,onChange:t,placeholder:y?x:K,withClearButton:!0})),r(),d?s.a.createElement(C,{dmDrawerOnClick:e,pinnedConversations:n,pinnedSliceId:l,unpinnedConversations:c}):null)))}var M=a("DbJc"),O=a("TEoO"),A=a("MMRb"),D=a("P1r1"),P=a("rxPX");var U,H=Object(P.a)().propsFromState((()=>({isDmsOpenForAll:D.s,lastSeenEventIds:A.selectLastSeenEventIds}))).withAnalytics({page:"messages",section:"inbox"}),N=a("CVqr"),j=a("SOvA"),B=a("t0aI"),W=a("nySH"),q=a("aI6n"),V=a("zsGg"),z=a("Irs7"),Q=a("Znyr"),G=a("csss"),Y=a("t62R"),X=a("j7Bv"),$=a("OOE2");const J=void 0!==U?U:U=a("8fJk");var Z,ee,te=H((e=>{const{isDmsOpenForAll:t,lastSeenEventIds:a}=e,{untrusted_last_seen_event_id:n}=a,l=Object(z.b)(),r=(e=>{let t=0,a=0,l=0,s=0;for(const c of e){var i,r,o;const e=null==c?void 0:c.last_readable_event_id,d=!e||!(n&&Object(B.c)(n,e)),u=(parseInt(null==c||null==(i=c.perspectival_conversation_metadata)||null==(r=i.social_proof)||null==(o=r.mutual_friends)?void 0:o.total_mutual_friends,10)||0)>0;d?u?t+=1:l+=1:u?a+=1:s+=1}return{newUntrustedWithSocialProof:t,oldUntrustedWithSocialProof:a,newUntrustedWithoutSocialProof:l,oldUntrustedWithoutSocialProof:s}})(f()(J,e.untrustedConversations)),o=r.newUntrustedWithSocialProof+r.newUntrustedWithoutSocialProof,{featureSwitches:c}=s.a.useContext(i.a),d=c.isTrue("dm_vdl_enabled")&&c.isTrue("dm_vdl_inbox_p0_enabled"),u=[R.a.requestPivotContainer,d?void 0:R.a.requestPivotContainerBorder],{description:m,showNotificationDot:p,titleWeight:g}=Object(N.a)(r);return t?s.a.createElement(b.a,{style:u},s.a.createElement(G.a,{description:d?m:void 0,label:d?s.a.createElement(Y.b,{weight:g},$.b):$.b,link:Object(W.b)(v.d.SECONDARY),onPress:()=>{l.scribe({element:"requests_pivot",action:"click"})},renderRightContent:d||!o?void 0:()=>s.a.createElement(Q.a,{count:o,standalone:!0,truncatedCountFormatter:V.b,unreadCountLabel:$.c}),thumbnail:d?s.a.createElement(b.a,{testID:q.a.untrustedThumbnail},s.a.createElement(X.a,{Icon:j.a,color:"neutral"}),p?s.a.createElement(Q.a,{count:o,pip:!0,standalone:!0,style:R.a.inboxPip,truncatedCountFormatter:V.b,unreadCountLabel:$.c}):null):null})):null})),ae=a("IG4P"),ne=a("Fr3L"),le=a("GSsg"),se=a("0KEI"),ie=a("zCf4"),re=a("DQzJ"),oe=a("6u/5"),ce=a.n(oe),de=a("P74S"),ue=a.n(de),me=a("PJTX"),pe=a.n(me),ge=a("29EQ");const ye=e=>e.__id,he=void 0!==Z?Z:Z=a("6bmY"),_e=void 0!==ee?ee:ee=a("vU/8"),be={context:"DM_INBOX_PRIMARY_CONTEXT"},ve=({dmDrawerCacheKey:e,dmDrawerOnClick:t,pollInterval:a})=>{var n,l,m,p,g,y,h,_;const b=Object(z.b)(),k=Object(ie.g)(),{data:f,fetchNext:F}=Object(re.a)(he,{}),T=Object(se.useCreateLocalApiErrorHandler)("DM_INBOX_PRIMARY_EVOLUTION"),S=pe()(),E=(null==f||null==(n=f.pinned)?void 0:n.items_results)||[],C=Object(r.a)(E.map((e=>null==e?void 0:e.result))),I=(null==f||null==(l=f.pinned)?void 0:l.__id)||"",R=(null==f||null==(m=f.trusted)?void 0:m.items)||[],L=Object(r.a)(R.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),K=L.map((e=>e.__id)),x=(null==f||null==(p=f.trusted)?void 0:p.__id)||"",A=L.filter((e=>!((null==e?void 0:e.labels)||[]).filter((e=>e.label_type===v.a.PINNED)).length)),D=A.map((e=>e.__id)),P=(null==f||null==(g=f.untrusted)?void 0:g.items)||[],U=Object(r.a)(P.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),H=(null==f||null==(y=f.low_quality)?void 0:y.items)||[],N=Object(r.a)(H.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),{featureSwitches:j}=s.a.useContext(i.a),B=j.isTrue("dm_conversation_labels_pinned_enabled")&&j.isTrue("direct_messages_incremental_holdback_2022h1"),[q,V]=s.a.useState((null==k||null==(h=k.state)?void 0:h.searchQuery)||""),[Q,G]=s.a.useState(!(null==k||null==(_=k.state)||!_.searchQuery)),[Y,X]=s.a.useState(!1),$=s.a.useCallback((()=>{ue()(S,_e,{}).toPromise().then((e=>{var t;const a=L.length?L[0].__id:null;if(!a)return;const n=(null==e||null==(t=e.trusted)?void 0:t.items)||[],l=Object(r.a)(n.map((e=>{var t;return null==e||null==(t=e.dm_conversation_results)?void 0:t.result}))),s=[];for(let e=0;e<l.length&&l[e].__id!==a;e++)s.push(l[e].__id);s.length&&ce()(S,(e=>{s.forEach((t=>{Object(W.c)(t,e,x)}))}))})).catch(T({}))}),[T,S,L,x]),J=s.a.useCallback((()=>{X(!0),ue()(S,he,{}).toPromise().catch(T({})).finally((()=>X(!1)))}),[T,S]);s.a.useEffect((()=>{const e=new le.a((()=>{$()}),{interval:a});return e.start(),()=>{e.stop()}}),[$,a]);const Z=()=>s.a.createElement(u.a,{messageRequestPivot:be()}),ee=(e,a)=>(a&&a(!0),s.a.createElement(c.a,{conversationIds:B?D:K,dmDrawerOnClick:t,dm_conversation:e,inboxType:v.d.PRIMARY,isPinned:!1,pinnedSliceId:I})),ne=s.a.useCallback((({currentTarget:{value:e}})=>{Q||G(!0)}),[G,Q]),oe=s.a.useCallback((()=>{b.scribe({component:"search",action:"click"}),G(!0)}),[b,G]),de=s.a.useCallback((e=>{V(e)}),[V]),me=s.a.useCallback((()=>{G(!1),V("")}),[G,V]),be=()=>U.length||N.length?s.a.createElement(te,{untrustedConversations:U}):null,ve=s.a.createElement(w,{dmDrawerOnClick:t,handleSearchChange:ne,handleSearchClick:oe,pinnedConversations:C,pinnedSliceId:I,renderPivot:be,unpinnedConversations:Boolean(A.length),withPinnedInbox:B}),ke=()=>s.a.createElement(s.a.Fragment,null,Q?s.a.createElement(d.a,{accessibilityTitle:ge.c,analytics:b,conversationIds:K,hideRecentSearches:me,onQueryChange:de,query:q}):s.a.createElement(ae.a,{isRefreshing:Y,onRefresh:J},s.a.createElement(O.a,{accessibilityRole:"tablist",accessibilityTitle:ge.c,anchoring:M.a,assumedItemHeight:100,cacheKey:e||ge.a,header:ve,identityFunction:ye,items:B?A:L,noItemsRenderer:C.length?void 0:Z,onNearEnd:F,renderer:ee,withKeyboardShortcuts:!0,withoutHeadroom:!0})));return s.a.createElement(o.a.Consumer,null,(({isDrawer:e})=>e?ke():s.a.createElement(ge.b,null,ke())))};function ke(e){return s.a.createElement(ne.a,{errorConfig:be},s.a.createElement(ve,e))}},prG5:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a("97Jx"),l=a.n(n),s=(a("kYxP"),a("ERkP")),i=a.n(s),r=a("nT9l"),o=a("3XMw"),c=a.n(o),d="image",u=a("TIdA"),m=a("a6qo");const p=c.a.f93bb3ee;class g extends i.a.Component{constructor(...e){super(...e),this._renderContent=({resourceSelectionHandler:e,useMinimumData:t})=>{const{accessibilityLabel:a,hideAcceptOverlay:n,shouldShowAltLabel:s,...r}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,l()({},r,{accessibilityLabel:a,onVariantSelection:e,previewMode:t,testID:d})),s?i.a.createElement(m.a,{align:"left",altLabel:a}):null)}}render(){const{hideAcceptOverlay:e,image:t}=this.props;return i.a.createElement(r.a,{acceptLabel:p,hideAcceptOverlay:e,renderContent:this._renderContent,resourceId:"string"==typeof t?t:t.url})}}},"q+MS":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("kYxP");var n=a("xPna");const l=(e,t=!0)=>{const a={};let l={};return null!=e&&e.conversations&&(Object.values(e.conversations).forEach((e=>{e&&e.users&&Object.assign(a,e.users),t&&(e.isSearchResult=!0)})),l={...l,conversations:null==e?void 0:e.conversations,users:a}),null!=e&&e.entries&&(l={...l,entries:null==e?void 0:e.entries,cards:null==e?void 0:e.cards,tweets:null==e?void 0:e.tweets}),null!=e&&e.users&&(l={...l,users:{...e.users,...l.users||{}}}),Object(n.a)(l)}},q8SM:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a("OIs+"),l=a("3XMw"),s=a.n(l);const i=s.a.cb367658,r=s.a.ie9a7e48,o=s.a.hd3927c6,c=s.a.f1ac0968,d={[n.a.Offline]:{toast:{text:r}},defaultToast:{text:i},showToast:!0},u={[n.a.Offline]:{toast:{text:c}},defaultToast:{text:o},showToast:!0}},rQjK:function(e,t,a){"use strict";var n,l,s={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"},{defaultValue:null,kind:"LocalArgument",name:"label_type"}],kind:"Fragment",metadata:null,name:"DMPinnedInboxDelete_Mutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Variable",name:"label_type",variableName:"label_type"}],kind:"ScalarField",name:"dm_conversation_label_delete",storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"DMPinnedInboxDelete_Mutation",selections:l},params:{id:"_TQxP2Rb0expwVP9ktGrTQ",metadata:{},name:"DMPinnedInboxDelete_Mutation",operationKind:"mutation",text:null}};s.hash="f0ba5e0b671c54ae94c7322d3036a375",e.exports=s},sl05:function(e,t,a){"use strict";var n=a("rHpw");t.a=n.a.create((e=>({root:{flexGrow:1},activity:{flexBasis:e.spacesPx.space1,flexGrow:1,height:"100%"},kaiOSFix:{paddingBottom:e.spaces.space20},dragDrop:{flexGrow:1},scrollView:{flexGrow:1}})))},tZH3:function(e,t,a){"use strict";var n=a("ERkP"),l=a.n(n),s=a("3XMw"),i=a.n(s),r=a("MWbm"),o=a("CKsB"),c=a("/yvb"),d=a("rHpw"),u=a("hiGS"),m=a("pu5c"),p=a("zIWA");const g=i.a.fcd4d489,y=i.a.gbed8594,h=i.a.g9074da4,_=i.a.ad63377e,b=i.a.h09b49f8,v=i.a.i6b19b08,k=i.a.j7bb1a43,f=i.a.ea200ba6,F=i.a.cfd2f35e,T=({dismiss:e,flatBorders:t,isGroup:a,onBlockClick:n,onDeleteClick:s,onReportClick:i,requestorScreenName:d,showBlock:T,showCancel:E,showDelete:C})=>{const I=l.a.useCallback((()=>{i&&i(),e()}),[e,i]),R=l.a.useCallback((()=>{n&&n(),e()}),[e,n]),L=l.a.useCallback((()=>{s&&s(),e()}),[e,s]);return l.a.createElement(r.a,{accessibilityRole:"dialog",style:t?S.flatCorners:S.roundCorners},C?l.a.createElement(o.a,{Icon:u.a,actionSubText:b,actionText:a?h:_,onClick:L,textColor:"red500"}):null,T?l.a.createElement(o.a,{Icon:m.a,actionSubText:y,actionText:g({screenName:d}),onClick:R}):null,l.a.createElement(o.a,{Icon:p.a,actionSubText:f,actionText:a?v:k({screenName:d}),onClick:I}),E?l.a.createElement(c.a,{onPress:e,style:S.cancelButton,type:"primaryOutlined"},F):null)};T.defaultProps={isGroup:!1,flatBorders:!1,showBlock:!1,showCancel:!1,showDelete:!1};const S=d.a.create((e=>({roundCorners:{borderRadius:e.borderRadii.xLarge},flatCorners:{borderRadius:e.borderRadii.none},cancelButton:{marginHorizontal:e.spaces.space16,marginVertical:e.spaces.space16}})));t.a=T},uB9N:function(e,t,a){"use strict";var n=a("97Jx"),l=a.n(n),s=a("ERkP"),i=a.n(s),r=a("1YZw"),o=a("zh9S"),c=a("P1r1"),d=a("AspN"),u=a("rxPX"),m=Object(u.a)().propsFromState((()=>({dataSaverMode:c.j}))).propsFromActions((()=>({addMedia:d.b,addToast:r.b,processMultipleMedia:d.g,removeMediaUpload:d.i,scribeAction:o.c,preUploadMedia:d.e}))),p=a("wpu3"),g=a("6OUF"),y=a("rHpw"),h=y.a.create((e=>({composeInput:{width:"100%"}}))),_="dmComposerAttachments",b="dmComposerTextInputComponent",v="dmComposerTextInput",k="dmComposerSendButton",f=a("aITJ"),F=a("3XMw"),T=a.n(F);const S=T.a.cdcebd22,E=T.a.ca0ce0e4,C=(e,t)=>{const{disabled:a,editorState:n,isSendDisabledFunc:l,mediaButtonsCollapsible:s,onBlur:r,onFilesAdded:o,onFocus:c,onReturn:d,onRichTextChange:u,placeholderText:m,renderAttachmentsFunc:p,renderEmojiPickerFunc:y,richTextInputContext:_,value:b}=e,k=f.b.isKaiOS()?S:m||E,F=!!_,T=_?{editorState:n,element:_.element}:void 0;return i.a.createElement(g.a,{contentAbove:p(),editable:!a,emojiPickerButton:y(),handleReturn:F?d:void 0,isCompact:!0,leftAligned:!0,maxNumberOfLines:F?8:4,multiline:!0,numberOfLines:1,onBlur:r,onChange:u,onFilesAdded:o,onFocus:c,onKeyPress:F?void 0:e=>{d(e)},placeholder:k,ref:t,richTextInputContext:a?void 0:T,style:h.composeInput,testID:v,useCacheForDOMMeasurements:!l()&&!s,value:b})};var I=i.a.forwardRef(C),R=a("cOB2"),L=a("MWbm"),K=a("0FVZ"),x=a("Oe3h");var w=function(e){const{accessibilityLabel:t,accessibilityRole:a,children:n,onLayout:s,sideNavPresent:r,style:o}=e,c=i.a.useContext(R.a);return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(L.a,{accessibilityLabel:t,accessibilityRole:a,onLayout:s,style:o},n)):i.a.createElement(K.a.BottomComposer,null,i.a.createElement(x.a,{id:"DMComposerWrapper"},((e,r)=>i.a.createElement(L.a,l()({ref:e()},r({accessibilityLabel:t,accessibilityRole:a,onLayout:s,style:o})),n,i.a.createElement(L.a,{style:!1===c.keyboardVisible&&M.offsetBottom})))))};const M=y.a.create((()=>({offsetBottom:{paddingBottom:y.a.iPhoneOffsetBottom}})));a("kYxP");var O=a("HPNB"),A=a("htQn"),D=a("t62R");class P extends i.a.Component{constructor(...e){super(...e),this._handleClick=()=>{const{id:e,label:t,onClick:a}=this.props;a({id:e,label:t})}}render(){const{description:e,isWide:t,label:a}=this.props;return i.a.createElement(A.a,{accessibilityRole:"button",onClick:this._handleClick,style:[U.root,t&&U.isWide,!t&&U.isNarrow]},i.a.createElement(D.b,{weight:"bold"},a),i.a.createElement(D.b,{color:"gray700",size:"subtext2"},e))}}const U=y.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.borderColor,borderStyle:"solid",paddingLeft:"1rem",paddingVertical:"1rem"},isWide:{borderRadius:e.borderRadii.xLarge,paddingVertical:"0.5rem",borderWidth:e.borderWidths.small},isNarrow:{borderTopWidth:e.borderWidths.small}})));var H=P,N=a("cHvH"),j=a("mw9i");class B extends i.a.Component{constructor(...e){super(...e),this._handleOptionChoose=e=>{const{onOptionChoose:t,quickReplyOptions:{id:a}}=this.props;return t(a,e)}}render(){const{quickReplyOptions:{options:e}}=this.props,t=1===e.length;return i.a.createElement(N.a,null,(({windowWidth:a})=>{const n=O.a.isTwoColumnLayout(a),l=[n&&W.isWide,n&&t&&W.oneButtonOnly,!n&&W.isNarrow];return i.a.createElement(j.a,{style:l,withGutter:n},e.map((e=>this.renderOption(e,n))))}))}renderOption(e,t){return i.a.createElement(H,{description:e.description,id:e.id,isWide:t,key:e.id,label:e.label,onClick:this._handleOptionChoose})}}const W=y.a.create((e=>({oneButtonOnly:{gridTemplateColumns:"1fr"},isWide:{backgroundColor:e.colors.gray0,display:"grid",gridColumnGap:e.spaces.space12,gridRowGap:e.spaces.space12,gridTemplateColumns:"1fr 1fr",paddingVertical:e.spaces.space12},isNarrow:{maxHeight:"168px",overflow:"auto"}})));var q=B,V=a("krmn"),z=a("cIoY"),Q=a("w3n3"),G=a("MLl7"),Y=a("J2UM"),X=a("VPdC"),$=a("pKoL"),J=a("eyty"),Z=a("zTrU"),ee=a("JYMr");const te=[{waitMs:1e3,progress:.1},{waitMs:1400,progress:.3},{waitMs:1800,progress:.5},{waitMs:2400,progress:.6},{waitMs:3e3,progress:.9}];class ae extends i.a.Component{constructor(...e){super(...e),this.state={currentStepIndex:-1}}componentDidMount(){this._scheduleNextStep(0)}componentWillUnmount(){this._currentTimeoutId&&clearTimeout(this._currentTimeoutId)}render(){const{currentStepIndex:e}=this.state,t=e>=0&&e<te.length?te[e].progress:0;return i.a.createElement(ee.a,{progress:t})}_scheduleNextStep(e){e<te.length&&(this._currentTimeoutId=setTimeout((()=>{this._currentTimeoutId=void 0,this.setState({currentStepIndex:e}),this._scheduleNextStep(e+1)}),te[e].waitMs))}}function ne({isSending:e,isUploading:t,progress:a}){return e&&!t?i.a.createElement(ae,null):i.a.createElement(ee.a,{progress:e?Math.max(a,.02):0})}var le=i.a.memo(ne),se=a("Dtul"),ie=a("/yvb"),re=y.a.create((e=>({actionButton:{marginLeft:e.spaces.space4}}))),oe=a("UgB4");const ce=T.a.e3275464,de=i.a.createElement(oe.a,null);function ue(e){const{showIconInsteadOfLabel:t}=e;return i.a.createElement(ie.a,{accessibilityLabel:ce,disabled:e.disabledFunc(),hoverLabel:{label:ce},icon:t?de:void 0,onPress:e.onSend,size:"medium",style:re.actionButton,testID:k,type:t?"brandText":"brandFilled"},t?null:ce)}a("YWiL");var me,pe=a("HvW7"),ge=a.n(pe);const ye=void 0!==me?me:me=a("iunV");var he=()=>{const[e]=ge()(ye);return(t,a)=>e({variables:{message:{text:{text:t}},target:{conversation_id:a}},onCompleted(e){},updater(e,t){},onError(e){throw e}}).dispose()};function _e(e){const{showIconInsteadOfLabel:t}=e,a=he();return i.a.createElement(ie.a,{accessibilityLabel:ce,disabled:e.disabledFunc(),icon:t?de:void 0,onPress:t=>a(e.messageText,e.conversationId),size:"medium",style:re.actionButton,testID:k,type:t?"brandText":"brandFilled"},t?null:ce)}var be=a("Es6L"),ve=a("GZwR"),ke=a("9Xij"),fe=a("OiMc"),Fe=a("v6aA"),Te=a("gpVt"),Se=a("Lsrn"),Ee=a("k/Ka");const Ce=(e={})=>Object(Ee.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Se.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19 13.5H5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5h14c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5zm0 6H5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5h14c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5zm0-12H5c-.828 0-1.5-.672-1.5-1.5S4.172 4.5 5 4.5h14c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5z"})));Ce.metadata={width:24,height:24};var Ie=Ce;const Re=(e={})=>Object(Ee.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[Se.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M19 13H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1zm0 6H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1zm0-12H5c-.553 0-1-.447-1-1s.447-1 1-1h14c.553 0 1 .447 1 1s-.447 1-1 1z"})));Re.metadata={width:24,height:24};var Le=Re,Ke=a("iySH");const xe=T.a.ee230734,we=T.a.ic8c615e,Me=T.a.a04077c4,Oe=e=>!(!e||!e.media),Ae=Object(p.b)({maxNumberOfPhotos:1});class De extends i.a.Component{constructor(e,t){var a;super(e,t),this._handleLayout=e=>{const{onHeightChange:t}=this.props,{mediaButtonsCollapsible:a}=this.state,n=e.nativeEvent.layout;n&&(Object(be.a)()||t&&t(n.height),n.width<=y.a.theme.breakpoints.small&&!a?this.setState({mediaButtonsCollapsible:!0}):n.width>y.a.theme.breakpoints.small&&a&&this.setState({mediaButtonsCollapsible:!1}))},this._renderMainContent=()=>{const{richTextInputContext:e,typeaheadWrapper:t}=this.props,{value:a}=this.state,n=t;return n?i.a.createElement(n,{contextText:a,isInline:!0,onTextUpdated:e?this._handleRichTextChange:this._handlePlainTextChange,onTypeaheadStateChange:this._handleTypeaheadStateChange,source:ve.d.ComposeMessage},this._renderFieldTextInput):this._renderFieldTextInput()},this._renderFieldTextInput=e=>{const{disabled:t,placeholderText:a,richTextInputContext:n}=this.props,{editorState:l,mediaButtonsCollapsible:s,value:r}=this.state;return i.a.createElement(I,{disabled:t||!1,editorState:l,isSendDisabledFunc:this._isSendDisabled,mediaButtonsCollapsible:s,onBlur:this._handleOnBlur,onFilesAdded:this._handleAddMediaFiles,onFocus:this._handleTextInputFocus,onInputChange:e||(()=>{}),onPlainTextChange:this._handlePlainTextChange,onReturn:this._handleReturn,onRichTextChange:this._getHandleRichTextChange(e),placeholderText:a||"",ref:this._setTextInputRef,renderAttachmentsFunc:this._renderAttachments,renderEmojiPickerFunc:this._renderEmojiPicker,richTextInputContext:n,testID:b,value:r})},this._getHandleRichTextChange=Object(Z.a)((e=>t=>{null==e||e(t),this._handleRichTextChange(t)})),this._handleTypeaheadStateChange=e=>{this.setState({isTypeaheadActive:e})},this._renderAttachments=()=>{const{attachment:e,conversationId:t,isCardPreviewTombstoned:a,isShareViaDM:n,isUploading:l}=this.props,{value:s}=this.state,{height:r,width:o}=e&&(e.media&&e.media.mediaFile||e.provider&&e.media&&e.media.externalMediaDetails)||{},c=null==e?void 0:e.media,d=null==c?void 0:c.mediaMetadata,u=null==d?void 0:d.altText,m=null==d?void 0:d.defaultAltText,p=Object(Te.b)(s);return i.a.createElement(i.a.Fragment,null,c?i.a.createElement(L.a,{style:Pe.attachmentContainer,testID:_},i.a.createElement(ke.a,{ratio:o/r,style:Pe.aspectContainer},i.a.createElement(L.a,{style:Pe.mediaPreviewContainer},i.a.createElement($.a,{accessibilityLabel:u||m,mediaItem:c,onClick:this._canEditImage?this._handleClickMediaDetail:void 0,onEdit:this._canEditGif||this._canEditImage?this._handleClickMediaDetail:void 0,onRemove:this._handleRemoveMedia(c.id),resizeIfNeeded:"width",style:Pe.mediaPreview,withAltTextLabel:!!u,withCloseButton:!l,withEditButton:(this._canEditGif||this._canEditImage)&&!l,withEditIcon:!0}))),e&&e.provider&&e.gifUrl&&i.a.createElement(L.a,{style:Pe.gifAttribution},i.a.createElement(z.a,{gifUrl:e.gifUrl,provider:e.provider}))):p&&!n?i.a.createElement(Te.a,{conversationId:t,isCardPreviewTombstoned:a,style:Pe.cardPreviewContainer,urls:p}):null)},this._renderEmojiPicker=()=>{const{withEmojiPicker:e}=this.props;return e&&f.b.isDesktopOS()?i.a.createElement(V.a,{disabled:this.props.disabled,onEmojiSelect:this._handleEmojiSelect,onPress:this._handleTextInputFocus,size:"small",textInputRef:this._textInput||void 0}):null},this._renderPrimaryActionButton=e=>{const{conversationId:t,quickReplyOptions:a}=this.props,n=this._hasMessageText();if(!a||n||e){const a=this.context.featureSwitches.isTrue("dm_evolution_enabled")&&this.context.featureSwitches.isTrue("dm_evolution_message_creation_enabled"),n={disabledFunc:this._isSendDisabled,showIconInsteadOfLabel:!0};return a?i.a.createElement(_e,l()({},n,{conversationId:t||"",messageText:this._getMessageText()})):i.a.createElement(ue,l()({},n,{hasAttachment:e,onSend:this._handlePrimaryAction}))}return i.a.createElement(ie.a,{accessibilityLabel:we,icon:this.state.isQuickReplyOpen?i.a.createElement(Ie,null):i.a.createElement(Le,null),onPress:this._handleQuickReplyPickerToggle,size:"medium",style:Pe.actionButton,type:"brandText"})},this._renderSecondaryActionButton=()=>{const{secondaryActionDisabledPopoverRenderer:e,secondaryActionLabel:t,shouldEnableSecondaryActionFunc:a,shouldShowSecondaryActionFunc:n}=this.props;if(n&&!n()||!t)return null;const l=!a||a(),s=i.a.createElement(ie.a,{accessibilityLabel:t,disabled:!l,onPress:this._handleSecondaryAction,style:Pe.actionButton,type:"primaryOutlined"},this.props.secondaryActionLabel);return l||!e?s:i.a.createElement(fe.a,{enableHover:!0,preferredVerticalOrientation:"up",renderContent:e,withArrow:!0},s)},this._renderComposer=()=>{const{attachment:e}=this.props,t=Oe(e);return i.a.createElement(L.a,{style:[Pe.composer,t&&Pe.composerWithAttachment]},t?null:this._renderMediaButtons(),i.a.createElement(L.a,{style:Pe.composeBoxContainer},this._renderMainContent()),this._renderSecondaryActionButton(),this._renderPrimaryActionButton(t))},this._renderMediaButtons=()=>{const{conversationId:e,history:t,withGifPicker:a,withMediaPicker:n}=this.props,{mediaButtonsCollapsed:l,mediaButtonsCollapsible:s}=this.state,r=s&&l;return i.a.createElement(L.a,{style:Pe.uploadButtons},r?i.a.createElement(ie.a,{accessibilityLabel:xe,icon:i.a.createElement(Ke.a,null),onMouseDown:this._handleShowMediaControlsMouseDown,type:"brandText"}):null,n&&!r?i.a.createElement(X.a,{onChange:this._handleAddMediaFiles,style:Pe.mediaPicker,type:"brandText"}):null,a&&!r?i.a.createElement(Q.a,{dmConversationId:e,enabled:!0,gifSearchKeySource:G.a.DMComposition,history:t}):null)},this._handleShowMediaControlsMouseDown=()=>{const{scribeAction:e,scribeNamespace:t}=this.props;this.setState({mediaButtonsCollapsed:!1}),e({...t,component:"dm_composer",element:"toggle",action:"expand"})},this._handleReturn=e=>{const{nativeEvent:{ctrlKey:t,key:a,metaKey:n,shiftKey:l}}=e,s="Enter"===a,{isTypeaheadActive:i}=this.state;return!i&&s&&this._keyboardOrMouseDetected&&!(l||n||t)?(e.preventDefault(),this._handlePrimaryAction(e),"handled"):"not-handled"},this._handleClickMediaDetail=()=>{const{attachment:e,conversationId:t,history:a}=this.props;if(this._canEditGif||this._canEditImage){const n=e&&e.media?e.media.id:0,l=this._canEditGif?"alt_text":"crop";a.push("/messages/compose/media",{mediaId:n,conversationId:t,tab:l})}},this._handleAddMediaFiles=e=>{const{addMedia:t,addToast:a,dataSaverMode:n,onAddMedia:l,preUploadMedia:s,processMultipleMedia:i,removeMedia:r,removeMediaUpload:o}=this.props;t(e,{location:J.d.Dm}).then((e=>{const t=e.map((e=>e.id));this._validateMedia(e)?(l&&l(t),i(e,{onFailure:r}).then((e=>{n||s(e.map((e=>e.id)))}))):(a({text:Me}),o(t))}))},this._handleEmojiSelect=e=>{const{editorState:t}=this.state,{richTextInputContext:a}=this.props;if(!a||!t)return;const n=a.insertTextAtCursor(t,e.text);this._handleRichTextChange(n)},this._handleRemoveMedia=e=>()=>{this.props.removeMedia&&this.props.removeMedia(e)},this._handlePrimaryAction=e=>{if(!this._isSendDisabled()){const{onPrimaryAction:e}=this.props;this._textInput&&this._textInput.applyFinalValue((t=>{e({type:"richText"},t)})),this._closeQuickReplyPicker()}},this._handleSecondaryAction=e=>{const{onSecondaryAction:t}=this.props;this._textInput&&this._textInput.applyFinalValue((e=>{t&&t({type:"richText"},e)}))},this._handleRichTextChange=e=>{const{onTyping:t,richTextInputContext:a}=this.props,{value:n}=this.state,l=a?e.getCurrentContent().getPlainText():e.target.value,s=a?a.convertEmojiToEntities(e):null;this.setState({editorState:s,value:l}),n!==l&&(null==t||t())},this._handlePlainTextChange=e=>{const{onTyping:t}=this.props,{value:a}=this.state,n=e.target.value;this.setState({value:n}),a!==n&&(null==t||t())},this._handleOnBlur=()=>{const{onBlur:e}=this.props,{mediaButtonsCollapsible:t}=this.state;e&&e(),t&&this.setState({mediaButtonsCollapsed:!1})},this._handleTextInputFocus=()=>{const{quickReplyOptions:e}=this.props,{isQuickReplyOpen:t,mediaButtonsCollapsible:a}=this.state;e&&t&&this._closeQuickReplyPicker(),a&&this.setState({mediaButtonsCollapsed:!0})},this._handleQROptionSelection=(e,t)=>{const{disabled:a,onPrimaryAction:n}=this.props;a||(n({quickReply:{id:e,selected_id:t.id}},t.label),this._closeQuickReplyPicker())},this._handleQuickReplyPickerToggle=()=>{this.setState({isQuickReplyOpen:!this.state.isQuickReplyOpen})},this._validateMedia=e=>!Oe(this.props.attachment)&&Ae(e),this._detectKeyboardOrMouse=e=>{const{KEYBOARD:t,MOUSE:a,registerSome:n}=e;n((()=>{this._keyboardOrMouseDetected=!0}),[t,a])},this._isSendDisabled=()=>{const{attachment:e,canSendEmptyMessage:t,disabled:a,isUploading:n}=this.props,l=Oe(e),s=this._hasMessageText()||t,i=!(!e||!e.media)&&(e.media.needsProcessing||n);return a||!s&&!l||i||n},this._getMessageText=()=>(this.state.value||"").trim(),this._hasMessageText=()=>!!this._getMessageText(),this._closeQuickReplyPicker=()=>{this.setState({isQuickReplyOpen:!1})},this.handleAddMediaFiles=e=>this._handleAddMediaFiles(e),this._setTextInputRef=e=>{this._textInput=e};const{prefillText:n,richTextInputContext:s}=e;this.state={isQuickReplyOpen:!0,value:n,editorState:null!=(a=null==s||null==s.initEditorState?void 0:s.initEditorState(n))?a:null,isTypeaheadActive:!1,mediaButtonsCollapsed:!1,mediaButtonsCollapsible:!1}}componentDidMount(){Object(Y.a)().then(this._detectKeyboardOrMouse),this._unlockReload=se.a.acquire()}componentWillUnmount(){this._unlockReload&&this._unlockReload()}componentDidUpdate(){this.props.quickReplyOptions&&this.state.isQuickReplyOpen&&this._textInput&&this._textInput.blur()}UNSAFE_componentWillReceiveProps(e){const t=this.props.quickReplyOptions,a=e.quickReplyOptions;t&&!a?this.setState({isQuickReplyOpen:!1}):(!t&&a||t&&a&&t.id!==a.id)&&this.setState({isQuickReplyOpen:!0}),this.props.conversationId!==e.conversationId&&this.clear()}render(){const{dtabBarInfo:e,isSending:t,isUploading:a,mediaUploadProgress:n,placeholderText:l,quickReplyOptions:s,style:r}=this.props,{isQuickReplyOpen:o}=this.state,c=l||E,d=Object(be.a)(),u=d&&e&&(e.dtabAll||e.ttsToken)&&!e.hide;return i.a.createElement(w,{accessibilityLabel:c,accessibilityRole:"complementary",onLayout:this._handleLayout,sideNavPresent:d,style:[Pe.root,u&&Pe.dtabOffset,r]},i.a.createElement(le,{isSending:t,isUploading:a,progress:t?Math.max(n,.02):0}),this._renderComposer(),s&&o?i.a.createElement(q,{onOptionChoose:this._handleQROptionSelection,quickReplyOptions:s}):null)}get _canEditGif(){var e,t,a,n;return!(null==(e=this.props.attachment)||!e.gifUrl)||!(null==(t=this.props.attachment)||null==(a=t.media)||null==(n=a.mediaFile)||!n.isGif)}get _canEditImage(){var e,t,a;return!(null==(e=this.props.attachment)||null==(t=e.media)||null==(a=t.mediaFile)||!a.isImage)}clear(){const{richTextInputContext:e}=this.props;if(e){const{initEditorState:t}=e||{};this.setState({value:"",editorState:t&&t("")})}else this.setState({value:""})}focus(){this._textInput&&this._textInput.focus()}value(){return this.state.value}}De.contextType=Fe.a,De.defaultProps={prefillText:"",withEmojiPicker:!0,withGifPicker:!0,withMediaPicker:!0};const Pe=y.a.create((e=>({root:{backgroundColor:e.colors.navigationBackground,borderTopColor:e.colors.borderColor,borderTopWidth:e.borderWidths.small},attachmentContainer:{maxHeight:"10rem",margin:e.spaces.space12},aspectContainer:{flexShrink:1},cardPreviewContainer:{margin:e.spaces.space12},dtabOffset:{marginBottom:e.spaces.space40},gifAttribution:{flexDirection:"row",marginVertical:e.spaces.space4,marginHorizontal:0},mediaPicker:{margin:0},icon:{color:e.colors.primary,fontSize:"1.5em"},composeBoxContainer:{flexGrow:1,flexShrink:1,alignSelf:"center"},mediaPreviewContainer:{flexDirection:"row",height:"100%"},mediaPreview:{borderRadius:e.borderRadii.xLarge,overflow:"hidden",minWidth:"10em"},composer:{alignItems:"center",flexDirection:"row",padding:e.spaces.space4,width:"100%"},composerWithAttachment:{paddingLeft:e.spaces.space12},actionButton:{marginLeft:e.spaces.space4},uploadButtons:{flexDirection:"row",marginRight:e.spaces.space4}})));t.a=m.forwardRef(De)},uMiA:function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"query"},{defaultValue:null,kind:"LocalArgument",name:"withConversationQueryHighlights"}],kind:"Fragment",metadata:null,name:"DMConversationSearchTabPeopleQuery",selections:[{alias:"dm_people_convo_slice_result",args:[l={kind:"Variable",name:"query",variableName:"query"},s={kind:"Literal",name:"s",value:21}],concreteType:null,kind:"LinkedField",name:"__DMConversationSearchTabPeopleQuer_dm_people_convo_slice_result_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMPeopleConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[d,u={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},action:"THROW",path:"dm_people_convo_slice_result.items.dm_convo_search.legacy.metadata.created_by_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:m,action:"THROW",path:"dm_people_convo_slice_result.items.dm_convo_search.legacy.metadata.admin_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[g={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[i,r,{kind:"RequiredField",field:y={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},d,u,{alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null}],storageKey:null},action:"THROW",path:"dm_people_convo_slice_result.items.dm_convo_search.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"join_time_millis",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"join_conversation_event_id",storageKey:null}],storageKey:null},v={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[h,{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},k={condition:"withConversationQueryHighlights",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"DMHighlighting",kind:"LinkedField",name:"highlighting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"query_tokens",storageKey:null}],storageKey:null}]}],storageKey:null},f={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null}],type:"DmPeopleConvoSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"DMConversationSearchTabPeopleQuery",selections:[{alias:null,args:F=[{kind:"Variable",name:"cursor",variableName:"cursor"},l,s],concreteType:null,kind:"LinkedField",name:"dm_people_convo_slice_result",plural:!1,selections:[T={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMPeopleConvoSearchItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"dm_convo_search",plural:!1,selections:[i,r,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[o,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[o,c,d,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:C=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,m,S={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"}],type:"User",abstractKey:null}],storageKey:null},E={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},i],storageKey:null},p,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:C,storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[i,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[T,g],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[T,{kind:"InlineFragment",selections:[i,r,y,S],type:"User",abstractKey:null}],storageKey:null},E,i],storageKey:null},h,_,b],storageKey:null},v],storageKey:null}],storageKey:null},k],storageKey:null},f],type:"DmPeopleConvoSlice",abstractKey:null}],storageKey:null},{alias:null,args:F,filters:["query","s"],handle:"slice",key:"DMConversationSearchTabPeopleQuer_dm_people_convo_slice_result",kind:"LinkedHandle",name:"dm_people_convo_slice_result"}]},params:{id:"qno3lU4_eSHtSFoWQUhEag",metadata:{sliceInfoPath:["dm_people_convo_slice_result","slice_info"]},name:"DMConversationSearchTabPeopleQuery",operationKind:"query",text:null}};I.hash="74e2e86bd0b699e3a7ca150febc3dcaa",e.exports=I},vL4t:function(e,t,a){"use strict";var n,l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMEntryPreview",selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMMessageEntry"}],storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},n],storageKey:null},action:"THROW",path:"legacy.event_detail.users_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[n],storageKey:null},action:"THROW",path:"legacy.initiating_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMEvent",abstractKey:null};l.hash="7b4601839d2e24e344ab6c258a797ce5",e.exports=l},"vU/8":function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"evolutionDMInboxPollQuery",selections:[{alias:"trusted",args:i=[{kind:"Literal",name:"desired_lists",value:["Trusted"]},n={kind:"Literal",name:"known_lists",value:["Trusted","Untrusted","LowQuality"]},l={kind:"Literal",name:"s",value:17},s={kind:"Literal",name:"sort_by",value:"Recency"}],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"evolutionDMInboxItem"}],type:"DMConversation",abstractKey:null},r={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Trusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"untrusted",args:o=[{kind:"Literal",name:"desired_lists",value:["Untrusted"]},n,l,s],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"evolutionMessageRequestsPivot"}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:c=[{kind:"Literal",name:"desired_lists",value:["LowQuality"]},n,l,s],concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[m={kind:"InlineFragment",selections:u=[d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"DMConversation",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"evolutionDMInboxPollQuery",selections:[{alias:"trusted",args:i,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[p={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[p,g={kind:"TypeDiscriminator",abstractKey:"__isDMConvoListItem"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[d,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null}],type:"ApiImage",abstractKey:null}],storageKey:null},d],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[y={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null}],storageKey:null},b={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},d],type:"User",abstractKey:null}],storageKey:null},v={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},d],storageKey:null}],storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"last_readable_event_id",storageKey:null},{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[d,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},y,F,h,_],storageKey:null},b,k],type:"User",abstractKey:null}],storageKey:null},v,d],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"legacy_conversation_slice",plural:!1,selections:[p,{kind:"TypeDiscriminator",abstractKey:"__isDMEventSliceResult"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEventItem",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:u,storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[p,{kind:"InlineFragment",selections:T=[{alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null}],type:"ApiGif",abstractKey:null},{kind:"InlineFragment",selections:T,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:T,storageKey:null}],type:"ApiVideo",abstractKey:null}],storageKey:null},d],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:u,storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},F,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[y,F],storageKey:null},b,d],type:"User",abstractKey:null}],storageKey:null},v,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[k,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[F],storageKey:null},b,d],type:"User",abstractKey:null}],storageKey:null},v,d],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null}],storageKey:null},k,d],storageKey:null}],storageKey:null}],type:"DMEventSlice",abstractKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null}],storageKey:null}],type:"DMConversation",abstractKey:null},r],storageKey:null},d],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Trusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"untrusted",args:o,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[p,g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,{kind:"InlineFragment",selections:[f,{alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[{alias:null,args:null,concreteType:"SocialProof",kind:"LinkedField",name:"social_proof",plural:!1,selections:[{alias:null,args:null,concreteType:"MutualFriendsSocialProof",kind:"LinkedField",name:"mutual_friends",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_mutual_friends",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},d],type:"DMConversation",abstractKey:null}],storageKey:null},d],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["Untrusted"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'},{alias:"low_quality",args:c,concreteType:null,kind:"LinkedField",name:"dm_convo_list_slice",plural:!1,selections:[p,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[p,g,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMConversationResults",kind:"LinkedField",name:"dm_conversation_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[p,m],storageKey:null},d],storageKey:null}],type:"DMConvoItem",abstractKey:null}],storageKey:null}],type:"DMConvoListSlice",abstractKey:null}],storageKey:'dm_convo_list_slice(desired_lists:["LowQuality"],known_lists:["Trusted","Untrusted","LowQuality"],s:17,sort_by:"Recency")'}]},params:{id:"fX_IQIy_2_wh-6Sn0u6CoQ",metadata:{},name:"evolutionDMInboxPollQuery",operationKind:"query",text:null}};S.hash="3962883421aaee924f7a3184c6f5b800",e.exports=S},whlN:function(e,t,a){"use strict";var n,l,s={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"conversation_id"}],kind:"Fragment",metadata:null,name:"evolutionUnpinConversationMutation",selections:l=[{alias:null,args:[{kind:"Variable",name:"conversation_id",variableName:"conversation_id"},{kind:"Literal",name:"label_type",value:"Pinned"}],kind:"ScalarField",name:"dm_conversation_label_delete",storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"evolutionUnpinConversationMutation",selections:l},params:{id:"uZN4IpDCjHJcya7TpOKoNA",metadata:{},name:"evolutionUnpinConversationMutation",operationKind:"mutation",text:null}};s.hash="f4f7a6ace610f9e1ec942cce46c4c778",e.exports=s},y59G:function(e,t,a){"use strict";var n,l,s,i,r,o,c,d,u,m,p,g,y,h,_,b,v,k,f,F,T,S,E,C,I,R,L,K,x,w,M,O,A,D,P,U,H,N,j,B,W,q,V,z,Q,G,Y,X,$,J,Z,ee,te,ae,ne,le,se,ie,re,oe,ce,de,ue,me,pe,ge,ye,he,_e,be,ve,ke,fe,Fe,Te,Se,Ee,Ce,Ie,Re,Le,Ke,xe,we,Me,Oe,Ae,De,Pe,Ue,He,Ne,je,Be,We,qe,Ve,ze,Qe,Ge,Ye,Xe,$e,Je,Ze,et,tt,at,nt,lt,st,it,rt,ot,ct,dt,ut,mt,pt,gt,yt,ht,_t,bt,vt,kt,ft,Ft,Tt,St,Et,Ct,It,Rt,Lt,Kt,xt,wt,Mt,Ot,At,Dt,Pt,Ut,Ht,Nt,jt,Bt,Wt,qt,Vt,zt,Qt,Gt,Yt,Xt,$t,Jt,Zt,ea,ta,aa,na,la,sa,ia,ra,oa,ca,da,ua,ma,pa,ga,ya,ha,_a,ba,va,ka,fa,Fa,Ta,Sa,Ea,Ca,Ia,Ra,La,Ka,xa,wa,Ma,Oa,Aa,Da,Pa,Ua,Ha,Na,ja,Ba,Wa,qa,Va,za,Qa,Ga,Ya,Xa,$a,Ja,Za,en,tn,an,nn,ln,sn,rn,on=(n={defaultValue:null,kind:"LocalArgument",name:"cursor"},l={defaultValue:null,kind:"LocalArgument",name:"query"},s={defaultValue:null,kind:"LocalArgument",name:"withAttachments"},i={defaultValue:!1,kind:"LocalArgument",name:"withDmMuting"},r={defaultValue:null,kind:"LocalArgument",name:"withMessageQueryHighlights"},o={defaultValue:null,kind:"LocalArgument",name:"withSafetyModeUserFields"},c={defaultValue:null,kind:"LocalArgument",name:"withSuperFollowsUserFields"},d={kind:"Variable",name:"query",variableName:"query"},u={kind:"Literal",name:"s",value:21},m={alias:null,args:null,kind:"ScalarField",name:"rest_id",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"affects_sort",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"created_at_millis",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"request_id",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"event_id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"event_type",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"conversation_id",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"conversation_type",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"screen_name",storageKey:null},T={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[f,F],storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"original_img_url",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"original_img_width",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"original_img_height",storageKey:null},I={kind:"InlineFragment",selections:[S,E,C],type:"ApiImage",abstractKey:null},R={alias:null,args:null,kind:"ScalarField",name:"id_str",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"profile_image_url_https",storageKey:null},K={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[R,f,F,L],storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"last_read_event_id",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"join_time_millis",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"join_conversation_event_id",storageKey:null},O={alias:null,args:null,concreteType:"PerspectivalConversationMetadata",kind:"LinkedField",name:"perspectival_conversation_metadata",plural:!1,selections:[x,{alias:null,args:null,kind:"ScalarField",name:"low_quality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"muted_due_to_muted_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"read_only",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trusted",storageKey:null}],storageKey:null},A={alias:null,args:null,concreteType:"DMInitialLowQualityState",kind:"LinkedField",name:"initial_low_quality_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_low_quality",storageKey:null}],storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"is_new_one_to_one_convo",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"is_spam_hide",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"marked_as_abuse",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"possibly_spam",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"sender_registration_token",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"created_at_sec",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"display_url",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"expanded_url",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"indices",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},G=[q,V,z,Q],Y={alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"entities",plural:!1,selections:[{alias:null,args:null,concreteType:"UrlsEntity",kind:"LinkedField",name:"urls",plural:!0,selections:G,storageKey:null}],storageKey:null},X={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},$={alias:null,args:null,concreteType:"UrlsEntity",kind:"LinkedField",name:"urls_entity",plural:!0,selections:G,storageKey:null},J={alias:null,args:null,kind:"ScalarField",name:"media_key",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"alt_text",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},te={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},ae={alias:null,args:null,kind:"ScalarField",name:"percentage",storageKey:null},ne=[{alias:null,args:null,kind:"ScalarField",name:"blue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"green",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"red",storageKey:null}],le=[Z,C,E,S,{alias:null,args:null,concreteType:"ApiMediaRect",kind:"LinkedField",name:"salient_rect",plural:!1,selections:[ee,{alias:null,args:null,kind:"ScalarField",name:"left",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"top",storageKey:null},te],storageKey:null},{alias:null,args:null,concreteType:"MediaColorInfo",kind:"LinkedField",name:"color_info",plural:!1,selections:[{alias:null,args:null,concreteType:"MediaColorPaletteItem",kind:"LinkedField",name:"palette",plural:!0,selections:[ae,{alias:null,args:null,concreteType:"MediaColor",kind:"LinkedField",name:"rgb",plural:!1,selections:ne,storageKey:null}],storageKey:null}],storageKey:null}],se={alias:null,args:null,concreteType:"AspectRatio",kind:"LinkedField",name:"aspect_ratio",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"denominator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"numerator",storageKey:null}],storageKey:null},ie={alias:null,args:null,kind:"ScalarField",name:"duration_millis",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"embeddable",storageKey:null},oe={alias:null,args:null,concreteType:"ApiImage",kind:"LinkedField",name:"preview_image",plural:!1,selections:le,storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"content_type",storageKey:null},de={alias:null,args:null,concreteType:"VideoVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"bit_rate",storageKey:null},ce,Q],storageKey:null},ue={kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"media",plural:!1,selections:[p,J,{alias:null,args:null,kind:"ScalarField",name:"media_id",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[X,{kind:"InlineFragment",selections:le,type:"ApiImage",abstractKey:null},{kind:"InlineFragment",selections:[se,ie,re,oe,de,{alias:null,args:null,kind:"ScalarField",name:"view_count",storageKey:null}],type:"ApiVideo",abstractKey:null},{kind:"InlineFragment",selections:[Z,se,oe,de],type:"ApiGif",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMMediaAttachment",abstractKey:null},me={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},pe={alias:null,args:null,concreteType:"ApiMediaEntityColor",kind:"LinkedField",name:"rgb",plural:!1,selections:ne,storageKey:null},ge={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},ye={alias:null,args:null,concreteType:"LegacyCardBinding",kind:"LinkedField",name:"binding_values",plural:!0,selections:[me,{alias:null,args:null,concreteType:"ApiCardBindingValue",kind:"LinkedField",name:"value",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"boolean_value",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"double_value",storageKey:null},{alias:null,args:null,concreteType:"ApiCardBindingImageValue",kind:"LinkedField",name:"image_value",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"alt",storageKey:null},ee,te,Q],storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityColorPalette",kind:"LinkedField",name:"image_color_value",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityColorPaletteColor",kind:"LinkedField",name:"palette",plural:!0,selections:[pe,ae],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"integer_value",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scribe_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"string_value",storageKey:null},ge,{alias:null,args:null,concreteType:"ApiCardBindingUserValue",kind:"LinkedField",name:"user_value",plural:!1,selections:[R,{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},he={alias:null,args:null,concreteType:"ApiCardPlatform",kind:"LinkedField",name:"card_platform",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiCardPlatformPlatform",kind:"LinkedField",name:"platform",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiCardPlatformAudience",kind:"LinkedField",name:"audience",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bucket",storageKey:null},f],storageKey:null},{alias:null,args:null,concreteType:"ApiCardPlatformDevice",kind:"LinkedField",name:"device",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},_e={alias:"urlType",args:null,kind:"ScalarField",name:"url_type",storageKey:null},be={alias:null,args:null,concreteType:"TimelineUrl",kind:"LinkedField",name:"url",plural:!1,selections:[_e,Q],storageKey:null},ve=[Q],ke={alias:null,args:null,concreteType:"BadgeInfo",kind:"LinkedField",name:"badge",plural:!1,selections:ve,storageKey:null},fe={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},Fe={alias:null,args:null,kind:"ScalarField",name:"alignment",storageKey:null},Te={alias:null,args:null,kind:"ScalarField",name:"rtl",storageKey:null},Se={alias:"fromIndex",args:null,kind:"ScalarField",name:"from_index",storageKey:null},Ee={alias:"toIndex",args:null,kind:"ScalarField",name:"to_index",storageKey:null},Ce={alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null},Ie={alias:"type",args:null,kind:"ScalarField",name:"__typename",storageKey:null},Re=[W],Le={kind:"InlineFragment",selections:Re,type:"TimelineRichTextCashtag",abstractKey:null},Ke={kind:"InlineFragment",selections:[p,Q],type:"TimelineRichTextList",abstractKey:null},xe={kind:"InlineFragment",selections:Re,type:"TimelineRichTextHashtag",abstractKey:null},we={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},Me={kind:"InlineFragment",selections:[Q,_e,{alias:"urtEndpointOptions",args:null,concreteType:"TimelineUrtEndpointOptions",kind:"LinkedField",name:"urt_endpoint_options",plural:!1,selections:[{alias:"cacheId",args:null,kind:"ScalarField",name:"cache_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},we,{alias:"requestParams",args:null,concreteType:"RequestParamsEntry",kind:"LinkedField",name:"request_params",plural:!0,selections:[me,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null}],storageKey:null}],type:"TimelineUrl",abstractKey:null},Oe={alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[F],storageKey:null},Ae={alias:"reason",args:null,kind:"ScalarField",name:"unavailable_reason",storageKey:null},De={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},Pe={kind:"InlineFragment",selections:[Ae,De],type:"UserUnavailable",abstractKey:null},Ue={alias:"userLabelType",args:null,kind:"ScalarField",name:"user_label_type",storageKey:null},He={condition:"withDmMuting",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"dm_muting",storageKey:null}]},Ne={alias:null,args:null,kind:"ScalarField",name:"has_nft_avatar",storageKey:null},je={alias:null,args:null,kind:"ScalarField",name:"blocked_by",storageKey:null},Be={alias:null,args:null,kind:"ScalarField",name:"blocking",storageKey:null},We={alias:null,args:null,kind:"ScalarField",name:"can_dm",storageKey:null},qe={alias:null,args:null,kind:"ScalarField",name:"can_media_tag",storageKey:null},Ve={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},ze={alias:null,args:null,kind:"ScalarField",name:"default_profile",storageKey:null},Qe={alias:null,args:null,kind:"ScalarField",name:"default_profile_image",storageKey:null},Ge={alias:null,args:null,concreteType:"UrlsEntity",kind:"LinkedField",name:"urls",plural:!0,selections:[q,V,Q,z],storageKey:null},Ye=[Ge],Xe=[{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"description",plural:!1,selections:Ye,storageKey:null},{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"url",plural:!1,selections:Ye,storageKey:null}],$e={alias:null,args:null,concreteType:"UserEntities",kind:"LinkedField",name:"entities",plural:!1,selections:Xe,storageKey:null},Je={alias:null,args:null,kind:"ScalarField",name:"fast_followers_count",storageKey:null},Ze={alias:null,args:null,kind:"ScalarField",name:"favourites_count",storageKey:null},et={alias:null,args:null,kind:"ScalarField",name:"follow_request_sent",storageKey:null},tt={alias:null,args:null,kind:"ScalarField",name:"follow_request_received",storageKey:null},at={alias:null,args:null,kind:"ScalarField",name:"followed_by",storageKey:null},nt={alias:null,args:null,kind:"ScalarField",name:"followers_count",storageKey:null},lt={alias:null,args:null,kind:"ScalarField",name:"following",storageKey:null},st={alias:null,args:null,kind:"ScalarField",name:"friends_count",storageKey:null},it={alias:null,args:null,kind:"ScalarField",name:"has_custom_timelines",storageKey:null},rt={alias:null,args:null,kind:"ScalarField",name:"is_translator",storageKey:null},ot={alias:null,args:null,kind:"ScalarField",name:"listed_count",storageKey:null},ct={alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},dt={alias:null,args:null,kind:"ScalarField",name:"media_count",storageKey:null},ut={alias:null,args:null,kind:"ScalarField",name:"muting",storageKey:null},mt={alias:null,args:null,kind:"ScalarField",name:"needs_phone_verification",storageKey:null},pt={alias:null,args:null,kind:"ScalarField",name:"normal_followers_count",storageKey:null},gt={alias:null,args:null,kind:"ScalarField",name:"notifications",storageKey:null},yt={alias:null,args:null,kind:"ScalarField",name:"pinned_tweet_ids_str",storageKey:null},ht={alias:null,args:null,kind:"ScalarField",name:"possibly_sensitive",storageKey:null},_t=[{alias:null,args:null,concreteType:"ApiMediaEntityColorPaletteColor",kind:"LinkedField",name:"palette",plural:!0,selections:[ae,pe],storageKey:null}],bt=[{alias:null,args:null,concreteType:"ApiMediaColorExtension",kind:"LinkedField",name:"mediaColor",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaColorExtensionR",kind:"LinkedField",name:"r",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityColorPalette",kind:"LinkedField",name:"ok",plural:!1,selections:_t,storageKey:null}],storageKey:null}],storageKey:null}],vt={alias:null,args:null,concreteType:"ApiMediaExtensions",kind:"LinkedField",name:"profile_banner_extensions",plural:!1,selections:bt,storageKey:null},kt={alias:null,args:null,kind:"ScalarField",name:"profile_banner_url",storageKey:null},ft={alias:null,args:null,concreteType:"ApiMediaExtensions",kind:"LinkedField",name:"profile_image_extensions",plural:!1,selections:bt,storageKey:null},Ft={alias:null,args:null,kind:"ScalarField",name:"profile_interstitial_type",storageKey:null},Tt={alias:null,args:null,kind:"ScalarField",name:"protected",storageKey:null},St={alias:null,args:null,kind:"ScalarField",name:"statuses_count",storageKey:null},Et={alias:null,args:null,kind:"ScalarField",name:"time_zone",storageKey:null},Ct={alias:null,args:null,kind:"ScalarField",name:"translator_type",storageKey:null},It={alias:null,args:null,kind:"ScalarField",name:"utc_offset",storageKey:null},Rt={alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null},Lt={alias:null,args:null,kind:"ScalarField",name:"want_retweets",storageKey:null},Kt={alias:null,args:null,kind:"ScalarField",name:"withheld_description",storageKey:null},xt={alias:null,args:null,concreteType:"UserEntities",kind:"LinkedField",name:"withheld_entities",plural:!1,selections:Xe,storageKey:null},wt={alias:null,args:null,kind:"ScalarField",name:"withheld_in_countries",storageKey:null},Mt={alias:null,args:null,kind:"ScalarField",name:"withheld_scope",storageKey:null},Ot={alias:null,args:null,kind:"ScalarField",name:"professional_type",storageKey:null},At={alias:null,args:null,kind:"ScalarField",name:"display",storageKey:null},Dt={alias:null,args:null,concreteType:"BusinessCategory",kind:"LinkedField",name:"category",plural:!0,selections:[p,f,At],storageKey:null},Pt={alias:null,args:null,concreteType:"Professional",kind:"LinkedField",name:"professional",plural:!1,selections:[m,Ot,Dt],storageKey:null},Ut={condition:"withSafetyModeUserFields",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"smart_blocked_by",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"smart_blocking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"smart_blocking_expiration",storageKey:null}]},Ht={condition:"withSuperFollowsUserFields",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"super_follow_eligible",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"super_followed_by",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"super_following",storageKey:null}]},Nt={alias:null,args:null,kind:"ScalarField",name:"conversation_muted",storageKey:null},jt={alias:null,args:null,kind:"ScalarField",name:"policy",storageKey:null},Bt={alias:null,args:null,kind:"ScalarField",name:"invite_via_mention",storageKey:null},Wt={alias:null,args:null,kind:"ScalarField",name:"collab_invitation_status",storageKey:null},qt={alias:null,args:null,kind:"ScalarField",name:"conversation_id_str",storageKey:null},Vt={alias:null,args:null,kind:"ScalarField",name:"coordinates",storageKey:null},zt=[ge,Vt],Qt={alias:null,args:null,concreteType:"ApiGeoFeature",kind:"LinkedField",name:"coordinates",plural:!1,selections:zt,storageKey:null},Gt={alias:null,args:null,kind:"ScalarField",name:"display_text_range",storageKey:null},Yt={alias:null,args:null,kind:"ScalarField",name:"ext_alt_text",storageKey:null},Xt={alias:null,args:null,kind:"ScalarField",name:"media_url_https",storageKey:null},$t={alias:null,args:null,kind:"ScalarField",name:"source_status_id_str",storageKey:null},Jt={alias:null,args:null,kind:"ScalarField",name:"source_user_id_str",storageKey:null},Zt={alias:null,args:null,concreteType:"ApiCallToActions",kind:"LinkedField",name:"call_to_actions",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiVisitSiteCallToAction",kind:"LinkedField",name:"visit_site",plural:!1,selections:ve,storageKey:null},{alias:null,args:null,concreteType:"ApiWatchNowCallToAction",kind:"LinkedField",name:"watch_now",plural:!1,selections:ve,storageKey:null},{alias:null,args:null,concreteType:"ApiAppInstallCallToAction",kind:"LinkedField",name:"app_install",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"play_store_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_store_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ipad_app_store_id",storageKey:null}],storageKey:null}],storageKey:null},ea={alias:null,args:null,kind:"ScalarField",name:"monetizable",storageKey:null},ta={alias:null,args:null,concreteType:"ApiMediaInfo360",kind:"LinkedField",name:"ext_info360",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is360",storageKey:null}],storageKey:null},aa={alias:null,args:null,concreteType:"ApiMediaEntityColorPalette",kind:"LinkedField",name:"ext_media_color",plural:!1,selections:_t,storageKey:null},na={alias:"mediaStats",args:null,concreteType:"ApiMediaEngagementInfo",kind:"LinkedField",name:"ext_media_stats",plural:!1,selections:[{alias:"viewCount",args:null,kind:"ScalarField",name:"view_count",storageKey:null}],storageKey:null},la={alias:null,args:null,kind:"ScalarField",name:"reason",storageKey:null},sa={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},ia={kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"copyright_holder_name",storageKey:null}],type:"ApiMediaUnavailabilityInfoCopyrightViolation",abstractKey:null},ra={alias:null,args:null,concreteType:"ApiMediaAvailability",kind:"LinkedField",name:"ext_media_availability",plural:!1,selections:[la,sa,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"unavailability_info",plural:!1,selections:[ia],storageKey:null}],storageKey:null},oa={alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},ca={alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},da={alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},ua={alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},ma=[{alias:null,args:null,concreteType:"ApiMediaEntityFace",kind:"LinkedField",name:"faces",plural:!0,selections:[oa,ca,da,ua],storageKey:null}],pa={alias:null,args:null,concreteType:"ApiMediaEntityFeatures",kind:"LinkedField",name:"features",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityTags",kind:"LinkedField",name:"all",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntityTag",kind:"LinkedField",name:"tags",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},f,F,ge],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"large",plural:!1,selections:ma,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"medium",plural:!1,selections:ma,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"small",plural:!1,selections:ma,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntityFaces",kind:"LinkedField",name:"orig",plural:!1,selections:ma,storageKey:null}],storageKey:null},ga={alias:null,args:null,concreteType:"SensitiveMediaWarning",kind:"LinkedField",name:"sensitive_media_warning",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"adult_content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"graphic_violence",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"other",storageKey:null}],storageKey:null},ya=[da,ua,{alias:null,args:null,kind:"ScalarField",name:"resize",storageKey:null}],ha={alias:null,args:null,concreteType:"ApiMediaEntitySizes",kind:"LinkedField",name:"sizes",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"large",plural:!1,selections:ya,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"medium",plural:!1,selections:ya,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"small",plural:!1,selections:ya,storageKey:null},{alias:null,args:null,concreteType:"ApiMediaEntitySize",kind:"LinkedField",name:"thumb",plural:!1,selections:ya,storageKey:null}],storageKey:null},_a={alias:null,args:null,concreteType:"ApiMediaEntityOriginalInfo",kind:"LinkedField",name:"original_info",plural:!1,selections:[ee,te,{alias:null,args:null,concreteType:"ApiMediaEntityFocusRect",kind:"LinkedField",name:"focus_rects",plural:!0,selections:[oa,ca,ua,da],storageKey:null}],storageKey:null},ba={alias:null,args:null,concreteType:"ApiMediaEntityVideoInfo",kind:"LinkedField",name:"video_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"aspect_ratio",storageKey:null},ie,{alias:null,args:null,concreteType:"ApiMediaEntityVideoVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"bitrate",storageKey:null},ce,Q],storageKey:null}],storageKey:null},va={alias:null,args:null,concreteType:"ApiMentionEntity",kind:"LinkedField",name:"user_mentions",plural:!0,selections:[R,f,F,z],storageKey:null},ka=[z,W],fa={alias:null,args:null,concreteType:"ApiTagEntity",kind:"LinkedField",name:"hashtags",plural:!0,selections:ka,storageKey:null},Fa={alias:null,args:null,concreteType:"ApiTagEntity",kind:"LinkedField",name:"symbols",plural:!0,selections:ka,storageKey:null},Ta={alias:null,args:null,kind:"ScalarField",name:"favorite_count",storageKey:null},Sa={alias:null,args:null,kind:"ScalarField",name:"favorited",storageKey:null},Ea={alias:null,args:null,kind:"ScalarField",name:"full_text",storageKey:null},Ca={alias:null,args:null,concreteType:"ApiGeoFeature",kind:"LinkedField",name:"geo",plural:!1,selections:zt,storageKey:null},Ia={alias:null,args:null,kind:"ScalarField",name:"in_reply_to_screen_name",storageKey:null},Ra={alias:null,args:null,kind:"ScalarField",name:"in_reply_to_status_id_str",storageKey:null},La={alias:null,args:null,kind:"ScalarField",name:"in_reply_to_user_id_str",storageKey:null},Ka={alias:null,args:null,kind:"ScalarField",name:"is_quote_status",storageKey:null},xa={alias:null,args:null,kind:"ScalarField",name:"lang",storageKey:null},wa={alias:null,args:null,kind:"ScalarField",name:"limited_actions",storageKey:null},Ma={alias:null,args:null,kind:"ScalarField",name:"possibly_sensitive_editable",storageKey:null},Oa={alias:null,args:null,concreteType:"ApiPlace",kind:"LinkedField",name:"place",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiGeoAttributes",kind:"LinkedField",name:"attributes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"factual_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"iso3",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"locality",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"street_address",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"twitter",storageKey:null},Q],storageKey:null},{alias:"bounding_box",args:null,concreteType:"ApiGeoPolygon",kind:"LinkedField",name:"bounding_box_polygon",plural:!1,selections:[Vt,ge],storageKey:null},{alias:null,args:null,concreteType:"ApiPlace",kind:"LinkedField",name:"contained_within",plural:!0,selections:[p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"country_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},f,p,{alias:null,args:null,kind:"ScalarField",name:"place_type",storageKey:null},Q],storageKey:null},Aa={alias:null,args:null,concreteType:"ApiTweetPromotedContent",kind:"LinkedField",name:"promoted_content",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"disclosure_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"impression_id",storageKey:null}],storageKey:null},Da={alias:null,args:null,kind:"ScalarField",name:"quote_count",storageKey:null},Pa={alias:null,args:null,kind:"ScalarField",name:"quoted_status_id_str",storageKey:null},Ua={alias:null,args:null,concreteType:"ApiShortenedUrl",kind:"LinkedField",name:"quoted_status_permalink",plural:!1,selections:[Q,{alias:null,args:null,kind:"ScalarField",name:"expanded",storageKey:null},At],storageKey:null},Ha={alias:null,args:null,kind:"ScalarField",name:"reply_count",storageKey:null},Na={alias:null,args:null,kind:"ScalarField",name:"retweet_count",storageKey:null},ja={alias:null,args:null,kind:"ScalarField",name:"retweeted",storageKey:null},Ba={alias:null,args:null,concreteType:"ApiScopes",kind:"LinkedField",name:"scopes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"followers",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"place_ids",storageKey:null}],storageKey:null},Wa={alias:null,args:null,kind:"ScalarField",name:"source",storageKey:null},qa={alias:null,args:null,kind:"ScalarField",name:"supplemental_language",storageKey:null},Va={alias:null,args:null,kind:"ScalarField",name:"user_id_str",storageKey:null},za={alias:null,args:null,kind:"ScalarField",name:"withheld_text",storageKey:null},Qa={alias:null,args:null,concreteType:"ApiSelfThreadMetadata",kind:"LinkedField",name:"self_thread",plural:!1,selections:[R],storageKey:null},Ga={condition:"withMessageQueryHighlights",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"DMHighlighting",kind:"LinkedField",name:"highlighting",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"query_tokens",storageKey:null}],storageKey:null}]},Ya={alias:null,args:null,concreteType:"SliceInfo",kind:"LinkedField",name:"slice_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"next_cursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"previous_cursor",storageKey:null}],storageKey:null},Xa=[{kind:"Variable",name:"cursor",variableName:"cursor"},d,u],$a={alias:null,args:null,filters:null,handle:"defaultScalars",key:"",kind:"LinkedHandle",name:"legacy"},Ja={alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"result"},Za=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,T,$a],type:"User",abstractKey:null}],storageKey:null},Ja,p],en=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[Oe,$a,m,p],type:"User",abstractKey:null},Pe],storageKey:null},p],tn={alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[X,{kind:"TypeDiscriminator",abstractKey:"__isTimelineReferenceObject"},Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:en,storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:en,storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},an=[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,tn],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[je,Be,We,qe,Ve,ze,Qe,fe,$e,Je,Ze,et,tt,at,nt,lt,st,it,rt,ot,ct,dt,ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,Tt,F,St,Et,Ct,Q,It,Rt,Lt,Kt,xt,wt,Mt],storageKey:null},$a,{alias:null,args:null,concreteType:"Professional",kind:"LinkedField",name:"professional",plural:!1,selections:[m,Ot,Dt,p],storageKey:null},Ut,Ht],nn={alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:[m,{alias:null,args:null,concreteType:"LegacyCard",kind:"LinkedField",name:"legacy",plural:!1,selections:[ye,he,f,Q,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user_refs",plural:!0,selections:an,storageKey:null},{alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"user_refs",handleArgs:[{kind:"Literal",name:"isPlural",value:!0}]}],storageKey:null},p],storageKey:null},ln=[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:an,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,tn,Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null},Ja,p],sn=[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:ln,storageKey:null}],rn=[{alias:null,args:null,concreteType:"ApiMediaEntity",kind:"LinkedField",name:"media",plural:!0,selections:[q,V,Yt,R,z,J,Xt,ht,$t,Jt,ge,Q,{alias:null,args:null,concreteType:"ApiMediaMetadata",kind:"LinkedField",name:"additional_media_info",plural:!1,selections:[we,fe,Zt,re,ea,{alias:null,args:null,concreteType:"ApiMediaSourceUser",kind:"LinkedField",name:"source_user",plural:!1,selections:sn,storageKey:null}],storageKey:null},ta,aa,na,{alias:null,args:null,concreteType:"ApiMediaAvailability",kind:"LinkedField",name:"ext_media_availability",plural:!1,selections:[la,sa,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"unavailability_info",plural:!1,selections:[X,ia],storageKey:null}],storageKey:null},pa,ga,ha,_a,ba],storageKey:null},va,Ge,fa,Fa],{fragment:{argumentDefinitions:[n,l,s,i,r,o,c],kind:"Fragment",metadata:null,name:"DMMessageSearchTabQuery",selections:[{alias:"dm_message_slice_result",args:[d,u],concreteType:null,kind:"LinkedField",name:"__DMMessageSearchTabQuery_dm_message_slice_result_slice",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[m,p,{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,y,h,_,b,{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[p,m,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[v,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[v,k,f,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.conversation.legacy.metadata.created_by_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},y,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.conversation.legacy.metadata.admin_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[p,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[I],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:K,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.conversation.legacy.participants_metadata.user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},x,w,M],storageKey:null},O],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[A,D,P,U,H,f,N,j,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.users_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"participants_snapshot_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.participants_snapshot_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.initiating_user_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[B,p,W,{condition:"withAttachments",kind:"Condition",passingValue:!0,selections:[Y,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[X,ue,{kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:[m,{alias:null,args:null,concreteType:"LegacyCard",kind:"LinkedField",name:"legacy",plural:!1,selections:[ye,he,f,Q,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user_refs",plural:!0,selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.followed_by"},{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.card.legacy.user_refs.legacy"},Pt,Ut,Ht],storageKey:null}],storageKey:null}],storageKey:null}],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[X,p,m,{alias:null,args:null,concreteType:"Card",kind:"LinkedField",name:"card",plural:!1,selections:[m,{alias:null,args:null,concreteType:"LegacyCard",kind:"LinkedField",name:"legacy",plural:!1,selections:[ye,he,f,Q,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user_refs",plural:!0,selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.followed_by"},{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.card.legacy.user_refs.legacy"},Pt,Ut,Ht],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"LegacyTweet",kind:"LinkedField",name:"legacy",plural:!1,selections:[Nt,Ve,{alias:null,args:null,concreteType:"ApiConversationControl",kind:"LinkedField",name:"conversation_control",plural:!1,selections:[jt,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"conversation_owner",plural:!1,selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.conversation_control.conversation_owner.legacy"}],storageKey:null},Bt],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collab_control",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborators_results",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.followed_by"},{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.collaborators_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],type:"CollabTweet",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InvitedCollaborator",kind:"LinkedField",name:"invited_collaborators",plural:!0,selections:[Wt,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborator_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.followed_by"},{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.collab_control.invited_collaborators.collaborator_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"CollabInvitation",abstractKey:null}],storageKey:null},qt,Qt,Gt,{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"entities",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntity",kind:"LinkedField",name:"media",plural:!0,selections:[q,V,Yt,R,z,J,Xt,ht,$t,Jt,ge,Q,{alias:null,args:null,concreteType:"ApiMediaMetadata",kind:"LinkedField",name:"additional_media_info",plural:!1,selections:[we,fe,Zt,re,ea,{alias:null,args:null,concreteType:"ApiMediaSourceUser",kind:"LinkedField",name:"source_user",plural:!1,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.followed_by"},{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},ta,aa,na,ra,pa,ga,ha,_a,ba],storageKey:null},va,Ge,fa,Fa],storageKey:null},{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"extended_entities",plural:!1,selections:[{alias:null,args:null,concreteType:"ApiMediaEntity",kind:"LinkedField",name:"media",plural:!0,selections:[q,V,Yt,R,z,J,Xt,ht,$t,Jt,ge,Q,{alias:null,args:null,concreteType:"ApiMediaMetadata",kind:"LinkedField",name:"additional_media_info",plural:!1,selections:[we,fe,Zt,re,ea,{alias:null,args:null,concreteType:"ApiMediaSourceUser",kind:"LinkedField",name:"source_user",plural:!1,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.followed_by"},{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.extended_entities.media.additional_media_info.source_user.user_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},ta,aa,na,ra,pa,ga,ha,_a,ba],storageKey:null},va,Ge,fa,Fa],storageKey:null},{kind:"RequiredField",field:Ta,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.favorite_count"},{kind:"RequiredField",field:Sa,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.favorited"},Ea,Ca,Ia,Ra,La,Ka,xa,wa,ht,Ma,Oa,Aa,Da,Pa,Ua,{kind:"RequiredField",field:Ha,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.reply_count"},{kind:"RequiredField",field:Na,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.retweet_count"},{kind:"RequiredField",field:ja,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.legacy.retweeted"},Ba,Wa,qa,Va,Mt,R,za,Qa],storageKey:null},{alias:null,args:null,concreteType:"TweetCore",kind:"LinkedField",name:"core",plural:!1,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,{alias:"affiliates_highlighted_label",args:null,concreteType:"HighlightedUserLabelResponse",kind:"LinkedField",name:"identity_profile_labels_highlighted_label",plural:!1,selections:[{alias:null,args:null,concreteType:"HighlightedUserLabel",kind:"LinkedField",name:"label",plural:!1,selections:[be,ke,fe,{alias:"longDescription",args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"long_description",plural:!1,selections:[Fe,Te,W,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.affiliates_highlighted_label.label.longDescription.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ue],storageKey:null}],storageKey:null},He,Ne,{kind:"RequiredField",field:{alias:null,args:null,concreteType:"ApiUser",kind:"LinkedField",name:"legacy",plural:!1,selections:[{kind:"RequiredField",field:je,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.blocked_by"},{kind:"RequiredField",field:Be,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.blocking"},We,qe,Ve,ze,Qe,fe,$e,Je,{kind:"RequiredField",field:Ze,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.favourites_count"},{kind:"RequiredField",field:et,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.follow_request_sent"},tt,{kind:"RequiredField",field:at,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.followed_by"},{kind:"RequiredField",field:nt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.followers_count"},{kind:"RequiredField",field:lt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.following"},{kind:"RequiredField",field:st,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.friends_count"},it,rt,ot,ct,{kind:"RequiredField",field:dt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.media_count"},ut,f,mt,pt,gt,yt,ht,vt,kt,ft,L,Ft,{kind:"RequiredField",field:Tt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.protected"},F,{kind:"RequiredField",field:St,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.statuses_count"},Et,Ct,Q,It,{kind:"RequiredField",field:Rt,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy.verified"},Lt,Kt,xt,wt,Mt],storageKey:null},action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.legacy"},Pt,Ut,Ht],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[De,{alias:null,args:null,concreteType:"TimelineRichText",kind:"LinkedField",name:"unavailable_message",plural:!1,selections:[Fe,{alias:null,args:null,concreteType:"TimelineRichTextEntity",kind:"LinkedField",name:"entities",plural:!0,selections:[Se,Ee,Ce,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"ref",plural:!1,selections:[Ie,Le,Ke,xe,Me,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.unavailable_message.entities.ref.user_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextUser",abstractKey:null},{kind:"InlineFragment",selections:[F,{alias:"mention_results",args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{kind:"RequiredField",field:Oe,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.attachments.tweet_results.result.core.user_results.result.unavailable_message.entities.ref.mention_results.result.legacy"},m],type:"User",abstractKey:null},Pe],storageKey:null}],storageKey:null}],type:"TimelineRichTextMention",abstractKey:null}],storageKey:null}],storageKey:null},Te,W],storageKey:null},Ae],type:"UserUnavailable",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:"quotedRefResult",args:null,concreteType:"TweetResults",kind:"LinkedField",name:"quoted_tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[m],type:"Tweet",abstractKey:null}],storageKey:null}],storageKey:null}],type:"Tweet",abstractKey:null}],storageKey:null}],storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null}]},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"recipient_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.recipient_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"sender_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[{kind:"InlineFragment",selections:[p,m,{kind:"RequiredField",field:T,action:"THROW",path:"dm_message_slice_result.items.dm_event.legacy.event_detail.dm.sender_results.result.legacy"}],type:"User",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ga],type:"DMMessageSearchItem",abstractKey:null}],storageKey:null},Ya],type:"DMMessageSlice",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,l,s,r,c,o,i],kind:"Operation",name:"DMMessageSearchTabQuery",selections:[{alias:null,args:Xa,concreteType:null,kind:"LinkedField",name:"dm_message_slice_result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"items",plural:!0,selections:[X,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"DMEvent",kind:"LinkedField",name:"dm_event",plural:!1,selections:[m,p,{alias:null,args:null,concreteType:"DMEventMetadata",kind:"LinkedField",name:"legacy",plural:!1,selections:[g,y,h,_,b,{alias:null,args:null,concreteType:"DMConversation",kind:"LinkedField",name:"conversation",plural:!1,selections:[p,m,{alias:null,args:null,concreteType:"ConversationInfo",kind:"LinkedField",name:"legacy",plural:!1,selections:[v,{alias:null,args:null,concreteType:"ConversationMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[v,k,f,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"created_by_user_results",plural:!1,selections:Za,storageKey:null},y,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"admin_user_results",plural:!1,selections:Za,storageKey:null},{alias:null,args:null,concreteType:"ApiMedia",kind:"LinkedField",name:"avatar",plural:!1,selections:[p,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media_info",plural:!1,selections:[X,I],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ParticipantConversationMetadata",kind:"LinkedField",name:"participants_metadata",plural:!0,selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"user_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,K,$a],type:"User",abstractKey:null}],storageKey:null},Ja,p],storageKey:null},x,w,M],storageKey:null},O],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"DMEventDetail",kind:"LinkedField",name:"event_detail",plural:!1,selections:[A,D,P,U,H,f,N,j,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"users_results",plural:!0,selections:Za,storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"participants_snapshot_results",plural:!0,selections:Za,storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"initiating_user_results",plural:!1,selections:Za,storageKey:null},{alias:null,args:null,concreteType:"DirectMessageInfo",kind:"LinkedField",name:"dm",plural:!1,selections:[B,p,W,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"recipient_results",plural:!1,selections:Za,storageKey:null},{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"sender_results",plural:!1,selections:Za,storageKey:null},{condition:"withAttachments",kind:"Condition",passingValue:!0,selections:[Y,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"attachments",plural:!0,selections:[X,ue,{kind:"InlineFragment",selections:[$,nn],type:"DMCardAttachment",abstractKey:null},{kind:"InlineFragment",selections:[$,{alias:null,args:null,concreteType:"TweetResults",kind:"LinkedField",name:"tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[p,m,nn,{alias:null,args:null,concreteType:"LegacyTweet",kind:"LinkedField",name:"legacy",plural:!1,selections:[Nt,Ve,{alias:null,args:null,concreteType:"ApiConversationControl",kind:"LinkedField",name:"conversation_control",plural:!1,selections:[jt,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"conversation_owner",plural:!1,selections:[Oe,$a,p],storageKey:null},{alias:null,args:null,filters:null,handle:"user",key:"",kind:"LinkedHandle",name:"conversation_owner"},Bt],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collab_control",plural:!1,selections:[X,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborators_results",plural:!0,selections:ln,storageKey:null}],type:"CollabTweet",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InvitedCollaborator",kind:"LinkedField",name:"invited_collaborators",plural:!0,selections:[Wt,{alias:null,args:null,concreteType:"UserResults",kind:"LinkedField",name:"collaborator_results",plural:!1,selections:ln,storageKey:null}],storageKey:null}],type:"CollabInvitation",abstractKey:null}],storageKey:null},qt,Qt,Gt,{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"entities",plural:!1,selections:rn,storageKey:null},{alias:null,args:null,concreteType:"EntitySet",kind:"LinkedField",name:"extended_entities",plural:!1,selections:rn,storageKey:null},Ta,Sa,Ea,Ca,Ia,Ra,La,Ka,xa,wa,ht,Ma,Oa,Aa,Da,Pa,Ua,Ha,Na,ja,Ba,Wa,qa,Va,Mt,R,za,Qa],storageKey:null},$a,{alias:null,args:null,concreteType:"TweetCore",kind:"LinkedField",name:"core",plural:!1,selections:sn,storageKey:null},{alias:"quotedRefResult",args:null,concreteType:"TweetResults",kind:"LinkedField",name:"quoted_tweet_results",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"result",plural:!1,selections:[X,{kind:"InlineFragment",selections:[m,p],type:"Tweet",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"Tweet",abstractKey:null}],storageKey:null},p],storageKey:null}],type:"DMTweetAttachment",abstractKey:null}],storageKey:null}]}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Ga],type:"DMMessageSearchItem",abstractKey:null}],storageKey:null},Ya],type:"DMMessageSlice",abstractKey:null}],storageKey:null},{alias:null,args:Xa,filters:["query","s"],handle:"slice",key:"DMMessageSearchTabQuery_dm_message_slice_result",kind:"LinkedHandle",name:"dm_message_slice_result"}]},params:{id:"PiSGvjQPSd_b3-lfeC6Mrg",metadata:{sliceInfoPath:["dm_message_slice_result","slice_info"]},name:"DMMessageSearchTabQuery",operationKind:"query",text:null}});on.hash="047e679536a37cb5fc5faf0309b35bd1",e.exports=on},zQEV:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return y}));var n=a("ERkP"),l=a.n(n),s=a("t62R"),i=a("aWyx"),r=a("3XMw"),o=a.n(r);const c=o.a.c1d4ac84,d=o.a.abc7b032,u=o.a.i263b294,m=({children:e,conversationId:t})=>l.a.createElement(s.b,{link:`/messages/${t}/participants`},e),p=(e,t)=>e>=2?l.a.createElement(o.a.I18NFormatMessage,{$i18n:"e3534477"},l.a.createElement(m,{conversationId:t},o.a.i8d5e62b({count:e}))):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b6656851",count:e}),g=({entry:e,users:t})=>e.participants?l.a.createElement("span",null,e.participants.map((({user_id:e},a)=>{const n=t[e];return n?l.a.createElement("span",{key:a},a>0?", ":null,l.a.createElement(s.b,null,n.name)):null}))):null,y=(e,t,a,n)=>{const r=a===e.by_user_id;let m;switch(t){case i.b.CONVERSATION_AVATAR_UPDATE:return m=e.by_user_id&&n[e.by_user_id]&&n[e.by_user_id].name,m?r?c:(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"bff29c95"},l.a.createElement(s.b,null,e)))(m):d;case i.b.CONVERSATION_NAME_UPDATE:{const t=l.a.createElement(s.b,null,e.conversation_name);return m=e.by_user_id&&n[e.by_user_id]&&n[e.by_user_id].name,m?r?(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"b16e4d45"},e))(t):((e,t)=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"c5760699"},l.a.createElement(s.b,null,e),t))(m,t):(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"a72730a1"},e))(t)}case i.b.JOIN_CONVERSATION:return m=e.sender_id&&n[e.sender_id]&&n[e.sender_id].name,m?(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"fa95b019"},l.a.createElement(s.b,null,e)))(m):u;case i.b.PARTICIPANTS_LEAVE:return(e=>l.a.createElement(o.a.I18NFormatMessage,{$i18n:"fc10875f"},e))(l.a.createElement(g,{entry:e,users:n}));case i.b.PARTICIPANTS_JOIN:m=e.sender_id&&n[e.sender_id]&&n[e.sender_id].name;return((e,t)=>e?l.a.createElement(o.a.I18NFormatMessage,{$i18n:"a4bc88c3"},l.a.createElement(s.b,null,e),t):l.a.createElement(o.a.I18NFormatMessage,{$i18n:"bfdff0c3"},t))(m,l.a.createElement(g,{entry:e,users:n}));default:return""}}},zsGg:function(e,t,a){"use strict";a.d(t,"b",(function(){return _}));a("kYxP");var n=a("ERkP"),l=a.n(n),s=a("hl/W"),i=a("qz2E"),r=a("pXKu"),o=a("maE+"),c=a("3XMw"),d=a.n(c),u=a("AQ79"),m=a("f42t"),p=a("OOE2"),g=a("pHkl"),y=a("pxuL");var h=a("29EQ");d.a.a74e7c77;const _=d.a.h6beb5fb;class b extends l.a.Component{constructor(...e){super(...e),this._renderPivot=()=>{const{allowUntrustedInbox:e,allowUntrustedVDLInbox:t,untrustedCounts:a,untrustedUnreadCount:n}=this.props;return l.a.createElement(p.a,{allowUntrustedInbox:e,allowUntrustedVDLInbox:t,secondaryInboxCounts:a,untrustedUnreadCount:n})},this._renderEmptyDMInbox=()=>l.a.createElement(o.a,{messageRequestPivot:this._renderPivot()})}componentDidMount(){const{allowUntrustedInbox:e,allowUntrustedVDLInbox:t,analytics:a,location:n,setLastViewedDmInboxPath:l}=this.props;l(n.pathname),(e||t)&&a.scribe({element:"requests_pivot",action:"impression"})}componentWillUnmount(){this.context.featureSwitches.isTrue("dm_inbox_search_modular_results_enabled")&&this.props.clearSearchSlicesCache(g.j),this.props.clearSearchCache()}render(){const{analytics:e,conversationIds:t,fetchInboxHistory:a,updateLastSeenEventId:n}=this.props;return l.a.createElement(h.b,null,l.a.createElement(r.a,{accessibilityTitle:h.c,analytics:e,conversationIds:t,fetchInboxHistory:a,renderEmptyDMInbox:this._renderEmptyDMInbox,renderStickyContent:this._renderPivot,updateLastSeenEventId:n,virtualScrollerCacheKey:h.a,withDmSearch:!0,withPinnedInbox:!0}))}}b.contextType=y.a,b.defaultProps={conversationIds:[],untrustedUnreadCount:0,untrustedCounts:{newUntrustedWithSocialProof:0,newUntrustedWithoutSocialProof:0,oldUntrustedWithSocialProof:0,oldUntrustedWithoutSocialProof:0}};const v=Object(m.a)(Object(s.a)({inbox:u.d.PRIMARY})(b),{directMessages:i.a});t.a=v}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.DMDrawer.cd37f5f7.js.map