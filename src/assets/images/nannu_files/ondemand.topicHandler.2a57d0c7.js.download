(window.webpackJsonp=window.webpackJsonp||[]).push([[366],{E3Hq:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var o=n("Rp9C"),r=n("XcJG");const a=({feedbackItems:e,topic:t,topicItemContent:n})=>{const o=n.topicFunctionalityType===r.b.Recommendation,a=1===(null==e?void 0:e.length)?e[0].onClick:void 0;return!(null!=t&&t.not_interested)&&!(null!=t&&t.following)&&o?a:void 0},c=e=>o.a.forTopic(e.content.topicId,e.itemMetadata.clientEventInfo)},UnyZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},YMZp:function(e,t,n){"use strict";n.r(t);var o=n("ezF+"),r=n("VPAj"),a=n("E3Hq"),c=n("ERkP"),i=n.n(c),s=n("wtjx"),l=n("Zejx"),d=n("rxPX");const p=(e,t)=>l.a.select(e,t.entry.content.topicId);var u=Object(d.a)().propsFromState((()=>({topic:p}))).propsFromActions((()=>({saveAsRecentSearch:s.a}))),m=n("fRsM"),h=n("XcJG"),b=n("Irs7");const f=e=>{const t=Object(b.b)(),{entry:{content:n},feedbackItems:o,saveAsRecentSearch:r,shouldStoreTypeaheadItem:c,topic:s}=e;if(i.a.useEffect((()=>{s&&t.scribeAction("impression")}),[]),!s)return null;const l=Object(a.a)({feedbackItems:o,topic:s,topicItemContent:n}),d=n.topicDisplayType===h.a.Basic;return i.a.createElement(m.a,{notInterestedOnClick:l,saveAsRecentSearch:r,shouldStoreTypeaheadItem:c,topic:s,withIcon:d})};var y=u(i.a.memo(f));t.default=e=>o.b({component:y,isFocusable:Object(r.a)(!0),getScribeDataItem:a.b,shouldDisplayBorder:Object(r.a)(!1)}).getHandler((()=>({...e})))},"aV/s":function(e,t,n){"use strict";n("kYxP");var o=n("ERkP"),r=n.n(o),a=n("t62R"),c=n("3XMw"),i=n.n(c),s=n("I4+6"),l=n("cm6r"),d=n("UnyZ"),p=n("rHpw"),u=n("MWbm"),m=n("hOZg"),h=n("iY63"),b=n("IMYl");const f={active:i.a.e557ad8e,expand:i.a.e3a58c28,remove:i.a.h517e8d8};class y extends r.a.PureComponent{constructor(...e){super(...e),this._handleSecondaryClick=()=>{const{secondaryAction:e}=this.props;e&&e.onSecondaryClick()}}render(){const{accessibilityLabel:e,avatar:t,compact:n,disabled:o,link:c,mode:i,onClick:d,secondaryAction:m,selected:h,style:b,text:y}=this.props,w=this._renderIcon(!0,i),g=m&&this._renderIcon(!1,m.mode),v=[I.root,n&&I.compact,o&&I.disabled,h&&I.selected,b],k=[I.content,w&&I.withIcon,t&&(n&&I.withAvatarImageCompact||I.withAvatarImage)],S=s.a.generate({backgroundColor:h?p.a.theme.colors.primary:"transparent",color:h?p.a.theme.colors.white:p.a.theme.colors.primary});return r.a.createElement(u.a,{style:v},r.a.createElement(l.a,{accessibilityLabel:e||(i?f[i]:""),disabled:o,interactiveStyles:S,link:c,onPress:d,style:k},this._renderAvatar(),r.a.createElement(a.b,{color:h?"whiteOnColor":"text",numberOfLines:1,selectable:!1,style:I.text,weight:"bold"},y),w),m?r.a.createElement(l.a,{accessibilityLabel:m.accessibilityLabel||(m.mode?f[m.mode]:""),disabled:o||m.disabled,hoverLabel:{label:m.hoverLabel||(m.mode?f[m.mode]:"")},interactiveStyles:S,onPress:this._handleSecondaryClick,style:I.secondaryControl},r.a.createElement(u.a,{style:I.secondaryBorder},g)):null)}_renderIcon(e=!0,t){const{selected:n}=this.props,o=[I.icon,n&&I.iconSelected],a=[I.icon];switch(t){case d.a.Remove:return r.a.createElement(m.a,{style:[I.dismissIcon,e&&o]});case d.a.Expand:return r.a.createElement(h.a,{style:e?o:a});case d.a.Active:return r.a.createElement(b.a,{style:o});default:return null}}_renderAvatar(){const{avatar:e,compact:t}=this.props;return e?r.a.createElement(u.a,{style:[I.avatarContainer,t?I.avatarCompact:I.avatar]},e):null}}y.defaultProps={compact:!1,disabled:!1,selected:!1};const I=p.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginRight:e.spaces.space8},withAvatarImage:{paddingLeft:`calc(${e.spaces.space2} * 2)`},withAvatarImageCompact:{paddingLeft:`calc(${e.spaces.space1} * 3)`},icon:{color:e.colors.primary,flexShrink:0,marginLeft:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingRight:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderLeftColor:e.colors.borderColor,borderLeftWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}})));t.a=y},fRsM:function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("LWCC"),c=n("3XMw"),i=n.n(c),s=n("EHV7"),l=n("YICZ"),d=n("3IPs"),p=n("X04g"),u=n("MWbm"),m=n("Irs7"),h=n("hxu0"),b=n("htQn"),f=n("t62R"),y=n("j7Bv"),I=n("rHpw"),w=n("v6aA");const g=i.a.a2a3824a;let v=0;class k extends r.a.Component{constructor(e,t){super(e,t),this._topicLink={pathname:`/i/topics/${this.props.topic.id}`,state:{referringScribeNamespace:{...this.props.analytics.contextualScribeNamespace,action:"click"}}},this._handleOnClick=()=>{const{saveAsRecentSearch:e,shouldStoreTypeaheadItem:t,topic:{description:n,id:o,name:r}}=this.props;e&&t&&t(p.a.ItemType.TOPIC)&&e({topic:{id:o,name:r,description:n||"",type:d.a.Topic}}),this._handleScribe("click")},this._topicDomId=`topic${v}`,this._nameDomId=`topic-name${v}`,this._descriptionDomId=`topic-description${v}`,this._followButtonDomId=`topic-follow-button${v}`,this._notInterestedButtonDomId=`topic-not-interested-button${v}`,v+=1}render(){const{educateOnFollow:e,isInSidebar:t,nameWeight:n,notInterestedOnClick:o,topic:c}=this.props,{description:i,name:s}=c,{loggedInUserId:d}=this.context;return r.a.createElement(b.a,{accessibilityLabelledBy:[this._topicDomId,this._nameDomId,this._descriptionDomId,this._followButtonDomId,this._notInterestedButtonDomId].join(" "),interactiveStyles:this._topicLink?void 0:null,link:this._topicLink,onClick:this._topicLink?this._handleOnClick:void 0,style:[S.root,S.flexStart],withDarkerInteractiveBackground:t},r.a.createElement(u.a,{style:S.topic},r.a.createElement(u.a,{accessibilityLabel:g,nativeID:this._topicDomId}),this._renderIcon(),r.a.createElement(u.a,{style:S.text},r.a.createElement(f.b,{nativeID:this._nameDomId,weight:n,withInteractiveStyling:!!this._topicLink},s),i?r.a.createElement(f.b,{color:"gray700",nativeID:this._descriptionDomId,numberOfLines:2},i):null)),r.a.createElement(u.a,{style:S.buttons},r.a.createElement(a.a,{educateOnFollow:e,nativeID:this._followButtonDomId,topic:c}),d&&o?r.a.createElement(l.a,{nativeID:this._notInterestedButtonDomId,onPress:o,style:S.marginLeft,topicId:c.id}):null))}_renderIcon(){const{withIcon:e}=this.props;return e?r.a.createElement(y.a,{Icon:s.a,size:"large",style:S.icon}):null}_handleScribe(e){const{analytics:t}=this.props;t.scribeAction(e)}}k.contextType=w.a,k.defaultProps={nameWeight:"bold",withIcon:!0};const S=I.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},flexStart:{alignItems:"flex-start"},icon:{alignSelf:"flex-start",marginRight:e.spaces.space12},customIcon:{borderRadius:e.borderRadii.infinite,height:e.spaces.space32,width:e.spaces.space32},text:{flexShrink:1},buttons:{alignItems:"center",alignSelf:"center",flexDirection:"row",paddingLeft:e.spaces.space8},marginLeft:{marginLeft:e.spaces.space4},topic:{alignItems:"center",flexDirection:"row",flexShrink:1,paddingRight:e.spaces.space4}})));t.a=Object(h.a)(Object(m.a)(k))},gwY8:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n("ERkP");const r=n.n(o).a.createContext({onFollow:void 0,onInitialize:void 0,onUnfollow:void 0})},hxu0:function(e,t,n){"use strict";var o=n("97Jx"),r=n.n(o),a=n("ERkP"),c=n.n(a),i=n("vqbU");t.a=e=>t=>c.a.createElement(i.a.Consumer,null,(n=>c.a.createElement(e,r()({},t,{isInSidebar:n}))))},"lnL+":function(e,t,n){"use strict";var o=n("ERkP"),r=n.n(o),a=n("t62R"),c=n("iySH"),i=n("I4+6"),s=n("cm6r"),l=n("rHpw"),d=n("MWbm");const p=()=>{const e=u.icon;return r.a.createElement(c.a,{style:e})},u=l.a.create((e=>({root:{backgroundColor:e.colors.cellBackground,flexDirection:"row",minHeight:e.spaces.space32},border:{borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:e.spaces.space1},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingRight:e.spaces.space12,paddingLeft:e.spaces.space16,paddingVertical:e.spaces.space8},text:{width:"100%"},icon:{color:e.colors.text,flexShrink:0,marginLeft:e.spaces.space4}})));t.a=e=>{const{link:t,onClick:n,text:o}=e,c=p(),m=i.a.generate({backgroundColor:"transparent",color:l.a.theme.colors.text});return r.a.createElement(d.a,{style:u.root},r.a.createElement(s.a,{interactiveStyles:m,link:t,onPress:n,style:[u.border,u.content]},r.a.createElement(a.b,{numberOfLines:1,selectable:!1,style:u.text,weight:"medium"},o),c))}},wtjx:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return I})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return v}));var o=n("Ssj5"),r=n("RqPI");const a="recentSearches",c="rweb.recentSearches",i=e=>(t,n,{userPersistence:o})=>o.set(c,{recentSearches:e}).catch((()=>{Promise.resolve()})),s=(e,t)=>{let n=[];if(e&&e.user){const o=e.user;n=t.filter((e=>e.keyword||e.topic||e.event||e.user&&e.user.id!==o.id))}else if(e&&e.topic){const o=e.topic;n=t.filter((e=>e.keyword||e.user||e.event||e.topic&&e.topic.id!==o.id))}else if(e&&e.event){const o=e.event;n=t.filter((e=>e.keyword||e.user||e.topic||e.event&&e.event.id!==o.id))}else if(e&&e.keyword){const o=e.keyword;n=t.filter((e=>e.keyword&&e.keyword.query!==o.query||e.user||e.topic||e.event))}return n},l={fetched:!1,recentSearches:[]};const d=e=>e.recentSearches.recentSearches,p=e=>d(e)[0]||null,u=e=>e.recentSearches.fetched,m="rweb/recentSearches/INIT_FROM_CACHE",h=e=>({type:m,payload:e}),b="rweb/recentSearches/REMOVE_QUERY",f=e=>(t,n,{userPersistence:o})=>{t({payload:e,type:b});const a=n().recentSearches;return Object(r.o)(n())?t(i(a.recentSearches)):Promise.resolve()},y="rweb/recentSearches/CLEAR_ALL",I=()=>(e,t,{userPersistence:n})=>{e({type:y});const o=t().recentSearches;return Object(r.o)(t())?e(i(o.recentSearches)):Promise.resolve()},w="rweb/recentSearches/ADD_QUERY",g=e=>(t,n,{userPersistence:o})=>{t({payload:e,type:w});const a=n().recentSearches;return Object(r.o)(n())?t(i(a.recentSearches)):Promise.resolve()},v=()=>(e,t,{userPersistence:n})=>t().recentSearches.fetched?Promise.resolve():e(((e,t,{userPersistence:n})=>{const o=t();return Object(r.o)(o)?n.get(c).then((t=>{e(h(t))})).catch((()=>{e(h())})):(e(h()),Promise.resolve())}));o.a.register({[a]:function(e=l,t){switch(t.type){case w:{const n=t.payload,o=n?s(n,e.recentSearches):[];return o.length>49&&o.splice(49,1),n&&o.unshift(n),{...e,recentSearches:o}}case b:{const n=t.payload,o=n?s(n,e.recentSearches):[];return{...e,recentSearches:o}}case y:return{fetched:!0,recentSearches:[]};case m:return{...e,...t.payload,fetched:!0};default:return e}}})},zWr2:function(e,t,n){"use strict";n.r(t);var o=n("ezF+"),r=n("VPAj"),a=n("E3Hq"),c=n("ERkP"),i=n.n(c),s=n("Zejx"),l=n("rxPX");const d=(e,t)=>s.a.select(e,t.entry.content.topicId);var p=Object(l.a)().propsFromState((()=>({topic:d}))),u=(n("kYxP"),n("v6aA")),m=n("0KEI");var h=Object(l.a)().propsFromActions((()=>({createLocalApiErrorHandler:Object(m.createLocalApiErrorHandlerWithContextFactory)("TOPIC_PILL_CONTEXT"),follow:s.a.follow,unfollow:s.a.unfollow}))).withAnalytics(),b=n("3XMw"),f=n.n(b),y=n("Tp1h"),I=n("Jkc4"),w=n("gwY8"),g=n("MWbm"),v=n("UnyZ"),k=n("aV/s"),S=n("rHpw");const C=f.a.ge8f3043,E=f.a.aa576cbf,x=f.a.i77347d1,L=f.a.e839db3a,_=e=>{const{loggedInUserId:t}=i.a.useContext(u.a),{analytics:n,createLocalApiErrorHandler:o,follow:r,notInterestedOnClick:a,topic:c,unfollow:s,withActionIcon:l}=e,{following:d,id:p,name:m,not_interested:h}=c,b=i.a.useRef(!1),[f,S]=i.a.useState(0),_=i.a.useCallback((e=>{if(0===f){const{nativeEvent:{layout:{width:t}}}=e;S(t)}}),[f]),R=e=>{if(!h&&l)return d?v.a.Active:v.a.Expand},A=(e,t,n)=>e(d?O(n):D(t)),D=e=>t=>{r(p).catch(o()).then(e&&e(p)),n.scribeAction("follow")},O=e=>t=>{s(p).catch(o()).then(e&&e(p)),n.scribeAction("unfollow")},j=(e,n,o)=>{if(t&&a)return{mode:v.a.Remove,onSecondaryClick:a,accessibilityLabel:x({topicName:m}),hoverLabel:L,disabled:d||h}};return i.a.createElement(I.a,{customText:m,displayMode:y.a.topic},(e=>i.a.createElement(w.a.Consumer,null,(({onFollow:t,onInitialize:n,onUnfollow:o})=>(n&&!b.current&&(n(p,d),b.current=!0),i.a.createElement(g.a,{onLayout:_,style:[P.root,{minWidth:f}]},i.a.createElement(k.a,{accessibilityLabel:d?E({topicName:m}):C({topicName:m}),disabled:h,key:p,mode:R(),onClick:A(e,t,o),secondaryAction:j(),selected:d,style:P.pill,text:m})))))))};_.defaultProps={withActionIcon:!0};const P=S.a.create((e=>({root:{marginHorizontal:e.spaces.space4,marginVertical:e.spaces.space4},pill:{textOverflow:"ellipsis"},roundIcon:{borderRadius:e.borderRadii.infinite,height:"100%",width:"100%"}})));var R=h(_),A=n("Irs7"),D=n("lnL+"),O=n("XcJG");const j=e=>{const t=Object(A.b)(),{entry:{content:n},feedbackItems:o,topic:r}=e,{topicDisplayType:c,topicFunctionalityType:s}=n;i.a.useEffect((()=>{r&&t.scribeAction("impression")}),[]);const l=i.a.useCallback((()=>{t.scribeAction("click")}),[t]);if(!r)return null;const d=Object(a.a)({feedbackItems:o,topic:r,topicItemContent:n}),p=s!==O.b.Pivot&&c!==O.a.PillWithoutActionIcon;return s===O.b.Pivot?i.a.createElement(g.a,{style:H.root},i.a.createElement(D.a,{link:`/i/topics/${r.id}`,onClick:l,text:r.name})):i.a.createElement(R,{notInterestedOnClick:d,topic:r,withActionIcon:p})},H=S.a.create((e=>({root:{margin:e.spaces.space4}})));var T=p(i.a.memo(j));t.default=({shouldDisplayBorder:e=!1})=>o.b({component:T,isFocusable:Object(r.a)(!0),getScribeDataItem:a.b,shouldDisplayBorder:Object(r.a)(e)}).getHandler()}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/ondemand.topicHandler.2a57d0c7.js.map