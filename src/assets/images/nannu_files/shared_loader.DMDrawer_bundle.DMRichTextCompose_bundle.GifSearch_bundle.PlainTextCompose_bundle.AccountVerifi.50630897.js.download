(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+/sI":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n=a("ERkP"),i=a.n(n),r=a("TGcR"),s=a("t62R"),o=a("a6qo"),l=a("rHpw");const c="animated_gif",d="video";class u extends i.a.PureComponent{render(){const{durationInMilliseconds:e,type:t}=this.props;let a;if(t===c||"vine"===t)a=t===c?i.a.createElement(s.b,{weight:"bold"},"GIF"):i.a.createElement(r.a,{style:p.icon});else if(t===d&&e){const t=Math.trunc(e/6e4),n=`0${Math.trunc(e%6e4/1e3)}`.slice(-2);a=i.a.createElement(s.b,{color:"white"},`${t}:${n}`)}return a?i.a.createElement(o.a,{align:"left"},a):null}}const p=l.a.create((e=>({icon:{color:e.colors.white}})));t.c=u},"/Imo":function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),r=(a("kYxP"),a("ERkP")),s=a.n(r),o=a("/yvb"),l=a("k/Ka"),c=a("3XMw"),d=a.n(c),u=a("rHpw");const p=d.a.i5450bec,h=d.a.f7432494;class m extends s.a.Component{constructor(...e){super(...e),this._handlePress=e=>{const{onPress:t}=this.props;t&&t(e),this._fileInput&&this._fileInput.click()},this._handleChange=e=>{const{onChange:t}=this.props,a=e.target,n=a.files;n.length&&t&&t(n),a.value=""},this._handleFileInputButtonRef=e=>{this._fileInput=e}}render(){const{accept:e,disabled:t,multiple:a,onChange:n,testID:r,...c}=this.props,d=!(null!=e&&e.includes("video")||null!=e&&e.includes("gif"));return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,i()({hoverLabel:e?{label:d?h:p}:void 0},c,{disabled:t,onPress:this._handlePress})),Object(l.a)("input",{accept:e,disabled:t,multiple:a,onChange:this._handleChange,ref:this._handleFileInputButtonRef,style:f.input,tabIndex:-1,testID:r,type:"file"}))}}m.defaultProps={disabled:!1,multiple:!1};const f=u.a.create((e=>({input:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1}})));t.a=m},"4bHO":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>{switch(e.type){case"user":return"users"===t?`@${e.data.screen_name} `:`@${e.data.name} `;case"hashtag":case"topic":case"event":return`${e.data.topic} `;case"dm_conversation":return`${e.data.name} `;case"no_result":return`${e.data.text} `;default:return""}}},"7myi":function(e,t,a){"use strict";a("kYxP"),a("849X");var n=a("ERkP"),i=a.n(n),r=a("oEoC"),s=a("2dXj"),o=a("4bHO"),l=a("dzqK"),c=a("GZwR");class d extends i.a.Component{constructor(...e){super(...e),this._genericWrapperRef=i.a.createRef(),this.state={queryContext:void 0,canShowTypeahead:!1},this.render=()=>{const{children:e,contextText:t,isInline:a,isInlineReply:n,onTypeaheadStateChange:r,source:o}=this.props,{canShowTypeahead:l,queryContext:d}=this.state,u=l&&d?{word:d.word,resultType:d.resultType}:void 0;return i.a.createElement(s.a,{contextText:t,isInline:a,isInlineReply:n,onDismiss:this._handleDismiss,onSelectItem:this._handleSelectItem,onTypeaheadStateChange:r,query:u,ref:this._genericWrapperRef,source:o||c.d.Compose},e(this._handleInputChange))},this._handleSelectItem=e=>{const{onTextUpdated:t}=this.props,{queryContext:a}=this.state;if(a){const n=Object(o.a)(e,a.resultType),{newCursor:i,newTweetText:r}=this._replaceToken(n,a);t({target:{value:r}}),this._updateDOMTextArea(i,r)}this._setQueryContext(void 0)},this._updateDOMTextArea=(e,t)=>{this._textAreaRef&&(this._textAreaRef.value=t,this._textAreaRef.selectionStart=e,this._textAreaRef.selectionEnd=e,this._textAreaRef.focus())},this._handleInputChange=e=>{if(Object(l.a)(e))throw new Error("PlainTextTypeaheadComposeWrapper cannot handle rich text input changes");const t=e&&(e.currentTarget||e.target),{queryContext:a}=this.state;this._textAreaRef=t;const n=a&&a.word,i=t.value,{end:s,start:o,word:c}=r.c(t.selectionStart,i),d=r.e(c||"","compose");if((null==d?void 0:d.q)!==n)if(this._genericWrapperRef.current&&this._genericWrapperRef.current.resetSelectedItem(),-1===o)this._setQueryContext(void 0);else if(d){const{q:e,result_type:a}=d;this._setQueryContext({word:e,resultType:a,fullText:t.value,startIndex:o,endIndex:s})}else this._setQueryContext(void 0)},this._setQueryContext=e=>this.setState({queryContext:e,canShowTypeahead:!!e}),this._handleDismiss=()=>this.setState({canShowTypeahead:!1})}_replaceToken(e,t){const{endIndex:a,fullText:n,startIndex:i}=t,r=n.slice(0,i);return{newTweetText:r+e+n.slice(a),newCursor:r.length+e.length}}}t.a=d},KqB4:function(e,t,a){"use strict";var n=a("IGGJ");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var a=[],n=(0,i.default)(e,t),r=0;r<n.length;r++)a.push(n[r].url);return a};var i=n(a("vwfs"));e.exports=t.default},LCtV:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));a("kYxP");var n=a("ERkP"),i=a.n(n),r=a("3XMw"),s=a.n(r),o=a("mN6z"),l=a("Qwev"),c=a("rHpw"),d=a("1auM"),u=a("ude7"),p=a("U+bB"),h=a("MWbm");const m=s.a.gff1f69e,f=Object.freeze({INFINITE:"infinite",MEDIUM:"medium",NONE:"none"});class b extends i.a.Component{constructor(...e){super(...e),this.state={imagePreviewUrl:null},this._getImageSrc=()=>{const{enableGif:e,mediaItem:t}=this.props,{imagePreviewUrl:a}=this.state;if(t&&t.mediaFile)return t.mediaFile.isGif&&!e?a:t.mediaFile.url}}componentDidUpdate(){const{enableGif:e,mediaItem:{mediaFile:t}}=this.props,{imagePreviewUrl:a}=this.state;e||a||t instanceof d.a&&t.isGif&&Object(u.a)(t).then((e=>{this.setState({imagePreviewUrl:e})}))}shouldComponentUpdate(e,t){return!Object(o.a)(e,this.props)||!Object(o.a)(t,this.state)}render(){const{borderRadius:e,enableGif:t,mediaItem:a,onClick:n,resizeMode:r}=this.props,{imagePreviewUrl:s}=this.state||{},o=a.mediaFile&&a.mediaFile.isGif&&!t&&!s,c=a.needsProcessing||o,d=[y.root,g[e],c&&y.loadingBorder],u=this._getImageSrc();return i.a.createElement(h.a,{onClick:n,style:d},c||!u?i.a.createElement(l.a,{accessibilityLabel:m,style:y.activityIndicator}):i.a.createElement(p.a,{resizeMode:r,source:u,style:y.image}))}}b.defaultProps={borderRadius:f.NONE,enableGif:!0,resizeMode:"cover"};const g=c.a.create((e=>({[f.INFINITE]:{borderRadius:e.borderRadii.infinite},[f.MEDIUM]:{borderRadius:e.borderRadii.small},[f.NONE]:{borderRadius:e.borderRadii.none}}))),y=c.a.create((e=>({root:{borderRadius:e.borderRadii.xLarge,borderStyle:"solid",borderWidth:e.borderWidths.none,borderColor:"transparent",maxWidth:"100%",height:"100%",overflow:"hidden"},image:{display:"block",height:"100%",width:"100%"},loadingBorder:{borderColor:e.colors.gray300},activityIndicator:{height:"100%"}})));t.b=b},MLl7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r}));const n=Object.freeze({Composition:"composition",DMComposition:"dm_composition"}),i=e=>Object.values(n).indexOf(e)>=0,r=(e,t)=>"boolean"==typeof e?e:t},UgB4:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),r=a("Lsrn"),s=a("k/Ka");const o=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.13 11.358L3.614 2.108c-.29-.152-.64-.102-.873.126-.23.226-.293.577-.15.868l4.362 8.92-4.362 8.92c-.143.292-.08.643.15.868.145.14.333.212.523.212.12 0 .24-.028.35-.087l17.517-9.25c.245-.13.4-.386.4-.664s-.155-.532-.4-.662zM4.948 4.51l12.804 6.762H8.255l-3.307-6.76zm3.307 8.26h9.498L4.948 19.535l3.307-6.763z"})));o.metadata={width:24,height:24},t.a=o},VPdC:function(e,t,a){"use strict";a.d(t,"b",(function(){return y}));var n=a("97Jx"),i=a.n(n),r=a("ERkP"),s=a.n(r),o=a("3XMw"),l=a.n(o),c=a("cjZk"),d="fileInput",u=a("sjK1"),p=a("/Imo"),h=a("rHpw"),m=a("9HgX");const f=l.a.b9960f32,b={viewType:"media_picker"},g=s.a.createElement(c.a,null),y=({acceptGifs:e,acceptImages:t=!0,acceptVideo:a})=>(t?m.b:[]).concat(e?[m.a]:[]).concat(a?u.a:[]);class v extends s.a.PureComponent{render(){const{acceptGifs:e,acceptImages:t,acceptVideo:a,customMimeTypes:n,icon:r,style:o,withIcon:l,...c}=this.props,u=y({acceptGifs:e,acceptImages:t,acceptVideo:a}).concat(n).join(",");return s.a.createElement(p.a,i()({},c,{accept:u,behavioralEventContext:b,icon:l?r:void 0,style:[_.root,o],testID:d}))}}v.defaultProps={acceptGifs:!0,acceptImages:!0,acceptVideo:!0,customMimeTypes:[],accessibilityLabel:f,icon:g,size:"medium",withIcon:!0};const _=h.a.create((e=>({root:{margin:`-${e.spaces.space12}`}})));t.a=v},b5s6:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),r=a("ERkP"),s=a.n(r),o=a("v6aA"),l=a("XOJV"),c=a("eSoz"),d=a("rxPX"),u=a("0KEI");const p=(e,t)=>t.tweetId,h=(e,t)=>{const a=t.tweetId,n=a&&l.a.select(e,a);return n?Object(c.g)(e,n):void 0};var m=Object(d.a)().propsFromState((()=>({community:h,hydratedTweet:l.a.createHydratedTweetSelector(p)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(u.createLocalApiErrorHandlerWithContextFactory)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:c.c.fetchOneIfNeeded}))),f=a("YeIG"),b=a("uCxL"),g=a("Irs7"),y=a("x5Pi");const v=m((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:a,hydratedTweet:n,onPress:r,tweetId:l,...c})=>{const{featureSwitches:d,loggedInUserId:u}=s.a.useContext(o.a),p=Object(g.b)(),h=null==n?void 0:n.community_id_str;s.a.useEffect((()=>{h&&Object(f.a)(e)&&a(h).catch(t())}),[e,h,t,a]);const m=s.a.useCallback((e=>{p.scribeAction("click"),r&&r(e)}),[r,p]),v=n&&Object(y.f)(n,u,e),_=v&&Object(y.e)(v),w=d.isTrue("responsive_web_reactions_enabled");return s.a.createElement(b.a,i()({},c,{loggedInUserId:u,onPress:m,shouldShowAltLabelAlways:!0,socialContextProps:_,tweet:n,withReactions:w}))}));t.a=v},cIoY:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),r=a("1YZw"),s=a("rxPX"),o=Object(s.a)().propsFromActions((()=>({addToast:r.b}))),l=(a("kYxP"),a("k/Ka")),c=a("3XMw"),d=a.n(c),u=a("sgih"),p=a("t62R"),h=a("/yvb"),m=a("rHpw");const f=d.a.cfd2f35e;class b extends i.a.Component{constructor(...e){super(...e),this._handleOnFocus=e=>{e.currentTarget.select()}}render(){const{cancelButtonLabel:e,description:t,headerText:a,link:n,onCancel:r}=this.props,s=Object(l.a)("input",{autoFocus:!0,onFocus:this._handleOnFocus,readOnly:!0,style:g.linkInput,value:n});return i.a.createElement(u.a,{onMaskClick:r,style:g.container,type:"center",withMask:!0},a&&i.a.createElement(p.b,{align:"center",style:g.headerText,weight:"bold"},a),t&&i.a.createElement(p.b,{align:"center",color:"gray700",style:g.labelText},t),s,i.a.createElement(h.a,{onPress:r,size:"xLarge",style:g.cancelButton,type:"brandText"},e))}}b.defaultProps={cancelButtonLabel:f};const g=m.a.create((e=>({container:{alignItems:"center",paddingVertical:e.spaces.space32,paddingHorizontal:e.spaces.space12,position:"relative"},headerText:{marginBottom:e.spaces.space16},labelText:{marginBottom:e.spaces.space16,width:"100%"},linkInput:{backgroundColor:e.colors.gray0,borderColor:"transparent",color:e.colors.gray700,fontSize:e.fontSizes.body,marginBottom:e.spaces.space12,paddingVertical:e.spaces.space12,paddingHorizontal:e.spaces.space20},cancelButton:{width:"100%"}})));var y=b,v=a("I/9y"),_=a("mjJ+"),w=a("cm6r"),E=a("CaKu"),C=a("U+bB");const x=d.a.e05c00b4,I=d.a.eabf2209,P=d.a.a613e720,k=d.a.f88553c8,R={riffsy:"https://abs.twimg.com/a/1501527574/img/t1/icon_riffsy.png",giphy:"https://abs.twimg.com/a/1501527574/img/t1/icon_giphy.png"};class M extends i.a.PureComponent{constructor(e){super(e),this._renderMenu=e=>i.a.createElement(_.a,{items:[{text:P,Icon:v.a,onClick:this._handleCopyGifLinkButtonClick}],onCloseRequested:e}),this._handleCopyGifLinkButtonClick=e=>{const{addToast:t,gifUrl:a}=this.props;E.a.isAvailable()?(E.a.setString(a),t({text:k})):this.setState({showCopyLinkSheet:!0}),e&&e()},this._handleCopyLinkSheetCancel=()=>{this.setState({showCopyLinkSheet:!1})},this.state={showCopyLinkSheet:!1}}render(){const{showCopyLinkSheet:e}=this.state,{gifUrl:t,provider:a}=this.props,{display_name:n,name:r}=a,s=R[r];return s?i.a.createElement(i.a.Fragment,null,e?i.a.createElement(y,{description:I({providerName:n}),headerText:x,link:t,onCancel:this._handleCopyLinkSheetCancel}):null,i.a.createElement(p.b,{align:"center",color:"gray700",style:S.root},i.a.createElement(d.a.I18NFormatMessage,{$i18n:"e2e6ea0d"},this._renderAttribution(n,s)))):null}_renderAttribution(e,t){return i.a.createElement(w.a,{interactiveStyles:null,renderMenu:this._renderMenu},i.a.createElement(p.b,{weight:"bold",withInteractiveStyling:!0},i.a.createElement(C.a,{source:{uri:t},style:S.image}),i.a.createElement(p.b,null,e.toUpperCase())))}}const S=m.a.create((e=>({button:{marginLeft:e.spaces.space12},image:{display:"inline-block",height:e.spaces.space16,marginHorizontal:e.spaces.space4,width:e.spaces.space16},root:{marginHorizontal:e.spaces.space12}})));var T=M;const O=o((({addToast:e,gifUrl:t,provider:a})=>i.a.createElement(T,{addToast:e,gifUrl:t,provider:a})));t.a=O},dzqK:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("ERkP");var n=a("zpdM");function i(e){return e instanceof n.EditorState}},gpVt:function(e,t,a){"use strict";a.d(t,"b",(function(){return k}));var n=a("ERkP"),i=a.n(n),r=(a("kYxP"),a("CDB5")),s=a("xVN5"),o=a("vjRr"),l=a("rxPX"),c=a("0KEI");const d=(e,t)=>{const{urls:a}=t,n=[...a];let i;for(const t of n.reverse())if(i=o.a.select(e,t),i)break;return i};var u=Object(l.a)().propsFromState((()=>({card:d}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(c.createLocalApiErrorHandlerWithContextFactory)("COMPOSER_CARD_PREVIEW"),fetchCardPreviewIfNeeded:o.a.fetchCardPreviewIfNeeded,updateDMComposer:r.e,updateTweetComposer:s.w}))),p=a("KqB4"),h=a.n(p),m=a("aX4+"),f=a("3XMw"),b=a.n(f),g=a("hOZg"),y=a("cnVF"),v=a("MWbm"),_=a("v6aA"),w=a("/yvb"),E=a("rHpw"),C=a("VY6S"),x=a("mN6z");const I=b.a.f6fec9f6,P=/^https?:\/\//i,k=e=>{const t=h()(e);if(t.length)return t.map((e=>!P.test(e)&&`http://${e}`||e))};class R extends i.a.Component{constructor(e,t){super(e,t),this._fetchCardPreviewIfNeeded=()=>{const{createLocalApiErrorHandler:e,fetchCardPreviewIfNeeded:t,urls:a}=this.props;a.forEach((a=>{t(a).catch(e())}))},this._handleCardPreviewDismissal=e=>this._updateSingleComposer({cardUrl:y.B}),this._updateSingleComposer=e=>{const{conversationId:t,index:a,updateDMComposer:n,updateTweetComposer:i}=this.props,{cardUrl:r}=e||{};this._isDMComposer?t&&n(t,r):i({updates:{cardUrl:r},index:a})},this._debouncedFetchCardPreview=Object(C.a)(this._fetchCardPreviewIfNeeded,1e3),this._isDMComposer=!!e.conversationId}componentDidMount(){this._debouncedFetchCardPreview()}componentDidUpdate(e){const{urls:t}=this.props;Object(x.a)(e.urls,t)||this._debouncedFetchCardPreview()}componentWillUnmount(){this._updateSingleComposer()}render(){const{card:e,isCardPreviewTombstoned:t,style:a}=this.props,{loggedInUserId:n}=this.context;return e&&!t&&n?i.a.createElement(v.a,{style:a},i.a.createElement(m.a,{card:{name:e.name,url:e.url,binding_values:e.binding_values},cardContext:{tweetUserId:n},isInteractive:!1,preventVideoPlayback:!0}),i.a.createElement(w.a,{accessibilityLabel:I,icon:i.a.createElement(g.a,null),onPress:this._handleCardPreviewDismissal,size:"xSmall",style:M.closeButton,type:"onMediaDominantColorFilled"})):null}}R.contextType=_.a;const M=E.a.create((e=>({closeButton:{position:"absolute",top:e.spaces.space4,left:e.spaces.space4}}))),S=u(R);t.a=S},jtO7:function(e,t,a){"use strict";var n=a("97Jx"),i=a.n(n),r=a("ERkP"),s=a.n(r),o=a("t62R"),l=a("I4+6"),c=a("cm6r"),d=a("rHpw"),u=a("MWbm");const p=d.a.create((e=>({container:{backgroundColor:e.colors.cellBackground},root:{justifyContent:"center",minHeight:e.spaces.space48,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16}})));t.a=({align:e="center",color:t,label:a,...n})=>{const r=l.a.generate({backgroundColor:d.a.theme.colors.transparent,color:d.a.theme.colors[t],insetFocusRing:!0});return s.a.createElement(u.a,{style:p.container},s.a.createElement(c.a,i()({},n,{interactiveStyles:r,style:p.root}),s.a.createElement(o.b,{align:e,color:t},a)))}},krmn:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),r=a("zb92"),s=a("RuTB"),o=a("3XMw"),l=a.n(o);var c=Object(r.a)({loader:()=>l.a.emoji.then((()=>Promise.all([a.e(65),a.e(263)]).then(a.bind(null,"5RdJ")))),renderPlaceholder:(e,t)=>i.a.createElement(s.a,{hasError:e,onRetry:t})}),d=a.p+"twemoji_sprite.6d90d9d7.png",u=a.p+"twemoji_sprite_high_res.0b0faef7.png",p=a("rHpw"),h=a("U+bB"),m=a("kLqS"),f=a("MWbm");const b=p.a.create((e=>({content:{backgroundColor:e.colors.cellBackground},dimensions:{height:"400px",borderRadius:e.borderRadii.xLarge,width:10*e.spacesPx.space32,overflow:"hidden"},hidden:{display:"none"}})));var g=e=>{const{onSelect:t,partialRender:a}=e,n=m.a.get()>1?u:d;return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{style:[b.content,b.dimensions]},i.a.createElement(c,{onSelect:t,partialRender:a,rowSize:9,spriteUrl:n})),i.a.createElement(h.a,{source:n,style:b.hidden}))},y=a("pNJr"),v=a("2ZFc"),_=a("OiMc"),w=a("/yvb");const E=l.a.d4a4842e,C=i.a.createElement(y.a,null),x=l.a.fec16c1c,I={viewType:"emoji_picker"},P=e=>{const{disabled:t,onEmojiSelect:a,onPress:n,size:r,style:s,textInputRef:o}=e,[l,d]=i.a.useState(!0);i.a.useEffect((()=>{const e=setTimeout((()=>{c.preload(),v.a.get("emojiPicker2")}),5e3);return()=>{clearTimeout(e)}}),[]);return i.a.createElement(_.a,{enableEnterKeyToggle:!0,onAnimateComplete:()=>d(!1),onDismiss:()=>d(!0),onHoverCardUnmount:()=>{window.requestAnimationFrame((()=>o&&o.focus()))},renderContent:()=>i.a.createElement(g,{onSelect:a,partialRender:l}),withArrow:!0},i.a.createElement(w.a,{accessibilityHasPopup:"menu",accessibilityLabel:E,behavioralEventContext:I,disabled:t,hoverLabel:{label:x},icon:C,onPress:e=>n&&n(e),size:r,style:s,type:"brandText"}))};P.defaultProps={disabled:!1,size:"xSmall"};t.a=P},pKoL:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),r=a("HPNB"),s=a("9HgX"),o=a("3XMw"),l=a.n(o),c=a("LCtV"),d=a("eyty"),u=a("zb92"),p=a("RuTB"),h=Object(u.a)({loader:()=>Promise.all([a.e(0),a.e(3),a.e(232)]).then(a.bind(null,"EOJ2")).then((e=>({default:e.__DANGEROUS_IMPORT_VIDEOPLAYER__}))),renderPlaceholder:(e,t)=>i.a.createElement(p.a,{hasError:e,onRetry:t})}),m=a("k/Ka"),f=a("eXeu"),b=a("iOGT");class g extends i.a.Component{constructor(...e){super(...e),this._setVideoRef=e=>{const{getVideoRef:t}=this.props;t&&t(e)}}render(){const{children:e,dataSaverMode:t,getVideoRef:a,style:n,variants:r,...s}=this.props,o=Object(b.b)(r,t?b.a.MEDIUM:void 0)||[],l=Object(f.f)(o.map((e=>({src:e.url,type:e.content_type}))));return Object(m.a)("video",{...s,children:[l.map((e=>i.a.createElement("source",{key:e.src,src:e.src,type:e.type}))),e],ref:this._setVideoRef,style:n})}}g.defaultProps={dataSaverMode:!1,variants:[]};var y=a("62wY"),v=a("sjK1"),_=a("v6aA"),w=a("cHvH"),E=a("mXq/"),C=a("/yvb"),x=a("a6qo"),I=a("rHpw"),P=a("hOZg"),k=a("GCOQ"),R=a("tuke"),M=a("U+bB"),S=a("MWbm"),T=a("+/sI");const O=l.a.gd80afba,D=l.a.j322caee,L=l.a.abd845fe,F=l.a.df1b0708,j=l.a.cd959e5c,V=l.a.e68b09b4,B=l.a.add55c98;class z extends i.a.Component{constructor(...e){super(...e),this.state={isVideoPaused:!0,playGif:!1},this._handleGifClick=()=>{this.setState({playGif:!this.state.playGif})},this._handleMediaPreviewLayout=e=>{const{mediaItem:t,resizeIfNeeded:a}=this.props,n=t.mediaFile||t.externalMediaDetails;if(!n)return;const{nativeEvent:{layout:{height:i,width:r}}}=e,{height:s,width:o}=n,l=o/s;Math.abs(l-r/i)>.05&&this._mediaContainer&&("width"===a?this._mediaContainer.setNativeProps({style:{width:i*l}}):"height"===a&&this._mediaContainer.setNativeProps({style:{height:r/l}}))},this._handleVideoOnPlay=e=>{this.setState({isVideoPaused:!1})},this._handleVideoOnPause=e=>{this.setState({isVideoPaused:!0})},this._setMediaContainerRef=e=>{this._mediaContainer=e},this._setVideoRef=e=>{this._video=e},this.playVideo=()=>{if(this._video){const e=this._video.play();void 0!==e&&e.then((e=>{this._handleVideoOnPlay()})).catch()}},this.pauseVideo=()=>{this._video&&(this._video.pause(),this._handleVideoOnPause())}}render(){var e;const{accessibilityLabel:t,accessibilityRole:a,enableGif:n,mediaItem:o,onEdit:l,onEditSensitiveWarning:c,onRemove:d,style:u,withAltTextLabel:p,withCloseButton:h,withEditButton:m,withEditIcon:f,withEditSensitiveWarningButton:b}=this.props,{playGif:g}=this.state,y=o.externalMediaDetails&&o.externalMediaDetails.mediaType===s.a,v=y||n&&o.mediaFile&&o.mediaFile.isGif,_=!(null==(e=o.mediaFile)||!e.isVideo);return i.a.createElement(w.a,null,(({windowWidth:e})=>{const n=void 0!==f?f:!r.a.isTwoColumnLayout(e);return i.a.createElement(S.a,{accessibilityLabel:t||B,accessibilityRole:a,onLayout:this._handleMediaPreviewLayout,ref:this._setMediaContainerRef,style:[u,A.cursor,y&&A.gifPlayButton]},this._renderPreview(),y&&!g&&i.a.createElement(E.a,{accessibilityLabel:F,onPress:this._handleGifClick,size:"small"}),h?i.a.createElement(C.a,{accessibilityLabel:j,hoverLabel:{label:V},icon:i.a.createElement(P.a,null),onPress:d,size:"small",style:A.close,type:"onMediaDominantColorFilled"}):null,v?i.a.createElement(T.c,{type:T.a}):null,p&&!_?i.a.createElement(x.a,{align:"left",altLabel:t}):null,m?i.a.createElement(S.a,{style:[A.editMedia,_?A.editVideo:A.editImage]},b?i.a.createElement(C.a,{accessibilityLabel:D,icon:i.a.createElement(k.a,{style:A.editSensitiveWarningIcon}),onPress:c,size:"small",style:A.editSensitiveWarningButton,type:"onMediaDominantColorFilled"}):null,i.a.createElement(C.a,{accessibilityLabel:O,icon:n?i.a.createElement(R.a,null):void 0,onPress:l,size:n?"xSmall":"small",type:"onMediaDominantColorFilled"},n?void 0:L)):null)}))}_renderPreview(){var e;const{mediaItem:t}=this.props;if(t.externalMediaDetails){const e=t.externalMediaDetails.previewUrl,a=t.externalMediaDetails.stillMediaUrl;return this._renderGifPreview(e,a)}return null!=(e=t.mediaFile)&&e.isVideo?this._renderVideoPreview(t.mediaFile.type,t.mediaFile.url,t.id,t.mediaFile):i.a.createElement(S.a,{style:I.a.absoluteFill},this._renderImagePreview())}_renderGifPreview(e,t){const{playGif:a}=this.state,n={uri:a?e:t};return i.a.createElement(S.a,{onClick:this._handleGifClick,style:I.a.absoluteFill},i.a.createElement(M.a,{resizeMode:"cover",source:n,style:A.video}))}_renderImagePreview(){const{borderRadius:e,enableGif:t,imageResizeMode:a,mediaItem:n,onClick:r}=this.props;return i.a.createElement(c.b,{borderRadius:e,enableGif:t,mediaItem:n,onClick:r,resizeMode:a})}_renderVideoPreview(e,t,a,n){var r;this._configurableVideoPlayerEnabled=this.context.featureSwitches.isTrue("responsive_web_composer_configurable_video_player_enabled");const{mediaItem:s}=this.props,o=null==(r=s.mediaMetadata)?void 0:r.subtitles;if(this._configurableVideoPlayerEnabled&&n instanceof v.c){const r=Object(d.h)(n.fileHandle)?[{src:t,type:e}]:[],l=`${a}`;return i.a.createElement(h,{mediaFile:n,mediaId:l,subtitles:o,trimData:null==s?void 0:s.trimData,variants:r})}{var l;const a=Object(d.h)(n.fileHandle)?[{content_type:e,url:t}]:[],r=(null==o||null==(l=o.upload)?void 0:l.mediaFile)instanceof y.a?o.upload.mediaFile.vtt:void 0;return i.a.createElement(g,{autoPlay:!1,controls:!0,getVideoRef:this._setVideoRef,loop:!0,muted:!0,onPause:this._handleVideoOnPause,onPlay:this._handleVideoOnPlay,playsInline:!0,poster:n instanceof v.c?n.thumbnail:"",style:A.video,variants:a},o&&r?i.a.createElement("track",{default:!0,kind:"subtitles",label:o.displayName,src:r,srcLang:o.lang}):null)}}}z.contextType=_.a,z.defaultProps={enableGif:!0,withCloseButton:!0,withAltTextLabel:!1,withEditButton:!1,withEditSensitiveWarningButton:!1};const A=I.a.create((e=>({close:{position:"absolute",left:e.spaces.space4,top:e.spaces.space4},cursor:{cursor:"pointer"},editSensitiveWarningIcon:{color:e.colors.primary},editMedia:{display:"flex",flexDirection:"row",position:"absolute",right:e.spaces.space4},editImage:{bottom:e.spaces.space4},editVideo:{top:e.spaces.space4},editSensitiveWarningButton:{marginRight:e.spaces.space8},gifPlayButton:{alignItems:"center",justifyContent:"center"},video:{height:"100%",width:"100%"}})));t.a=z},rFBM:function(e,t,a){"use strict";a("kYxP");var n=a("ERkP"),i=a.n(n),r=a("rHpw"),s=a("k/Ka"),o=a("MWbm");const l=e=>Object(s.a)("div",e);class c extends i.a.Component{constructor(...e){super(...e),this._dragEnterCount=0,this.state={active:!1},this._handleDragDrop=e=>{const{onFilesAdded:t}=this.props;e.preventDefault();t(Array.from(e&&e.dataTransfer.files)),this._updateDragCount(0)},this._handleDragEnter=e=>{const{onDragEnter:t}=this.props;e.preventDefault(),t&&t(),this._updateDragCount(this._dragEnterCount+1)},this._handleDragLeave=e=>{e.preventDefault(),this._updateDragCount(this._dragEnterCount-1)},this._handleDragOver=e=>{e.preventDefault()}}render(){const{allowDragDrop:e,children:t,style:a}=this.props,{active:n}=this.state,r=e?d.dragBorderValid:d.dragBorderInvalid;return i.a.createElement(l,{onDragEnter:this._handleDragEnter,onDragLeave:this._handleDragLeave,onDragOver:this._handleDragOver,onDrop:this._handleDragDrop,style:[d.root,a,n&&r]},i.a.createElement(o.a,{style:d.inner},"function"==typeof t?t(n):t))}_updateDragCount(e){this._dragEnterCount=e,0===this._dragEnterCount?this.setState({active:!1}):this._dragEnterCount>0&&this.setState({active:!0})}}c.defaultProps={allowDragDrop:!0};const d=r.a.create((e=>({root:{display:"flex",flexDirection:"column"},dragBorderValid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.primary},dragBorderInvalid:{borderStyle:"dashed",borderWidth:e.spaces.space2,borderColor:e.colors.magenta500},inner:{flexGrow:1}})));t.a=c},tuke:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),r=a("Lsrn"),s=a("k/Ka");const o=(e={})=>Object(s.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style],viewBox:"0 0 24 24"},i.a.createElement("g",null,i.a.createElement("path",{d:"M21.592 5.576c.877-.967.882-2.298.006-3.174-.877-.877-2.208-.87-3.174.006 0 0-.003 0-.004.002l-.006.006-.005.004s-.002 0-.002.002L8.398 11.27c-1.716-.214-3.424.31-4.534 1.42-3.872 3.874-1.523 9.616-1.422 9.858.1.24.32.41.577.45.037.007.075.01.113.01.218 0 .428-.095.57-.265 1.83-2.15 3.043-2.023 4.328-1.89 1.164.122 2.477.258 3.834-1.282.975-1.106 1.302-2.585.922-4.03l8.792-9.948h.002l.004-.006.006-.006.002-.004zm-1.055-2.113c.305.305.28.74-.06 1.11-.003.003-.004.007-.006.01 0 0-.003 0-.004.003l-5.662 6.406-1.796-1.796 6.406-5.662c.002 0 .002-.003.004-.005.002-.003.006-.004.008-.006.37-.34.807-.365 1.11-.06zm-8.62 10.797L9.74 12.084l2.142-1.894 1.927 1.927-1.894 2.143zm-1.178 4.32c-.848.96-1.488.895-2.552.78-1.27-.13-2.808-.293-4.722 1.463-.415-1.673-.784-4.83 1.457-7.072.807-.805 2.086-1.168 3.377-.983l2.977 2.976c.333 1.03.15 2.057-.538 2.836z"})));o.metadata={width:24,height:24},t.a=o},w3n3:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),r=a("/yvb"),s=a("3XMw"),o=a.n(s),l=a("3rWK"),c=a("Irs7");const d=o.a.a4993fa2,u=i.a.createElement(l.a,null),p=o.a.i0db46e6,h={viewType:"gif_search"};t.a=({dmConversationId:e,enabled:t=!0,gifSearchKeySource:a,history:n,onPress:s,style:o,testID:l})=>{const m=Object(c.b)(),f=i.a.useCallback((()=>{s&&s(),m.scribe({element:"found_media_button",action:"click"}),n.push({pathname:"/i/foundmedia/search",state:{gifSearchKeySource:a,dmConversationId:e}})}),[e,m,a,n,s]);return i.a.createElement(r.a,{accessibilityLabel:d,behavioralEventContext:h,disabled:!t,hoverLabel:{label:p},icon:u,onPress:f,size:"medium",style:o,testID:l,type:"brandText"})}},wpu3:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return m}));a("kYxP"),a("qd3W");var n=a("oEoC"),i=a("1auM"),r=a("kIAd"),s=a("VAyw"),o=a("/Ikv"),l=a("s1N3"),c=a("lnti");const d=({excludeReplyUser:e,inReplyToStatus:t,loggedInUserId:a})=>{const{retweeted_status:n}=t,{entities:i,unmentioned_user_ids:r,user:o}=n||t,d=n?n.user:{},p=n?t.user:{},h=(null==i?void 0:i.user_mentions)||[],m=s.a.mergeTaggedUsers((null==i?void 0:i.media)||[]),f=u(n||t)||{},b={[d.id_str]:d,[p.id_str]:p,[o.id_str]:o,[f.id_str]:f};h.forEach((e=>{b[e.id_str]=e})),m.forEach((({name:e,screen_name:t,user_id:a})=>{b[a]={id_str:a,name:e,screen_name:t}}));const g=e=>{const t=null==r?void 0:r.includes(e.id_str),a=e.id_str===o.id_str;return!t||a?[e.id_str]:[]},y=Object(l.a)(Object(c.a)([...g(d),...g(p),o.id_str,...h.flatMap((e=>g(e))),...m.map((e=>e.user_id))])).filter((e=>e!==a));let v=a&&o.id_str===a?[a,...y]:y;return e&&(v=v.filter((e=>e!==o.id_str))),v.map((e=>b[e]))},u=({card:e})=>{let t=null;if(e){const a=o.a.getBindingValue(e.binding_values,"site");a&&e.users&&(t=e.users[a.id_str])}return t},p=({maxNumberOfPhotos:e})=>t=>{if(0===t.length)return!0;const a=t.some((e=>!!e.externalMediaDetails)),n=!a&&t.some((e=>e.mediaFile&&e.mediaFile.isGif)),r=t.some((e=>e.mediaFile&&!(e.mediaFile instanceof i.a)&&e.mediaFile.isVideo));if(n||a||r)return 1===t.length;{const a=t.length<=e,n=t.every((e=>e.mediaFile&&e.mediaFile.isImage));return a&&n}},h=p({maxNumberOfPhotos:4}),m=(e,t=!1)=>{const a=e.split(r.b.WordBoundary);return t&&a.pop(),!!a.find((e=>{const t=Object(n.e)(e,"compose");return t&&"users"===t.result_type}))}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.DMDrawer~bundle.DMRichTextCompose~bundle.GifSearch~bundle.PlainTextCompose~bundle.AccountVerifi.50630897.js.map