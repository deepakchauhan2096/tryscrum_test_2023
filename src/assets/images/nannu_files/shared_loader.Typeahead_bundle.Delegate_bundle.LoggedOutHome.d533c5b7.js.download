(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"3EFP":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return n})),s.d(t,"e",(function(){return r})),s.d(t,"f",(function(){return l}));const a="ArrowDown",o="ArrowUp",i="Enter",n="Escape",r="ESC",l="Tab"},"4e/K":function(e,t,s){"use strict";s.r(t),s.d(t,"TypeaheadInput",(function(){return R})),s.d(t,"styles",(function(){return k}));var a=s("3EFP"),o=s("ERkP"),i=s.n(o),n=s("ZUOq"),r=s("+Kfv"),l=s("woHV"),c=s("3XMw"),d=s.n(c),h=s("VwDm"),u=s("WPfJ"),p=s("N5qz"),m=s("Es6L"),y=s("OEYw"),f=s("GZwR"),b=s("MWbm"),g=s("v6aA"),_=s("rHpw"),w=s("xoZN"),I=s("6OUF"),C=s("pf9B"),v=s("cHvH"),x=s("oEoC");const E=d.a.f065ba8c,S={viewType:"typeahead_input"},T=e=>p.a.isTwoColumnNormalLayout(e)?{width:n.a.columnWidths.secondary.normal+_.a.theme.spacesPx.space24,left:-_.a.theme.spacesPx.space24/2}:p.a.isTwoColumnSmallLayout(e)?{width:n.a.columnWidths.secondary.small+_.a.theme.spacesPx.space16,left:-_.a.theme.spacesPx.space16/2}:void 0;let D=1;class R extends i.a.Component{constructor(e,t){super(e,t),this._withNewTypeaheadUI=!1,this._render=({windowWidth:e})=>{const{alwaysOpen:t,disableClearButton:s,forceVdlDisable:a,inputStyle:o,isCompact:n,isOnHomepage:c,placeholder:d,renderInSearchField:u,rounded:p,shouldAutoFocus:m,shouldFocusOnClear:y,style:f,testID:g}=this.props,_=this.state.showTypeaheadDropdown||t;return i.a.createElement(r.a,{behavioralEventContext:S},i.a.createElement(b.a,{onLayout:this._handleLayout,ref:this._setRootContainerNode,style:[k.root,f]},i.a.createElement(w.a,{onKeyDown:this._handleKeyDown,style:k.keydownInputListener},i.a.createElement(l.a,{accessibilityLabel:d,accessibilityRole:"search",onSubmit:this._handleFormSubmit,style:k.wrapper},i.a.createElement(b.a,{ref:this._setInputContainerNode,style:o},i.a.createElement(I.a,{Icon:h.a,ariaActiveDescendant:this.state.ariaDescendantId,ariaAutocomplete:"list",ariaExpanded:_,ariaLabel:E,ariaOwns:this._dropdownDomId,ariaRole:"combobox",autoComplete:"off",autoCorrect:!1,autoFocus:m,contentBelow:u&&u(),focusOnClear:y,isCompact:n,leftAligned:c,onChange:this._handleInputChange,onClear:this._handleInputClear,onFocus:this._handleInputFocus,onLayout:this._handleInputLayoutChanged,placeholder:d,ref:this._setInputRef,returnKeyType:"search",spellCheck:"false",styleType:a?"legacyPill":p?"pill":"selection",testID:g,value:this.state.query,withClearButton:!s&&this.state.showTypeaheadDropdown})),i.a.createElement(b.a,{style:[k.typeaheadContainer,!p&&k.topBorder]},_?this._renderDropdown(e):null)))))},this._renderDropdown=e=>{const{communityId:t,filter:s,getItemDisabledMessage:a,getItemIsDisabled:o,getTopicExactMatch:n,getUserDisplayNameLabel:r,getUserExactMatch:l,injectedItems:c,isInSidebar:d,isModal:h,isOnHomepage:u,maxEvents:p,maxTopics:f,onItemsChanged:b,orderResults:g,renderCallout:w,renderEmptyState:I,renderHeader:C,renderNoResultsState:v,renderUserDecoration:E,selectedItems:S,shouldDeferPrefetch:D,source:R,trustedFriendsId:U,withFixedPositioning:F,withSectionDivider:L}=this.props,O=e>=_.a.theme.breakpoints.medium||Object(m.a)(),{dropdownOffset:P,query:N}=this.state,j=h?k.modalDropdown:[k.dropdown,!O&&F&&P?[Object(x.d)(P),{height:`calc(100vh - ${P}px)`}]:null,(O||u)&&k.wideModeDropdown,this._withNewTypeaheadUI&&d&&T(e),u&&k.shortModeDropdown,!O&&u&&k.shortModeDropdownMobile],M={ariaDescendantId:this.state.ariaDescendantId,domId:this._dropdownDomId,onDismiss:this._handleOnEmptyStateDismiss,onItemFocusChanged:this._handleItemFocusChanged,ref:this._handleDropdownRef,style:j};return I&&!N?I(M):i.a.createElement(y.a,{ariaDescendantId:this.state.ariaDescendantId,communityId:t,domId:this._dropdownDomId,filter:s,getItemDisabledMessage:a,getItemIsDisabled:o,getTopicExactMatch:n,getUserDisplayNameLabel:r,getUserExactMatch:l,injectedItems:c,maxEvents:p,maxTopics:f,onItemClick:this._handleItemClick,onItemFocusChanged:this._handleItemFocusChanged,onItemsChanged:b,orderResults:g,query:N,ref:this._handleDropdownRef,renderCallout:w,renderHeader:C,renderNoResultsState:v,renderUserDecoration:E,selectedItems:S,shouldDeferPrefetch:D,source:R,style:j,trustedFriendsId:U,withSectionDivider:L})},this._dismissDropdown=()=>{this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss()},this._handleOnEmptyStateDismiss=()=>{this._dismissDropdown(),this._inputRef&&this._inputRef.blur()},this._handleLayout=()=>{this._updatePosition()},this._handleInputLayoutChanged=()=>{this._updatePosition()},this._updatePosition=()=>{if(!this._inputContainerNode)return;const{bottom:e}=this._inputContainerNode.getBoundingClientRect();e!==this.state.dropdownOffset&&this.setState({dropdownOffset:e})},this._handleDropdownRef=e=>{this._dropdownRef=e},this._setRootContainerNode=e=>{this._rootContainerNode=e||null},this._setInputRef=e=>{this._inputRef=e},this._setInputContainerNode=e=>{this._inputContainerNode=e||null,this._inputContainerNode&&this._updatePosition()},this._handleFocusChange=e=>{const t=C.a.getCount()>0;this._rootContainerNode&&this._rootContainerNode.contains(e.target)||t||this.state.showTypeaheadDropdown&&this._dismissDropdown()},this._handleKeyDown=e=>{const{key:t}=e,{alwaysOpen:s}=this.props,{showTypeaheadDropdown:o}=this.state;if(Object(x.g)(e)){if(t===a.a)return this._focusNext(),void e.preventDefault();if(t===a.b)return this._focusPrevious(),void e.preventDefault();if(t===a.d&&!s&&o)return this._dismissDropdown(),void e.preventDefault();if(t!==a.f)return t===a.c&&this._hasFocusedItem()?(this._selectFocusedItem(),void e.preventDefault()):void(o||this.setState({showTypeaheadDropdown:!0}));this._dismissDropdown()}},this._handleItemFocusChanged=()=>{this.setState({ariaDescendantId:Object(x.b)()})},this._handleInputClear=()=>{this.setQuery("")},this._handleInputFocus=()=>{this.setState({showTypeaheadDropdown:!0}),this._updatePosition(),this.props.onFocus&&this.props.onFocus()},this._handleInputChange=e=>{this.setQuery(e.target.value),this._updatePosition()},this._handleFormSubmit=e=>{e.preventDefault(),e.stopPropagation(),this._inputRef&&this._inputRef.blur(),this.setState({showTypeaheadDropdown:!1}),this.props.onDismiss&&this.props.onDismiss(),this.props.onSubmit&&this.props.onSubmit()},this._handleItemClick=(e,t)=>{const{onDismiss:s,onItemClick:a,shouldClearOnSelect:o,shouldFocusOnClear:i}=this.props,n=o?"":this.state.query;this.setState({showTypeaheadDropdown:!1}),this._inputRef&&(o&&i?this._inputRef.focus():this._inputRef.blur()),this.setQuery(n),s&&s(),a&&a(e,t)},this._hasFocusedItem=()=>this._dropdownRef&&this._dropdownRef.hasFocusedItem(),this._selectFocusedItem=()=>{this._dropdownRef&&this._dropdownRef.selectFocusedItem()},this._focusNext=()=>{this._dropdownRef&&this._dropdownRef.focusNext()},this._focusPrevious=()=>{this._dropdownRef&&this._dropdownRef.focusPrevious()},this.state={ariaDescendantId:Object(x.b)(),query:e.initialValue,showTypeaheadDropdown:!1},this._dropdownDomId=`typeaheadDropdown-${D}`,D+=1,this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}UNSAFE_componentWillReceiveProps(e){this.props.initialValue!==e.initialValue&&this.setQuery(e.initialValue)}componentDidMount(){window.document.addEventListener("click",this._handleFocusChange,!0)}componentWillUnmount(){window.document.removeEventListener("click",this._handleFocusChange,!0)}render(){return i.a.createElement(v.a,null,this._render)}focus(){this._inputRef&&this._inputRef.focus()}setQuery(e){this.setState({query:e}),this.props.onQueryChange&&this.props.onQueryChange(e)}}R.defaultProps={disableClearButton:!1,filter:[f.a.Users,f.a.Topics],isInSidebar:!1,initialValue:"",withSectionDivider:!0},R.contextType=g.a;const k=_.a.create((e=>({root:{flex:1,flexDirection:"column",position:"relative",zIndex:u.d+1},typeaheadContainer:{flex:1,position:"relative"},keydownInputListener:{flexShrink:1},dropdown:{backgroundColor:e.colors.cellBackground,left:0,right:0,overflowY:"auto",overscrollBehavior:"contain",position:"absolute",top:0,WebkitOverflowScrolling:"touch"},modalDropdown:{backgroundColor:e.colors.cellBackground,flex:1,minHeight:300,position:"relative",overflowY:"auto",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch"},wideModeDropdown:{borderRadius:e.borderRadii.medium,boxShadow:e.boxShadows.medium,minHeight:100,maxHeight:`calc(80vh - ${e.componentDimensions.appBarHeight})`},shortModeDropdown:{minHeight:100,maxHeight:"35vh",paddingBottom:"0"},shortModeDropdownMobile:{position:"absolute",height:"40vh",top:0},wrapper:{alignItems:"stretch",flex:1},topBorder:{borderTopColor:e.colors.gray200,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small}})));t.default=R},"5T6p":function(e,t,s){"use strict";var a=s("ERkP"),o=s.n(a),i=s("MWbm"),n=s("TIdA"),r=s("A91F"),l=s("t62R");const c=s("rHpw").a.create((e=>({root:{flexDirection:"row",flexShrink:1,flexGrow:1},bodyColumn:{justifyContent:"center",flexDirection:"column",marginRight:e.spaces.space4,marginLeft:e.spaces.space12,flexShrink:1},coverContainer:{borderRadius:e.borderRadii.large,overflow:"hidden"},cellThumbnail:{height:e.spaces.space48,width:e.spaces.space48},largeCellThumbnail:{height:e.spaces.space56,width:e.spaces.space56}})));t.a=function(e){const{image:t,style:s,supportText:a,title:d,withNewTypeaheadUI:h}=e;return o.a.createElement(i.a,{style:[c.root,s]},o.a.createElement(i.a,{style:[c.coverContainer,h?c.largeCellThumbnail:c.cellThumbnail]},t?o.a.createElement(n.a,{accessibilityLabel:"",aspectMode:r.a.SQUARE,image:t}):null),o.a.createElement(i.a,{style:c.bodyColumn},a?o.a.createElement(l.b,{color:"gray700",numberOfLines:1,size:"subtext2"},a):null,o.a.createElement(l.b,{numberOfLines:2,weight:"bold"},d)))}},Gfoi:function(e,t,s){"use strict";var a=s("ERkP"),o=s.n(a),i=s("Lsrn"),n=s("k/Ka");const r=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[i.a.root,e.style],viewBox:"0 0 20.5 20.5"},o.a.createElement("g",null,o.a.createElement("path",{d:"M20.03 18.72l-3.66-3.66c1.325-1.57 2.13-3.596 2.13-5.81 0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM2 9.25c0-4.135 3.365-7.5 7.5-7.5S17 5.115 17 9.25s-3.365 7.5-7.5 7.5S2 13.385 2 9.25z"})));r.metadata={width:20.5,height:20.5},t.a=r},"IMA+":function(e,t,s){"use strict";var a=s("97Jx"),o=s.n(a),i=(s("kYxP"),s("SV7d")),n=s("ERkP"),r=s.n(n),l=s("TIdA"),c=s("t62R"),d=s("5mJL"),h=s("DNho"),u=s("nBUg"),p=s("qjak"),m=s("ir4X"),y=s("htQn"),f=s("e5HP"),b=s("FBXD"),g=s("Nqmc"),_=s("rHpw"),w=s("oSwX"),I=s("1I0O"),C=s("pBrB"),v=s("jV+4"),x=s("MWbm");const E=Object.freeze({TWEET:"tweets",USER:"users"}),S=Object.freeze({UserCompact:"UserCompact",UserConcise:"UserConcise",UserDetailed:"UserDetailed",ExperimentalUserTypeahead:"ExperimentalUserTypeahead"}),T=l.a.createLayoutCache(),D={viewType:"user_cell"};class R extends r.a.PureComponent{constructor(...e){super(...e),this._renderUserName=()=>{const{badgeContext:e,disabledMessage:t,displayNameLabel:s,isBlocking:a,isDisabled:o,isFollowedBy:i,isProtected:n,isVerified:l,name:d,onScreenNameClick:h,promotedContent:u,promotedItemType:p,screenName:m,screenNameSuffix:y,translatorType:f,withFollowsYou:b,withLink:g}=this.props,_=r.a.createElement(v.a,{badgeContext:e,displayNameLabel:s,isProtected:n,isVerified:l,name:d,onLinkClick:h,promotedContent:p===E.TWEET?u:void 0,screenName:m,screenNameSuffix:y,translatorType:f,withFollowsYou:b&&i,withHoverCard:!a&&!o&&g,withLink:!o&&g,withScreenName:!t,withStackedLayout:!0});return t?r.a.createElement(x.a,{style:k.disabledMessageContainer},_,r.a.createElement(c.b,{color:"gray700"},t)):_},this._renderSocialContext=()=>{const{avatarSize:e,displayMode:t,socialContext:s}=this.props;return s?r.a.createElement(u.b.UseProps,null,(a=>r.a.createElement(g.a,{avatarSize:e,contextType:s.contextType,iconSize:"large",link:s.link,style:k.socialContext,text:s.text,weight:"bold",withLeftPadding:!a.socialContextRefreshEnabled()&&t!==S.ExperimentalUserTypeahead}))):null},this._renderUserTypeaheadSocialContext=()=>{const{socialContext:e}=this.props,{Icon:t,text:s}=e&&Object(p.a)({link:e.link,text:e.text,iconSize:"small",contextType:e.contextType})||{};return e?r.a.createElement(x.a,{style:k.userTypeaheadSocialContext},r.a.createElement(x.a,{style:k.userTypeaheadSocialContextIcon},t),r.a.createElement(c.b,{color:"gray700",numberOfLines:1,style:k.userTypeaheadSocialContextText},s)):null},this._renderHighlightedUserLabel=()=>{const{highlightedLabel:e}=this.props;return e?r.a.createElement(m.a,{label:e}):null},this._isEligibleForBio=()=>{const{displayMode:e}=this.props;return-1!==[S.UserDetailed,S.UserConcise].indexOf(e)},this._handleKeyPress=e=>{e.defaultPrevented||"Enter"!==e.key||this._handleClick(e)},this._handleClick=Object(b.a)((e=>{const{onCellClick:t}=this.props;e.preventDefault(),t&&t()}))}render(){const{accessibilityLabel:e,accessibilityState:t,avatarDecoration:s,avatarSize:a,avatarUri:n,bottomControl:l,decoration:c,displayMode:u,isBlocking:p,isDisabled:m,onAvatarClick:b,onCellClick:g,onScreenNameClick:_,presenceIndicator:C,promotedContent:v,promotedItemType:R,screenName:U,style:F,testID:L,userId:O,withDarkerInteractiveBackground:P,withInteractiveStyling:N,withLink:j,withUsernameCenterAligned:M}=this.props,A=j&&!p,H=u===S.UserCompact||M,q=u===S.ExperimentalUserTypeahead,z=v&&R===E.USER&&"earned"!==(v.disclosure_type&&v.disclosure_type.toLowerCase())?r.a.createElement(f.a,{contentAuthorId:O,promotedContent:v,style:k.promotedIndicator}):null,B={accessibilityHidden:!0,decoration:s,focusable:!1,imageLayoutCache:T,onClick:b,onHoverCardScreenNameClick:_,promotedContent:v,screenName:U,style:k.avatar,uri:n,withHoverCard:A,withLink:j},V=r.a.createElement(h.a.Consumer,null,(({avatarSize:e})=>C?r.a.createElement(I.a,o()({},B,C,{size:e})):r.a.createElement(w.default,o()({size:e},B)))),W=t&&"boolean"==typeof t.checked,Q=void 0!==g,G=(W?"radio":Q&&"button")||"listitem",Y=this._renderUserName(),$=this._renderHighlightedUserLabel(),K=this._renderBio(),X=$||K||z||l,J=r.a.createElement(r.a.Fragment,null,$,K,z,l?r.a.createElement(x.a,{style:k.bottomControl},l):null);return r.a.createElement(i.a,{behavioralEventContext:D},r.a.createElement(y.a,{accessibilityLabel:e,accessibilityRole:G,accessibilityState:t,disabled:!!m,focusable:W||Q,onClick:this._handleClick,onKeyPress:this._handleKeyPress,pointerEvents:m?"none":void 0,style:[k.root,F],testID:L,withDarkerInteractiveBackground:P,withInteractiveStyling:null!=N?N:!!g},q?null:this._renderSocialContext(),r.a.createElement(d.a,{avatarCell:V,avatarCellStyle:[k.avatarColumn,H&&k.bodyColumnCentered],avatarSize:q?"xxxLarge":a,cellStyle:[k.bodyColumn,H&&k.bodyColumnCentered]},r.a.createElement(x.a,{style:k.body},Y,c),H?null:J,q?this._renderUserTypeaheadSocialContext():null),X&&H?r.a.createElement(d.a,{avatarCell:null,avatarCellStyle:k.avatarColumn,cellStyle:k.bodyColumn},J):null))}_renderBio(){const{description:e,displayMode:t,entities:s,userId:a,withheldDescription:o,withheldEntities:i}=this.props;return s&&e&&this._isEligibleForBio()?r.a.createElement(C.a,{description:e,entities:s,isConcise:t===S.UserConcise,style:k.bio,userId:a,withheldDescription:o,withheldEntities:i}):null}}R.defaultProps={testID:"UserCell",withLink:!0};const k=_.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},avatarColumn:{justifyContent:"flex-start"},bodyColumn:{flexGrow:1},bodyColumnCentered:{justifyContent:"center"},avatar:{display:"block",width:"100%"},bio:{paddingTop:e.spaces.space4,whiteSpace:"normal"},socialContext:{marginBottom:e.spaces.space4},userTypeaheadSocialContext:{alignItems:"center",flexDirection:"row",textColor:e.colors.gray700},userTypeaheadSocialContextIcon:{flexShrink:0},userTypeaheadSocialContextText:{paddingLeft:e.spaces.space2},body:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},promotedIndicator:{margin:0,paddingTop:e.spaces.space4,paddingBottom:0,paddingHorizontal:0},bottomControl:{paddingTop:e.spaces.space4},disabledMessageContainer:{flexShrink:1}})));t.a=R},OEYw:function(e,t,s){"use strict";var a=s("97Jx"),o=s.n(a),i=s("ERkP"),n=s.n(i),r=(s("kYxP"),s("hqKg")),l=s("oEoC"),c=s("o52z"),d=s("kGix"),h=s("M0jS"),u=s("Qyxo"),p=s("lnti"),m=s("rxPX"),y=s("0KEI"),f=(s("MvUL"),s("/kEJ")),b=s("oEOe"),g=s("vy4g"),_=s("3A2y"),w=s("Y6L+"),I=s("9EWH"),C=s("Ssj5"),v=s("GZwR");const x="typeaheadV2",E=[],S=Object.freeze({REQUEST:"rweb/typeaheadV2/FETCH_REQUEST",SUCCESS:"rweb/typeaheadV2/FETCH_SUCCESS",FAILURE:"rweb/typeaheadV2/FETCH_FAILURE"}),T=({q:e,result_type:t,src:s},a)=>{let o=t;return null!=a&&a.communityId?o=`${t}_${a.communityId}`:null!=a&&a.trustedFriendsId&&(o=`${t}_${a.trustedFriendsId}`),`${e}_${o}_${s}`},D={remoteResults:{},cachedIds:[]};const R=e=>e.map((({rounded_score:e,tokens:t,...s})=>{const{topic:a}=s,o=v.b.Topic;return{id:`${o}_${a.replace(" ","_")}`,type:o,tokens:t,rounded_score:e,data:s}})),k=e=>e.map((({rounded_score:e,tokens:t,...s})=>{var a;const o=v.b.Event,i=null==s||null==(a=s.url)?void 0:a.match(w.A.id);return{id:(null==i?void 0:i[0])||"",type:o,tokens:t,rounded_score:e,data:s}})),U=(e,t)=>e.typeaheadV2.remoteResults[t],F=(e,t)=>(s,a)=>{const o=U(a(),T(e,t)),i=o&&o.timestamp;return i&&Date.now()-i<=3e5?Promise.resolve():s(L(e,t))},L=(e,t)=>(s,a,{api:o})=>{if(!e||!e.q||""===e.q.trim())return Promise.resolve();const i={queryId:T(e,t)},{communityId:n,trustedFriendsId:r}=t||{},l=e.result_type.split(","),c={actionTypes:S,context:"FETCH_TYPEAHEAD",meta:i};if(l.includes(v.a.CommunityUsers)&&n){const t=e=>{const{entities:t}=(null==e?void 0:e.invite_action_results)||{};return t?[Object(f.c)(t)]:void 0};return Object(b.b)(s,{params:{communityId:n,prefix:e.q},request:o.Typeahead.fetchCommunityInviteUsers})(c,t)}if(l.includes(v.a.CommunityMembers)&&n){const t=e=>{const{entities:t}=(null==e?void 0:e.user_community_relationships)||{};return t?[Object(f.c)(t)]:void 0};return Object(b.b)(s,{params:{communityId:n,prefix:e.q},request:o.Typeahead.fetchCommunityMembers})(c,t)}return l.includes(v.a.TrustedFriendsSuggested)&&r?Object(b.b)(s,{params:{trustedFriendsId:r,prefix:e.q},request:o.Typeahead.fetchTrustedFriendsSuggestions})(c):Object(b.b)(s,{params:e,request:o.Typeahead.fetch})(c)};C.a.register({[x]:function(e=D,t){switch(t.type){case S.REQUEST:{const{meta:{queryId:s}}=t;return Object(I.a)(e,(e=>{e.remoteResults[s]||(e.remoteResults[s]={fetchStatus:d.a.NONE}),e.remoteResults[s].fetchStatus=d.a.LOADING}))}case S.SUCCESS:{const{meta:{queryId:s},payload:a}=t;if(!a)return e;const o=a.users.map((e=>Object(g.a)(e,v.c.Remote))),i={fetchStatus:d.a.LOADED,id:s,orderedSections:a.ordered_sections,events:k(a.events),topics:R(a.topics),users:Object(v.g)(o),timestamp:Date.now()};return Object(I.a)(e,(e=>{e.cachedIds=e.cachedIds.filter((e=>e!==s)),e.cachedIds.push(s),e.cachedIds.length>=25&&(e.remoteResults=Object(_.a)(e.remoteResults,e.cachedIds.splice(0,1))),e.remoteResults[s]=i}))}case S.FAILURE:{const{meta:{queryId:s}}=t;return Object(I.a)(e,(e=>{e.remoteResults[s].fetchStatus=d.a.FAILED}))}default:return e}}});var O=s("UQTn");const P=[v.a.Users],N=e=>{const{communityId:t,filter:s,query:a,source:o,trustedFriendsId:i}=e;return T({q:a,result_type:(s||P).join(","),src:o},{communityId:t,trustedFriendsId:i})},j=(e,t)=>((e,t)=>{const s=U(e,t);return s&&s.fetchStatus})(e,N(t)),M=(e,t)=>((e,t)=>{const s=U(e,t);return s&&s.users||E})(e,N(t)),A=(e,t)=>((e,t)=>{const s=U(e,t);return s&&s.topics||E})(e,N(t)),H=(e,t)=>((e,t)=>{const s=U(e,t);return s&&s.events||E})(e,N(t)),q=(e,t)=>(t.rounded_graph_weight||0)-(e.rounded_graph_weight||0),z=()=>Object(r.createSelector)(M,Object(r.createSelector)(((e,t)=>t.query),((e,t)=>t.filter),O.d,O.e,((e,t,s,a)=>{if(!e||!t||t.indexOf(v.a.Users)<0)return Object(c.a)();const o=Object(O.f)(s,e);return Object(v.g)(o.map((e=>a[e])).sort(q).slice(0,10))})),j,((e,t)=>t.injectedItems),((e,t)=>t.query),((e,t)=>t.getUserExactMatch),((e,t)=>t.userLimit),((e,t,s,a,o,i,n)=>{const r=Object(u.a)(a||[],(e=>e.type===v.b.User?e.data.id_str:void 0)),h=t.filter((e=>r.indexOf(e.id)<0)),p=e.filter((e=>r.indexOf(e.id)<0)),m=Object(l.a)(h,p).slice(0,n||10),y=s===d.a.LOADED,f=i&&i({query:o,hasResults:!!e.length,isLoaded:y}),b=f?[...m,f]:m;return{users:b.length?b:Object(c.a)(),userExactMatch:f,filteredPrefetchUsers:h,filteredRemoteUsers:p}})),B=()=>Object(r.createSelector)(z(),Object(r.createSelector)(A,j,((e,t)=>t.query),((e,t)=>t.maxTopics),((e,t)=>t.getTopicExactMatch),((e,t,s,a,o)=>{const i=t===d.a.LOADED,n=o&&o({query:s,hasResults:!!e.length,isLoaded:i}),r=e.slice(0,a||3);return n&&r.push(n),r.length?r:Object(c.a)()})),Object(r.createSelector)(H,j,((e,t)=>t.query),((e,t)=>t.maxEvents),((e,t)=>t.filter),((e,t,s,a,o)=>{const i=s&&o&&o.indexOf(v.a.Events)>=0,n=e.slice(0,a||1);return n.length&&i?n:Object(c.a)()})),((e,t)=>t.injectedItems),((e,t)=>t.orderResults),((e,t,s,a,o)=>{const{users:i}=e,n=a&&a.length?a:null,r=o?o(n,i,t,s,null==e?void 0:e.filteredRemoteUsers,null==e?void 0:e.filteredPrefetchUsers,null==e?void 0:e.userExactMatch):Object(p.a)([n,s.length?s:void 0,t.length?t:void 0,i.length?i:void 0]);return t.length||i.length||s.length?r:n?[n]:Object(c.a)()}));var V=Object(m.a)().propsFromState((()=>({fetchStatus:j,items:B()}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(y.createLocalApiErrorHandlerWithContextFactory)("TYPEAHEAD_DROPDOWN_CONTAINER_CONTEXT"),fetchTypeaheadIfNeeded:F,fetchUsersPresenceIfNeeded:h.b.fetchManyIfNeeded,prefetchTypeaheadUsersIfNeeded:O.b}))).withAnalytics({element:"typeahead"}),W=s("8UdT"),Q=s("kIAd"),G=s("Rp9C"),Y=s("tAeL"),$=s("v6aA"),K=s("VY6S"),X=s("w6IS");class J extends n.a.Component{constructor(e,t){super(e,t),this._fetchTypeaheadResultsIfNeeded=e=>{e.query&&e.fetchTypeaheadIfNeeded({q:e.query,src:e.source,result_type:e.filter.join(","),context_text:e.contextText,topic_type:e.topicType},{communityId:e.communityId,trustedFriendsId:e.trustedFriendsId}).catch(e.createLocalApiErrorHandler({}))},this._handleItemClick=(e,t)=>{const{analytics:s,onItemClick:a,query:o}=this.props;a(e,t);const i=G.a.forTypeaheadResult(e,t),n=i?[i]:void 0;s.scribe({action:"click",data:{search_details:{query:o},targets:n}})},this._scribeResults=()=>{const{analytics:e,items:t,query:s}=this.props;e.scribe({action:"impression",data:{items:G.a.forTypeaheadResults(t),search_details:{query:s}}})},this._debouncedFetchTypeaheadResultsIfNeeded=Object(K.a)(this._fetchTypeaheadResultsIfNeeded,250),this.state={shouldShowPrefetchResults:!0}}componentDidMount(){const{createLocalApiErrorHandler:e,prefetchTypeaheadUsersIfNeeded:t}=this.props;this._debouncedFetchTypeaheadResultsIfNeeded(this.props),t().catch(e({}))}componentWillUnmount(){clearTimeout(this._prefetchResultsTimer)}componentDidUpdate(e){const{createLocalApiErrorHandler:t,domId:s,fetchUsersPresenceIfNeeded:a,filter:o,items:i,onItemsChanged:n,query:r,shouldDeferPrefetch:l,source:c}=this.props,{filter:h,query:u,source:p}=e,{loggedInUserId:m}=this.context,y=this.context.featureSwitches.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")&&m;if(null!=i&&i.length&&i!==e.items){if(this._scribeResults(),n){let e=!1;const t=s?document.getElementById(s):null;t&&t.scrollHeight>t.offsetHeight&&(e=!0),n(i,e)}if(y){const e=Object(X.a)(i).filter((e=>e.type===W.c.User)).map((e=>e.id));e&&a(e).catch(t({}))}}r===u&&o===h&&c===p||(this._debouncedFetchTypeaheadResultsIfNeeded(this.props),l&&(clearTimeout(this._prefetchResultsTimer),this.setState({shouldShowPrefetchResults:!1}),this._prefetchResultsTimer=setTimeout((()=>{this.props.query&&this.props.fetchStatus!==d.a.LOADED&&this.setState({shouldShowPrefetchResults:!0})}),Q.a)))}render(){const{analytics:e,communityId:t,contextText:s,createLocalApiErrorHandler:a,dropdownRef:i,fetchStatus:r,fetchTypeaheadIfNeeded:l,fetchUsersPresenceIfNeeded:c,filter:h,getTopicExactMatch:u,getUserExactMatch:p,injectedItems:m,items:y,maxEvents:f,maxTopics:b,onItemClick:g,onItemsChanged:_,orderResults:w,prefetchTypeaheadUsersIfNeeded:I,query:C,shouldDeferPrefetch:v,topicType:x,trustedFriendsId:E,userLimit:S,...T}=this.props,D=C&&r!==d.a.LOADED,R=D&&!this.state.shouldShowPrefetchResults?m:y;return n.a.createElement(Y.a,o()({},T,{isLoading:!!D,items:R,onItemClick:this._handleItemClick,query:C,ref:i}))}}J.contextType=$.a,J.defaultProps={filter:[v.a.Users],injectedItems:[],maxEvents:3,maxTopics:1};const Z=n.a.forwardRef(((e,t)=>n.a.createElement(J,o()({},e,{dropdownRef:t})))),ee=V.forwardRef(Z);t.a=ee},V5Qi:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s("AQ79");const o=(e,t)=>e[a.c]?e[a.c].conversations[t]:null},ZcYN:function(e,t,s){"use strict";s.d(t,"b",(function(){return ne})),s.d(t,"a",(function(){return ce}));var a=s("ERkP"),o=s.n(a),i=s("+Kfv"),n="typeaheadResult",r=s("v6aA"),l=s("AQOc"),c=s("V5Qi"),d=s("G6rE"),h=s("rxPX");const u=(e,t)=>t.conversationId,p=(e,t)=>Object(c.a)(e,u(0,t));var m=Object(h.a)().propsFromState((()=>({conversationId:u,conversation:p,users:d.e.selectAll}))).adjustStateProps((({conversation:e,conversationId:t,users:s})=>{const a={conversation:void 0};return null!=e&&e.data&&(a.conversation=Object(l.b)(e.data,void 0,s)),a})),y=s("aA19"),f=s("OhSZ"),b=s("5mJL"),g=s("rHpw");const _=g.a.create((e=>({root:{cursor:"pointer",paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical,width:"100%"},avatarColumn:{flexGrow:1,maxWidth:e.spaces.space40,minWidth:"32px"},bodyColumn:{flexGrow:7,alignItems:"center",flexDirection:"row",justifyContent:"space-between"},disabled:{opacity:.6,backgroundColor:e.colors.gray0}})));var w=m((({conversation:e,isDisabled:t,isSelected:s,perspective:a})=>{const{featureSwitches:i}=o.a.useContext(r.a),n=i.isTrue("dm_vdl_enabled")&&i.isTrue("dm_vdl_inbox_p0_enabled");return e?o.a.createElement(b.a,{avatarCell:o.a.createElement(y.a,{conversation:e,perspective:a,size:"xLarge"}),avatarCellStyle:_.avatarColumn,avatarSize:"xLarge",cellStyle:_.bodyColumn,style:[_.root,!s&&t&&_.disabled]},o.a.createElement(f.b,{conversation:e,perspective:a,withParticipantsCount:!0,withVDLRefresh:n}),ce({isSelected:s})):null})),I=s("MWbm"),C=s("LbZ7"),v=s("t62R"),x=s("9Xij"),E=s("TIdA"),S=s("A91F");class T extends o.a.PureComponent{render(){const{event:e,image:t,supportText:s}=this.props;return o.a.createElement(I.a,{style:R.root},o.a.createElement(C.a,{withGutter:!0},o.a.createElement(I.a,{style:R.bodyColumn},s?o.a.createElement(v.b,{color:"gray700",size:"subtext2"},s):null,o.a.createElement(v.b,{numberOfLines:1},e)),t?o.a.createElement(I.a,{style:R.coverContainer},o.a.createElement(x.a,{ratio:1},o.a.createElement(E.a,{accessibilityLabel:"",aspectMode:S.a.SQUARE,image:t}))):null))}}const D="100px",R=g.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},bodyColumn:{flexGrow:7,justifyContent:"center"},coverContainer:{backgroundColor:e.colors.gray200,borderRadius:e.borderRadii.small,flexGrow:1,justifyContent:"flex-end",maxHeight:D,maxWidth:D,overflow:"hidden",width:"25%"}})));var k=T,U=s("5T6p"),F=(s("qd3W"),s("MvUL"),s("yyPN")),L=s.n(F);var O=s("FiRh"),P=s("j7Bv"),N=s("EHV7"),j=s("Gfoi");const M=g.a.create((e=>({root:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},context:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.primary,height:e.fontSizes.subtext2,paddingRight:e.spaces.space4,width:e.fontSizes.subtext2},disabled:{backgroundColor:e.colors.gray0},searchIcon:{marginRight:e.spaces.space12,borderWidth:0,backgroundColor:"none"},searchIconCell:{flexDirection:"row",alignItems:"center"},wrapperCellStyle:{justifyContent:"center"}})));var A=function(e){const{featureSwitches:t}=o.a.useContext(r.a),{isDisabled:s,query:a,resultContext:i,showIcon:n,style:l,topic:c,withNewTypeaheadUI:d}=e,h=function(e,t,s=!1){const a=L()(e),o=e.toLowerCase().indexOf(t.toLowerCase()),i=o+t.length;let n;if(0===a.length){const t=s?[o>0?[0,o]:void 0,[i,e.length]].filter(Boolean):[[o,i]];n=[{highlights:-1!==o?t:void 0,text:e,entityType:"text",prefix:""}]}else{const t=a.flatMap((({indices:t},s,a)=>{const o=0===s?0:a[s-1].indices[1],i=s===a.length-1,n=[];return o!==t[0]&&n.push(e.slice(o,t[0])),n.push(e.substring(t[0],t[1])),i&&e.length!==t[1]&&n.push(e.slice(t[1])),n}));let r=0;const l=t.map(((e,t,s)=>{r+=t>0?s[t-1].length:0;const a=e.length;return{runningTotal:r,containsQuery:-1!==o&&r+a>=o&&r<i}}));n=t.map(((e,t)=>{var a;const{containsQuery:n,runningTotal:r}=l[t],c=e.includes("#");let d;if(s&&!n)d=[[0,e.length]];else if(n){const t=r<o?o-r:0,a=r+e.length<i?e.length:i-r,n=c?t-1:t,l=c?a-1:a;d=s?[n>0?[0,n]:void 0,l!==e.length-1?[l,e.length]:void 0].filter(Boolean):[[n,l]]}const h=c?`${null==e?void 0:e.replace("#","")}`:e;return{highlights:null!=(a=d)&&a.length?d:void 0,text:h,entityType:c?"hashtag":"text",prefix:c?"#":""}}))}return n}(c,t.isTrue("responsive_web_typeahead_reverse_bolding_enabled")?a:"",true),u=o.a.createElement(v.b,null,h.map(((e,t)=>o.a.createElement(O.b,{key:`${e.text}${t}`,part:e})))),p=d?"xxxLarge":"xLarge",m=o.a.createElement(o.a.Fragment,null,u,i?o.a.createElement(I.a,{style:M.context},i&&i.types[0]&&"followable_topic"===i.types[0].type?o.a.createElement(N.a,{style:M.icon}):null,o.a.createElement(v.b,{color:"gray700"},i.display_string||" ")):null);return o.a.createElement(I.a,{style:[M.root,s&&M.disabled,l]},n?(e=>{const t=o.a.createElement(P.a,{Icon:j.a,color:"neutral",size:p,style:M.searchIcon});return o.a.createElement(b.a,{avatarCell:t,avatarCellStyle:M.searchIconCell,avatarSize:p,cellStyle:M.wrapperCellStyle},e)})(m):m)},H=(s("kYxP"),s("M0jS"));const q=(e,t)=>Object(H.c)(e,t.userId);var z=Object(h.a)().propsFromState((()=>({userSpace:q}))),B=s("3XMw"),V=s.n(B),W=s("tocL"),Q="TypeaheadUser",G=s("GZwR"),Y=s("IMA+");const $=V.a.ae2205d2,K=V.a.d960b55c,X=V.a.fd06b02f,J=Object.freeze({num_of_followers:W.a.Follow,bio:W.a.TextOnly,location:W.a.Location,num_tweets:W.a.NewTweets,follow_relationship:W.a.Follow,followers_follow:W.a.Follow,social_proof:W.a.SocialProof,follow_relationship_mutual_follow:W.a.FollowMutual,follow_relationship_followed:W.a.FollowFollowed,follow_relationship_following:W.a.FollowFollowing});class Z extends o.a.PureComponent{constructor(...e){super(...e),this._handleAvatarClick=()=>{const{userSpace:e}=this.props;e||this._handleClick()},this._handleClick=()=>{const{isDisabled:e,item:t,onItemClick:s}=this.props;s&&s(t,!!e)}}render(){const{avatarUri:e,decoration:t,disabledMessage:s,displayNameLabel:a,isDisabled:i,isProtected:n,isVerified:r,name:l,screenName:c,source:d,userId:h,userSpace:u,withNewTypeaheadUI:p}=this.props,{featureSwitches:m}=this.context,y=this._getSocialContext(),f=this._getResultContext()||y,b=d===G.d.SearchBox,g=u&&m.isTrue("voice_rooms_typeahead_audiospace_ring_enabled")?u:void 0;return g&&(g.accessibilityLabel=X({screenName:c})),o.a.createElement(Y.a,{avatarSize:"xLarge",avatarUri:e,decoration:t,disabledMessage:i?s:void 0,displayMode:p?"ExperimentalUserTypeahead":"UserCompact",displayNameLabel:a,isDisabled:i,isProtected:n,isVerified:r,name:l,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:b?g:void 0,screenName:c,socialContext:f,testID:Q,userId:h,withInteractiveStyling:!1,withLink:!1})}_getSocialContext(){const{socialContext:e}=this.props;if(!e||!e.following)return;const t=e.followed_by?$:K;return{contextType:W.a.Follow,text:t}}_getResultContext(){const{resultContext:e,source:t,withNewTypeaheadUI:s}=this.props;if(!(s&&e&&e.display_string&&e.types&&t===G.d.SearchBox))return;return{contextType:(e.types.length?J[e.types[0].type]:void 0)||W.a.TextOnly,text:e.display_string}}}Z.contextType=r.a,Z.defaultProps={withNewTypeaheadUI:!1};var ee=z.forwardRef(Z),te=s("htQn"),se=s("iySH"),ae=s("IMYl");const oe={viewType:"typeahead_result"},ie=({children:e})=>e;function ne(e){return o.a.createElement(ie,{item:e.item},o.a.createElement(re,e))}class re extends o.a.Component{constructor(e,t){super(e,t),this._onViewRef=e=>{this._viewRef=e;const{onRef:t}=this.props;t&&t(e)},this._handleClick=()=>{const{item:e}=this.props;e.type!==G.b.User&&this.props.onClick&&this.props.onClick(e,this.isDisabled)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")&&e.source===G.d.SearchBox}componentDidMount(){this._loaded=!0,this._viewRef&&(this._rafId=window.requestAnimationFrame((()=>{this._viewRef&&this._viewRef.setNativeProps({style:{opacity:1}})})))}componentDidUpdate(e){const{onRef:t}=this.props;t&&t!==e.onRef&&this._viewRef&&t(this._viewRef)}componentWillUnmount(){this._rafId&&window.cancelAnimationFrame(this._rafId)}render(){const{domId:e,isDisabled:t,isFocused:s,isInMultiSelect:a,isSelected:r,style:l}=this.props;return o.a.createElement(i.a,{behavioralEventContext:oe},o.a.createElement(I.a,{accessibilityRole:"option",accessibilityState:{checked:!(!a||!r)||void 0,selected:t?void 0:a&&r||!a&&!!s},nativeID:e,testID:n},o.a.createElement(te.a,{accessibilityRole:a?"checkbox":"button",disabled:t,focusable:!0,onPress:this._handleClick,style:[s&&le.focused,le.transitionStyles,this._loaded&&le.loaded,l],viewRef:this._onViewRef},this._renderResult())))}_renderResult(){const{disabledMessage:e,getUserDisplayNameLabel:t,isDisabled:s,isSelected:a,item:i,onClick:n,renderUserDecoration:r,source:l}=this.props;switch(i.type){case G.b.User:{const{data:c}=i,d=r?r({userId:c.id_str,user:c,isSelected:a}):void 0,h=t?t(i,c):void 0;return o.a.createElement(ee,{avatarUri:c.profile_image_url_https,canDm:!!c.can_dm,canMediaTag:!!c.can_media_tag,decoration:d||void 0,disabledMessage:e,displayNameLabel:h,isDisabled:s,isProtected:!!c.protected,isVerified:!!c.verified,item:i,name:c.name,onItemClick:n,resultContext:c.result_context,screenName:c.screen_name,socialContext:c.social_context,source:l,userId:c.id_str,withNewTypeaheadUI:this._withNewTypeaheadUI})}case G.b.Event:{const{data:e}=i;return this._withNewTypeaheadUI?o.a.createElement(U.a,{image:e.primary_image&&e.primary_image.original_info,style:le.itemPadding,supportText:e.supporting_text,title:e.topic,withNewTypeaheadUI:!0}):o.a.createElement(k,{event:e.topic,image:e.primary_image&&e.primary_image.original_info,supportText:e.supporting_text})}case G.b.Hashtag:case G.b.Topic:{const{query:e}=this.props,{data:t}=i,a=l===G.d.SearchBox;return o.a.createElement(A,{isDisabled:s,query:e||"",resultContext:t.result_context,showIcon:a,style:a?le.itemPadding:void 0,topic:t.topic,withNewTypeaheadUI:this._withNewTypeaheadUI})}case G.b.DMConversation:return!!this.context.loggedInUserId&&o.a.createElement(w,{conversationId:i.id,isDisabled:s,isSelected:a,perspective:this.context.loggedInUserId});case G.b.SettingGroup:{const{text:e}=i.data;return o.a.createElement(I.a,{style:le.navigationLink},o.a.createElement(v.b,{style:le.content,weight:"bold"},e),o.a.createElement(se.a,{style:le.icon}))}case G.b.Setting:{const{text:e}=i.data;return o.a.createElement(I.a,{style:le.navigationLink},o.a.createElement(v.b,{style:le.content},e),o.a.createElement(se.a,{style:le.icon}))}case G.b.NoResult:{const{data:e}=i,{text:t}=e;return o.a.createElement(v.b,{style:le.noResult},t)}default:return null}}get isDisabled(){return!!this.props.isDisabled}}re.contextType=r.a;const le=g.a.create((e=>({checkIcon:{color:e.colors.primary},navigationLink:{alignItems:"center",flexDirection:"row",flexGrow:1,paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},content:{flexGrow:1,flexShrink:1},icon:{color:e.colors.gray700,paddingLeft:e.spaces.space12,flexShrink:0},noResult:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.spaces.space16},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},loaded:{opacity:1},focused:{backgroundColor:e.colors.gray0},transitionStyles:{transitionProperty:"opacity",transitionDuration:"250ms",opacity:0}}))),ce=({isSelected:e})=>e?o.a.createElement(ae.a,{accessibilityHidden:!0,style:le.checkIcon}):null},e5HP:function(e,t,s){"use strict";s.d(t,"a",(function(){return I}));var a=s("ERkP"),o=s.n(a),i=s("t62R"),n=s("3XMw"),r=s.n(n),l=s("rHpw"),c=s("MWbm"),d=s("Lsrn"),h=s("k/Ka");const u=(e={})=>Object(h.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[d.a.root,e.style],viewBox:"0 0 24 24"},o.a.createElement("g",null,o.a.createElement("path",{d:"M12 1C5.92 1 1 5.92 1 12s4.92 11 11 11 11-4.92 11-11S18.08 1 12 1zm5.05 12.48c0 .48-.39.87-.88.87-.477 0-.87-.393-.87-.87V9.94l-6.85 6.85c-.163.166-.387.26-.62.26-.233 0-.457-.094-.62-.26-.338-.341-.338-.899 0-1.24l6.85-6.85h-3.54c-.477 0-.87-.393-.87-.87 0-.49.39-.88.87-.88h5.65c.11 0 .23.03.33.07.11.04.2.1.29.19.09.09.15.18.19.29.04.1.07.22.07.33v5.65z"})));u.metadata={width:24,height:24};var p=u,m=s("uFYP");const y=r.a.f1a1b791,f=r.a.if2bf8b4,b=r.a.f3624b5c,g=r.a.b4b3b113,_=r.a.be222050,w=r.a.hcbbe447;class I extends o.a.Component{render(){const{color:e,nativeID:t,style:s,withCircleIcon:a}=this.props,n=a?p:m.a;return o.a.createElement(c.a,{style:[C.root,s]},o.a.createElement(n,{style:[C.icon,e&&C[e]]}),o.a.createElement(i.b,{color:e,nativeID:t,size:"subtext2"},this._getPromotedLabel()))}_getPromotedLabel(){const{contentAuthorId:e,label:t,promotedContent:s}=this.props,{adMetadataContainer:a,advertiser:o,advertiser_name:i,disclosure_type:n}=s,r=e&&o&&e===o.id_str,l="string"==typeof n&&"political"===n.toLowerCase(),c="string"==typeof n&&"issue"===n.toLowerCase(),d=!(!a||"POLITICAL"!==a.disclaimerType)||l,h=!(!a||"ISSUE"!==a.disclaimerType)||c,{removePromotedAttributionForPreroll:u}=a||{};let p;return p=t||(!i||r||u?d?b:h?_:f:d?g({fullName:i}):h?w({fullName:i}):y({fullName:i})),p}}I.defaultProps={color:"gray700",withCircleIcon:!1};const C=l.a.create((e=>({root:{alignItems:"center",flexDirection:"row"},icon:{color:e.colors.gray700,height:"1em",marginRight:e.spaces.space4,flexShrink:0},gray700:{color:e.colors.gray700},white:{color:e.colors.white}})))},o52z:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s("VPAj");const o=Object(a.a)([]);Object(a.a)({})},tAeL:function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var a=s("ERkP"),o=s.n(a),i=s("+Kfv"),n=s("0yYu"),r=s("7nmT"),l=s.n(r),c=(s("kYxP"),s("3XMw")),d=s.n(c),h=s("kIAd"),u=s("JYMr"),p=s("rHpw");const m=d.a.f2b3fe06,y=p.a.create((e=>({hidden:{visibility:"hidden"}})));var f=({isLoading:e})=>{const[t,s]=o.a.useState(!1);return o.a.useEffect((()=>{let t;return e?t=setTimeout((()=>s(!0)),h.a):s(!1),()=>clearTimeout(t)}),[e]),o.a.createElement(u.a,{ariaValueText:t?m:"",indeterminate:t,style:!t&&y.hidden})},b=s("ZcYN"),g=s("MWbm"),_=s("zTrU"),w=s("w6IS"),I=s("MXDK");const C={viewType:"typeahead_dropdown"};class v extends o.a.Component{constructor(e,t){super(e),this._setFocusedItemRef=e=>{this._shouldScrollToFocusedItem&&e&&(Object(I.c)(this._getScrollParent(),e),this._shouldScrollToFocusedItem=!1)},this._resetScroll=()=>{const e=this._getScrollParent();e&&(e.scrollTop=0)},this._getFlattenedItems=Object(_.a)((e=>Object(w.a)(e))),this._handleItemClick=(e,t)=>{const{items:s,onItemClick:a}=this.props,o=this._getFlattenedItems(s).indexOf(e);e&&!t&&!this._shouldBlockInteractivity&&a(e,o),this._resetFocus()},this._getResultCount=()=>{const{items:e}=this.props;return this._getFlattenedItems(e).length},this._setFocusIndex=(e,t)=>{const{items:s,onItemFocusChanged:a}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),a&&a(this._getFlattenedItems(s)[e])},this._resetFocus=()=>{this._setFocusIndex(this.props.withItemAlwaysSelected?0:-1)},this.focusNext=()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e+1>=t?0:e+1;this._setFocusIndex(s,!0)},this.focusPrevious=()=>{const{focusIndex:e}=this.state,t=this._getResultCount();if(0===t)return;const s=e-1<0?t-1:e-1;this._setFocusIndex(s,!0)},this.hasFocusedItem=()=>{const{focusIndex:e}=this.state,t=this._getResultCount();return e>=0&&t>e},this.selectFocusedItem=()=>{const{focusIndex:e}=this.state,{getItemIsDisabled:t,items:s}=this.props;if(this.hasFocusedItem()){const a=this._getFlattenedItems(s)[e],o=!!t&&t(a,a.data);this._handleItemClick(a,o)}},this.state={focusIndex:e.withItemAlwaysSelected?0:-1}}componentDidMount(){this._resetFocus()}componentWillUnmount(){clearTimeout(this._interactivityTimeout)}componentDidUpdate(e){e.items!==this.props.items&&(this._resetFocus(),this._resetScroll(),this._interactivityTimeout&&clearTimeout(this._interactivityTimeout),this._shouldBlockInteractivity=!0,this._interactivityTimeout=setTimeout((()=>{this._shouldBlockInteractivity=!1}),500))}render(){const{domId:e,isLoading:t,items:s,renderCallout:a,renderHeader:n,renderNoResultsState:r,selectedItems:l,style:c}=this.props,d=!(!t&&!s.length);let h=0;const u=!!l;return d?o.a.createElement(i.a,{behavioralEventContext:C},o.a.createElement(g.a,{accessibilityMultiSelectable:u,accessibilityRole:"listbox",nativeID:e,style:c},a?a():null,o.a.createElement(f,{isLoading:!!t}),n?n():null,s.length?s.map(((e,t)=>{const a=!Array.isArray(s[t-1])&&t>0,o=t<s.length-1,i=Array.isArray(e)?this._renderTypeaheadGroup(e,h,a,o):this._renderTypeaheadItem(e,h);return h+=Array.isArray(e)?e.length:1,i})):null)):r?r():null}_renderTypeaheadGroup(e,t,s,a){const{withSectionDivider:i}=this.props;return o.a.createElement(o.a.Fragment,{key:`typeaheadGroup-${t}`},i&&s?o.a.createElement(n.a,{key:`typeaheadDividerTop-${t}`}):null,e.map(((e,s)=>this._renderTypeaheadItem(e,t+s))),i&&a?o.a.createElement(n.a,{key:`typeaheadDividerBottom-${t}`}):null)}_renderTypeaheadItem(e,t){const{ariaDescendantId:s,getItemDisabledMessage:a,getItemIsDisabled:i,getUserDisplayNameLabel:n,query:r,renderUserDecoration:l,selectedItems:c,source:d}=this.props,{focusIndex:h}=this.state,u=!(!c||!e.id)&&c.indexOf(e.id)>=0,p=!!c,m=h===t,y=i&&i(e,e.data),f=a&&a(e,e.data);return o.a.createElement(b.b,{disabledMessage:f,domId:m?s:void 0,getUserDisplayNameLabel:n,isDisabled:y,isFocused:m,isInMultiSelect:p,isSelected:u,item:e,key:`typeaheadItem-${t}-${e.id||""}`,onClick:this._handleItemClick,onRef:m?this._setFocusedItemRef:void 0,query:r,renderUserDecoration:l,source:d})}_getScrollParent(){if(!this._scrollParent){const e=Object(I.a)(l.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}}},uFYP:function(e,t,s){"use strict";var a=s("ERkP"),o=s.n(a),i=s("Lsrn"),n=s("k/Ka");const r=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[i.a.root,e.style],viewBox:"0 0 24 24"},o.a.createElement("g",null,o.a.createElement("path",{d:"M20.75 2H3.25C2.007 2 1 3.007 1 4.25v15.5C1 20.993 2.007 22 3.25 22h17.5c1.243 0 2.25-1.007 2.25-2.25V4.25C23 3.007 21.993 2 20.75 2zM17.5 13.504c0 .483-.392.875-.875.875s-.875-.393-.875-.876V9.967l-7.547 7.546c-.17.17-.395.256-.62.256s-.447-.086-.618-.257c-.342-.342-.342-.896 0-1.237l7.547-7.547h-3.54c-.482 0-.874-.393-.874-.876s.392-.875.875-.875h5.65c.483 0 .875.39.875.874v5.65z"})));r.metadata={width:24,height:24},t.a=r},woHV:function(e,t,s){"use strict";s("ERkP");var a=s("k/Ka"),o=s("rHpw").a.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}});t.a=e=>{const{style:t,...s}=e;return Object(a.a)("form",{...s,action:"#",style:[o.initial,t]})}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/shared~loader.Typeahead~bundle.Delegate~bundle.LoggedOutHome.d533c5b7.js.map